get:
  tags:
    - comments
  summary: Projektkommentare abrufen
  description: |
    Gibt eine Liste von Kommentaren für ein bestimmtes Projekt zurück.
    Kommentare zu öffentlichen Projekten können von jedem abgerufen werden.
    Kommentare zu privaten Projekten können nur vom Besitzer des Projekts abgerufen werden.
  operationId: getProjectComments
  parameters:
    - name: id
      in: path
      description: Projekt-ID
      required: true
      schema:
        type: string
        format: uuid
    - name: page
      in: query
      description: Seitennummer für die Paginierung
      schema:
        type: integer
        default: 1
        minimum: 1
    - name: limit
      in: query
      description: Anzahl der Elemente pro Seite
      schema:
        type: integer
        default: 10
        minimum: 1
        maximum: 100
  responses:
    '200':
      description: Erfolgreicher Abruf der Kommentare
      content:
        application/json:
          schema:
            type: object
            properties:
              comments:
                type: array
                items:
                  $ref: '../schemas.yaml#/Comment'
              pagination:
                $ref: '../schemas.yaml#/Pagination'
          example:
            comments:
              - id: 6ba7b810-9dad-11d1-80b4-00c04fd430c8
                content: Großartiges Projekt!
                project_id: f47ac10b-58cc-4372-a567-0e02b2c3d479
                user_id: 550e8400-e29b-41d4-a716-446655440000
                created_at: '2023-01-01T12:00:00Z'
                updated_at: '2023-01-01T12:00:00Z'
                user:
                  id: 550e8400-e29b-41d4-a716-446655440000
                  name: John Doe
            pagination:
              page: 1
              limit: 10
              total: 1
    '401':
      $ref: '../../openapi.yaml#/components/responses/Unauthorized'
    '403':
      $ref: '../../openapi.yaml#/components/responses/Forbidden'
    '404':
      $ref: '../../openapi.yaml#/components/responses/NotFound'
    '429':
      $ref: '../../openapi.yaml#/components/responses/TooManyRequests'
    '500':
      $ref: '../../openapi.yaml#/components/responses/InternalServerError'
  security:
    - cookieAuth: []
    - {} # Auch ohne Authentifizierung zugänglich (für öffentliche Projekte)

post:
  tags:
    - comments
  summary: Kommentar erstellen
  description: |
    Erstellt einen neuen Kommentar für ein Projekt.
    Benutzer können Kommentare zu öffentlichen Projekten und zu ihren eigenen Projekten erstellen.
  operationId: createComment
  parameters:
    - name: id
      in: path
      description: Projekt-ID
      required: true
      schema:
        type: string
        format: uuid
  requestBody:
    required: true
    content:
      application/json:
        schema:
          $ref: '../schemas.yaml#/CommentCreate'
  responses:
    '201':
      description: Kommentar erfolgreich erstellt
      content:
        application/json:
          schema:
            type: object
            properties:
              comment:
                $ref: '../schemas.yaml#/Comment'
          example:
            comment:
              id: 6ba7b810-9dad-11d1-80b4-00c04fd430c8
              content: Großartiges Projekt!
              project_id: f47ac10b-58cc-4372-a567-0e02b2c3d479
              user_id: 550e8400-e29b-41d4-a716-446655440000
              created_at: '2023-01-01T12:00:00Z'
              updated_at: '2023-01-01T12:00:00Z'
              user:
                id: 550e8400-e29b-41d4-a716-446655440000
                name: John Doe
    '400':
      $ref: '../../openapi.yaml#/components/responses/BadRequest'
    '401':
      $ref: '../../openapi.yaml#/components/responses/Unauthorized'
    '403':
      $ref: '../../openapi.yaml#/components/responses/Forbidden'
    '404':
      $ref: '../../openapi.yaml#/components/responses/NotFound'
    '429':
      $ref: '../../openapi.yaml#/components/responses/TooManyRequests'
    '500':
      $ref: '../../openapi.yaml#/components/responses/InternalServerError'
  security:
    - cookieAuth: []
    - csrfToken: []
