get:
  tags:
    - projects
  summary: Projekte abrufen
  description: |
    Gibt eine Liste von Projekten zurück. Für authentifizierte Benutzer werden
    eigene Projekte und öffentliche Projekte anderer Benutzer zurückgegeben.
    Für nicht authentifizierte Benutzer werden nur öffentliche Projekte zurückgegeben.
  operationId: getProjects
  parameters:
    - name: page
      in: query
      description: Seitennummer für die Paginierung
      schema:
        type: integer
        default: 1
        minimum: 1
    - name: limit
      in: query
      description: Anzahl der Elemente pro Seite
      schema:
        type: integer
        default: 10
        minimum: 1
        maximum: 100
    - name: user_id
      in: query
      description: Filter nach Benutzer-ID
      schema:
        type: string
        format: uuid
    - name: is_public
      in: query
      description: Filter nach öffentlichen/privaten Projekten
      schema:
        type: boolean
  responses:
    '200':
      description: Erfolgreicher Abruf der Projekte
      content:
        application/json:
          schema:
            type: object
            properties:
              projects:
                type: array
                items:
                  $ref: '../schemas.yaml#/Project'
              pagination:
                $ref: '../schemas.yaml#/Pagination'
          example:
            projects:
              - id: f47ac10b-58cc-4372-a567-0e02b2c3d479
                name: Mein Projekt
                description: Eine Beschreibung meines Projekts
                user_id: 550e8400-e29b-41d4-a716-446655440000
                is_public: true
                created_at: "2023-01-01T00:00:00Z"
                updated_at: "2023-01-01T00:00:00Z"
                user:
                  id: 550e8400-e29b-41d4-a716-446655440000
                  name: John Doe
            pagination:
              page: 1
              limit: 10
              total: 1
    '429':
      $ref: '../../openapi.yaml#/components/responses/TooManyRequests'
    '500':
      $ref: '../../openapi.yaml#/components/responses/InternalServerError'
  security:
    - cookieAuth: []
    - {}  # Auch ohne Authentifizierung zugänglich

post:
  tags:
    - projects
  summary: Projekt erstellen
  description: |
    Erstellt ein neues Projekt für den authentifizierten Benutzer.
  operationId: createProject
  requestBody:
    required: true
    content:
      application/json:
        schema:
          $ref: '../schemas.yaml#/ProjectCreate'
  responses:
    '201':
      description: Projekt erfolgreich erstellt
      content:
        application/json:
          schema:
            type: object
            properties:
              project:
                $ref: '../schemas.yaml#/Project'
          example:
            project:
              id: f47ac10b-58cc-4372-a567-0e02b2c3d479
              name: Mein Projekt
              description: Eine Beschreibung meines Projekts
              user_id: 550e8400-e29b-41d4-a716-446655440000
              is_public: false
              created_at: "2023-01-01T00:00:00Z"
              updated_at: "2023-01-01T00:00:00Z"
              user:
                id: 550e8400-e29b-41d4-a716-446655440000
                name: John Doe
    '400':
      $ref: '../../openapi.yaml#/components/responses/BadRequest'
    '401':
      $ref: '../../openapi.yaml#/components/responses/Unauthorized'
    '429':
      $ref: '../../openapi.yaml#/components/responses/TooManyRequests'
    '500':
      $ref: '../../openapi.yaml#/components/responses/InternalServerError'
  security:
    - cookieAuth: []
    - csrfToken: []
