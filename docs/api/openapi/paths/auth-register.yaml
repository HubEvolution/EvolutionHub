post:
  tags:
    - auth
  summary: Benutzerregistrierung
  description: |
    Registriert einen neuen Benutzer mit E-Mail, Passwort und Namen.
    Bei erfolgreicher Registrierung wird ein HTTP-Only-Cookie mit einem JWT-Token gesetzt.
  operationId: registerUser
  requestBody:
    required: true
    content:
      application/json:
        schema:
          $ref: '../schemas.yaml#/RegisterRequest'
  responses:
    '201':
      description: Erfolgreiche Registrierung
      headers:
        Set-Cookie:
          schema:
            type: string
            example: auth-token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...; HttpOnly; Secure; SameSite=Strict
      content:
        application/json:
          schema:
            type: object
            properties:
              user:
                $ref: '../schemas.yaml#/User'
          example:
            user:
              id: 550e8400-e29b-41d4-a716-446655440000
              email: user@example.com
              name: John Doe
              roles: ["user"]
              created_at: "2023-01-01T00:00:00Z"
              updated_at: "2023-01-01T00:00:00Z"
    '400':
      description: Ung√ºltige Anfrage oder E-Mail bereits registriert
      content:
        application/json:
          schema:
            $ref: '../schemas.yaml#/Error'
          example:
            error: true
            message: E-Mail-Adresse wird bereits verwendet
            status: 400
    '429':
      $ref: '../../openapi.yaml#/components/responses/TooManyRequests'
    '500':
      $ref: '../../openapi.yaml#/components/responses/InternalServerError'
  security: []
