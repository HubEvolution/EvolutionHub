{
  "generatedAt": "2025-10-17T07:33:00Z",
  "mostBrokenDocs": [
    {
      "path": "docs/api/README.md",
      "issues": [
        "CSRF policy stated as mandatory for all mutating requests; project rules allow optional Double-Submit via middleware flag (see .windsurf/rules/api-and-security.md)."
      ],
      "suggestedFixes": [
        "Rephrase CSRF section to: Same-origin enforced for unsafe methods; Double-Submit CSRF optional via enforceCsrfToken: true, matching X-CSRF-Token to csrf_token cookie; include allowed origin envs."
      ]
    },
    {
      "path": "docs/architecture.md",
      "issues": [
        "Auth & Security lists jose (JWT) although sessions are cookie-based and JWT is not used for auth.",
        "Duplicate entrypoint vs docs/architecture/README.md (parent link creates dual navigation)."
      ],
      "suggestedFixes": [
        "Adjust Auth & Security section to clarify no JWT is used for sessions; if jose remains as a dep for non-auth tasks, add a note; otherwise remove mention.",
        "Keep only a canonical note pointing to docs/architecture/README.md and avoid backlinks from category index to parent file."
      ]
    },
    {
      "path": "docs/architecture/api-middleware-inventory.md",
      "issues": [
        "Stand/last-updated date is stale.",
        "Minor drift: note missing/uniform 405 handlers across logout variants; plain-array vs createApiSuccess inconsistency in dashboard endpoints."
      ],
      "suggestedFixes": [
        "Update Stand date and add primary references to .windsurf/rules/api-and-security.md and src/lib/api-middleware.ts.",
        "Add remarks to unify 405 exports for redirect endpoints where applicable and align response envelopes."
      ]
    }
  ],
  "duplicates": [
    {
      "type": "dual-architecture-index",
      "items": ["docs/architecture.md", "docs/architecture/README.md"],
      "suggestion": "Keep docs/architecture/README.md as canonical. Retain a short note in docs/architecture.md pointing to the category index and avoid back-links from the category index to parent."
    },
    {
      "type": "directory-name-duplication",
      "items": ["docs/architecture/adr/", "docs/architecture/adrs/"],
      "suggestion": "Consolidate into docs/architecture/adrs/ (in use). Remove empty adr/."
    }
  ],
  "orphans": [],
  "recentlyFixed": [
    {
      "path": "docs/architecture/system-overview.md",
      "fixes": [
        "Removed password/JWT mentions; added Stytch Magic Link & __Host-session details; lint fixes; corrected SECURITY.md link."
      ]
    },
    {
      "path": "docs/architecture/data-flow.md",
      "fixes": ["Added current Magic Link sequence diagram after the historical JWT flow."]
    },
    {
      "path": "docs/README.md",
      "fixes": ["Development link path fixed (./development/)."]
    },
    {
      "path": "docs/architecture.md",
      "fixes": ["Added canonical-entry note pointing to docs/architecture/README.md."]
    }
  ],
  "scanNotes": {
    "jwtMentions": {
      "files": [
        "docs/architecture/adrs/deprecated/0001-jwt-authentication.md",
        "docs/architecture/adrs/deprecated/0002-jwt-authentication.md",
        "docs/architecture/data-flow.md (historical section)",
        "docs/architecture.md (tool list: jose)"
      ],
      "comment": "Mentions in deprecated ADRs and historical sections are acceptable; architecture.md tool list may need clarification."
    },
    "explicitFilesChecked": [
      "docs/architecture/README.md",
      "docs/architecture/api-middleware-inventory.md",
      "docs/architecture/auth-architecture.md",
      "docs/architecture/data-flow.md",
      "docs/api/README.md",
      "docs/api/auth_api.md",
      "docs/api/user_api.md",
      "docs/api/public_api.md"
    ]
  }
}
