[test:integration:debug] $ npm run test:integration:run -- --reporter=verbose

> evolution-hub@0.0.1 test:integration:run
> vitest run -c vitest.config.ts --project=integration --reporter=verbose


 RUN  v3.2.4 /Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub


> evolution-hub@0.0.1 db:setup
> npm run setup:local


> evolution-hub@0.0.1 setup:local
> TS_NODE_TRANSPILE_ONLY=1 node --loader ts-node/esm ./scripts/setup-local-dev.ts

[dotenv@17.2.1] injecting env (47) from .env -- tip: âš™ï¸  specify custom .env file path with { path: '/custom/path/.env' }
ðŸš€ Starte Einrichtung der lokalen Entwicklungsumgebung...

ðŸ“¦ Erstelle lokale D1-Datenbank...
â­ï¸  Ãœberspringe Remote-D1-Setup (nicht-interaktiv oder Wrangler nicht verfÃ¼gbar).

ðŸ”„ FÃ¼hre Datenbankmigrationen aus...

ðŸ” PrimÃ¤re Wrangler-Datenbank: /Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/.wrangler/d1/miniflare/databases/evolution-hub-main-local.sqlite

â„¹ï¸ Ãœberspringe Migrationen auf Hauptdatenbank (bereits vorhanden). Schema-Guards folgen.

ðŸ” Suche nach weiteren Wrangler-Datenbanken...
Gefundene zusÃ¤tzliche SQLite-Dateien: 1
 - /Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/.wrangler/state/v3/d1/miniflare-D1DatabaseObject/9510d25c6d8e2674e15c2fca537338f4d182e73228e0d7f57d38d82ad01d2ce5.sqlite

â­ï¸  Ãœberspringe das Anwenden kombinierter Migrationen auf zusÃ¤tzliche DBs. Guards Ã¼bernehmen Konsistenz.

ðŸ” ÃœberprÃ¼fe, ob alle wichtigen Tabellen existieren...
Gefundene Tabellen: activities                 notifications            
ai_jobs                    projects                 
comment_audit_logs         sessions                 
comment_moderation         stripe_customers         
comment_reports            subscriptions            
comments                   tasks                    
download_audit             users                    
email_verification_tokens

âœ… Sessions-Tabelle existiert!

ðŸ›¡ï¸  Stelle Schema-Konsistenz sicher (idempotente Guards)...
â„¹ï¸ Column users.email_verified already exists on /Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/.wrangler/d1/miniflare/databases/evolution-hub-main-local.sqlite
â„¹ï¸ Column users.email_verified_at already exists on /Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/.wrangler/d1/miniflare/databases/evolution-hub-main-local.sqlite
â„¹ï¸ Column users.plan already exists on /Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/.wrangler/d1/miniflare/databases/evolution-hub-main-local.sqlite
â„¹ï¸ Column users.role already exists on /Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/.wrangler/d1/miniflare/databases/evolution-hub-main-local.sqlite
â„¹ï¸ Column comments.entity_type already exists on /Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/.wrangler/d1/miniflare/databases/evolution-hub-main-local.sqlite
â„¹ï¸ Column comments.entity_id already exists on /Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/.wrangler/d1/miniflare/databases/evolution-hub-main-local.sqlite
â„¹ï¸ Column comments.status already exists on /Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/.wrangler/d1/miniflare/databases/evolution-hub-main-local.sqlite
â„¹ï¸ Column comments.author_id already exists on /Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/.wrangler/d1/miniflare/databases/evolution-hub-main-local.sqlite
â„¹ï¸ Column comments.parent_id already exists on /Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/.wrangler/d1/miniflare/databases/evolution-hub-main-local.sqlite
â„¹ï¸ Column comments.created_at already exists on /Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/.wrangler/d1/miniflare/databases/evolution-hub-main-local.sqlite
â„¹ï¸ Column comments.updated_at already exists on /Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/.wrangler/d1/miniflare/databases/evolution-hub-main-local.sqlite
â„¹ï¸ Column comments.is_edited already exists on /Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/.wrangler/d1/miniflare/databases/evolution-hub-main-local.sqlite
â„¹ï¸ Column comments.edited_at already exists on /Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/.wrangler/d1/miniflare/databases/evolution-hub-main-local.sqlite
â„¹ï¸ Column comments.author_name already exists on /Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/.wrangler/d1/miniflare/databases/evolution-hub-main-local.sqlite
â„¹ï¸ Column comments.author_email already exists on /Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/.wrangler/d1/miniflare/databases/evolution-hub-main-local.sqlite
â„¹ï¸ Column notifications.is_read already exists on /Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/.wrangler/d1/miniflare/databases/evolution-hub-main-local.sqlite
â„¹ï¸ Column users.email_verified already exists on /Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/.wrangler/state/v3/d1/miniflare-D1DatabaseObject/9510d25c6d8e2674e15c2fca537338f4d182e73228e0d7f57d38d82ad01d2ce5.sqlite
â„¹ï¸ Column users.email_verified_at already exists on /Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/.wrangler/state/v3/d1/miniflare-D1DatabaseObject/9510d25c6d8e2674e15c2fca537338f4d182e73228e0d7f57d38d82ad01d2ce5.sqlite
â„¹ï¸ Column users.plan already exists on /Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/.wrangler/state/v3/d1/miniflare-D1DatabaseObject/9510d25c6d8e2674e15c2fca537338f4d182e73228e0d7f57d38d82ad01d2ce5.sqlite
â„¹ï¸ Column users.role already exists on /Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/.wrangler/state/v3/d1/miniflare-D1DatabaseObject/9510d25c6d8e2674e15c2fca537338f4d182e73228e0d7f57d38d82ad01d2ce5.sqlite
â„¹ï¸ Column comments.entity_type already exists on /Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/.wrangler/state/v3/d1/miniflare-D1DatabaseObject/9510d25c6d8e2674e15c2fca537338f4d182e73228e0d7f57d38d82ad01d2ce5.sqlite
â„¹ï¸ Column comments.entity_id already exists on /Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/.wrangler/state/v3/d1/miniflare-D1DatabaseObject/9510d25c6d8e2674e15c2fca537338f4d182e73228e0d7f57d38d82ad01d2ce5.sqlite
â„¹ï¸ Column comments.status already exists on /Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/.wrangler/state/v3/d1/miniflare-D1DatabaseObject/9510d25c6d8e2674e15c2fca537338f4d182e73228e0d7f57d38d82ad01d2ce5.sqlite
â„¹ï¸ Column comments.author_id already exists on /Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/.wrangler/state/v3/d1/miniflare-D1DatabaseObject/9510d25c6d8e2674e15c2fca537338f4d182e73228e0d7f57d38d82ad01d2ce5.sqlite
â„¹ï¸ Column comments.parent_id already exists on /Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/.wrangler/state/v3/d1/miniflare-D1DatabaseObject/9510d25c6d8e2674e15c2fca537338f4d182e73228e0d7f57d38d82ad01d2ce5.sqlite
â„¹ï¸ Column comments.created_at already exists on /Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/.wrangler/state/v3/d1/miniflare-D1DatabaseObject/9510d25c6d8e2674e15c2fca537338f4d182e73228e0d7f57d38d82ad01d2ce5.sqlite
â„¹ï¸ Column comments.updated_at already exists on /Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/.wrangler/state/v3/d1/miniflare-D1DatabaseObject/9510d25c6d8e2674e15c2fca537338f4d182e73228e0d7f57d38d82ad01d2ce5.sqlite
â„¹ï¸ Column comments.is_edited already exists on /Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/.wrangler/state/v3/d1/miniflare-D1DatabaseObject/9510d25c6d8e2674e15c2fca537338f4d182e73228e0d7f57d38d82ad01d2ce5.sqlite
â„¹ï¸ Column comments.edited_at already exists on /Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/.wrangler/state/v3/d1/miniflare-D1DatabaseObject/9510d25c6d8e2674e15c2fca537338f4d182e73228e0d7f57d38d82ad01d2ce5.sqlite
â„¹ï¸ Column comments.author_name already exists on /Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/.wrangler/state/v3/d1/miniflare-D1DatabaseObject/9510d25c6d8e2674e15c2fca537338f4d182e73228e0d7f57d38d82ad01d2ce5.sqlite
â„¹ï¸ Column comments.author_email already exists on /Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/.wrangler/state/v3/d1/miniflare-D1DatabaseObject/9510d25c6d8e2674e15c2fca537338f4d182e73228e0d7f57d38d82ad01d2ce5.sqlite
âœ… Schema-Guards abgeschlossen.

ðŸª£ Erstelle lokalen R2-Bucket...
â­ï¸  Ãœberspringe Remote-R2-Setup (nicht-interaktiv oder Wrangler nicht verfÃ¼gbar).

ðŸ”‘ Erstelle lokalen KV-Namespace...
â­ï¸  Ãœberspringe Remote-KV-Setup (nicht-interaktiv oder Wrangler nicht verfÃ¼gbar).

ðŸ‘¤ Erstelle Test-Benutzer fÃ¼r lokale Entwicklung...
âœ… Test-Benutzer in /Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/.wrangler/d1/miniflare/databases/evolution-hub-main-local.sqlite erstellt/aktualisiert
âœ… Test-Benutzer in /Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/.wrangler/state/v3/d1/miniflare-D1DatabaseObject/9510d25c6d8e2674e15c2fca537338f4d182e73228e0d7f57d38d82ad01d2ce5.sqlite erstellt/aktualisiert

âœ… Test-Benutzer erfolgreich erstellt/aktualisiert!
Login-Daten fÃ¼r lokale Entwicklung:
  E-Mail:    test@example.com
  Passwort:  password123

ðŸ‘¥ Erstelle Test-Suite v2 Benutzer (admin, user, premium)...
âœ… Benutzer admin@test-suite.local in /Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/.wrangler/d1/miniflare/databases/evolution-hub-main-local.sqlite erstellt/aktualisiert
âœ… Benutzer admin@test-suite.local in /Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/.wrangler/state/v3/d1/miniflare-D1DatabaseObject/9510d25c6d8e2674e15c2fca537338f4d182e73228e0d7f57d38d82ad01d2ce5.sqlite erstellt/aktualisiert
âœ… Benutzer user@test-suite.local in /Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/.wrangler/d1/miniflare/databases/evolution-hub-main-local.sqlite erstellt/aktualisiert
âœ… Benutzer user@test-suite.local in /Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/.wrangler/state/v3/d1/miniflare-D1DatabaseObject/9510d25c6d8e2674e15c2fca537338f4d182e73228e0d7f57d38d82ad01d2ce5.sqlite erstellt/aktualisiert
âœ… Benutzer premium@test-suite.local in /Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/.wrangler/d1/miniflare/databases/evolution-hub-main-local.sqlite erstellt/aktualisiert
âœ… Benutzer premium@test-suite.local in /Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/.wrangler/state/v3/d1/miniflare-D1DatabaseObject/9510d25c6d8e2674e15c2fca537338f4d182e73228e0d7f57d38d82ad01d2ce5.sqlite erstellt/aktualisiert

âœ… Test-Suite v2 Benutzer erfolgreich erstellt/aktualisiert!
Login-Daten:
  Admin   : admin@test-suite.local / AdminPass123!
  User    : user@test-suite.local / UserPass123!
  Premium : premium@test-suite.local / PremiumPass123!
âœ… Admin-Session e2e-admin-session-0001 in /Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/.wrangler/d1/miniflare/databases/evolution-hub-main-local.sqlite angelegt
âœ… Admin-Session e2e-admin-session-0001 in /Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/.wrangler/state/v3/d1/miniflare-D1DatabaseObject/9510d25c6d8e2674e15c2fca537338f4d182e73228e0d7f57d38d82ad01d2ce5.sqlite angelegt
â„¹ï¸ TEST_ADMIN_COOKIE â†’ session_id=e2e-admin-session-0001

âœ… Lokale Entwicklungsumgebung wurde erfolgreich eingerichtet!

Sie kÃ¶nnen jetzt den lokalen Entwicklungsserver starten mit:
  npm run dev

Oder mit Verbindung zu Remote-Ressourcen:
  npx --no-install wrangler dev --remote
[setup] Cleaned dist/ folder

> evolution-hub@0.0.1 build:worker:dev
> ASTRO_DEPLOY_TARGET=worker astro build --mode development && node -e "const fs=require('fs'); fs.mkdirSync('dist',{recursive:true}); fs.writeFileSync('dist/.assetsignore','_worker.js\n'); if (fs.existsSync('dist/_worker.js/assets')) { fs.mkdirSync('dist/assets',{recursive:true}); fs.cpSync('dist/_worker.js/assets','dist/assets',{recursive:true}); }"

05:33:41 [@astrojs/cloudflare] Enabling sessions with Cloudflare KV with the "SESSION" KV binding.
05:33:41 [@astrojs/cloudflare] If you see the error "Invalid binding `SESSION`" in your build output, you need to add the binding to your wrangler config file.
05:33:41 [WARN] [adapter] Cloudflare does not support sharp at runtime. However, you can configure `imageService: "compile"` to optimize images with sharp on prerendered pages during build time.
Using vars defined in .env
05:33:43 [content] Syncing content
05:33:43 [content] Synced content
05:33:43 [types] Generated 1.11s
05:33:43 [build] output: "server"
05:33:43 [build] mode: "server"
05:33:43 [build] directory: /Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/dist/
05:33:43 [build] adapter: @astrojs/cloudflare
05:33:43 [build] Collecting build info...
05:33:43 [build] âœ“ Completed in 1.20s.
05:33:43 [build] Building server entrypoints...
05:33:43 [vite] vite v6.4.1 building SSR bundle for development...
05:33:43 [vite] transforming...
05:33:48 [WARN] [router] getStaticPaths() ignored in dynamic page /src/pages/blog/[...slug].astro. Add `export const prerender = true;` to prerender the page as static HTML during the build process.
05:33:54 [vite] âœ“ 2594 modules transformed.
05:33:54 [WARN] [vite] Export "contactMessageSchema" of module "src/lib/validation/schemas/contact.ts" was reexported through module "src/lib/validation/index.ts" while both modules are dependencies of each other and will end up in different chunks by current Rollup settings. This scenario is not well supported at the moment as it will produce a circular dependency between chunks and will likely lead to broken execution order.
Either change the import in "src/pages/api/contact/index.ts" to point directly to the exporting module or reconfigure "output.manualChunks" to ensure these modules end up in the same chunk.
05:33:54 [vite] rendering chunks...
05:33:54 [vite] dist/_worker.js/_astro/evolutionhub-mark.yHR9pfJv.svg                       0.49 kB
05:33:54 [vite] dist/_worker.js/_astro/landing-bg.BDzLvx2a.js                               9.52 kB
05:33:54 [vite] dist/_worker.js/_astro/login.8VHW6-t5.css                                   0.23 kB
05:33:54 [vite] dist/_worker.js/_astro/index.DJAnmrd0.css                                   0.24 kB
05:33:54 [vite] dist/_worker.js/_astro/index.CnfildQF.css                                   0.24 kB
05:33:54 [vite] dist/_worker.js/_astro/comments-demo.CsC_zul1.css                           0.68 kB
05:33:54 [vite] dist/_worker.js/_astro/index.DAk9CKNy.css                                   0.82 kB
05:33:54 [vite] dist/_worker.js/_astro/_slug_.D1rOr2Gq.css                                  1.00 kB
05:33:54 [vite] dist/_worker.js/_astro/index.wJZ3w2zb.css                                   1.97 kB
05:33:54 [vite] dist/_worker.js/_astro/password-reset-sent.DdbzS9IV.css                     6.54 kB
05:33:54 [vite] dist/_worker.js/_astro/settings.BLCCgvGE.css                              171.98 kB
05:33:54 [vite] dist/_worker.js/chunks/astro_BMKoy_UD.mjs                                   0.10 kB
05:33:54 [vite] dist/_worker.js/noop-entrypoint.mjs                                         0.10 kB
05:33:54 [vite] dist/_worker.js/chunks/content-assets_XqCgPAV2.mjs                          0.13 kB
05:33:54 [vite] dist/_worker.js/chunks/content-modules_Bvq7llv8.mjs                         0.13 kB
05:33:54 [vite] dist/_worker.js/renderers.mjs                                               0.13 kB
05:33:54 [vite] dist/_worker.js/_@astrojs-ssr-adapter.mjs                                   0.14 kB
05:33:54 [vite] dist/_worker.js/chunks/contact_BsH8ZkuS.mjs                                 0.15 kB
05:33:54 [vite] dist/_worker.js/chunks/render_resend_DF7b-Mkc.mjs                           0.16 kB
05:33:54 [vite] dist/_worker.js/chunks/id-generator_v4rBCR81.mjs                            0.19 kB
05:33:54 [vite] dist/_worker.js/chunks/aggregate_BFPlLEJJ.mjs                               0.22 kB
05:33:54 [vite] dist/_worker.js/pages/faq.astro.mjs                                         0.24 kB
05:33:54 [vite] dist/_worker.js/pages/blog.astro.mjs                                        0.24 kB
05:33:54 [vite] dist/_worker.js/pages/de.astro.mjs                                          0.24 kB
05:33:54 [vite] dist/_worker.js/pages/docs.astro.mjs                                        0.24 kB
05:33:54 [vite] dist/_worker.js/pages/kontakt.astro.mjs                                     0.24 kB
05:33:54 [vite] dist/_worker.js/pages/pricing.astro.mjs                                     0.24 kB
05:33:54 [vite] dist/_worker.js/pages/de/datenschutz.astro.mjs                              0.25 kB
05:33:54 [vite] dist/_worker.js/pages/api/newsletter/confirm.astro.mjs                      0.25 kB
05:33:54 [vite] dist/_worker.js/pages/cookie-einstellungen.astro.mjs                        0.25 kB
05:33:54 [vite] dist/_worker.js/pages/api/notifications/settings/utils.astro.mjs            0.26 kB
05:33:54 [vite] dist/_worker.js/chunks/aos_B9vsZ-mO.mjs                                     0.31 kB
05:33:54 [vite] dist/_worker.js/chunks/noop-middleware_DIV5hggh.mjs                         0.33 kB
05:33:54 [vite] dist/_worker.js/chunks/i18n_Ed3xXvnu.mjs                                    0.34 kB
05:33:54 [vite] dist/_worker.js/chunks/utils_Cranjpjm.mjs                                   0.39 kB
05:33:54 [vite] dist/_worker.js/chunks/notify_DfE_NmBN.mjs                                  0.41 kB
05:33:54 [vite] dist/_worker.js/chunks/sanitizeReturnTo_DTRwDBdt.mjs                        0.47 kB
05:33:54 [vite] dist/_worker.js/pages/signup.astro.mjs                                      0.53 kB
05:33:54 [vite] dist/_worker.js/pages/docs/api.astro.mjs                                    0.53 kB
05:33:54 [vite] dist/_worker.js/pages/docs/faq.astro.mjs                                    0.53 kB
05:33:54 [vite] dist/_worker.js/pages/docs/getting-started.astro.mjs                        0.53 kB
05:33:54 [vite] dist/_worker.js/pages/docs/guides.astro.mjs                                 0.53 kB
05:33:54 [vite] dist/_worker.js/pages/tools/api-tester.astro.mjs                            0.54 kB
05:33:54 [vite] dist/_worker.js/pages/tools/code-review.astro.mjs                           0.54 kB
05:33:54 [vite] dist/_worker.js/pages/tools/content-generator.astro.mjs                     0.54 kB
05:33:54 [vite] dist/_worker.js/pages/tools/design-system.astro.mjs                         0.54 kB
05:33:54 [vite] dist/_worker.js/pages/tools/performance-monitor.astro.mjs                   0.54 kB
05:33:54 [vite] dist/_worker.js/pages/tools/seo-analyzer.astro.mjs                          0.54 kB
05:33:54 [vite] dist/_worker.js/pages/en/signup.astro.mjs                                   0.54 kB
05:33:54 [vite] dist/_worker.js/pages/cookie-settings.astro.mjs                             0.54 kB
05:33:54 [vite] dist/_worker.js/pages/en/docs/api.astro.mjs                                 0.54 kB
05:33:54 [vite] dist/_worker.js/pages/en/docs/faq.astro.mjs                                 0.54 kB
05:33:54 [vite] dist/_worker.js/pages/en/docs/getting-started.astro.mjs                     0.54 kB
05:33:54 [vite] dist/_worker.js/pages/en/docs/guides.astro.mjs                              0.54 kB
05:33:54 [vite] dist/_worker.js/pages/en/tools/code-review.astro.mjs                        0.54 kB
05:33:54 [vite] dist/_worker.js/pages/en/tools/content-generator.astro.mjs                  0.54 kB
05:33:54 [vite] dist/_worker.js/pages/en/tools/design-system.astro.mjs                      0.54 kB
05:33:54 [vite] dist/_worker.js/pages/en/tools/performance-monitor.astro.mjs                0.54 kB
05:33:54 [vite] dist/_worker.js/pages/en/tools/seo-analyzer.astro.mjs                       0.54 kB
05:33:54 [vite] dist/_worker.js/chunks/consts_C49WwYgi.mjs                                  0.55 kB
05:33:54 [vite] dist/_worker.js/pages/en/cookie-einstellungen.astro.mjs                     0.55 kB
05:33:54 [vite] dist/_worker.js/chunks/entitlements_C559kC74.mjs                            0.55 kB
05:33:54 [vite] dist/_worker.js/chunks/islandStyles_uEF1--u5.mjs                            0.59 kB
05:33:54 [vite] dist/_worker.js/chunks/provider-error_CqhKYQqB.mjs                          0.67 kB
05:33:54 [vite] dist/_worker.js/chunks/index_CgNN0WWO.mjs                                   0.70 kB
05:33:54 [vite] dist/_worker.js/chunks/env_D1tee019.mjs                                     0.72 kB
05:33:54 [vite] dist/_worker.js/chunks/ai-video_DGPcWjF2.mjs                                0.72 kB
05:33:54 [vite] dist/_worker.js/pages/api/test/rate-limit.astro.mjs                         0.77 kB
05:33:54 [vite] dist/_worker.js/chunks/mime_fIduxd7A.mjs                                    0.80 kB
05:33:54 [vite] dist/_worker.js/chunks/prompt-enhancer_4i-SnAWT.mjs                         0.80 kB
05:33:54 [vite] dist/_worker.js/pages/blog/tag/_---slug_.astro.mjs                          0.81 kB
05:33:54 [vite] dist/_worker.js/pages/blog/kategorie/_---slug_.astro.mjs                    0.81 kB
05:33:54 [vite] dist/_worker.js/pages/api/user/settings.astro.mjs                           0.89 kB
05:33:54 [vite] dist/_worker.js/chunks/seo_dH6MdAkt.mjs                                     0.90 kB
05:33:54 [vite] dist/_worker.js/chunks/Alert_BJJu4EIb.mjs                                   0.91 kB
05:33:54 [vite] dist/_worker.js/chunks/sanitize_CaEx6X5m.mjs                                0.93 kB
05:33:54 [vite] dist/_worker.js/chunks/Icon_yaBuNjiE.mjs                                    0.97 kB
05:33:54 [vite] dist/_worker.js/pages/api/auth/change-password.astro.mjs                    0.98 kB
05:33:54 [vite] dist/_worker.js/pages/api/auth/register.astro.mjs                           0.98 kB
05:33:54 [vite] dist/_worker.js/pages/api/auth/reset-password.astro.mjs                     0.98 kB
05:33:54 [vite] dist/_worker.js/pages/api/auth/resend-verification.astro.mjs                0.98 kB
05:33:54 [vite] dist/_worker.js/pages/index.astro.mjs                                       0.98 kB
05:33:54 [vite] dist/_worker.js/pages/de/faq.astro.mjs                                      0.99 kB
05:33:54 [vite] dist/_worker.js/pages/en/faq.astro.mjs                                      0.99 kB
05:33:54 [vite] dist/_worker.js/pages/en/blog.astro.mjs                                     1.01 kB
05:33:54 [vite] dist/_worker.js/pages/en/docs.astro.mjs                                     1.01 kB
05:33:54 [vite] dist/_worker.js/pages/api/auth/forgot-password.astro.mjs                    1.01 kB
05:33:54 [vite] dist/_worker.js/pages/en/pricing.astro.mjs                                  1.02 kB
05:33:54 [vite] dist/_worker.js/pages/api/auth/login.astro.mjs                              1.02 kB
05:33:54 [vite] dist/_worker.js/pages/en/kontakt.astro.mjs                                  1.03 kB
05:33:54 [vite] dist/_worker.js/pages/datenschutz.astro.mjs                                 1.04 kB
05:33:54 [vite] dist/_worker.js/pages/api/user/password.astro.mjs                           1.04 kB
05:33:54 [vite] dist/_worker.js/pages/tools/prompt-enhancer.astro.mjs                       1.09 kB
05:33:54 [vite] dist/_worker.js/pages/en/account/settings.astro.mjs                         1.09 kB
05:33:54 [vite] dist/_worker.js/pages/en/cookie-settings.astro.mjs                          1.10 kB
05:33:54 [vite] dist/_worker.js/pages/de/tools/prompt-enhancer.astro.mjs                    1.11 kB
05:33:54 [vite] dist/_worker.js/pages/en/tools/prompt-enhancer.astro.mjs                    1.11 kB
05:33:54 [vite] dist/_worker.js/chunks/AosWrapper_CBLqNP3V.mjs                              1.12 kB
05:33:54 [vite] dist/_worker.js/pages/de/cookie-einstellungen.astro.mjs                     1.12 kB
05:33:54 [vite] dist/_worker.js/pages/en/blog/_---slug_.astro.mjs                           1.18 kB
05:33:54 [vite] dist/_worker.js/pages/api/dashboard/quick-actions.astro.mjs                 1.22 kB
05:33:54 [vite] dist/_worker.js/pages/api/auth/verify-email.astro.mjs                       1.27 kB
05:33:54 [vite] dist/_worker.js/pages/api/auth/logout.astro.mjs                             1.28 kB
05:33:54 [vite] dist/_worker.js/chunks/logger-utils_C1R0qi1Z.mjs                            1.28 kB
05:33:54 [vite] dist/_worker.js/pages/account/settings.astro.mjs                            1.30 kB
05:33:54 [vite] dist/_worker.js/chunks/accept-language_Bkx0Gv9l.mjs                         1.30 kB
05:33:54 [vite] dist/_worker.js/pages/api/user/me.astro.mjs                                 1.40 kB
05:33:54 [vite] dist/_worker.js/pages/api/notifications/settings/initialize.astro.mjs       1.42 kB
05:33:54 [vite] dist/_worker.js/pages/auth/notify.astro.mjs                                 1.43 kB
05:33:54 [vite] dist/_worker.js/chunks/client-logger_5SEnXkDX.mjs                           1.46 kB
05:33:54 [vite] dist/_worker.js/chunks/AuthLayout_ZjKNoZl_.mjs                              1.46 kB
05:33:54 [vite] dist/_worker.js/pages/r2/_---path_.astro.mjs                                1.47 kB
05:33:54 [vite] dist/_worker.js/chunks/global-error-interceptor_DSe6ot1q.mjs                1.48 kB
05:33:54 [vite] dist/_worker.js/chunks/Button_CtVwqRSM.mjs                                  1.49 kB
05:33:54 [vite] dist/_worker.js/chunks/beacon-interceptor_kOIXIvlP.mjs                      1.52 kB
05:33:54 [vite] dist/_worker.js/chunks/Card_DhvFwUPw.mjs                                    1.54 kB
05:33:54 [vite] dist/_worker.js/pages/api/templates.astro.mjs                               1.63 kB
05:33:54 [vite] dist/_worker.js/chunks/locale-path_Czs1m6hz.mjs                             1.64 kB
05:33:54 [vite] dist/_worker.js/pages/api/billing/sync-callback.astro.mjs                   1.65 kB
05:33:54 [vite] dist/_worker.js/pages/api/admin/rate-limits/state.astro.mjs                 1.67 kB
05:33:54 [vite] dist/_worker.js/pages/api/dashboard/notifications.astro.mjs                 1.68 kB
05:33:54 [vite] dist/_worker.js/chunks/entitlements_DaTgS0jW.mjs                            1.71 kB
05:33:54 [vite] dist/_worker.js/pages/auth/password-reset-success.astro.mjs                 1.74 kB
05:33:54 [vite] dist/_worker.js/pages/api/health/auth.astro.mjs                             1.80 kB
05:33:54 [vite] dist/_worker.js/pages/api/admin/audit/logs/_id_.astro.mjs                   1.82 kB
05:33:54 [vite] dist/_worker.js/chunks/referral-event-service_B457GzcT.mjs                  1.83 kB
05:33:54 [vite] dist/_worker.js/pages/api/newsletter/unsubscribe.astro.mjs                  1.87 kB
05:33:54 [vite] dist/_worker.js/pages/api/tools.astro.mjs                                   1.91 kB
05:33:54 [vite] dist/_worker.js/pages/auth/password-reset-sent.astro.mjs                    1.91 kB
05:33:54 [vite] dist/_worker.js/chunks/Button_B-dxKcpm.mjs                                  1.95 kB
05:33:54 [vite] dist/_worker.js/chunks/utils_Cq6zrddV.mjs                                   1.96 kB
05:33:54 [vite] dist/_worker.js/chunks/console-interceptor_M8zFWL02.mjs                     1.96 kB
05:33:54 [vite] dist/_worker.js/chunks/ai-image_CBjLTDqg.mjs                                2.01 kB
05:33:54 [vite] dist/_worker.js/chunks/auth-v2_3FGyGS-N.mjs                                 2.02 kB
05:33:54 [vite] dist/_worker.js/chunks/Input_BjVvfBGX.mjs                                   2.03 kB
05:33:54 [vite] dist/_worker.js/pages/api/admin/credits/usage.astro.mjs                     2.03 kB
05:33:54 [vite] dist/_worker.js/pages/api/admin/rate-limits/reset.astro.mjs                 2.05 kB
05:33:54 [vite] dist/_worker.js/chunks/auth-helpers_D2otpj3t.mjs                            2.08 kB
05:33:54 [vite] dist/_worker.js/chunks/index_Ci55B3Iz.mjs                                   2.11 kB
05:33:54 [vite] dist/_worker.js/chunks/remote_BC1y8RCW.mjs                                  2.20 kB
05:33:54 [vite] dist/_worker.js/pages/api/dashboard/activity.astro.mjs                      2.21 kB
05:33:54 [vite] dist/_worker.js/pages/api/admin/users/sessions.astro.mjs                    2.28 kB
05:33:54 [vite] dist/_worker.js/pages/api/dashboard/recommendations.astro.mjs               2.29 kB
05:33:54 [vite] dist/_worker.js/pages/api/admin/status.astro.mjs                            2.34 kB
05:33:54 [vite] dist/_worker.js/chunks/csrf_DBCDhBEv.mjs                                    2.35 kB
05:33:54 [vite] dist/_worker.js/chunks/ToolPageHeader_Cez7upNL.mjs                          2.37 kB
05:33:54 [vite] dist/_worker.js/pages/api/dashboard/stats.astro.mjs                         2.42 kB
05:33:54 [vite] dist/_worker.js/pages/en/tools/voice-visualizer/app.astro.mjs               2.44 kB
05:33:54 [vite] dist/_worker.js/pages/api/dashboard/projects.astro.mjs                      2.46 kB
05:33:54 [vite] dist/_worker.js/pages/en/tools/video-enhancer/app.astro.mjs                 2.49 kB
05:33:54 [vite] dist/_worker.js/pages/de/tools/voice-visualizer/app.astro.mjs               2.50 kB
05:33:54 [vite] dist/_worker.js/pages/api/admin/audit/logs.astro.mjs                        2.51 kB
05:33:54 [vite] dist/_worker.js/pages/api/admin/backup/jobs.astro.mjs                       2.56 kB
05:33:54 [vite] dist/_worker.js/pages/api/admin/credits/history.astro.mjs                   2.56 kB
05:33:54 [vite] dist/_worker.js/pages/api/debug/client-log.astro.mjs                        2.56 kB
05:33:54 [vite] dist/_worker.js/pages/api/admin/backup/jobs/_id_.astro.mjs                  2.56 kB
05:33:54 [vite] dist/_worker.js/pages/api/admin/backup/maintenance/jobs.astro.mjs           2.60 kB
05:33:54 [vite] dist/_worker.js/pages/api/admin/backup/jobs/_id_/progress.astro.mjs         2.60 kB
05:33:54 [vite] dist/_worker.js/pages/api/comments/create.astro.mjs                         2.61 kB
05:33:54 [vite] dist/_worker.js/chunks/buttonStyles_B2jiBMw4.mjs                            2.61 kB
05:33:54 [vite] dist/_worker.js/pages/api/admin/backup/maintenance/jobs/_id_.astro.mjs      2.62 kB
05:33:54 [vite] dist/_worker.js/pages/de/tools/prompt-enhancer/app.astro.mjs                2.62 kB
05:33:54 [vite] dist/_worker.js/pages/en/tools/prompt-enhancer/app.astro.mjs                2.62 kB
05:33:54 [vite] dist/_worker.js/pages/api/admin/users/revoke-sessions.astro.mjs             2.64 kB
05:33:54 [vite] dist/_worker.js/pages/api/voice/poll.astro.mjs                              2.66 kB
05:33:54 [vite] dist/_worker.js/pages/api/internal/users/sync.astro.mjs                     2.66 kB
05:33:54 [vite] dist/_worker.js/pages/api/user/logout.astro.mjs                             2.69 kB
05:33:54 [vite] dist/_worker.js/pages/api/admin/backup/create.astro.mjs                     2.70 kB
05:33:54 [vite] dist/_worker.js/pages/rss.xml.astro.mjs                                     2.70 kB
05:33:54 [vite] dist/_worker.js/pages/api/telemetry.astro.mjs                               2.75 kB
05:33:54 [vite] dist/_worker.js/pages/api/admin/backup/schedule.astro.mjs                   2.76 kB
05:33:54 [vite] dist/_worker.js/pages/api/ai-image/jobs/_id_/cancel.astro.mjs               2.76 kB
05:33:54 [vite] dist/_worker.js/pages/api/voice/stream.astro.mjs                            2.76 kB
05:33:54 [vite] dist/_worker.js/chunks/ProfileFormEnhancer_hHrh4tct.mjs                     2.77 kB
05:33:54 [vite] dist/_worker.js/pages/api/comments/_id_/report.astro.mjs                    2.78 kB
05:33:54 [vite] dist/_worker.js/pages/api/admin/backup/cleanup.astro.mjs                    2.78 kB
05:33:54 [vite] dist/_worker.js/pages/api/billing/link-pending.astro.mjs                    2.78 kB
05:33:54 [vite] dist/_worker.js/pages/api/admin/backup/verify/_id_.astro.mjs                2.79 kB
05:33:54 [vite] dist/_worker.js/pages/api/admin/backup/maintenance/perform.astro.mjs        2.82 kB
05:33:54 [vite] dist/_worker.js/pages/sitemap.xml.astro.mjs                                 2.82 kB
05:33:54 [vite] dist/_worker.js/pages/de/tools/webscraper/app.astro.mjs                     2.83 kB
05:33:54 [vite] dist/_worker.js/chunks/storage_D8-g_2R8.mjs                                 2.84 kB
05:33:54 [vite] dist/_worker.js/chunks/audit-log-service_CfI_grfH.mjs                       2.89 kB
05:33:54 [vite] dist/_worker.js/pages/api/admin/comments/bulk-moderate.astro.mjs            2.95 kB
05:33:54 [vite] dist/_worker.js/pages/api/csp-report.astro.mjs                              3.00 kB
05:33:54 [vite] dist/_worker.js/chunks/cloudflare-kv-binding_DMly_2Gl.mjs                   3.01 kB
05:33:54 [vite] dist/_worker.js/chunks/security-logger_C_G8D_Fq.mjs                         3.03 kB
05:33:54 [vite] dist/_worker.js/pages/api/admin/comments/_id_/moderate.astro.mjs            3.05 kB
05:33:54 [vite] dist/_worker.js/pages/api/voice/usage.astro.mjs                             3.06 kB
05:33:54 [vite] dist/_worker.js/pages/api/testing/evaluate/_id_.astro.mjs                   3.09 kB
05:33:54 [vite] dist/_worker.js/pages/api/billing/portal.astro.mjs                          3.13 kB
05:33:54 [vite] dist/_worker.js/pages/api/analytics/views.astro.mjs                         3.17 kB
05:33:54 [vite] dist/_worker.js/chunks/sharp_DvLNaPUx.mjs                                   3.19 kB
05:33:54 [vite] dist/_worker.js/pages/api/ai-image/jobs/_id_.astro.mjs                      3.21 kB
05:33:54 [vite] dist/_worker.js/pages/api/admin/backup/stats.astro.mjs                      3.21 kB
05:33:54 [vite] dist/_worker.js/pages/_image.astro.mjs                                      3.23 kB
05:33:54 [vite] dist/_worker.js/chunks/path_B0nnn-SU.mjs                                    3.25 kB
05:33:54 [vite] dist/_worker.js/chunks/voice-stream-aggregator_DKBAvGHe.mjs                 3.32 kB
05:33:54 [vite] dist/_worker.js/pages/api/testing/evaluate.astro.mjs                        3.33 kB
05:33:54 [vite] dist/_worker.js/pages/api/billing/credits.astro.mjs                         3.35 kB
05:33:54 [vite] dist/_worker.js/pages/api/health.astro.mjs                                  3.35 kB
05:33:54 [vite] dist/_worker.js/pages/de/register.astro.mjs                                 3.37 kB
05:33:54 [vite] dist/_worker.js/pages/api/notifications/settings.astro.mjs                  3.37 kB
05:33:54 [vite] dist/_worker.js/pages/api/billing/cancel.astro.mjs                          3.39 kB
05:33:54 [vite] dist/_worker.js/chunks/index.esm_B6YxiGL2.mjs                               3.44 kB
05:33:54 [vite] dist/_worker.js/pages/api/admin/ip-geo.astro.mjs                            3.49 kB
05:33:54 [vite] dist/_worker.js/pages/register.astro.mjs                                    3.52 kB
05:33:54 [vite] dist/_worker.js/pages/en/register.astro.mjs                                 3.57 kB
05:33:54 [vite] dist/_worker.js/pages/api/comments.astro.mjs                                3.61 kB
05:33:54 [vite] dist/_worker.js/pages/api/user/avatar.astro.mjs                             3.64 kB
05:33:54 [vite] dist/_worker.js/chunks/base-service_DfHemTO5.mjs                            3.65 kB
05:33:54 [vite] dist/_worker.js/chunks/logger_C6XMx81p.mjs                                  3.66 kB
05:33:54 [vite] dist/_worker.js/pages/api/webscraper/usage.astro.mjs                        3.72 kB
05:33:54 [vite] dist/_worker.js/pages/api/admin/telemetry.astro.mjs                         3.78 kB
05:33:54 [vite] dist/_worker.js/pages/api/comments/recent.astro.mjs                         3.80 kB
05:33:54 [vite] dist/_worker.js/pages/tools/video-enhancer/app.astro.mjs                    3.81 kB
05:33:54 [vite] dist/_worker.js/pages/api/admin/referrals/update-status.astro.mjs           3.81 kB
05:33:54 [vite] dist/_worker.js/pages/api/dashboard/perform-action.astro.mjs                3.82 kB
05:33:54 [vite] dist/_worker.js/pages/tools/prompt-enhancer/app.astro.mjs                   3.98 kB
05:33:54 [vite] dist/_worker.js/pages/tools/voice-visualizer/app.astro.mjs                  4.00 kB
05:33:54 [vite] dist/_worker.js/pages/tools/webscraper/app.astro.mjs                        4.03 kB
05:33:54 [vite] dist/_worker.js/pages/agb.astro.mjs                                         4.06 kB
05:33:54 [vite] dist/_worker.js/pages/api/test/seed-email-token.astro.mjs                   4.07 kB
05:33:54 [vite] dist/_worker.js/pages/api/ai-image/jobs.astro.mjs                           4.07 kB
05:33:54 [vite] dist/_worker.js/pages/en/tools/webscraper/app.astro.mjs                     4.12 kB
05:33:54 [vite] dist/_worker.js/pages/blog/comments-demo.astro.mjs                          4.13 kB
05:33:54 [vite] dist/_worker.js/pages/de/agb.astro.mjs                                      4.16 kB
05:33:54 [vite] dist/_worker.js/pages/api/projects.astro.mjs                                4.16 kB
05:33:54 [vite] dist/_worker.js/pages/api/ai-image/usage.astro.mjs                          4.17 kB
05:33:54 [vite] dist/_worker.js/pages/api/agents.astro.mjs                                  4.25 kB
05:33:54 [vite] dist/_worker.js/pages/api/auth/oauth/_provider_/start.astro.mjs             4.25 kB
05:33:54 [vite] dist/_worker.js/pages/api/notifications/queue/process.astro.mjs             4.26 kB
05:33:54 [vite] dist/_worker.js/pages/api/billing/session.astro.mjs                         4.26 kB
05:33:54 [vite] dist/_worker.js/pages/en/agb.astro.mjs                                      4.30 kB
05:33:54 [vite] dist/_worker.js/pages/api/admin/comments/_id_.astro.mjs                     4.31 kB
05:33:54 [vite] dist/_worker.js/pages/api/testing/evaluate/_id_/complete.astro.mjs          4.32 kB
05:33:54 [vite] dist/_worker.js/pages/en/login.astro.mjs                                    4.33 kB
05:33:54 [vite] dist/_worker.js/pages/api/admin/credits/grant.astro.mjs                     4.35 kB
05:33:54 [vite] dist/_worker.js/pages/welcome-profile.astro.mjs                             4.36 kB
05:33:54 [vite] dist/_worker.js/pages/r2-ai/_---path_.astro.mjs                             4.36 kB
05:33:54 [vite] dist/_worker.js/pages/de/welcome-profile.astro.mjs                          4.40 kB
05:33:54 [vite] dist/_worker.js/pages/en/welcome-profile.astro.mjs                          4.40 kB
05:33:54 [vite] dist/_worker.js/pages/login.astro.mjs                                       4.44 kB
05:33:54 [vite] dist/_worker.js/pages/de/login.astro.mjs                                    4.49 kB
05:33:54 [vite] dist/_worker.js/pages/api/ai-video/usage.astro.mjs                          4.49 kB
05:33:54 [vite] dist/_worker.js/pages/api/prompt/usage.astro.mjs                            4.52 kB
05:33:54 [vite] dist/_worker.js/pages/api/testing/evaluate/next.astro.mjs                   4.59 kB
05:33:54 [vite] dist/_worker.js/pages/api/ai-video/upload.astro.mjs                         4.63 kB
05:33:54 [vite] dist/_worker.js/chunks/referral-reward-service_CNps2r9J.mjs                 4.70 kB
05:33:54 [vite] dist/_worker.js/pages/api/admin/users/summary.astro.mjs                     4.72 kB
05:33:54 [vite] dist/_worker.js/chunks/response-helpers_DWnYdezb.mjs                        4.75 kB
05:33:54 [vite] dist/_worker.js/pages/api/admin/comments.astro.mjs                          4.92 kB
05:33:54 [vite] dist/_worker.js/pages/api/ai-video/jobs/_id_.astro.mjs                      4.97 kB
05:33:54 [vite] dist/_worker.js/pages/api/debug/logs-stream.astro.mjs                       5.02 kB
05:33:54 [vite] dist/_worker.js/pages/api/admin/users/_id_/unban.astro.mjs                  5.08 kB
05:33:54 [vite] dist/_worker.js/pages/api/user/profile.astro.mjs                            5.09 kB
05:33:54 [vite] dist/_worker.js/pages/api/admin/credits/deduct.astro.mjs                    5.24 kB
05:33:54 [vite] dist/_worker.js/pages/api/admin/referrals/summary.astro.mjs                 5.29 kB
05:33:54 [vite] dist/_worker.js/pages/api/admin/users/_id_/ban.astro.mjs                    5.35 kB
05:33:54 [vite] dist/_worker.js/pages/admin/status.astro.mjs                                5.36 kB
05:33:54 [vite] dist/_worker.js/pages/api/billing/sync.astro.mjs                            5.36 kB
05:33:54 [vite] dist/_worker.js/pages/api/comments/count.astro.mjs                          5.40 kB
05:33:54 [vite] dist/_worker.js/pages/api/admin/users/_id_.astro.mjs                        5.45 kB
05:33:54 [vite] dist/_worker.js/pages/welcome.astro.mjs                                     5.47 kB
05:33:54 [vite] dist/_worker.js/chunks/xhr-interceptor_B6Q2iXwJ.mjs                         5.51 kB
05:33:54 [vite] dist/_worker.js/pages/api/webscraper/extract.astro.mjs                      5.51 kB
05:33:54 [vite] dist/_worker.js/pages/api/dashboard/billing-summary.astro.mjs               5.84 kB
05:33:54 [vite] dist/_worker.js/pages/api/test/seed-suite-v2.astro.mjs                      5.86 kB
05:33:54 [vite] dist/_worker.js/pages/api/debug-login.astro.mjs                             6.06 kB
05:33:54 [vite] dist/_worker.js/chunks/tools-data_BODEE4r2.mjs                              6.22 kB
05:33:54 [vite] dist/_worker.js/pages/tools.astro.mjs                                       6.26 kB
05:33:54 [vite] dist/_worker.js/pages/en/tools.astro.mjs                                    6.30 kB
05:33:54 [vite] dist/_worker.js/pages/api/user/account.astro.mjs                            6.32 kB
05:33:54 [vite] dist/_worker.js/pages/api/admin/users/list.astro.mjs                        6.32 kB
05:33:54 [vite] dist/_worker.js/chunks/network-interceptor_NwnNBd_k.mjs                     6.35 kB
05:33:54 [vite] dist/_worker.js/pages/api/contact.astro.mjs                                 6.44 kB
05:33:54 [vite] dist/_worker.js/pages/api/ai-image/generate.astro.mjs                       6.45 kB
05:33:54 [vite] dist/_worker.js/chunks/confirm_CuYhlRDt.mjs                                 6.46 kB
05:33:54 [vite] dist/_worker.js/pages/en/verify-email.astro.mjs                             6.65 kB
05:33:54 [vite] dist/_worker.js/pages/verify-email.astro.mjs                                6.85 kB
05:33:54 [vite] dist/_worker.js/pages/tools/imag-enhancer.astro.mjs                         6.91 kB
05:33:54 [vite] dist/_worker.js/pages/api/ai-video/generate.astro.mjs                       6.94 kB
05:33:54 [vite] dist/_worker.js/pages/api/newsletter/subscribe.astro.mjs                    6.94 kB
05:33:54 [vite] dist/_worker.js/pages/api/notifications.astro.mjs                           6.97 kB
05:33:54 [vite] dist/_worker.js/pages/api/voice/transcribe.astro.mjs                        7.23 kB
05:33:54 [vite] dist/_worker.js/pages/api/comments/moderate.astro.mjs                       7.24 kB
05:33:54 [vite] dist/_worker.js/pages/en/tools/imag-enhancer.astro.mjs                      7.26 kB
05:33:54 [vite] dist/_worker.js/chunks/usage_LMI3xMB5.mjs                                   7.59 kB
05:33:54 [vite] dist/_worker.js/chunks/index_C78KsGts.mjs                                   7.75 kB
05:33:54 [vite] dist/_worker.js/chunks/parse_yL_293SP.mjs                                   7.78 kB
05:33:54 [vite] dist/_worker.js/chunks/AuthStatusNotifier_DpI9TXNh.mjs                      7.83 kB
05:33:54 [vite] dist/_worker.js/chunks/stytch_B_DYQXev.mjs                                  7.94 kB
05:33:54 [vite] dist/_worker.js/chunks/VerifyEmailCoordinator_D3YwfgJZ.mjs                  8.51 kB
05:33:54 [vite] dist/_worker.js/pages/api/admin/users/set-plan.astro.mjs                    8.79 kB
05:33:54 [vite] dist/_worker.js/pages/api/dashboard/referral-summary.astro.mjs              8.80 kB
05:33:54 [vite] dist/_worker.js/pages/en/tools/imag-enhancer/app.astro.mjs                  8.95 kB
05:33:54 [vite] dist/_worker.js/pages/api/admin/referrals/list.astro.mjs                    8.99 kB
05:33:54 [vite] dist/_worker.js/chunks/entitlements_CQ1Rt7r2.mjs                            9.01 kB
05:33:54 [vite] dist/_worker.js/pages/tools/imag-enhancer/app.astro.mjs                     9.16 kB
05:33:54 [vite] dist/_worker.js/pages/api/comments/_id_.astro.mjs                           9.60 kB
05:33:54 [vite] dist/_worker.js/pages/api/lead-magnets/download.astro.mjs                   9.70 kB
05:33:54 [vite] dist/_worker.js/pages/api/test/seed-referral-events.astro.mjs               9.71 kB
05:33:54 [vite] dist/_worker.js/pages/en/datenschutz.astro.mjs                              9.92 kB
05:33:54 [vite] dist/_worker.js/chunks/datenschutz_lYUcDH13.mjs                            10.21 kB
05:33:54 [vite] dist/_worker.js/pages/api/admin/traffic-24h.astro.mjs                      10.37 kB
05:33:54 [vite] dist/_worker.js/pages/api/testing/evaluate/next/run.astro.mjs              10.48 kB
05:33:54 [vite] dist/_worker.js/chunks/BlogCard_CifmH4fT.mjs                               10.63 kB
05:33:54 [vite] dist/_worker.js/pages/api/admin/metrics.astro.mjs                          10.94 kB
05:33:54 [vite] dist/_worker.js/pages/en/email-verified.astro.mjs                          10.95 kB
05:33:54 [vite] dist/_worker.js/pages/api/auth/magic/request.astro.mjs                     10.99 kB
05:33:54 [vite] dist/_worker.js/chunks/rate-limiter_Dds0oNy9.mjs                           10.99 kB
05:33:54 [vite] dist/_worker.js/chunks/MagicLinkForm_CfgWbj7X.mjs                          11.05 kB
05:33:54 [vite] dist/_worker.js/pages/api/auth/callback.astro.mjs                          11.14 kB
05:33:54 [vite] dist/_worker.js/pages/api/auth/oauth/_provider_/callback.astro.mjs         11.44 kB
05:33:54 [vite] dist/_worker.js/chunks/api-middleware_DRoneA8a.mjs                         11.75 kB
05:33:54 [vite] dist/_worker.js/chunks/index_CtyDcrr9.mjs                                  12.05 kB
05:33:54 [vite] dist/_worker.js/pages/newsletter/confirm.astro.mjs                         12.10 kB
05:33:54 [vite] dist/_worker.js/pages/impressum.astro.mjs                                  12.29 kB
05:33:54 [vite] dist/_worker.js/pages/en.astro.mjs                                         12.52 kB
05:33:54 [vite] dist/_worker.js/pages/api/billing/stripe-webhook.astro.mjs                 12.62 kB
05:33:54 [vite] dist/_worker.js/chunks/faq_DAdlK9I9.mjs                                    12.70 kB
05:33:54 [vite] dist/_worker.js/pages/de/impressum.astro.mjs                               12.72 kB
05:33:54 [vite] dist/_worker.js/pages/en/impressum.astro.mjs                               13.07 kB
05:33:54 [vite] dist/_worker.js/chunks/backup-service_C6YeC72U.mjs                         15.04 kB
05:33:54 [vite] dist/_worker.js/pages/email-verified.astro.mjs                             15.16 kB
05:33:54 [vite] dist/_worker.js/chunks/_astro_data-layer-content_BEw9y9-X.mjs              15.42 kB
05:33:54 [vite] dist/_worker.js/chunks/HelpModal_u_a1oiTW.mjs                              15.83 kB
05:33:54 [vite] dist/_worker.js/pages/api/admin/backup.legacy.hono.astro.mjs               16.43 kB
05:33:54 [vite] dist/_worker.js/chunks/cookie-einstellungen_B_2rGu4Q.mjs                   16.48 kB
05:33:54 [vite] dist/_worker.js/pages/api/user/logout-v2.astro.mjs                         17.12 kB
05:33:54 [vite] dist/_worker.js/chunks/logger-factory_BJILIFe1.mjs                         17.29 kB
05:33:54 [vite] dist/_worker.js/chunks/browser_GCk4HToL.mjs                                17.51 kB
05:33:54 [vite] dist/_worker.js/chunks/ai-jobs-service_CyuOS7zx.mjs                        17.62 kB
05:33:54 [vite] dist/_worker.js/chunks/notification-service_DCh-nZad.mjs                   18.57 kB
05:33:54 [vite] dist/_worker.js/chunks/kontakt_2jlrpaxI.mjs                                19.26 kB
05:33:54 [vite] dist/_worker.js/chunks/VideoEnhancerIsland_Rax6yxSq.mjs                    19.77 kB
05:33:54 [vite] dist/_worker.js/pages/api/comments/performance.astro.mjs                   20.59 kB
05:33:54 [vite] dist/_worker.js/chunks/jwt_BBR7YAl5.mjs                                    21.70 kB
05:33:54 [vite] dist/_worker.js/pages/admin/comments.astro.mjs                             22.02 kB
05:33:54 [vite] dist/_worker.js/chunks/ToolsIndexIsland_sS3tyLNT.mjs                       24.84 kB
05:33:54 [vite] dist/_worker.js/pages/en/dashboard.astro.mjs                               25.68 kB
05:33:54 [vite] dist/_worker.js/chunks/webscraper_iGq_XfXj.mjs                             26.99 kB
05:33:54 [vite] dist/_worker.js/pages/dashboard.astro.mjs                                  28.42 kB
05:33:54 [vite] dist/_worker.js/_astro-internal_middleware.mjs                             28.67 kB
05:33:54 [vite] dist/_worker.js/pages/api/data-export.astro.mjs                            28.98 kB
05:33:54 [vite] dist/_worker.js/chunks/index_OaG_42Nk.mjs                                  29.53 kB
05:33:54 [vite] dist/_worker.js/chunks/ImagEnhancerRouter_BzAxfSHI.mjs                     30.07 kB
05:33:54 [vite] dist/_worker.js/chunks/comment-service_Bo9OzSbp.mjs                        30.30 kB
05:33:54 [vite] dist/_worker.js/index.js                                                   30.83 kB
05:33:54 [vite] dist/_worker.js/chunks/VoiceVisualizerIsland_B-_8_GjS.mjs                  31.55 kB
05:33:54 [vite] dist/_worker.js/pages/api/prompt-enhance.astro.mjs                         34.35 kB
05:33:54 [vite] dist/_worker.js/chunks/index_CEe__2c0.mjs                                  34.36 kB
05:33:54 [vite] dist/_worker.js/chunks/_@astrojs-ssr-adapter_BJ6six3l.mjs                  36.66 kB
05:33:54 [vite] dist/_worker.js/chunks/ai-image-service_DMTYufAc.mjs                       39.94 kB
05:33:54 [vite] dist/_worker.js/chunks/astro-designed-error-pages_Dm_FUMd7.mjs             41.53 kB
05:33:54 [vite] dist/_worker.js/chunks/email-service-impl_Crhj7wv9.mjs                     42.15 kB
05:33:54 [vite] dist/_worker.js/chunks/EnhancerForm_DmeprBcz.mjs                           46.97 kB
05:33:54 [vite] dist/_worker.js/chunks/index_BMje5b0Z.mjs                                  47.35 kB
05:33:54 [vite] dist/_worker.js/pages/blog/_---slug_.astro.mjs                             51.56 kB
05:33:54 [vite] dist/_worker.js/pages/api/mcp/ping.astro.mjs                               51.82 kB
05:33:54 [vite] dist/_worker.js/chunks/_astro_assets_DZC1Tdj4.mjs                          61.05 kB
05:33:54 [vite] dist/_worker.js/chunks/WebscraperIsland_EkT5vIgN.mjs                       73.33 kB
05:33:54 [vite] dist/_worker.js/chunks/index_DzhRmAX5.mjs                                  95.42 kB
05:33:54 [vite] dist/_worker.js/chunks/pricing_8q8HQd6n.mjs                               101.90 kB
05:33:54 [vite] dist/_worker.js/chunks/index_BejKFP2t.mjs                                 104.93 kB
05:33:54 [vite] dist/_worker.js/chunks/ConsentPreferencesCard_DWNkOZ1p.mjs                105.51 kB
05:33:54 [vite] dist/_worker.js/chunks/i18n_CDIPEi8r.mjs                                  123.72 kB
05:33:54 [vite] dist/_worker.js/pages/admin.astro.mjs                                     132.51 kB
05:33:54 [vite] dist/_worker.js/chunks/EvolutionHubWordmarkOutlined_DDegy_wJ.mjs          132.66 kB
05:33:54 [vite] dist/_worker.js/chunks/schema_z9W7OYbz.mjs                                159.39 kB
05:33:54 [vite] dist/_worker.js/chunks/CommentSection_CXBXTW8_.mjs                        183.31 kB
05:33:54 [vite] dist/_worker.js/chunks/stripe.esm.worker_DZnLQPuu.mjs                     195.37 kB
05:33:54 [vite] dist/_worker.js/chunks/astro/server_DuD7EVtC.mjs                          258.00 kB
05:33:54 [vite] dist/_worker.js/chunks/client_CZfqaZx_.mjs                                275.70 kB
05:33:54 [vite] dist/_worker.js/chunks/blog_DCxDg3eZ.mjs                                  337.08 kB
05:33:54 [vite] dist/_worker.js/chunks/lottie_light_yImd2zmB.mjs                          405.87 kB
05:33:54 [vite] dist/_worker.js/chunks/_@astro-renderers_7VV57vTa.mjs                     514.44 kB
05:33:54 [vite] dist/_worker.js/chunks/entitlements_Czqzt0qf.mjs                          638.59 kB
05:33:54 [vite] dist/_worker.js/chunks/BaseLayout_BMqEdxDy.mjs                          1,225.05 kB
05:33:54 [vite] âœ“ built in 11.64s
05:33:54 [build] âœ“ Completed in 11.66s.

 building client (vite) 
05:33:54 [vite] vite v6.4.1 building SSR bundle for development...
05:33:54 [vite] transforming...
05:33:57 [vite] âœ“ 1023 modules transformed.
05:33:57 [WARN] [vite] Generated an empty chunk: "comments.astro_astro_type_script_index_0_lang".
05:33:57 [WARN] [vite] Generated an empty chunk: "email-verified.astro_astro_type_script_index_0_lang".
05:33:57 [WARN] [vite] Generated an empty chunk: "email-verified.astro_astro_type_script_index_1_lang".
05:33:57 [WARN] [vite] Generated an empty chunk: "confirm.astro_astro_type_script_index_0_lang".
05:33:57 [WARN] [vite] Generated an empty chunk: "SettingsScript.astro_astro_type_script_index_0_lang".
05:33:57 [WARN] [vite] Generated an empty chunk: "ClientRouter.astro_astro_type_script_index_0_lang".
05:33:57 [WARN] [vite] Generated an empty chunk: "Newsletter.astro_astro_type_script_index_0_lang".
05:33:57 [WARN] [vite] Generated an empty chunk: "LeadMagnetCTA.astro_astro_type_script_index_0_lang".
05:33:57 [vite] rendering chunks...
05:33:57 [vite] dist/_astro/comments.astro_astro_type_script_index_0_lang.l0sNRNKZ.js          0.00 kB
05:33:57 [vite] dist/_astro/email-verified.astro_astro_type_script_index_0_lang.l0sNRNKZ.js    0.00 kB
05:33:57 [vite] dist/_astro/email-verified.astro_astro_type_script_index_1_lang.l0sNRNKZ.js    0.00 kB
05:33:57 [vite] dist/_astro/confirm.astro_astro_type_script_index_0_lang.l0sNRNKZ.js           0.00 kB
05:33:57 [vite] dist/_astro/SettingsScript.astro_astro_type_script_index_0_lang.l0sNRNKZ.js    0.00 kB
05:33:57 [vite] dist/_astro/ClientRouter.astro_astro_type_script_index_0_lang.l0sNRNKZ.js      0.00 kB
05:33:57 [vite] dist/_astro/Newsletter.astro_astro_type_script_index_0_lang.l0sNRNKZ.js        0.00 kB
05:33:57 [vite] dist/_astro/LeadMagnetCTA.astro_astro_type_script_index_0_lang.l0sNRNKZ.js     0.00 kB
05:33:57 [vite] dist/_astro/i18n.B9qI-YrT.js                                                   0.29 kB
05:33:57 [vite] dist/_astro/index.iqC5L0Tv.js                                                  0.29 kB
05:33:57 [vite] dist/_astro/notify.DRM3rOHc.js                                                 0.34 kB
05:33:57 [vite] dist/_astro/index.CujWTX-b.js                                                  0.37 kB
05:33:57 [vite] dist/_astro/CommentSection.DsUObrHC.js                                         0.38 kB
05:33:57 [vite] dist/_astro/islandStyles.krIl7u9X.js                                           0.53 kB
05:33:57 [vite] dist/_astro/Toaster.BBrxseok.js                                                0.63 kB
05:33:57 [vite] dist/_astro/csrf.huY-CY1u.js                                                   0.72 kB
05:33:57 [vite] dist/_astro/Alert.C3bqegmy.js                                                  0.86 kB
05:33:57 [vite] dist/_astro/DebugInterceptors.BkKNZ8fi.js                                      1.07 kB
05:33:57 [vite] dist/_astro/client-logger.vQW6IcWi.js                                          1.40 kB
05:33:57 [vite] dist/_astro/global-error-interceptor.C2M8RH7k.js                               1.42 kB
05:33:57 [vite] dist/_astro/beacon-interceptor.iVyrsNZm.js                                     1.47 kB
05:33:57 [vite] dist/_astro/Card.BISUTonz.js                                                   1.48 kB
05:33:57 [vite] dist/_astro/console-interceptor.GWX5xAZv.js                                    1.90 kB
05:33:57 [vite] dist/_astro/BillingNotice.B8CMdsMo.js                                          2.68 kB
05:33:57 [vite] dist/_astro/ProfileFormEnhancer.BXj4qhCw.js                                    2.83 kB
05:33:57 [vite] dist/_astro/LottieIcon.8eauJlQR.js                                             2.97 kB
05:33:57 [vite] dist/_astro/BulkActions.CYQHIUT2.js                                            3.86 kB
05:33:57 [vite] dist/_astro/StarfieldBackdrop.Dw7uRO63.js                                      4.24 kB
05:33:57 [vite] dist/_astro/Button.Dr2tjSEQ.js                                                 4.26 kB
05:33:57 [vite] dist/_astro/client.ENWvjUa3.js                                                 4.41 kB
05:33:57 [vite] dist/_astro/NewsletterPreferencesCard.CldGYKS3.js                              5.01 kB
05:33:57 [vite] dist/_astro/xhr-interceptor.Mw2Nkq47.js                                        5.45 kB
05:33:57 [vite] dist/_astro/MagicLinkFormEnhancer.CMRNcGN8.js                                  6.20 kB
05:33:57 [vite] dist/_astro/network-interceptor.yG9bJOfF.js                                    6.29 kB
05:33:57 [vite] dist/_astro/AuthStatusNotifier.DSbgN7zg.js                                     7.85 kB
05:33:57 [vite] dist/_astro/BillingCard.D5AAaYyj.js                                           12.20 kB
05:33:57 [vite] dist/_astro/ConsentPreferencesCard.DDtcQv3F.js                                14.14 kB
05:33:57 [vite] dist/_astro/HelpModal.YYkI6Bl0.js                                             15.80 kB
05:33:57 [vite] dist/_astro/ToolsIndexIsland.CXKo24Qv.js                                      15.90 kB
05:33:57 [vite] dist/_astro/TestimonialsRotatingGrid.BAEk-3Gw.js                              16.30 kB
05:33:57 [vite] dist/_astro/CardGraph.HcT3r4Ud.js                                             17.37 kB
05:33:57 [vite] dist/_astro/ReferralCard.CGlUC83D.js                                          19.39 kB
05:33:57 [vite] dist/_astro/VideoEnhancerIsland.Dqs3dpb4.js                                   19.74 kB
05:33:57 [vite] dist/_astro/VoiceVisualizerIsland.D5vbuVDi.js                                 31.54 kB
05:33:57 [vite] dist/_astro/ImagEnhancerRouter.DkbUBb1W.js                                    31.67 kB
05:33:57 [vite] dist/_astro/jsx-dev-runtime.CKTSUCBB.js                                       34.33 kB
05:33:57 [vite] dist/_astro/HeroStatusLights.CWxRlQJM.js                                      36.47 kB
05:33:57 [vite] dist/_astro/PricingDetailsBootstrap.B2ukY3QZ.js                               37.73 kB
05:33:57 [vite] dist/_astro/EnhancerForm.B8VHacRP.js                                          47.17 kB
05:33:57 [vite] dist/_astro/index.DD8xyDQU.js                                                 64.39 kB
05:33:57 [vite] dist/_astro/WebscraperIsland.kL_tvKfP.js                                      73.39 kB
05:33:57 [vite] dist/_astro/index.BKEs02oL.js                                                 74.02 kB
05:33:57 [vite] dist/_astro/DebugPanelOverlay.DyZSX3Sf.js                                     84.51 kB
05:33:57 [vite] dist/_astro/i18n.Be0Acp8w.js                                                 123.62 kB
05:33:57 [vite] dist/_astro/AdminDashboardApp.CtzMahV6.js                                    131.02 kB
05:33:57 [vite] dist/_astro/CommentSection.D-jX5jYN.js                                       213.85 kB
05:33:57 [vite] dist/_astro/lottie_light.LI_taJkg.js                                         405.81 kB
05:33:57 [vite] dist/_astro/index.Kvrx_W6A.js                                                865.56 kB
05:33:57 [vite] âœ“ built in 2.86s

 prerendering static routes 
05:33:57 âœ“ Completed in 83ms.

05:33:57 [build] Rearranging server assets...
05:33:57 [build] Server built in 16.08s
05:33:57 [build] Complete!
[dev] â›…ï¸ wrangler 4.46.0 (update available 4.47.0)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
[dev] Using vars defined in .env
[dev] Your Worker has access to the following bindings:
[dev] Binding                                                                        Resource                  Mode
[dev] env.SESSION (bc180c72cdbe4701a221ab8002f2de72)                                 KV Namespace              local
[dev] env.KV_AI_ENHANCER (30356dfa83e342c48103609bce4f3320)                          KV Namespace              local
env.KV_WEBSCRAPER (c9814079ac344b979b58278d055ca457)                           KV Namespace              local
[dev] env.KV_VOICE_TRANSCRIBE (6593f5bc9f174e60a8c09bb16b36672c)                     KV Namespace              local
[dev] env.KV_WEB_EVAL (ddeb57368cbd4c529c0da1f3e4711330)                             KV Namespace              local
[dev] env.DB (35bd5d4c-718a-43ea-935c-b5d62a686ec2)                                  D1 Database               local
[dev] env.R2_AVATARS (evolution-hub-avatars-local)                                   R2 Bucket                 local
env.R2_LEADMAGNETS (evolution-hub-lead-magnets-dev)                            R2 Bucket                 local
env.R2_AI_IMAGES (evolution-hub-ai-images-local)                               R2 Bucket                 local
[dev] env.ASSETS                                                                     Assets                    local
[dev] env.ENVIRONMENT ("development")                                                Environment Variable      local
[dev] env.BASE_URL ("http://127.0.0.1:8787")                                         Environment Variable      local
[dev] env.APP_ORIGIN ("http://127.0.0.1:8787")                                       Environment Variable      local
env.PUBLIC_TURNSTILE_SITE_KEY ("0x4AAAAAAB5-m2IDaeVetM7Q")                     Environment Variable      local
[dev] env.E2E_FAKE_STYTCH ("1")                                                      Environment Variable      local
[dev] env.VOICE_STREAM_SSE ("1")                                                     Environment Variable      local
[dev] env.VOICE_STREAM_POLL ("1")                                                    Environment Variable      local
[dev] env.VOICE_R2_ARCHIVE ("0")                                                     Environment Variable      local
env.VOICE_DEV_ECHO ("1")                                                       Environment Variable      local
env.CONTENTFUL_SPACE_ID ("(hidden)")                                           Environment Variable      local
env.CONTENTFUL_ACCESS_TOKEN ("(hidden)")                                       Environment Variable      local
env.CONTENTFUL_PREVIEW_TOKEN ("(hidden)")                                      Environment Variable      local
env.CONTENTFUL_ENVIRONMENT ("(hidden)")                                        Environment Variable      local
env.CONTENTFUL_MANAGEMENT_TOKEN ("(hidden)")                                   Environment Variable      local
[dev] env.DATABASE_URL ("(hidden)")                                                  Environment Variable      local
env.RESEND_API_KEY ("(hidden)")                                                Environment Variable      local
env.REDIS_URL ("(hidden)")                                                     Environment Variable      local
env.REPLICATE_API_TOKEN ("(hidden)")                                           Environment Variable      local
env.STYTCH_PUBLIC_TOKEN ("(hidden)")                                           Environment Variable      local
env.STYTCH_PROJECT_ID ("(hidden)")                                             Environment Variable      local
env.STYTCH_SECRET ("(hidden)")                                                 Environment Variable      local
[dev] env.OPENAI_API_KEY ("(hidden)")                                                Environment Variable      local
[dev] env.PUBLIC_ENABLE_DEBUG_PANEL ("(hidden)")                                     Environment Variable      local
[dev] env.STRIPE_SECRET ("(hidden)")                                                 Environment Variable      local
env.STRIPE_WEBHOOK_SECRET ("(hidden)")                                         Environment Variable      local
[dev] env.CREDITS_PRICING_TABLE ("(hidden)")                                         Environment Variable      local
env.PRICING_TABLE_ANNUAL ("(hidden)")                                          Environment Variable      local
[dev] env.PRICING_TABLE ("(hidden)")                                                 Environment Variable      local
env.PUBLIC_ENHANCER_PLAN_GATING_V1 ("(hidden)")                                Environment Variable      local
[dev] env.PROMPT_REWRITE_V1 ("(hidden)")                                             Environment Variable      local
env.PROMPT_TEXT_MODEL ("(hidden)")                                             Environment Variable      local
env.PROMPT_VISION_MODEL ("(hidden)")                                           Environment Variable      local
env.PROMPT_MAX_FILES ("(hidden)")                                              Environment Variable      local
env.PROMPT_MAX_FILE_BYTES ("(hidden)")                                         Environment Variable      local
env.PROMPT_ALLOWED_TYPES ("(hidden)")                                          Environment Variable      local
[dev] env.PROMPT_OUTPUT_TOKENS_MAX ("(hidden)")                                      Environment Variable      local
env.PROMPT_TEMPERATURE ("(hidden)")                                            Environment Variable      local
env.PROMPT_TOP_P ("(hidden)")                                                  Environment Variable      local
env.INTERNAL_HEALTH_TOKEN ("(hidden)")                                         Environment Variable      local
env.SLACK_WEBHOOK_URL ("(hidden)")                                             Environment Variable      local
[dev] env.WORKERS_AI_ENABLED ("(hidden)")                                            Environment Variable      local
env.USAGE_KV_V2 ("(hidden)")                                                   Environment Variable      local
env.FORCE_CF_MODELS ("(hidden)")                                               Environment Variable      local
[dev] env.PUBLIC_LANDING_BG_VARIANT ("(hidden)")                                     Environment Variable      local
env.PUBLIC_SOCIAL_GITHUB ("(hidden)")                                          Environment Variable      local
[dev] env.PUBLIC_SOCIAL_X ("(hidden)")                                               Environment Variable      local
env.PUBLIC_SOCIAL_REDDIT ("(hidden)")                                          Environment Variable      local
env.PUBLIC_SOCIAL_TIKTOK ("(hidden)")                                          Environment Variable      local
[dev] env.PUBLIC_SOCIAL_INSTAGRAM ("(hidden)")                                       Environment Variable      local
[dev] env.PUBLIC_SOCIAL_LINKEDIN ("(hidden)")                                        Environment Variable      local
[dev] env.PUBLIC_SOCIAL_PINTEREST ("(hidden)")                                       Environment Variable      local
env.PUBLIC_SOCIAL_FACEBOOK ("(hidden)")                                        Environment Variable      local
env.PUBLIC_DISABLE_LEADMAGNETS ("(hidden)")                                    Environment Variable      local
env.PUBLIC_TOOLS_FILTER ("(hidden)")                                           Environment Variable      local
env.WEB_EVAL_EXECUTOR_TOKEN ("(hidden)")                                       Environment Variable      local
[dev] âŽ” Starting local server...
[dev] [wrangler:info] âœ¨ Parsed 0 valid redirect rules.
[dev] [wrangler:info] âœ¨ Parsed 1 valid header rule.
[dev] [wrangler:info] Ready on http://localhost:8787
[dev] [2025-11-12T04:34:00.162Z] [INFO][feqfr4us] GET /api/csp-report
Context: {
  "requestId": "feqfr4usmhvi9jz6",
  "endpoint": "/api/csp-report",
  "method": "GET"
}
[dev] [2025-11-12T04:34:00.176Z] [DEBUG][feqfr4us] [Middleware] Session ID from cookie
Context: {
  "requestId": "feqfr4usmhvi9jz6",
  "present": false
}
[dev] [2025-11-12T04:34:00.176Z] [DEBUG][feqfr4us] [Middleware] Outgoing response
Context: {
  "requestId": "feqfr4usmhvi9jz6",
  "status": 405,
  "statusText": "Method Not Allowed",
  "headers": {
    "allow": "POST",
    "content-type": "application/json"
  }
}
[dev] [2025-11-12T04:34:00.176Z] [DEBUG][feqfr4us] [Middleware] Processing path
Context: {
  "requestId": "feqfr4usmhvi9jz6",
  "path": "/api/csp-report"
}
[dev] [2025-11-12T04:34:00.176Z] [INFO][feqfr4us] GET /api/csp-report -> 405 (14ms)
Context: {
  "requestId": "feqfr4usmhvi9jz6",
  "duration": 14,
  "status": 405
}
[dev] [wrangler:info] GET /api/csp-report 405 Method Not Allowed (270ms)
[dev] [2025-11-12T04:34:00.344Z] [INFO][2mer1nrx] GET /api/csp-report
Context: {
  "requestId": "2mer1nrxmhvi9k48",
  "endpoint": "/api/csp-report",
  "method": "GET"
}
[dev] [2025-11-12T04:34:00.345Z] [DEBUG][2mer1nrx] [Middleware] Session ID from cookie
Context: {
  "requestId": "2mer1nrxmhvi9k48",
  "present": false
}
[2025-11-12T04:34:00.345Z] [DEBUG][2mer1nrx] [Middleware] Outgoing response
Context: {
  "requestId": "2mer1nrxmhvi9k48",
  "status": 405,
  "statusText": "Method Not Allowed",
  "headers": {
    "allow": "POST",
    "content-type": "application/json"
  }
}
[2025-11-12T04:34:00.345Z] [DEBUG][2mer1nrx] [Middleware] Processing path
Context: {
  "requestId": "2mer1nrxmhvi9k48",
  "path": "/api/csp-report"
}
[2025-11-12T04:34:00.345Z] [INFO][2mer1nrx] GET /api/csp-report -> 405 (1ms)
Context: {
  "requestId": "2mer1nrxmhvi9k48",
  "duration": 1,
  "status": 405
}
[setup] TEST_BASE_URL = http://localhost:8787
[dev] [wrangler:info] GET /api/csp-report 405 Method Not Allowed (165ms)
[dev] [2025-11-12T04:34:00.945Z] [INFO][6wo1jnjf] GET /api/comments
Context: {
  "requestId": "6wo1jnjfmhvi9kkx",
  "endpoint": "/api/comments",
  "method": "GET"
}
[2025-11-12T04:34:00.947Z] [DEBUG][6wo1jnjf] [Middleware] Session ID from cookie
Context: {
  "requestId": "6wo1jnjfmhvi9kkx",
  "present": false
}
[dev] [2025-11-12T04:34:00.975Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: { endpoint: '/api/comments', method: 'GET', action: 'comments_list' }
}
[dev] [2025-11-12T04:34:01.000Z] [DEBUG][6wo1jnjf] [Middleware] Outgoing response
Context: {
  "requestId": "6wo1jnjfmhvi9kkx",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[dev] [2025-11-12T04:34:01.000Z] [DEBUG][6wo1jnjf] [Middleware] Processing path
Context: {
  "requestId": "6wo1jnjfmhvi9kkx",
  "path": "/api/comments"
}
[2025-11-12T04:34:01.000Z] [INFO][6wo1jnjf] GET /api/comments -> 200 (55ms)
Context: {
  "requestId": "6wo1jnjfmhvi9kkx",
  "duration": 55,
  "status": 200
}
[dev] [2025-11-12T04:34:01.002Z] [INFO][077vz9kj] GET /api/csp-report
Context: {
  "requestId": "077vz9kjmhvi9kmi",
  "endpoint": "/api/csp-report",
  "method": "GET"
}
[dev] [2025-11-12T04:34:01.002Z] [DEBUG][077vz9kj] [Middleware] Session ID from cookie
Context: {
  "requestId": "077vz9kjmhvi9kmi",
  "present": false
}
[dev] [wrangler:info] GET /api/comments 200 OK (76ms)
[dev] [2025-11-12T04:34:01.003Z] [DEBUG][077vz9kj] [Middleware] Outgoing response
Context: {
  "requestId": "077vz9kjmhvi9kmi",
  "status": 405,
  "statusText": "Method Not Allowed",
  "headers": {
    "allow": "POST",
    "content-type": "application/json"
  }
}
[2025-11-12T04:34:01.003Z] [DEBUG][077vz9kj] [Middleware] Processing path
Context: {
  "requestId": "077vz9kjmhvi9kmi",
  "path": "/api/csp-report"
}
[2025-11-12T04:34:01.003Z] [INFO][077vz9kj] GET /api/csp-report -> 405 (1ms)
Context: {
  "requestId": "077vz9kjmhvi9kmi",
  "duration": 1,
  "status": 405
}
[2025-11-12T04:34:01.004Z] [INFO][rmkslcii] GET /api/comments/performance
Context: {
  "requestId": "rmkslciimhvi9kmk",
  "endpoint": "/api/comments/performance",
  "method": "GET"
}
[dev] [2025-11-12T04:34:01.004Z] [DEBUG][rmkslcii] [Middleware] Session ID from cookie
Context: {
  "requestId": "rmkslciimhvi9kmk",
  "present": false
}
[dev] [wrangler:info] GET /api/csp-report 405 Method Not Allowed (54ms)
[2025-11-12T04:34:01.006Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/comments/performance',
    method: 'GET',
    action: 'comments_performance'
  }
}
[2025-11-12T04:34:01.007Z] [DEBUG][rmkslcii] [Middleware] Outgoing response
Context: {
  "requestId": "rmkslciimhvi9kmk",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[dev] [2025-11-12T04:34:01.007Z] [DEBUG][rmkslcii] [Middleware] Processing path
Context: {
  "requestId": "rmkslciimhvi9kmk",
  "path": "/api/comments/performance"
}
[2025-11-12T04:34:01.007Z] [INFO][rmkslcii] GET /api/comments/performance -> 200 (3ms)
Context: {
  "requestId": "rmkslciimhvi9kmk",
  "duration": 3,
  "status": 200
}
[wrangler:info] GET /api/comments/performance 200 OK (77ms)
[dev] [2025-11-12T04:34:01.051Z] [INFO][bcrh7uae] GET /api/comments/performance
Context: {
  "requestId": "bcrh7uaemhvi9knv",
  "endpoint": "/api/comments/performance",
  "method": "GET"
}
[2025-11-12T04:34:01.051Z] [DEBUG][bcrh7uae] [Middleware] Session ID from cookie
Context: {
  "requestId": "bcrh7uaemhvi9knv",
  "present": false
}
[dev] [2025-11-12T04:34:01.055Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/comments/performance',
    method: 'GET',
    action: 'comments_performance'
  }
}
[dev] [2025-11-12T04:34:01.057Z] [DEBUG][bcrh7uae] [Middleware] Outgoing response
Context: {
  "requestId": "bcrh7uaemhvi9knv",
  "status": 400,
  "statusText": "Bad Request",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:01.057Z] [DEBUG][bcrh7uae] [Middleware] Processing path
Context: {
  "requestId": "bcrh7uaemhvi9knv",
  "path": "/api/comments/performance"
}
[2025-11-12T04:34:01.057Z] [INFO][bcrh7uae] GET /api/comments/performance -> 400 (6ms)
Context: {
  "requestId": "bcrh7uaemhvi9knv",
  "duration": 6,
  "status": 400
}
[wrangler:info] GET /api/comments/performance 400 Bad Request (12ms)
[dev] [2025-11-12T04:34:01.061Z] [INFO][taizaak6] GET /api/ai-image/jobs
Context: {
  "requestId": "taizaak6mhvi9ko5",
  "endpoint": "/api/ai-image/jobs",
  "method": "GET"
}
[2025-11-12T04:34:01.061Z] [DEBUG][taizaak6] [Middleware] Session ID from cookie
Context: {
  "requestId": "taizaak6mhvi9ko5",
  "present": false
}
[2025-11-12T04:34:01.061Z] [DEBUG][taizaak6] [Middleware] Outgoing response
Context: {
  "requestId": "taizaak6mhvi9ko5",
  "status": 405,
  "statusText": "Method Not Allowed",
  "headers": {
    "allow": "POST",
    "content-type": "application/json"
  }
}
[2025-11-12T04:34:01.061Z] [DEBUG][taizaak6] [Middleware] Processing path
Context: {
  "requestId": "taizaak6mhvi9ko5",
  "path": "/api/ai-image/jobs"
}
[2025-11-12T04:34:01.061Z] [INFO][taizaak6] GET /api/ai-image/jobs -> 405
Context: {
  "requestId": "taizaak6mhvi9ko5",
  "duration": 0,
  "status": 405
}
 âœ“ |integration| tests/integration/api/comments-performance.test.ts > /api/comments/performance (integration) > returns status payload without auth 190ms
 âœ“ |integration| tests/integration/api/comments-performance.test.ts > /api/comments/performance (integration) > rejects paginated mode without postId 16ms
[dev] [2025-11-12T04:34:01.063Z] [INFO][5f1rfsgp] POST /api/comments/create
Context: {
  "requestId": "5f1rfsgpmhvi9ko7",
  "endpoint": "/api/comments/create",
  "method": "POST"
}
[dev] [2025-11-12T04:34:01.063Z] [DEBUG][5f1rfsgp] [Middleware] Session ID from cookie
Context: {
  "requestId": "5f1rfsgpmhvi9ko7",
  "present": false
}
[dev] [2025-11-12T04:34:01.064Z] [INFO] SECURITY_EVENT {
  timestamp: {},
  resource: 'security',
  ipAddress: '::1',
  type: 'SUSPICIOUS_ACTIVITY',
  details: {
    reason: 'csrf_token_mismatch',
    endpoint: '/api/comments/create',
    hasHeader: false,
    hasCookie: false
  }
}
[dev] [2025-11-12T04:34:01.064Z] [DEBUG][5f1rfsgp] [Middleware] Outgoing response
Context: {
  "requestId": "5f1rfsgpmhvi9ko7",
  "status": 403,
  "statusText": "Forbidden",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:01.064Z] [DEBUG][5f1rfsgp] [Middleware] Processing path
Context: {
  "requestId": "5f1rfsgpmhvi9ko7",
  "path": "/api/comments/create"
}
[2025-11-12T04:34:01.064Z] [INFO][5f1rfsgp] POST /api/comments/create -> 403 (1ms)
Context: {
  "requestId": "5f1rfsgpmhvi9ko7",
  "duration": 1,
  "status": 403
}
[dev] [wrangler:info] GET /api/ai-image/jobs 405 Method Not Allowed (9ms)
[dev] [wrangler:info] POST /api/comments/create 403 Forbidden (13ms)
[2025-11-12T04:34:01.066Z] [INFO][pggdnsz2] POST /api/test/seed-suite-v2
Context: {
  "requestId": "pggdnsz2mhvi9koa",
  "endpoint": "/api/test/seed-suite-v2",
  "method": "POST"
}
[2025-11-12T04:34:01.066Z] [DEBUG][pggdnsz2] [Middleware] Session ID from cookie
Context: {
  "requestId": "pggdnsz2mhvi9koa",
  "present": false
}
 âœ“ |integration| tests/integration/comments-api.test.ts > Comments API (edge) > GET /api/comments should succeed for entity 192ms
 âœ“ |integration| tests/integration/ai-image-enhancer.test.ts > AI Image Enhancer API + R2 Proxy (Integration) > GET /api/ai-image/jobs -> 405 with Allow: POST 25ms
[dev] [2025-11-12T04:34:01.174Z] [INFO][at37477t] GET /api/ai-image/jobs/placeholder/cancel
Context: {
  "requestId": "at37477tmhvi9kra",
  "endpoint": "/api/ai-image/jobs/placeholder/cancel",
  "method": "GET"
}
[dev] [2025-11-12T04:34:01.174Z] [DEBUG][at37477t] [Middleware] Session ID from cookie
Context: {
  "requestId": "at37477tmhvi9kra",
  "present": false
}
[2025-11-12T04:34:01.174Z] [DEBUG][at37477t] [Middleware] Outgoing response
Context: {
  "requestId": "at37477tmhvi9kra",
  "status": 405,
  "statusText": "Method Not Allowed",
  "headers": {
    "allow": "POST",
    "content-type": "application/json"
  }
}
[2025-11-12T04:34:01.174Z] [DEBUG][at37477t] [Middleware] Processing path
Context: {
  "requestId": "at37477tmhvi9kra",
  "path": "/api/ai-image/jobs/placeholder/cancel"
}
[2025-11-12T04:34:01.174Z] [INFO][at37477t] GET /api/ai-image/jobs/placeholder/cancel -> 405
Context: {
  "requestId": "at37477tmhvi9kra",
  "duration": 0,
  "status": 405
}
[dev] [wrangler:info] GET /api/ai-image/jobs/placeholder/cancel 405 Method Not Allowed (108ms)
 âœ“ |integration| tests/integration/ai-image-enhancer.test.ts > AI Image Enhancer API + R2 Proxy (Integration) > GET /api/ai-image/jobs/{id}/cancel -> 405 with Allow: POST 110ms
[dev] [2025-11-12T04:34:01.291Z] [INFO][u1w6kvdr] GET /
Context: {
  "requestId": "u1w6kvdrmhvi9kuj",
  "endpoint": "/",
  "method": "GET"
}
[dev] [2025-11-12T04:34:01.292Z] [DEBUG][u1w6kvdr] [Middleware] Session splash gate -> set session_welcome_seen cookie
Context: {
  "requestId": "u1w6kvdrmhvi9kuj"
}
[dev] [2025-11-12T04:34:01.292Z] [DEBUG][u1w6kvdr] [Middleware] First visible visit this session -> redirect to welcome
Context: {
  "requestId": "u1w6kvdrmhvi9kuj",
  "location": "/welcome?next=%2F"
}
[dev] [2025-11-12T04:34:01.293Z] [INFO][pnjvf9ww] POST /api/comments/create
Context: {
  "requestId": "pnjvf9wwmhvi9kul",
  "endpoint": "/api/comments/create",
  "method": "POST"
}
[2025-11-12T04:34:01.293Z] [DEBUG][pnjvf9ww] [Middleware] Session ID from cookie
Context: {
  "requestId": "pnjvf9wwmhvi9kul",
  "present": false
}
[dev] [2025-11-12T04:34:01.295Z] [INFO][h1pv3zg3] GET /
Context: {
  "requestId": "h1pv3zg3mhvi9kun",
  "endpoint": "/",
  "method": "GET"
}
[dev] [2025-11-12T04:34:01.296Z] [DEBUG][h1pv3zg3] [Middleware] Session splash gate -> set session_welcome_seen cookie
Context: {
  "requestId": "h1pv3zg3mhvi9kun"
}
[dev] [2025-11-12T04:34:01.296Z] [DEBUG][h1pv3zg3] [Middleware] First visible visit this session -> redirect to welcome
Context: {
  "requestId": "h1pv3zg3mhvi9kun",
  "location": "/welcome?next=%2F"
}
[dev] [2025-11-12T04:34:01.296Z] [INFO][2qe0zoce] GET /
Context: {
  "requestId": "2qe0zocemhvi9kuo",
  "endpoint": "/",
  "method": "GET"
}
[dev] [2025-11-12T04:34:01.296Z] [DEBUG][2qe0zoce] [Middleware] Session splash gate -> set session_welcome_seen cookie
Context: {
  "requestId": "2qe0zocemhvi9kuo"
}
[2025-11-12T04:34:01.296Z] [DEBUG][2qe0zoce] [Middleware] First visible visit this session -> redirect to welcome
Context: {
  "requestId": "2qe0zocemhvi9kuo",
  "location": "/welcome?next=%2F"
}
[dev] [2025-11-12T04:34:01.308Z] [INFO][mynni6pe] GET /blog/ki-als-kollege
Context: {
  "requestId": "mynni6pemhvi9kv0",
  "endpoint": "/blog/ki-als-kollege",
  "method": "GET"
}
[dev] [2025-11-12T04:34:01.308Z] [DEBUG][mynni6pe] [Middleware] Session ID from cookie
Context: {
  "requestId": "mynni6pemhvi9kv0",
  "present": false
}
[dev] [wrangler:info] GET / 302 Found (229ms)
[dev] [wrangler:info] GET / 302 Found (201ms)
[dev] [wrangler:info] GET / 302 Found (215ms)
[dev] [2025-11-12T04:34:01.374Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/comments/create',
    method: 'POST',
    action: 'comment_create'
  }
}
 Ã— |integration| tests/integration/comments-api.test.ts > Comments API (edge) > POST /api/comments/create should reject without CSRF (403) 35ms
   â†’ expected 'forbidden' to be 'csrf_error' // Object.is equality
 âœ“ |integration| tests/integration/comments-api.test.ts > Comments API (edge) > POST /api/comments/create should create comment with valid CSRF (201) 307ms
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:01.375Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: {
      reason: 'unauthenticated_access',
      endpoint: '/api/comments/create'
    }
  }
[dev] [2025-11-12T04:34:01.375Z] [DEBUG][pnjvf9ww] [Middleware] Outgoing response
Context: {
  "requestId": "pnjvf9wwmhvi9kul",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:01.376Z] [DEBUG][pnjvf9ww] [Middleware] Processing path
Context: {
  "requestId": "pnjvf9wwmhvi9kul",
  "path": "/api/comments/create"
}
[2025-11-12T04:34:01.376Z] [INFO][pnjvf9ww] POST /api/comments/create -> 401 (83ms)
Context: {
  "requestId": "pnjvf9wwmhvi9kul",
  "duration": 83,
  "status": 401
}
[dev] [wrangler:info] POST /api/comments/create 401 Unauthorized (301ms)
[dev] [2025-11-12T04:34:01.478Z] [INFO][ystx5kcy] POST /api/ai-image/jobs
Context: {
  "requestId": "ystx5kcymhvi9kzq",
  "endpoint": "/api/ai-image/jobs",
  "method": "POST"
}
[dev] [2025-11-12T04:34:01.479Z] [DEBUG][ystx5kcy] [Middleware] Session ID from cookie
Context: {
  "requestId": "ystx5kcymhvi9kzq",
  "present": false
}
[dev] [2025-11-12T04:34:01.482Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: { endpoint: '/api/ai-image/jobs', method: 'POST' }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1mDatabase operation failed: D1_ERROR: no such table: ai_jobs: SQLITE_ERROR[0m
[dev] [2025-11-12T04:34:01.502Z] [DEBUG][ystx5kcy] [Middleware] Outgoing response
Context: {
  "requestId": "ystx5kcymhvi9kzq",
  "status": 500,
  "statusText": "Internal Server Error",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-astro-reroute": "no",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:01.502Z] [DEBUG][ystx5kcy] [Middleware] Processing path
Context: {
  "requestId": "ystx5kcymhvi9kzq",
  "path": "/api/ai-image/jobs"
}
[dev] [2025-11-12T04:34:01.502Z] [INFO][ystx5kcy] POST /api/ai-image/jobs -> 500 (24ms)
Context: {
  "requestId": "ystx5kcymhvi9kzq",
  "duration": 24,
  "status": 500
}
[dev] [wrangler:info] POST /api/ai-image/jobs 500 Internal Server Error (323ms)
[dev] [2025-11-12T04:34:01.594Z] [INFO][o1lyhhgy] POST /api/comments/create
Context: {
  "requestId": "o1lyhhgymhvi9l2y",
  "endpoint": "/api/comments/create",
  "method": "POST"
}
[dev] [2025-11-12T04:34:01.594Z] [DEBUG][o1lyhhgy] [Middleware] Session ID from cookie
Context: {
  "requestId": "o1lyhhgymhvi9l2y",
  "present": false
}
[dev] [2025-11-12T04:34:01.595Z] [INFO][vucpemyo] GET /welcome
Context: {
  "requestId": "vucpemyomhvi9l2z",
  "endpoint": "/welcome",
  "method": "GET"
}
[dev] [2025-11-12T04:34:01.596Z] [DEBUG][vucpemyo] [Middleware] Session ID from cookie
Context: {
  "requestId": "vucpemyomhvi9l2z",
  "present": false
}
[dev] [2025-11-12T04:34:01.603Z] [DEBUG][vucpemyo] [Middleware] Outgoing response
Context: {
  "requestId": "vucpemyomhvi9l2z",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "text/html",
    "x-astro-route-type": "page"
  }
}
[dev] [2025-11-12T04:34:01.603Z] [DEBUG][vucpemyo] [Middleware] Processing path
Context: {
  "requestId": "vucpemyomhvi9l2z",
  "path": "/welcome"
}
[2025-11-12T04:34:01.603Z] [INFO][vucpemyo] GET /welcome -> 200 (8ms)
Context: {
  "requestId": "vucpemyomhvi9l2z",
  "duration": 8,
  "status": 200
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1mWarning: Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:[0m

  1. You might have mismatching versions of React and the renderer (such as React DOM)
  2. You might be breaking the Rules of Hooks
  3. You might have more than one copy of React in the same app
  See [4mhttps://reactjs.org/link/invalid-hook-call[0m for tips about how to debug and fix this problem.
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1mWarning: Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:[0m

  1. You might have mismatching versions of React and the renderer (such as React DOM)
  2. You might be breaking the Rules of Hooks
  3. You might have more than one copy of React in the same app
  See [4mhttps://reactjs.org/link/invalid-hook-call[0m for tips about how to debug and fix this problem.
[dev] [2025-11-12T04:34:01.606Z] [INFO][58k5wqjz] GET /welcome
Context: {
  "requestId": "58k5wqjzmhvi9l3a",
  "endpoint": "/welcome",
  "method": "GET"
}
[dev] [2025-11-12T04:34:01.606Z] [DEBUG][58k5wqjz] [Middleware] Session ID from cookie
Context: {
  "requestId": "58k5wqjzmhvi9l3a",
  "present": false
}
[dev] [2025-11-12T04:34:01.607Z] [DEBUG][58k5wqjz] [Middleware] Outgoing response
Context: {
  "requestId": "58k5wqjzmhvi9l3a",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "text/html",
    "x-astro-route-type": "page"
  }
}
[dev] [2025-11-12T04:34:01.607Z] [DEBUG][58k5wqjz] [Middleware] Processing path
Context: {
  "requestId": "58k5wqjzmhvi9l3a",
  "path": "/welcome"
}
[dev] [2025-11-12T04:34:01.608Z] [INFO][58k5wqjz] GET /welcome -> 200 (2ms)
Context: {
  "requestId": "58k5wqjzmhvi9l3a",
  "duration": 2,
  "status": 200
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1mWarning: Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:[0m

  1. You might have mismatching versions of React and the renderer (such as React DOM)
  2. You might be breaking the Rules of Hooks
  3. You might have more than one copy of React in the same app
  See [4mhttps://reactjs.org/link/invalid-hook-call[0m for tips about how to debug and fix this problem.
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1mWarning: Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:[0m

  1. You might have mismatching versions of React and the renderer (such as React DOM)
  2. You might be breaking the Rules of Hooks
  3. You might have more than one copy of React in the same app
  See [4mhttps://reactjs.org/link/invalid-hook-call[0m for tips about how to debug and fix this problem.
[dev] [2025-11-12T04:34:01.609Z] [INFO][jnmd0clj] GET /welcome
Context: {
  "requestId": "jnmd0cljmhvi9l3d",
  "endpoint": "/welcome",
  "method": "GET"
}
[2025-11-12T04:34:01.609Z] [DEBUG][jnmd0clj] [Middleware] Session ID from cookie
Context: {
  "requestId": "jnmd0cljmhvi9l3d",
  "present": false
}
[dev] [2025-11-12T04:34:01.610Z] [DEBUG][jnmd0clj] [Middleware] Outgoing response
Context: {
  "requestId": "jnmd0cljmhvi9l3d",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "text/html",
    "x-astro-route-type": "page"
  }
}
[dev] [2025-11-12T04:34:01.610Z] [DEBUG][jnmd0clj] [Middleware] Processing path
Context: {
  "requestId": "jnmd0cljmhvi9l3d",
  "path": "/welcome"
}
[dev] [2025-11-12T04:34:01.610Z] [INFO][jnmd0clj] GET /welcome -> 200 (1ms)
Context: {
  "requestId": "jnmd0cljmhvi9l3d",
  "duration": 1,
  "status": 200
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1mWarning: Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:[0m

  1. You might have mismatching versions of React and the renderer (such as React DOM)
  2. You might be breaking the Rules of Hooks
  3. You might have more than one copy of React in the same app
  See [4mhttps://reactjs.org/link/invalid-hook-call[0m for tips about how to debug and fix this problem.
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1mWarning: Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:[0m

  1. You might have mismatching versions of React and the renderer (such as React DOM)
  2. You might be breaking the Rules of Hooks
  3. You might have more than one copy of React in the same app
  See [4mhttps://reactjs.org/link/invalid-hook-call[0m for tips about how to debug and fix this problem.
 Ã— |integration| tests/integration/ai-image-enhancer.test.ts > AI Image Enhancer API + R2 Proxy (Integration) > POST /api/ai-image/jobs (multipart) -> 202 and success envelope; sets guest_id cookie 336ms
   â†’ expected 500 to be 202 // Object.is equality
[dev] [wrangler:info] GET /welcome 200 OK (232ms)
[dev] [2025-11-12T04:34:01.616Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/comments/create',
    method: 'POST',
    action: 'comment_create'
  }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:01.616Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: {
      reason: 'unauthenticated_access',
      endpoint: '/api/comments/create'
    }
  }
[dev] [2025-11-12T04:34:01.616Z] [DEBUG][o1lyhhgy] [Middleware] Outgoing response
Context: {
  "requestId": "o1lyhhgymhvi9l2y",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:01.616Z] [DEBUG][o1lyhhgy] [Middleware] Processing path
Context: {
  "requestId": "o1lyhhgymhvi9l2y",
  "path": "/api/comments/create"
}
[2025-11-12T04:34:01.616Z] [INFO][o1lyhhgy] POST /api/comments/create -> 401 (22ms)
Context: {
  "requestId": "o1lyhhgymhvi9l2y",
  "duration": 22,
  "status": 401
}
stdout | tests/integration/lead-magnet-api.test.ts > Lead-Magnet-API-Integration
Testserver erreichbar unter http://localhost:8787

[dev] [wrangler:info] GET /welcome 200 OK (231ms)
stdout | tests/integration/dashboard-api.test.ts > Dashboard-API-Integration
Testserver erreichbar unter http://localhost:8787

stdout | tests/integration/newsletter-api.test.ts > Newsletter-API-Integration
Testserver erreichbar unter http://localhost:8787

[dev] [wrangler:info] GET /welcome 200 OK (231ms)
[dev] [wrangler:info] POST /api/comments/create 401 Unauthorized (229ms)
[dev] [2025-11-12T04:34:01.629Z] [INFO][cizyfj54] POST /api/ai-image/jobs
Context: {
  "requestId": "cizyfj54mhvi9l3x",
  "endpoint": "/api/ai-image/jobs",
  "method": "POST"
}
[dev] [2025-11-12T04:34:01.629Z] [DEBUG][cizyfj54] [Middleware] Session ID from cookie
Context: {
  "requestId": "cizyfj54mhvi9l3x",
  "present": false
}
[2025-11-12T04:34:01.629Z] [INFO] SECURITY_EVENT {
  timestamp: {},
  resource: 'security',
  ipAddress: '::1',
  type: 'SUSPICIOUS_ACTIVITY',
  details: {
    reason: 'csrf_token_mismatch',
    endpoint: '/api/ai-image/jobs',
    hasHeader: false,
    hasCookie: false
  }
}
[dev] [2025-11-12T04:34:01.630Z] [DEBUG][cizyfj54] [Middleware] Outgoing response
Context: {
  "requestId": "cizyfj54mhvi9l3x",
  "status": 403,
  "statusText": "Forbidden",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:01.630Z] [DEBUG][cizyfj54] [Middleware] Processing path
Context: {
  "requestId": "cizyfj54mhvi9l3x",
  "path": "/api/ai-image/jobs"
}
[2025-11-12T04:34:01.630Z] [INFO][cizyfj54] POST /api/ai-image/jobs -> 403 (1ms)
Context: {
  "requestId": "cizyfj54mhvi9l3x",
  "duration": 1,
  "status": 403
}
[dev] [wrangler:info] POST /api/ai-image/jobs 403 Forbidden (117ms)
[dev] [2025-11-12T04:34:01.734Z] [INFO][08znb0rp] POST /api/newsletter/subscribe
Context: {
  "requestId": "08znb0rpmhvi9l6u",
  "endpoint": "/api/newsletter/subscribe",
  "method": "POST"
}
[dev] [2025-11-12T04:34:01.735Z] [DEBUG][08znb0rp] [Middleware] Session ID from cookie
Context: {
  "requestId": "08znb0rpmhvi9l6u",
  "present": false
}
[dev] [2025-11-12T04:34:01.736Z] [INFO][111n0wkv] PUT /api/comments/71059f4c8f639e4633d6fc6feb7d360c
Context: {
  "requestId": "111n0wkvmhvi9l6w",
  "endpoint": "/api/comments/71059f4c8f639e4633d6fc6feb7d360c",
  "method": "PUT"
}
[2025-11-12T04:34:01.736Z] [DEBUG][111n0wkv] [Middleware] Session ID from cookie
Context: {
  "requestId": "111n0wkvmhvi9l6w",
  "present": false
}
[dev] [2025-11-12T04:34:01.737Z] [INFO][vezh5wbu] GET /api/dashboard/stats
Context: {
  "requestId": "vezh5wbumhvi9l6x",
  "endpoint": "/api/dashboard/stats",
  "method": "GET"
}
[2025-11-12T04:34:01.737Z] [DEBUG][vezh5wbu] [Middleware] Session ID from cookie
Context: {
  "requestId": "vezh5wbumhvi9l6x",
  "present": false
}
 âœ“ |integration| tests/integration/ai-image-enhancer.test.ts > AI Image Enhancer API + R2 Proxy (Integration) > POST /api/ai-image/jobs without CSRF -> 403 forbidden 123ms
[dev] [2025-11-12T04:34:01.738Z] [INFO][01ja0hn9] POST /api/lead-magnets/download
Context: {
  "requestId": "01ja0hn9mhvi9l6y",
  "endpoint": "/api/lead-magnets/download",
  "method": "POST"
}
[dev] [2025-11-12T04:34:01.738Z] [DEBUG][01ja0hn9] [Middleware] Session ID from cookie
Context: {
  "requestId": "01ja0hn9mhvi9l6y",
  "present": false
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:01.739Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/lead-magnets/download",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "leadMagnetDownload",
      "maxRequests": 10,
      "windowMs": 60000,
      "resetAt": 1762922043137
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/lead-magnets/download",
      "ipAddress": "::1",
      "timestamp": 1762922041739,
      "details": {
        "limiterName": "leadMagnetDownload",
        "maxRequests": 10,
        "windowMs": 60000,
        "resetAt": 1762922043137
      }
    }
  }
[dev] [2025-11-12T04:34:01.740Z] [DEBUG][01ja0hn9] [Middleware] Outgoing response
Context: {
  "requestId": "01ja0hn9mhvi9l6y",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "2",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:01.740Z] [DEBUG][01ja0hn9] [Middleware] Processing path
Context: {
  "requestId": "01ja0hn9mhvi9l6y",
  "path": "/api/lead-magnets/download"
}
[dev] [2025-11-12T04:34:01.740Z] [INFO][01ja0hn9] POST /api/lead-magnets/download -> 429 (2ms)
Context: {
  "requestId": "01ja0hn9mhvi9l6y",
  "duration": 2,
  "status": 429
}
[dev] [2025-11-12T04:34:01.747Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: { endpoint: '/api/newsletter/subscribe', method: 'POST' }
}
[dev] [wrangler:info] POST /api/lead-magnets/download 429 Too Many Requests (124ms)
[2025-11-12T04:34:01.747Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/comments/71059f4c8f639e4633d6fc6feb7d360c',
    method: 'PUT',
    action: 'comment_update'
  }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:01.747Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: {
      reason: 'unauthenticated_access',
      endpoint: '/api/comments/71059f4c8f639e4633d6fc6feb7d360c'
    }
  }
[dev] [2025-11-12T04:34:01.747Z] [DEBUG][111n0wkv] [Middleware] Outgoing response
Context: {
  "requestId": "111n0wkvmhvi9l6w",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[dev] [2025-11-12T04:34:01.747Z] [DEBUG][111n0wkv] [Middleware] Processing path
Context: {
  "requestId": "111n0wkvmhvi9l6w",
  "path": "/api/comments/71059f4c8f639e4633d6fc6feb7d360c"
}
[2025-11-12T04:34:01.747Z] [INFO][111n0wkv] PUT /api/comments/71059f4c8f639e4633d6fc6feb7d360c -> 401 (11ms)
Context: {
  "requestId": "111n0wkvmhvi9l6w",
  "duration": 11,
  "status": 401
}
[2025-11-12T04:34:01.748Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/dashboard/stats',
    method: 'GET',
    action: 'dashboard_stats_accessed'
  }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:01.748Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: {
      reason: 'unauthenticated_access',
      endpoint: '/api/dashboard/stats'
    }
  }
[dev] [2025-11-12T04:34:01.748Z] [DEBUG][vezh5wbu] [Middleware] Outgoing response
Context: {
  "requestId": "vezh5wbumhvi9l6x",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:01.748Z] [DEBUG][vezh5wbu] [Middleware] Processing path
Context: {
  "requestId": "vezh5wbumhvi9l6x",
  "path": "/api/dashboard/stats"
}
[2025-11-12T04:34:01.748Z] [INFO][vezh5wbu] GET /api/dashboard/stats -> 401 (11ms)
Context: {
  "requestId": "vezh5wbumhvi9l6x",
  "duration": 11,
  "status": 401
}
[2025-11-12T04:34:01.748Z] [INFO] SECURITY_EVENT {
  timestamp: {},
  resource: 'security',
  type: 'USER_EVENT',
  details: {
    action: 'newsletter_pending_subscription_created',
    email: 'test@example.com',
    tokenHash: 'M45nQLJP...',
    source: 'website'
  }
}
[2025-11-12T04:34:01.748Z] [INFO] Sending confirmation email {
  timestamp: {},
  resource: 'newsletter-subscribe',
  metadata: {
    email: 'test@example.com',
    confirmationUrl: 'http://localhost:8787/newsletter/confirm?token=M45nQLJPC2kskL8GVuWt9pW91Tq9J1wMolbd2mvdLMvFEZ3BxxnfRfkOGP5H0vLTmhvi9l78&email=test%40example.com'
  }
}
[2025-11-12T04:34:01.749Z] [INFO] Email content generated for confirmation {
  timestamp: {},
  resource: 'newsletter-subscribe',
  metadata: { email: 'test@example.com', contentLength: 3292 }
}
 âœ“ |integration| tests/integration/comments-api.test.ts > Comments API (edge) > PUT /api/comments/:id should require auth (401) 367ms
[dev] [wrangler:info] GET /api/dashboard/stats 401 Unauthorized (125ms)
[dev] [wrangler:info] PUT /api/comments/71059f4c8f639e4633d6fc6feb7d360c 401 Unauthorized (127ms)
[dev] [2025-11-12T04:34:01.851Z] [INFO] Double opt-in email sent successfully {
  timestamp: {},
  resource: 'newsletter-subscribe',
  metadata: {
    email: 'tes***',
    confirmationUrl: 'http://localhost:8787/newsletter/confirm?token=M45nQLJPC2kskL8GVuWt9pW91Tq9J1wMolbd2mvdLMvFEZ3BxxnfRfkOGP5H0vLTmhvi9l78&email=test%40example.com',
    source: 'website'
  }
}
[dev] [2025-11-12T04:34:01.851Z] [INFO] Newsletter subscription pending - analytics event {
  timestamp: {},
  resource: 'newsletter-subscribe',
  metadata: {
    email: 'tes***',
    source: 'website',
    event: 'newsletter_subscribe_pending'
  }
}
[2025-11-12T04:34:01.851Z] [DEBUG][08znb0rp] [Middleware] Outgoing response
Context: {
  "requestId": "08znb0rpmhvi9l6u",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:01.851Z] [DEBUG][08znb0rp] [Middleware] Processing path
Context: {
  "requestId": "08znb0rpmhvi9l6u",
  "path": "/api/newsletter/subscribe"
}
[dev] [2025-11-12T04:34:01.851Z] [INFO][08znb0rp] POST /api/newsletter/subscribe -> 200 (117ms)
Context: {
  "requestId": "08znb0rpmhvi9l6u",
  "duration": 117,
  "status": 200
}
[dev] [wrangler:info] POST /api/newsletter/subscribe 200 OK (229ms)
[dev] [2025-11-12T04:34:01.854Z] [INFO][rqnwbkbs] POST /api/ai-image/jobs
Context: {
  "requestId": "rqnwbkbsmhvi9la5",
  "endpoint": "/api/ai-image/jobs",
  "method": "POST"
}
[2025-11-12T04:34:01.854Z] [DEBUG][rqnwbkbs] [Middleware] Session ID from cookie
Context: {
  "requestId": "rqnwbkbsmhvi9la5",
  "present": false
}
[dev] [2025-11-12T04:34:01.856Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: { endpoint: '/api/ai-image/jobs', method: 'POST' }
}
 âœ“ |integration| tests/integration/dashboard-api.test.ts > Dashboard-API-Integration > GET /api/dashboard/stats > sollte Dashboard-Statistiken fÃ¼r authentifizierten Benutzer zurÃ¼ckgeben 135ms
 âœ“ |integration| tests/integration/lead-magnet-api.test.ts > Lead-Magnet-API-Integration > POST /api/lead-magnets/download > sollte erfolgreich Lead-Magnet-Download initiieren 137ms
[dev] [2025-11-12T04:34:01.856Z] [DEBUG][rqnwbkbs] [Middleware] Outgoing response
Context: {
  "requestId": "rqnwbkbsmhvi9la5",
  "status": 400,
  "statusText": "Bad Request",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[dev] [2025-11-12T04:34:01.856Z] [DEBUG][rqnwbkbs] [Middleware] Processing path
Context: {
  "requestId": "rqnwbkbsmhvi9la5",
  "path": "/api/ai-image/jobs"
}
[2025-11-12T04:34:01.857Z] [INFO][rqnwbkbs] POST /api/ai-image/jobs -> 400 (3ms)
Context: {
  "requestId": "rqnwbkbsmhvi9la5",
  "duration": 3,
  "status": 400
}
[dev] [wrangler:info] POST /api/ai-image/jobs 400 Bad Request (220ms)
 âœ“ |integration| tests/integration/newsletter-api.test.ts > Newsletter-API-Integration > POST /api/newsletter/subscribe > sollte erfolgreich Newsletter-Abonnement verarbeiten 239ms
 âœ“ |integration| tests/integration/ai-image-enhancer.test.ts > AI Image Enhancer API + R2 Proxy (Integration) > POST /api/ai-image/jobs rejects non-image uploads via magic bytes -> 400 validation_error 224ms
[dev] [2025-11-12T04:34:01.945Z] [INFO][dd4p1qsx] POST /api/lead-magnets/download
Context: {
  "requestId": "dd4p1qsxmhvi9lcp",
  "endpoint": "/api/lead-magnets/download",
  "method": "POST"
}
[dev] [2025-11-12T04:34:01.945Z] [DEBUG][dd4p1qsx] [Middleware] Session ID from cookie
Context: {
  "requestId": "dd4p1qsxmhvi9lcp",
  "present": false
}
[2025-11-12T04:34:01.945Z] [INFO][5mt2zm3n] POST /api/comments/create
Context: {
  "requestId": "5mt2zm3nmhvi9lcp",
  "endpoint": "/api/comments/create",
  "method": "POST"
}
[dev] [2025-11-12T04:34:01.945Z] [DEBUG][5mt2zm3n] [Middleware] Session ID from cookie
Context: {
  "requestId": "5mt2zm3nmhvi9lcp",
  "present": false
}
[dev] [2025-11-12T04:34:01.946Z] [INFO][8stu6b1p] GET /api/dashboard/stats
Context: {
  "requestId": "8stu6b1pmhvi9lcq",
  "endpoint": "/api/dashboard/stats",
  "method": "GET"
}
[2025-11-12T04:34:01.946Z] [DEBUG][8stu6b1p] [Middleware] Session ID from cookie
Context: {
  "requestId": "8stu6b1pmhvi9lcq",
  "present": false
}
[2025-11-12T04:34:01.946Z] [INFO][nh2xm897] POST /api/lead-magnets/download
Context: {
  "requestId": "nh2xm897mhvi9lcq",
  "endpoint": "/api/lead-magnets/download",
  "method": "POST"
}
[2025-11-12T04:34:01.946Z] [DEBUG][nh2xm897] [Middleware] Session ID from cookie
Context: {
  "requestId": "nh2xm897mhvi9lcq",
  "present": false
}
[dev] [2025-11-12T04:34:01.946Z] [INFO][d43g8a2o] POST /api/lead-magnets/download
Context: {
  "requestId": "d43g8a2omhvi9lcq",
  "endpoint": "/api/lead-magnets/download",
  "method": "POST"
}
[2025-11-12T04:34:01.946Z] [DEBUG][d43g8a2o] [Middleware] Session ID from cookie
Context: {
  "requestId": "d43g8a2omhvi9lcq",
  "present": false
}
[2025-11-12T04:34:01.946Z] [INFO][iu42ps0f] POST /api/lead-magnets/download
Context: {
  "requestId": "iu42ps0fmhvi9lcq",
  "endpoint": "/api/lead-magnets/download",
  "method": "POST"
}
[dev] [2025-11-12T04:34:01.946Z] [DEBUG][iu42ps0f] [Middleware] Session ID from cookie
Context: {
  "requestId": "iu42ps0fmhvi9lcq",
  "present": false
}
[2025-11-12T04:34:01.947Z] [INFO][hvnwlcfr] POST /api/lead-magnets/download
Context: {
  "requestId": "hvnwlcfrmhvi9lcr",
  "endpoint": "/api/lead-magnets/download",
  "method": "POST"
}
[2025-11-12T04:34:01.947Z] [DEBUG][hvnwlcfr] [Middleware] Session ID from cookie
Context: {
  "requestId": "hvnwlcfrmhvi9lcr",
  "present": false
}
[dev] [2025-11-12T04:34:01.949Z] [INFO][fgequ5vi] POST /api/lead-magnets/download
Context: {
  "requestId": "fgequ5vimhvi9lct",
  "endpoint": "/api/lead-magnets/download",
  "method": "POST"
}
[dev] [2025-11-12T04:34:01.949Z] [DEBUG][fgequ5vi] [Middleware] Session ID from cookie
Context: {
  "requestId": "fgequ5vimhvi9lct",
  "present": false
}
[dev] [2025-11-12T04:34:01.949Z] [INFO][p6jl8x6a] POST /api/lead-magnets/download
Context: {
  "requestId": "p6jl8x6amhvi9lct",
  "endpoint": "/api/lead-magnets/download",
  "method": "POST"
}
[2025-11-12T04:34:01.949Z] [DEBUG][p6jl8x6a] [Middleware] Session ID from cookie
Context: {
  "requestId": "p6jl8x6amhvi9lct",
  "present": false
}
[2025-11-12T04:34:01.949Z] [INFO][jyy2yuoj] POST /api/lead-magnets/download
Context: {
  "requestId": "jyy2yuojmhvi9lct",
  "endpoint": "/api/lead-magnets/download",
  "method": "POST"
}
[2025-11-12T04:34:01.949Z] [DEBUG][jyy2yuoj] [Middleware] Session ID from cookie
Context: {
  "requestId": "jyy2yuojmhvi9lct",
  "present": false
}
[2025-11-12T04:34:01.950Z] [INFO][ba3mozyb] POST /api/lead-magnets/download
Context: {
  "requestId": "ba3mozybmhvi9lcu",
  "endpoint": "/api/lead-magnets/download",
  "method": "POST"
}
[2025-11-12T04:34:01.950Z] [DEBUG][ba3mozyb] [Middleware] Session ID from cookie
Context: {
  "requestId": "ba3mozybmhvi9lcu",
  "present": false
}
[dev] [2025-11-12T04:34:01.956Z] [INFO][hpx6zs64] POST /api/newsletter/subscribe
Context: {
  "requestId": "hpx6zs64mhvi9ld0",
  "endpoint": "/api/newsletter/subscribe",
  "method": "POST"
}
[dev] [2025-11-12T04:34:01.957Z] [DEBUG][hpx6zs64] [Middleware] Session ID from cookie
Context: {
  "requestId": "hpx6zs64mhvi9ld0",
  "present": false
}
[dev] [2025-11-12T04:34:01.957Z] [INFO][b4ap01xr] POST /api/lead-magnets/download
Context: {
  "requestId": "b4ap01xrmhvi9ld1",
  "endpoint": "/api/lead-magnets/download",
  "method": "POST"
}
[2025-11-12T04:34:01.957Z] [DEBUG][b4ap01xr] [Middleware] Session ID from cookie
Context: {
  "requestId": "b4ap01xrmhvi9ld1",
  "present": false
}
[2025-11-12T04:34:01.957Z] [INFO][cyvoc4l7] POST /api/lead-magnets/download
Context: {
  "requestId": "cyvoc4l7mhvi9ld1",
  "endpoint": "/api/lead-magnets/download",
  "method": "POST"
}
[dev] [2025-11-12T04:34:01.957Z] [DEBUG][cyvoc4l7] [Middleware] Session ID from cookie
Context: {
  "requestId": "cyvoc4l7mhvi9ld1",
  "present": false
}
[dev] [2025-11-12T04:34:01.957Z] [INFO][fkihtesc] POST /api/lead-magnets/download
Context: {
  "requestId": "fkihtescmhvi9ld1",
  "endpoint": "/api/lead-magnets/download",
  "method": "POST"
}
[2025-11-12T04:34:01.957Z] [DEBUG][fkihtesc] [Middleware] Session ID from cookie
Context: {
  "requestId": "fkihtescmhvi9ld1",
  "present": false
}
[2025-11-12T04:34:01.957Z] [INFO][lnat9c60] POST /api/lead-magnets/download
Context: {
  "requestId": "lnat9c60mhvi9ld1",
  "endpoint": "/api/lead-magnets/download",
  "method": "POST"
}
[2025-11-12T04:34:01.958Z] [DEBUG][lnat9c60] [Middleware] Session ID from cookie
Context: {
  "requestId": "lnat9c60mhvi9ld1",
  "present": false
}
[dev] [2025-11-12T04:34:01.958Z] [INFO][3plc27o1] POST /api/lead-magnets/download
Context: {
  "requestId": "3plc27o1mhvi9ld2",
  "endpoint": "/api/lead-magnets/download",
  "method": "POST"
}
[2025-11-12T04:34:01.958Z] [DEBUG][3plc27o1] [Middleware] Session ID from cookie
Context: {
  "requestId": "3plc27o1mhvi9ld2",
  "present": false
}
[dev] [2025-11-12T04:34:01.958Z] [INFO][qi1p09y3] POST /api/lead-magnets/download
Context: {
  "requestId": "qi1p09y3mhvi9ld2",
  "endpoint": "/api/lead-magnets/download",
  "method": "POST"
}
[2025-11-12T04:34:01.958Z] [DEBUG][qi1p09y3] [Middleware] Session ID from cookie
Context: {
  "requestId": "qi1p09y3mhvi9ld2",
  "present": false
}
[2025-11-12T04:34:01.958Z] [INFO][58u7j89u] POST /api/newsletter/subscribe
Context: {
  "requestId": "58u7j89umhvi9ld2",
  "endpoint": "/api/newsletter/subscribe",
  "method": "POST"
}
[2025-11-12T04:34:01.958Z] [DEBUG][58u7j89u] [Middleware] Session ID from cookie
Context: {
  "requestId": "58u7j89umhvi9ld2",
  "present": false
}
[dev] [2025-11-12T04:34:01.962Z] [INFO][kmierbou] POST /api/newsletter/subscribe
Context: {
  "requestId": "kmierboumhvi9ld6",
  "endpoint": "/api/newsletter/subscribe",
  "method": "POST"
}
[dev] [2025-11-12T04:34:01.962Z] [DEBUG][kmierbou] [Middleware] Session ID from cookie
Context: {
  "requestId": "kmierboumhvi9ld6",
  "present": false
}
[dev] [2025-11-12T04:34:01.962Z] [INFO][scyfgjmw] POST /api/newsletter/subscribe
Context: {
  "requestId": "scyfgjmwmhvi9ld6",
  "endpoint": "/api/newsletter/subscribe",
  "method": "POST"
}
[dev] [2025-11-12T04:34:01.962Z] [DEBUG][scyfgjmw] [Middleware] Session ID from cookie
Context: {
  "requestId": "scyfgjmwmhvi9ld6",
  "present": false
}
[dev] [2025-11-12T04:34:01.962Z] [INFO][sj7v884w] POST /api/newsletter/subscribe
Context: {
  "requestId": "sj7v884wmhvi9ld6",
  "endpoint": "/api/newsletter/subscribe",
  "method": "POST"
}
[dev] [2025-11-12T04:34:01.962Z] [DEBUG][sj7v884w] [Middleware] Session ID from cookie
Context: {
  "requestId": "sj7v884wmhvi9ld6",
  "present": false
}
[2025-11-12T04:34:01.962Z] [INFO][2vioxnxh] POST /api/newsletter/subscribe
Context: {
  "requestId": "2vioxnxhmhvi9ld6",
  "endpoint": "/api/newsletter/subscribe",
  "method": "POST"
}
[2025-11-12T04:34:01.962Z] [DEBUG][2vioxnxh] [Middleware] Session ID from cookie
Context: {
  "requestId": "2vioxnxhmhvi9ld6",
  "present": false
}
[dev] [2025-11-12T04:34:01.964Z] [INFO][a9rd09a5] POST /api/newsletter/subscribe
Context: {
  "requestId": "a9rd09a5mhvi9ld8",
  "endpoint": "/api/newsletter/subscribe",
  "method": "POST"
}
[dev] [2025-11-12T04:34:01.964Z] [DEBUG][a9rd09a5] [Middleware] Session ID from cookie
Context: {
  "requestId": "a9rd09a5mhvi9ld8",
  "present": false
}
[dev] [2025-11-12T04:34:01.964Z] [INFO][1w7lkgw4] POST /api/newsletter/subscribe
Context: {
  "requestId": "1w7lkgw4mhvi9ld8",
  "endpoint": "/api/newsletter/subscribe",
  "method": "POST"
}
[dev] [2025-11-12T04:34:01.965Z] [DEBUG][1w7lkgw4] [Middleware] Session ID from cookie
Context: {
  "requestId": "1w7lkgw4mhvi9ld8",
  "present": false
}
[2025-11-12T04:34:01.965Z] [INFO][i2wizxfc] POST /api/newsletter/subscribe
Context: {
  "requestId": "i2wizxfcmhvi9ld9",
  "endpoint": "/api/newsletter/subscribe",
  "method": "POST"
}
[2025-11-12T04:34:01.965Z] [DEBUG][i2wizxfc] [Middleware] Session ID from cookie
Context: {
  "requestId": "i2wizxfcmhvi9ld9",
  "present": false
}
[dev] [2025-11-12T04:34:01.965Z] [INFO][brcxt5yn] POST /api/newsletter/subscribe
Context: {
  "requestId": "brcxt5ynmhvi9ld9",
  "endpoint": "/api/newsletter/subscribe",
  "method": "POST"
}
[dev] [2025-11-12T04:34:01.965Z] [DEBUG][brcxt5yn] [Middleware] Session ID from cookie
Context: {
  "requestId": "brcxt5ynmhvi9ld9",
  "present": false
}
[2025-11-12T04:34:01.965Z] [INFO][fu6ssemw] POST /api/newsletter/subscribe
Context: {
  "requestId": "fu6ssemwmhvi9ld9",
  "endpoint": "/api/newsletter/subscribe",
  "method": "POST"
}
[2025-11-12T04:34:01.965Z] [DEBUG][fu6ssemw] [Middleware] Session ID from cookie
Context: {
  "requestId": "fu6ssemwmhvi9ld9",
  "present": false
}
[2025-11-12T04:34:01.965Z] [INFO][8b0ri8ks] POST /api/newsletter/subscribe
Context: {
  "requestId": "8b0ri8ksmhvi9ld9",
  "endpoint": "/api/newsletter/subscribe",
  "method": "POST"
}
[dev] [2025-11-12T04:34:01.966Z] [DEBUG][8b0ri8ks] [Middleware] Session ID from cookie
Context: {
  "requestId": "8b0ri8ksmhvi9ld9",
  "present": false
}
[dev] [2025-11-12T04:34:01.966Z] [INFO][x6u0gbja] POST /api/newsletter/subscribe
Context: {
  "requestId": "x6u0gbjamhvi9lda",
  "endpoint": "/api/newsletter/subscribe",
  "method": "POST"
}
[dev] [2025-11-12T04:34:01.966Z] [DEBUG][x6u0gbja] [Middleware] Session ID from cookie
Context: {
  "requestId": "x6u0gbjamhvi9lda",
  "present": false
}
[2025-11-12T04:34:01.966Z] [INFO][lq0rrhdm] POST /api/newsletter/subscribe
Context: {
  "requestId": "lq0rrhdmmhvi9lda",
  "endpoint": "/api/newsletter/subscribe",
  "method": "POST"
}
[2025-11-12T04:34:01.966Z] [DEBUG][lq0rrhdm] [Middleware] Session ID from cookie
Context: {
  "requestId": "lq0rrhdmmhvi9lda",
  "present": false
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:01.969Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/lead-magnets/download",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "leadMagnetDownload",
      "maxRequests": 10,
      "windowMs": 60000,
      "resetAt": 1762922043137
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/lead-magnets/download",
      "ipAddress": "::1",
      "timestamp": 1762922041969,
      "details": {
        "limiterName": "leadMagnetDownload",
        "maxRequests": 10,
        "windowMs": 60000,
        "resetAt": 1762922043137
      }
    }
  }
[dev] [2025-11-12T04:34:01.969Z] [DEBUG][ba3mozyb] [Middleware] Outgoing response
Context: {
  "requestId": "ba3mozybmhvi9lcu",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "2",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:01.969Z] [DEBUG][ba3mozyb] [Middleware] Processing path
Context: {
  "requestId": "ba3mozybmhvi9lcu",
  "path": "/api/lead-magnets/download"
}
[2025-11-12T04:34:01.969Z] [INFO][ba3mozyb] POST /api/lead-magnets/download -> 429 (19ms)
Context: {
  "requestId": "ba3mozybmhvi9lcu",
  "duration": 19,
  "status": 429
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:01.969Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/lead-magnets/download",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "leadMagnetDownload",
      "maxRequests": 10,
      "windowMs": 60000,
      "resetAt": 1762922043137
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/lead-magnets/download",
      "ipAddress": "::1",
      "timestamp": 1762922041969,
      "details": {
        "limiterName": "leadMagnetDownload",
        "maxRequests": 10,
        "windowMs": 60000,
        "resetAt": 1762922043137
      }
    }
  }
[dev] [2025-11-12T04:34:01.969Z] [DEBUG][dd4p1qsx] [Middleware] Outgoing response
Context: {
  "requestId": "dd4p1qsxmhvi9lcp",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "2",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:01.970Z] [DEBUG][dd4p1qsx] [Middleware] Processing path
Context: {
  "requestId": "dd4p1qsxmhvi9lcp",
  "path": "/api/lead-magnets/download"
}
[dev] [2025-11-12T04:34:01.970Z] [INFO][dd4p1qsx] POST /api/lead-magnets/download -> 429 (25ms)
Context: {
  "requestId": "dd4p1qsxmhvi9lcp",
  "duration": 25,
  "status": 429
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:01.970Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/lead-magnets/download",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "leadMagnetDownload",
      "maxRequests": 10,
      "windowMs": 60000,
      "resetAt": 1762922043137
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/lead-magnets/download",
      "ipAddress": "::1",
      "timestamp": 1762922041970,
      "details": {
        "limiterName": "leadMagnetDownload",
        "maxRequests": 10,
        "windowMs": 60000,
        "resetAt": 1762922043137
      }
    }
  }
[dev] [2025-11-12T04:34:01.970Z] [DEBUG][nh2xm897] [Middleware] Outgoing response
Context: {
  "requestId": "nh2xm897mhvi9lcq",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "2",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:01.970Z] [DEBUG][nh2xm897] [Middleware] Processing path
Context: {
  "requestId": "nh2xm897mhvi9lcq",
  "path": "/api/lead-magnets/download"
}
[2025-11-12T04:34:01.970Z] [INFO][nh2xm897] POST /api/lead-magnets/download -> 429 (24ms)
Context: {
  "requestId": "nh2xm897mhvi9lcq",
  "duration": 24,
  "status": 429
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:01.970Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/lead-magnets/download",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "leadMagnetDownload",
      "maxRequests": 10,
      "windowMs": 60000,
      "resetAt": 1762922043137
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/lead-magnets/download",
      "ipAddress": "::1",
      "timestamp": 1762922041970,
      "details": {
        "limiterName": "leadMagnetDownload",
        "maxRequests": 10,
        "windowMs": 60000,
        "resetAt": 1762922043137
      }
    }
  }
[dev] [2025-11-12T04:34:01.970Z] [DEBUG][d43g8a2o] [Middleware] Outgoing response
Context: {
  "requestId": "d43g8a2omhvi9lcq",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "2",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:01.970Z] [DEBUG][d43g8a2o] [Middleware] Processing path
Context: {
  "requestId": "d43g8a2omhvi9lcq",
  "path": "/api/lead-magnets/download"
}
[2025-11-12T04:34:01.970Z] [INFO][d43g8a2o] POST /api/lead-magnets/download -> 429 (24ms)
Context: {
  "requestId": "d43g8a2omhvi9lcq",
  "duration": 24,
  "status": 429
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:01.970Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/lead-magnets/download",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "leadMagnetDownload",
      "maxRequests": 10,
      "windowMs": 60000,
      "resetAt": 1762922043137
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/lead-magnets/download",
      "ipAddress": "::1",
      "timestamp": 1762922041970,
      "details": {
        "limiterName": "leadMagnetDownload",
        "maxRequests": 10,
        "windowMs": 60000,
        "resetAt": 1762922043137
      }
    }
  }
[dev] [2025-11-12T04:34:01.970Z] [DEBUG][iu42ps0f] [Middleware] Outgoing response
Context: {
  "requestId": "iu42ps0fmhvi9lcq",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "2",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:01.971Z] [DEBUG][iu42ps0f] [Middleware] Processing path
Context: {
  "requestId": "iu42ps0fmhvi9lcq",
  "path": "/api/lead-magnets/download"
}
[2025-11-12T04:34:01.971Z] [INFO][iu42ps0f] POST /api/lead-magnets/download -> 429 (25ms)
Context: {
  "requestId": "iu42ps0fmhvi9lcq",
  "duration": 25,
  "status": 429
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:01.971Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/lead-magnets/download",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "leadMagnetDownload",
      "maxRequests": 10,
      "windowMs": 60000,
      "resetAt": 1762922043137
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/lead-magnets/download",
      "ipAddress": "::1",
      "timestamp": 1762922041971,
      "details": {
        "limiterName": "leadMagnetDownload",
        "maxRequests": 10,
        "windowMs": 60000,
        "resetAt": 1762922043137
      }
    }
  }
[dev] [2025-11-12T04:34:01.971Z] [DEBUG][hvnwlcfr] [Middleware] Outgoing response
Context: {
  "requestId": "hvnwlcfrmhvi9lcr",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "2",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:01.971Z] [DEBUG][hvnwlcfr] [Middleware] Processing path
Context: {
  "requestId": "hvnwlcfrmhvi9lcr",
  "path": "/api/lead-magnets/download"
}
[dev] [2025-11-12T04:34:01.971Z] [INFO][hvnwlcfr] POST /api/lead-magnets/download -> 429 (24ms)
Context: {
  "requestId": "hvnwlcfrmhvi9lcr",
  "duration": 24,
  "status": 429
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:01.971Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/lead-magnets/download",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "leadMagnetDownload",
      "maxRequests": 10,
      "windowMs": 60000,
      "resetAt": 1762922043137
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/lead-magnets/download",
      "ipAddress": "::1",
      "timestamp": 1762922041971,
      "details": {
        "limiterName": "leadMagnetDownload",
        "maxRequests": 10,
        "windowMs": 60000,
        "resetAt": 1762922043137
      }
    }
  }
[dev] [2025-11-12T04:34:01.972Z] [DEBUG][fgequ5vi] [Middleware] Outgoing response
Context: {
  "requestId": "fgequ5vimhvi9lct",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "2",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:01.972Z] [DEBUG][fgequ5vi] [Middleware] Processing path
Context: {
  "requestId": "fgequ5vimhvi9lct",
  "path": "/api/lead-magnets/download"
}
[2025-11-12T04:34:01.972Z] [INFO][fgequ5vi] POST /api/lead-magnets/download -> 429 (23ms)
Context: {
  "requestId": "fgequ5vimhvi9lct",
  "duration": 23,
  "status": 429
}
[dev] [2025-11-12T04:34:01.972Z] [DEBUG][p6jl8x6a] [Middleware] Outgoing response
Context: {
  "requestId": "p6jl8x6amhvi9lct",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "2",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:01.972Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/lead-magnets/download",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "leadMagnetDownload",
      "maxRequests": 10,
      "windowMs": 60000,
      "resetAt": 1762922043137
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/lead-magnets/download",
      "ipAddress": "::1",
      "timestamp": 1762922041972,
      "details": {
        "limiterName": "leadMagnetDownload",
        "maxRequests": 10,
        "windowMs": 60000,
        "resetAt": 1762922043137
      }
    }
  }
[dev] [2025-11-12T04:34:01.972Z] [DEBUG][p6jl8x6a] [Middleware] Processing path
Context: {
  "requestId": "p6jl8x6amhvi9lct",
  "path": "/api/lead-magnets/download"
}
[2025-11-12T04:34:01.972Z] [INFO][p6jl8x6a] POST /api/lead-magnets/download -> 429 (23ms)
Context: {
  "requestId": "p6jl8x6amhvi9lct",
  "duration": 23,
  "status": 429
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:01.972Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/lead-magnets/download",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "leadMagnetDownload",
      "maxRequests": 10,
      "windowMs": 60000,
      "resetAt": 1762922043137
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/lead-magnets/download",
      "ipAddress": "::1",
      "timestamp": 1762922041972,
      "details": {
        "limiterName": "leadMagnetDownload",
        "maxRequests": 10,
        "windowMs": 60000,
        "resetAt": 1762922043137
      }
    }
  }
[dev] [2025-11-12T04:34:01.972Z] [DEBUG][jyy2yuoj] [Middleware] Outgoing response
Context: {
  "requestId": "jyy2yuojmhvi9lct",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "2",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:01.972Z] [DEBUG][jyy2yuoj] [Middleware] Processing path
Context: {
  "requestId": "jyy2yuojmhvi9lct",
  "path": "/api/lead-magnets/download"
}
[2025-11-12T04:34:01.972Z] [INFO][jyy2yuoj] POST /api/lead-magnets/download -> 429 (23ms)
Context: {
  "requestId": "jyy2yuojmhvi9lct",
  "duration": 23,
  "status": 429
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:01.975Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/lead-magnets/download",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "leadMagnetDownload",
      "maxRequests": 10,
      "windowMs": 60000,
      "resetAt": 1762922043137
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/lead-magnets/download",
      "ipAddress": "::1",
      "timestamp": 1762922041975,
      "details": {
        "limiterName": "leadMagnetDownload",
        "maxRequests": 10,
        "windowMs": 60000,
        "resetAt": 1762922043137
      }
    }
  }
[dev] [2025-11-12T04:34:01.975Z] [DEBUG][b4ap01xr] [Middleware] Outgoing response
Context: {
  "requestId": "b4ap01xrmhvi9ld1",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "2",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:01.975Z] [DEBUG][b4ap01xr] [Middleware] Processing path
Context: {
  "requestId": "b4ap01xrmhvi9ld1",
  "path": "/api/lead-magnets/download"
}
[2025-11-12T04:34:01.975Z] [INFO][b4ap01xr] POST /api/lead-magnets/download -> 429 (18ms)
Context: {
  "requestId": "b4ap01xrmhvi9ld1",
  "duration": 18,
  "status": 429
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:01.975Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/lead-magnets/download",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "leadMagnetDownload",
      "maxRequests": 10,
      "windowMs": 60000,
      "resetAt": 1762922043137
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/lead-magnets/download",
      "ipAddress": "::1",
      "timestamp": 1762922041975,
      "details": {
        "limiterName": "leadMagnetDownload",
        "maxRequests": 10,
        "windowMs": 60000,
        "resetAt": 1762922043137
      }
    }
  }
[dev] [2025-11-12T04:34:01.977Z] [DEBUG][cyvoc4l7] [Middleware] Outgoing response
Context: {
  "requestId": "cyvoc4l7mhvi9ld1",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "2",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:01.977Z] [DEBUG][cyvoc4l7] [Middleware] Processing path
Context: {
  "requestId": "cyvoc4l7mhvi9ld1",
  "path": "/api/lead-magnets/download"
}
[2025-11-12T04:34:01.977Z] [INFO][cyvoc4l7] POST /api/lead-magnets/download -> 429 (20ms)
Context: {
  "requestId": "cyvoc4l7mhvi9ld1",
  "duration": 20,
  "status": 429
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:01.977Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/lead-magnets/download",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "leadMagnetDownload",
      "maxRequests": 10,
      "windowMs": 60000,
      "resetAt": 1762922043137
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/lead-magnets/download",
      "ipAddress": "::1",
      "timestamp": 1762922041977,
      "details": {
        "limiterName": "leadMagnetDownload",
        "maxRequests": 10,
        "windowMs": 60000,
        "resetAt": 1762922043137
      }
    }
  }
[dev] [2025-11-12T04:34:01.977Z] [DEBUG][fkihtesc] [Middleware] Outgoing response
Context: {
  "requestId": "fkihtescmhvi9ld1",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "2",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:01.977Z] [DEBUG][fkihtesc] [Middleware] Processing path
Context: {
  "requestId": "fkihtescmhvi9ld1",
  "path": "/api/lead-magnets/download"
}
[2025-11-12T04:34:01.977Z] [INFO][fkihtesc] POST /api/lead-magnets/download -> 429 (20ms)
Context: {
  "requestId": "fkihtescmhvi9ld1",
  "duration": 20,
  "status": 429
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:01.977Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/lead-magnets/download",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "leadMagnetDownload",
      "maxRequests": 10,
      "windowMs": 60000,
      "resetAt": 1762922043137
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/lead-magnets/download",
      "ipAddress": "::1",
      "timestamp": 1762922041977,
      "details": {
        "limiterName": "leadMagnetDownload",
        "maxRequests": 10,
        "windowMs": 60000,
        "resetAt": 1762922043137
      }
    }
  }
[dev] [2025-11-12T04:34:01.977Z] [DEBUG][lnat9c60] [Middleware] Outgoing response
Context: {
  "requestId": "lnat9c60mhvi9ld1",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "2",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:01.977Z] [DEBUG][lnat9c60] [Middleware] Processing path
Context: {
  "requestId": "lnat9c60mhvi9ld1",
  "path": "/api/lead-magnets/download"
}
[2025-11-12T04:34:01.977Z] [INFO][lnat9c60] POST /api/lead-magnets/download -> 429 (20ms)
Context: {
  "requestId": "lnat9c60mhvi9ld1",
  "duration": 20,
  "status": 429
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:01.977Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/lead-magnets/download",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "leadMagnetDownload",
      "maxRequests": 10,
      "windowMs": 60000,
      "resetAt": 1762922043137
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/lead-magnets/download",
      "ipAddress": "::1",
      "timestamp": 1762922041977,
      "details": {
        "limiterName": "leadMagnetDownload",
        "maxRequests": 10,
        "windowMs": 60000,
        "resetAt": 1762922043137
      }
    }
  }
[dev] [2025-11-12T04:34:01.977Z] [DEBUG][3plc27o1] [Middleware] Outgoing response
Context: {
  "requestId": "3plc27o1mhvi9ld2",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "2",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:01.978Z] [DEBUG][3plc27o1] [Middleware] Processing path
Context: {
  "requestId": "3plc27o1mhvi9ld2",
  "path": "/api/lead-magnets/download"
}
[2025-11-12T04:34:01.978Z] [INFO][3plc27o1] POST /api/lead-magnets/download -> 429 (20ms)
Context: {
  "requestId": "3plc27o1mhvi9ld2",
  "duration": 20,
  "status": 429
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:01.978Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/lead-magnets/download",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "leadMagnetDownload",
      "maxRequests": 10,
      "windowMs": 60000,
      "resetAt": 1762922043137
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/lead-magnets/download",
      "ipAddress": "::1",
      "timestamp": 1762922041978,
      "details": {
        "limiterName": "leadMagnetDownload",
        "maxRequests": 10,
        "windowMs": 60000,
        "resetAt": 1762922043137
      }
    }
  }
[dev] [2025-11-12T04:34:01.982Z] [DEBUG][qi1p09y3] [Middleware] Outgoing response
Context: {
  "requestId": "qi1p09y3mhvi9ld2",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "2",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:01.982Z] [DEBUG][qi1p09y3] [Middleware] Processing path
Context: {
  "requestId": "qi1p09y3mhvi9ld2",
  "path": "/api/lead-magnets/download"
}
[2025-11-12T04:34:01.982Z] [INFO][qi1p09y3] POST /api/lead-magnets/download -> 429 (24ms)
Context: {
  "requestId": "qi1p09y3mhvi9ld2",
  "duration": 24,
  "status": 429
}
[dev] [2025-11-12T04:34:01.993Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/comments/create',
    method: 'POST',
    action: 'comment_create'
  }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:01.993Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: {
      reason: 'unauthenticated_access',
      endpoint: '/api/comments/create'
    }
  }
[dev] [2025-11-12T04:34:01.993Z] [DEBUG][5mt2zm3n] [Middleware] Outgoing response
Context: {
  "requestId": "5mt2zm3nmhvi9lcp",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:01.993Z] [DEBUG][5mt2zm3n] [Middleware] Processing path
Context: {
  "requestId": "5mt2zm3nmhvi9lcp",
  "path": "/api/comments/create"
}
[dev] [2025-11-12T04:34:01.993Z] [INFO][5mt2zm3n] POST /api/comments/create -> 401 (48ms)
Context: {
  "requestId": "5mt2zm3nmhvi9lcp",
  "duration": 48,
  "status": 401
}
[2025-11-12T04:34:01.994Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/dashboard/stats',
    method: 'GET',
    action: 'dashboard_stats_accessed'
  }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:01.994Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: {
      reason: 'unauthenticated_access',
      endpoint: '/api/dashboard/stats'
    }
  }
[dev] [2025-11-12T04:34:01.994Z] [DEBUG][8stu6b1p] [Middleware] Outgoing response
Context: {
  "requestId": "8stu6b1pmhvi9lcq",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:01.994Z] [DEBUG][8stu6b1p] [Middleware] Processing path
Context: {
  "requestId": "8stu6b1pmhvi9lcq",
  "path": "/api/dashboard/stats"
}
[2025-11-12T04:34:01.994Z] [INFO][8stu6b1p] GET /api/dashboard/stats -> 401 (48ms)
Context: {
  "requestId": "8stu6b1pmhvi9lcq",
  "duration": 48,
  "status": 401
}
[dev] [wrangler:info] POST /api/lead-magnets/download 429 Too Many Requests (230ms)
[dev] [wrangler:info] POST /api/lead-magnets/download 429 Too Many Requests (231ms)
[dev] [wrangler:info] POST /api/lead-magnets/download 429 Too Many Requests (233ms)
[2025-11-12T04:34:01.996Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: { endpoint: '/api/newsletter/subscribe', method: 'POST' }
}
[2025-11-12T04:34:01.997Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: { endpoint: '/api/newsletter/subscribe', method: 'POST' }
}
[dev] [wrangler:info] POST /api/lead-magnets/download 429 Too Many Requests (234ms)
[dev] [wrangler:info] POST /api/lead-magnets/download 429 Too Many Requests (233ms)
[wrangler:info] POST /api/lead-magnets/download 429 Too Many Requests (233ms)
[wrangler:info] POST /api/lead-magnets/download 429 Too Many Requests (230ms)
[wrangler:info] POST /api/lead-magnets/download 429 Too Many Requests (232ms)
[dev] [wrangler:info] POST /api/lead-magnets/download 429 Too Many Requests (231ms)
[2025-11-12T04:34:01.997Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: { endpoint: '/api/newsletter/subscribe', method: 'POST' }
}
[2025-11-12T04:34:01.997Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: { endpoint: '/api/newsletter/subscribe', method: 'POST' }
}
[dev] [2025-11-12T04:34:01.997Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: { endpoint: '/api/newsletter/subscribe', method: 'POST' }
}
[2025-11-12T04:34:01.997Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: { endpoint: '/api/newsletter/subscribe', method: 'POST' }
}
[2025-11-12T04:34:01.997Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: { endpoint: '/api/newsletter/subscribe', method: 'POST' }
}
[2025-11-12T04:34:01.997Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: { endpoint: '/api/newsletter/subscribe', method: 'POST' }
}
[dev] [2025-11-12T04:34:01.997Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: { endpoint: '/api/newsletter/subscribe', method: 'POST' }
}
[dev] [2025-11-12T04:34:01.998Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: { endpoint: '/api/newsletter/subscribe', method: 'POST' }
}
[dev] [2025-11-12T04:34:01.998Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: { endpoint: '/api/newsletter/subscribe', method: 'POST' }
}
[2025-11-12T04:34:01.998Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: { endpoint: '/api/newsletter/subscribe', method: 'POST' }
}
[dev] [2025-11-12T04:34:01.998Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: { endpoint: '/api/newsletter/subscribe', method: 'POST' }
}
[dev] [2025-11-12T04:34:01.998Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: { endpoint: '/api/newsletter/subscribe', method: 'POST' }
}
[dev] [wrangler:info] POST /api/lead-magnets/download 429 Too Many Requests (231ms)
[dev] [wrangler:info] POST /api/lead-magnets/download 429 Too Many Requests (231ms)
[wrangler:info] POST /api/lead-magnets/download 429 Too Many Requests (230ms)
[wrangler:info] POST /api/lead-magnets/download 429 Too Many Requests (229ms)
[wrangler:info] POST /api/lead-magnets/download 429 Too Many Requests (229ms)
[wrangler:info] POST /api/lead-magnets/download 429 Too Many Requests (230ms)
[dev] [wrangler:info] GET /api/dashboard/stats 401 Unauthorized (242ms)
[dev] [2025-11-12T04:34:01.999Z] [DEBUG][hpx6zs64] [Middleware] Outgoing response
Context: {
  "requestId": "hpx6zs64mhvi9ld0",
  "status": 400,
  "statusText": "Bad Request",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:01.999Z] [DEBUG][hpx6zs64] [Middleware] Processing path
Context: {
  "requestId": "hpx6zs64mhvi9ld0",
  "path": "/api/newsletter/subscribe"
}
[2025-11-12T04:34:01.999Z] [INFO][hpx6zs64] POST /api/newsletter/subscribe -> 400 (43ms)
Context: {
  "requestId": "hpx6zs64mhvi9ld0",
  "duration": 43,
  "status": 400
}
[dev] [2025-11-12T04:34:02.000Z] [DEBUG][58u7j89u] [Middleware] Outgoing response
Context: {
  "requestId": "58u7j89umhvi9ld2",
  "status": 400,
  "statusText": "Bad Request",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:02.000Z] [DEBUG][58u7j89u] [Middleware] Processing path
Context: {
  "requestId": "58u7j89umhvi9ld2",
  "path": "/api/newsletter/subscribe"
}
[2025-11-12T04:34:02.000Z] [INFO][58u7j89u] POST /api/newsletter/subscribe -> 400 (42ms)
Context: {
  "requestId": "58u7j89umhvi9ld2",
  "duration": 42,
  "status": 400
}
[dev] [2025-11-12T04:34:02.000Z] [DEBUG][kmierbou] [Middleware] Outgoing response
Context: {
  "requestId": "kmierboumhvi9ld6",
  "status": 400,
  "statusText": "Bad Request",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[dev] [2025-11-12T04:34:02.000Z] [DEBUG][kmierbou] [Middleware] Processing path
Context: {
  "requestId": "kmierboumhvi9ld6",
  "path": "/api/newsletter/subscribe"
}
[2025-11-12T04:34:02.000Z] [INFO][kmierbou] POST /api/newsletter/subscribe -> 400 (38ms)
Context: {
  "requestId": "kmierboumhvi9ld6",
  "duration": 38,
  "status": 400
}
[2025-11-12T04:34:02.000Z] [DEBUG][scyfgjmw] [Middleware] Outgoing response
Context: {
  "requestId": "scyfgjmwmhvi9ld6",
  "status": 400,
  "statusText": "Bad Request",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:02.000Z] [DEBUG][scyfgjmw] [Middleware] Processing path
Context: {
  "requestId": "scyfgjmwmhvi9ld6",
  "path": "/api/newsletter/subscribe"
}
[2025-11-12T04:34:02.000Z] [INFO][scyfgjmw] POST /api/newsletter/subscribe -> 400 (38ms)
Context: {
  "requestId": "scyfgjmwmhvi9ld6",
  "duration": 38,
  "status": 400
}
[dev] [2025-11-12T04:34:02.000Z] [DEBUG][sj7v884w] [Middleware] Outgoing response
Context: {
  "requestId": "sj7v884wmhvi9ld6",
  "status": 400,
  "statusText": "Bad Request",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[dev] [2025-11-12T04:34:02.000Z] [DEBUG][sj7v884w] [Middleware] Processing path
Context: {
  "requestId": "sj7v884wmhvi9ld6",
  "path": "/api/newsletter/subscribe"
}
[2025-11-12T04:34:02.000Z] [INFO][sj7v884w] POST /api/newsletter/subscribe -> 400 (38ms)
Context: {
  "requestId": "sj7v884wmhvi9ld6",
  "duration": 38,
  "status": 400
}
[2025-11-12T04:34:02.001Z] [DEBUG][2vioxnxh] [Middleware] Outgoing response
Context: {
  "requestId": "2vioxnxhmhvi9ld6",
  "status": 400,
  "statusText": "Bad Request",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:02.001Z] [DEBUG][2vioxnxh] [Middleware] Processing path
Context: {
  "requestId": "2vioxnxhmhvi9ld6",
  "path": "/api/newsletter/subscribe"
}
[2025-11-12T04:34:02.001Z] [INFO][2vioxnxh] POST /api/newsletter/subscribe -> 400 (39ms)
Context: {
  "requestId": "2vioxnxhmhvi9ld6",
  "duration": 39,
  "status": 400
}
[dev] [2025-11-12T04:34:02.001Z] [DEBUG][a9rd09a5] [Middleware] Outgoing response
Context: {
  "requestId": "a9rd09a5mhvi9ld8",
  "status": 400,
  "statusText": "Bad Request",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:02.001Z] [DEBUG][a9rd09a5] [Middleware] Processing path
Context: {
  "requestId": "a9rd09a5mhvi9ld8",
  "path": "/api/newsletter/subscribe"
}
[2025-11-12T04:34:02.001Z] [INFO][a9rd09a5] POST /api/newsletter/subscribe -> 400 (37ms)
Context: {
  "requestId": "a9rd09a5mhvi9ld8",
  "duration": 37,
  "status": 400
}
[dev] [2025-11-12T04:34:02.001Z] [DEBUG][1w7lkgw4] [Middleware] Outgoing response
Context: {
  "requestId": "1w7lkgw4mhvi9ld8",
  "status": 400,
  "statusText": "Bad Request",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:02.001Z] [DEBUG][1w7lkgw4] [Middleware] Processing path
Context: {
  "requestId": "1w7lkgw4mhvi9ld8",
  "path": "/api/newsletter/subscribe"
}
[2025-11-12T04:34:02.002Z] [INFO][1w7lkgw4] POST /api/newsletter/subscribe -> 400 (38ms)
Context: {
  "requestId": "1w7lkgw4mhvi9ld8",
  "duration": 38,
  "status": 400
}
[2025-11-12T04:34:02.002Z] [DEBUG][i2wizxfc] [Middleware] Outgoing response
Context: {
  "requestId": "i2wizxfcmhvi9ld9",
  "status": 400,
  "statusText": "Bad Request",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[dev] [2025-11-12T04:34:02.002Z] [DEBUG][i2wizxfc] [Middleware] Processing path
Context: {
  "requestId": "i2wizxfcmhvi9ld9",
  "path": "/api/newsletter/subscribe"
}
[2025-11-12T04:34:02.002Z] [INFO][i2wizxfc] POST /api/newsletter/subscribe -> 400 (37ms)
Context: {
  "requestId": "i2wizxfcmhvi9ld9",
  "duration": 37,
  "status": 400
}
[2025-11-12T04:34:02.002Z] [DEBUG][brcxt5yn] [Middleware] Outgoing response
Context: {
  "requestId": "brcxt5ynmhvi9ld9",
  "status": 400,
  "statusText": "Bad Request",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:02.002Z] [DEBUG][brcxt5yn] [Middleware] Processing path
Context: {
  "requestId": "brcxt5ynmhvi9ld9",
  "path": "/api/newsletter/subscribe"
}
[2025-11-12T04:34:02.002Z] [INFO][brcxt5yn] POST /api/newsletter/subscribe -> 400 (37ms)
Context: {
  "requestId": "brcxt5ynmhvi9ld9",
  "duration": 37,
  "status": 400
}
[dev] [2025-11-12T04:34:02.003Z] [DEBUG][fu6ssemw] [Middleware] Outgoing response
Context: {
  "requestId": "fu6ssemwmhvi9ld9",
  "status": 400,
  "statusText": "Bad Request",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[dev] [2025-11-12T04:34:02.003Z] [DEBUG][fu6ssemw] [Middleware] Processing path
Context: {
  "requestId": "fu6ssemwmhvi9ld9",
  "path": "/api/newsletter/subscribe"
}
[2025-11-12T04:34:02.003Z] [INFO][fu6ssemw] POST /api/newsletter/subscribe -> 400 (38ms)
Context: {
  "requestId": "fu6ssemwmhvi9ld9",
  "duration": 38,
  "status": 400
}
[2025-11-12T04:34:02.003Z] [DEBUG][8b0ri8ks] [Middleware] Outgoing response
Context: {
  "requestId": "8b0ri8ksmhvi9ld9",
  "status": 400,
  "statusText": "Bad Request",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:02.003Z] [DEBUG][8b0ri8ks] [Middleware] Processing path
Context: {
  "requestId": "8b0ri8ksmhvi9ld9",
  "path": "/api/newsletter/subscribe"
}
[2025-11-12T04:34:02.003Z] [INFO][8b0ri8ks] POST /api/newsletter/subscribe -> 400 (38ms)
Context: {
  "requestId": "8b0ri8ksmhvi9ld9",
  "duration": 38,
  "status": 400
}
[2025-11-12T04:34:02.004Z] [DEBUG][x6u0gbja] [Middleware] Outgoing response
Context: {
  "requestId": "x6u0gbjamhvi9lda",
  "status": 400,
  "statusText": "Bad Request",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:02.004Z] [DEBUG][x6u0gbja] [Middleware] Processing path
Context: {
  "requestId": "x6u0gbjamhvi9lda",
  "path": "/api/newsletter/subscribe"
}
[2025-11-12T04:34:02.004Z] [INFO][x6u0gbja] POST /api/newsletter/subscribe -> 400 (38ms)
Context: {
  "requestId": "x6u0gbjamhvi9lda",
  "duration": 38,
  "status": 400
}
[2025-11-12T04:34:02.004Z] [DEBUG][lq0rrhdm] [Middleware] Outgoing response
Context: {
  "requestId": "lq0rrhdmmhvi9lda",
  "status": 400,
  "statusText": "Bad Request",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:02.004Z] [DEBUG][lq0rrhdm] [Middleware] Processing path
Context: {
  "requestId": "lq0rrhdmmhvi9lda",
  "path": "/api/newsletter/subscribe"
}
[2025-11-12T04:34:02.004Z] [INFO][lq0rrhdm] POST /api/newsletter/subscribe -> 400 (38ms)
Context: {
  "requestId": "lq0rrhdmmhvi9lda",
  "duration": 38,
  "status": 400
}
[dev] [2025-11-12T04:34:02.011Z] [INFO][kqeqfcus] POST /api/newsletter/subscribe
Context: {
  "requestId": "kqeqfcusmhvi9lej",
  "endpoint": "/api/newsletter/subscribe",
  "method": "POST"
}
[dev] [2025-11-12T04:34:02.012Z] [DEBUG][kqeqfcus] [Middleware] Session ID from cookie
Context: {
  "requestId": "kqeqfcusmhvi9lej",
  "present": false
}
[2025-11-12T04:34:02.012Z] [INFO][tczr7gf6] POST /api/ai-image/jobs
Context: {
  "requestId": "tczr7gf6mhvi9lek",
  "endpoint": "/api/ai-image/jobs",
  "method": "POST"
}
[2025-11-12T04:34:02.012Z] [DEBUG][tczr7gf6] [Middleware] Session ID from cookie
Context: {
  "requestId": "tczr7gf6mhvi9lek",
  "present": false
}
[2025-11-12T04:34:02.013Z] [INFO] SECURITY_EVENT {
  timestamp: {},
  resource: 'security',
  ipAddress: '::1',
  type: 'SUSPICIOUS_ACTIVITY',
  details: {
    reason: 'csrf_token_mismatch',
    endpoint: '/api/ai-image/jobs',
    hasHeader: true,
    hasCookie: true
  }
}
[2025-11-12T04:34:02.013Z] [DEBUG][tczr7gf6] [Middleware] Outgoing response
Context: {
  "requestId": "tczr7gf6mhvi9lek",
  "status": 403,
  "statusText": "Forbidden",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:02.013Z] [DEBUG][tczr7gf6] [Middleware] Processing path
Context: {
  "requestId": "tczr7gf6mhvi9lek",
  "path": "/api/ai-image/jobs"
}
[2025-11-12T04:34:02.013Z] [INFO][tczr7gf6] POST /api/ai-image/jobs -> 403 (1ms)
Context: {
  "requestId": "tczr7gf6mhvi9lek",
  "duration": 1,
  "status": 403
}
[dev] [2025-11-12T04:34:02.018Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: { endpoint: '/api/newsletter/subscribe', method: 'POST' }
}
[dev] [2025-11-12T04:34:02.018Z] [DEBUG][kqeqfcus] [Middleware] Outgoing response
Context: {
  "requestId": "kqeqfcusmhvi9lej",
  "status": 400,
  "statusText": "Bad Request",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[dev] [2025-11-12T04:34:02.018Z] [DEBUG][kqeqfcus] [Middleware] Processing path
Context: {
  "requestId": "kqeqfcusmhvi9lej",
  "path": "/api/newsletter/subscribe"
}
[2025-11-12T04:34:02.018Z] [INFO][kqeqfcus] POST /api/newsletter/subscribe -> 400 (7ms)
Context: {
  "requestId": "kqeqfcusmhvi9lej",
  "duration": 7,
  "status": 400
}
[dev] [wrangler:info] POST /api/comments/create 401 Unauthorized (275ms)
[dev] [wrangler:info] POST /api/newsletter/subscribe 400 Bad Request (166ms)
 âœ“ |integration| tests/integration/dashboard-api.test.ts > Dashboard-API-Integration > GET /api/dashboard/stats > sollte 401 fÃ¼r nicht authentifizierte Anfragen zurÃ¼ckgeben 277ms
[dev] [wrangler:info] POST /api/newsletter/subscribe 400 Bad Request (167ms)
[dev] [wrangler:info] POST /api/newsletter/subscribe 400 Bad Request (163ms)
[dev] [wrangler:info] POST /api/newsletter/subscribe 400 Bad Request (168ms)
[wrangler:info] POST /api/newsletter/subscribe 400 Bad Request (167ms)
[wrangler:info] POST /api/newsletter/subscribe 400 Bad Request (167ms)
[dev] [wrangler:info] POST /api/newsletter/subscribe 400 Bad Request (168ms)
[dev] [wrangler:info] POST /api/newsletter/subscribe 400 Bad Request (168ms)
[wrangler:info] POST /api/newsletter/subscribe 400 Bad Request (166ms)
[wrangler:info] POST /api/newsletter/subscribe 400 Bad Request (166ms)
[dev] [wrangler:info] POST /api/newsletter/subscribe 400 Bad Request (166ms)
[dev] [wrangler:info] POST /api/newsletter/subscribe 400 Bad Request (166ms)
[dev] [wrangler:info] POST /api/newsletter/subscribe 400 Bad Request (166ms)
[dev] [wrangler:info] POST /api/newsletter/subscribe 400 Bad Request (165ms)
[dev] [2025-11-12T04:34:02.037Z] [DEBUG][mynni6pe] [Middleware] Outgoing response
Context: {
  "requestId": "mynni6pemhvi9kv0",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "text/html",
    "x-astro-route-type": "page"
  }
}
[2025-11-12T04:34:02.037Z] [DEBUG][mynni6pe] [Middleware] Processing path
Context: {
  "requestId": "mynni6pemhvi9kv0",
  "path": "/blog/ki-als-kollege"
}
[dev] [2025-11-12T04:34:02.037Z] [INFO][mynni6pe] GET /blog/ki-als-kollege -> 200 (729ms)
Context: {
  "requestId": "mynni6pemhvi9kv0",
  "duration": 729,
  "status": 200
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1mWarning: Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:[0m

  1. You might have mismatching versions of React and the renderer (such as React DOM)
  2. You might be breaking the Rules of Hooks
  3. You might have more than one copy of React in the same app
  See [4mhttps://reactjs.org/link/invalid-hook-call[0m for tips about how to debug and fix this problem.
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1mWarning: Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:[0m

  1. You might have mismatching versions of React and the renderer (such as React DOM)
  2. You might be breaking the Rules of Hooks
  3. You might have more than one copy of React in the same app
  See [4mhttps://reactjs.org/link/invalid-hook-call[0m for tips about how to debug and fix this problem.
[dev] [wrangler:info] POST /api/ai-image/jobs 403 Forbidden (180ms)
[dev] [wrangler:info] POST /api/newsletter/subscribe 400 Bad Request (180ms)
[dev] [wrangler:info] GET /blog/ki-als-kollege 200 OK (885ms)
 âœ“ |integration| tests/integration/routing/blog-i18n-seo-integration.test.ts > Blog i18n & SEO (integration) > DE: category uses /blog/kategorie/, share links have prod origin, single H1, related heading present 967ms
 Ã— |integration| tests/integration/lead-magnet-api.test.ts > Lead-Magnet-API-Integration > POST /api/lead-magnets/download > sollte Rate-Limiting korrekt handhaben 287ms
   â†’ expected undefined to be false // Object.is equality
 âœ“ |integration| tests/integration/ai-image-enhancer.test.ts > AI Image Enhancer API + R2 Proxy (Integration) > POST /api/ai-image/jobs with mismatched CSRF -> 403 forbidden 184ms
 Ã— |integration| tests/integration/newsletter-api.test.ts > Newsletter-API-Integration > POST /api/newsletter/subscribe > sollte Rate-Limiting korrekt handhaben 191ms
   â†’ expected 0 to be greater than 0
[dev] [2025-11-12T04:34:02.254Z] [INFO][v8humpdh] GET /en/blog/ki-als-kollege
Context: {
  "requestId": "v8humpdhmhvi9lla",
  "endpoint": "/en/blog/ki-als-kollege",
  "method": "GET"
}
[dev] [2025-11-12T04:34:02.254Z] [DEBUG][v8humpdh] [Middleware] pref_locale cookie synced to URL locale
Context: {
  "requestId": "v8humpdhmhvi9lla",
  "existingLocale": "en"
}
[2025-11-12T04:34:02.254Z] [DEBUG][v8humpdh] [Middleware] Session ID from cookie
Context: {
  "requestId": "v8humpdhmhvi9lla",
  "present": false
}
[dev] [2025-11-12T04:34:02.254Z] [DEBUG][v8humpdh] [Middleware] Outgoing response
Context: {
  "requestId": "v8humpdhmhvi9lla",
  "status": 302,
  "statusText": "Found",
  "headers": {
    "location": "/blog/ki-als-kollege",
    "x-astro-route-type": "page"
  }
}
[dev] [2025-11-12T04:34:02.255Z] [DEBUG][v8humpdh] [Middleware] Processing path
Context: {
  "requestId": "v8humpdhmhvi9lla",
  "path": "/en/blog/ki-als-kollege"
}
[2025-11-12T04:34:02.255Z] [INFO][v8humpdh] GET /en/blog/ki-als-kollege -> 302 (1ms)
Context: {
  "requestId": "v8humpdhmhvi9lla",
  "duration": 1,
  "status": 302
}
[2025-11-12T04:34:02.255Z] [INFO][9ckxnf9a] DELETE /api/comments/a730d241ce53f3e518cdd01502bd658a
Context: {
  "requestId": "9ckxnf9amhvi9llb",
  "endpoint": "/api/comments/a730d241ce53f3e518cdd01502bd658a",
  "method": "DELETE"
}
[2025-11-12T04:34:02.255Z] [DEBUG][9ckxnf9a] [Middleware] Session ID from cookie
Context: {
  "requestId": "9ckxnf9amhvi9llb",
  "present": false
}
[dev] [2025-11-12T04:34:02.255Z] [INFO][9uflnm3m] GET /api/dashboard/activity
Context: {
  "requestId": "9uflnm3mmhvi9llb",
  "endpoint": "/api/dashboard/activity",
  "method": "GET"
}
[dev] [2025-11-12T04:34:02.256Z] [DEBUG][9uflnm3m] [Middleware] Session ID from cookie
Context: {
  "requestId": "9uflnm3mmhvi9llb",
  "present": false
}
[2025-11-12T04:34:02.256Z] [INFO][12pyv7se] POST /api/lead-magnets/download
Context: {
  "requestId": "12pyv7semhvi9llc",
  "endpoint": "/api/lead-magnets/download",
  "method": "POST"
}
[2025-11-12T04:34:02.256Z] [DEBUG][12pyv7se] [Middleware] Session ID from cookie
Context: {
  "requestId": "12pyv7semhvi9llc",
  "present": false
}
[2025-11-12T04:34:02.256Z] [INFO][phbyyskl] POST /api/newsletter/subscribe
Context: {
  "requestId": "phbyysklmhvi9llc",
  "endpoint": "/api/newsletter/subscribe",
  "method": "POST"
}
[2025-11-12T04:34:02.256Z] [DEBUG][phbyyskl] [Middleware] Session ID from cookie
Context: {
  "requestId": "phbyysklmhvi9llc",
  "present": false
}
[dev] [2025-11-12T04:34:02.258Z] [INFO][ipsiy0k8] POST /api/ai-image/jobs//cancel
Context: {
  "requestId": "ipsiy0k8mhvi9lle",
  "endpoint": "/api/ai-image/jobs//cancel",
  "method": "POST"
}
[dev] [2025-11-12T04:34:02.258Z] [DEBUG][ipsiy0k8] [Middleware] Session ID from cookie
Context: {
  "requestId": "ipsiy0k8mhvi9lle",
  "present": false
}
[dev] [2025-11-12T04:34:02.259Z] [DEBUG][ipsiy0k8] [Middleware] Outgoing response
Context: {
  "requestId": "ipsiy0k8mhvi9lle",
  "status": 404,
  "statusText": "Not Found",
  "headers": {
    "content-type": "text/html",
    "x-astro-reroute": "no",
    "x-astro-route-type": "page"
  }
}
[dev] [2025-11-12T04:34:02.259Z] [DEBUG][ipsiy0k8] [Middleware] Processing path
Context: {
  "requestId": "ipsiy0k8mhvi9lle",
  "path": "/api/ai-image/jobs//cancel"
}
[2025-11-12T04:34:02.259Z] [INFO][ipsiy0k8] POST /api/ai-image/jobs//cancel -> 404 (1ms)
Context: {
  "requestId": "ipsiy0k8mhvi9lle",
  "duration": 1,
  "status": 404
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:02.259Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/newsletter/subscribe",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "newsletterSubscribe",
      "maxRequests": 10,
      "windowMs": 60000,
      "resetAt": 1762922045219
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/newsletter/subscribe",
      "ipAddress": "::1",
      "timestamp": 1762922042259,
      "details": {
        "limiterName": "newsletterSubscribe",
        "maxRequests": 10,
        "windowMs": 60000,
        "resetAt": 1762922045219
      }
    }
  }
[dev] [2025-11-12T04:34:02.260Z] [DEBUG][phbyyskl] [Middleware] Outgoing response
Context: {
  "requestId": "phbyysklmhvi9llc",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "3",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:02.260Z] [DEBUG][phbyyskl] [Middleware] Processing path
Context: {
  "requestId": "phbyysklmhvi9llc",
  "path": "/api/newsletter/subscribe"
}
[2025-11-12T04:34:02.260Z] [INFO][phbyyskl] POST /api/newsletter/subscribe -> 429 (4ms)
Context: {
  "requestId": "phbyysklmhvi9llc",
  "duration": 4,
  "status": 429
}
[dev] [wrangler:info] POST /api/ai-image/jobs//cancel 404 Not Found (202ms)
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:02.260Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/lead-magnets/download",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "leadMagnetDownload",
      "maxRequests": 10,
      "windowMs": 60000,
      "resetAt": 1762922043137
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/lead-magnets/download",
      "ipAddress": "::1",
      "timestamp": 1762922042260,
      "details": {
        "limiterName": "leadMagnetDownload",
        "maxRequests": 10,
        "windowMs": 60000,
        "resetAt": 1762922043137
      }
    }
  }
[dev] [2025-11-12T04:34:02.260Z] [DEBUG][12pyv7se] [Middleware] Outgoing response
Context: {
  "requestId": "12pyv7semhvi9llc",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "1",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:02.260Z] [DEBUG][12pyv7se] [Middleware] Processing path
Context: {
  "requestId": "12pyv7semhvi9llc",
  "path": "/api/lead-magnets/download"
}
[2025-11-12T04:34:02.260Z] [INFO][12pyv7se] POST /api/lead-magnets/download -> 429 (4ms)
Context: {
  "requestId": "12pyv7semhvi9llc",
  "duration": 4,
  "status": 429
}
[dev] [wrangler:info] GET /en/blog/ki-als-kollege 302 Found (141ms)
[dev] [2025-11-12T04:34:02.263Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/comments/a730d241ce53f3e518cdd01502bd658a',
    method: 'DELETE',
    action: 'comment_delete'
  }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:02.263Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: {
      reason: 'unauthenticated_access',
      endpoint: '/api/comments/a730d241ce53f3e518cdd01502bd658a'
    }
  }
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:02.264Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: {
      reason: 'unauthenticated_access',
      endpoint: '/api/dashboard/activity'
    }
  }
[dev] [2025-11-12T04:34:02.263Z] [DEBUG][9ckxnf9a] [Middleware] Outgoing response
Context: {
  "requestId": "9ckxnf9amhvi9llb",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:02.263Z] [DEBUG][9ckxnf9a] [Middleware] Processing path
Context: {
  "requestId": "9ckxnf9amhvi9llb",
  "path": "/api/comments/a730d241ce53f3e518cdd01502bd658a"
}
[2025-11-12T04:34:02.263Z] [INFO][9ckxnf9a] DELETE /api/comments/a730d241ce53f3e518cdd01502bd658a -> 401 (8ms)
Context: {
  "requestId": "9ckxnf9amhvi9llb",
  "duration": 8,
  "status": 401
}
[2025-11-12T04:34:02.263Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/dashboard/activity',
    method: 'GET',
    action: 'activity_feed_accessed'
  }
}
[2025-11-12T04:34:02.264Z] [DEBUG][9uflnm3m] [Middleware] Outgoing response
Context: {
  "requestId": "9uflnm3mmhvi9llb",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:02.264Z] [DEBUG][9uflnm3m] [Middleware] Processing path
Context: {
  "requestId": "9uflnm3mmhvi9llb",
  "path": "/api/dashboard/activity"
}
[2025-11-12T04:34:02.264Z] [INFO][9uflnm3m] GET /api/dashboard/activity -> 401 (9ms)
Context: {
  "requestId": "9uflnm3mmhvi9llb",
  "duration": 9,
  "status": 401
}
 âœ“ |integration| tests/integration/lead-magnet-api.test.ts > Lead-Magnet-API-Integration > POST /api/lead-magnets/download > sollte Validierungsfehler fÃ¼r ungÃ¼ltige E-Mail zurÃ¼ckgeben 222ms
 âœ“ |integration| tests/integration/newsletter-api.test.ts > Newsletter-API-Integration > POST /api/newsletter/subscribe > sollte Validierungsfehler fÃ¼r ungÃ¼ltige E-Mail zurÃ¼ckgeben 215ms
[dev] [wrangler:info] POST /api/newsletter/subscribe 429 Too Many Requests (204ms)
 âœ“ |integration| tests/integration/dashboard-api.test.ts > Dashboard-API-Integration > GET /api/dashboard/activity > sollte AktivitÃ¤tsfeed fÃ¼r authentifizierten Benutzer zurÃ¼ckgeben 235ms
[dev] [wrangler:info] POST /api/lead-magnets/download 429 Too Many Requests (205ms)
 âœ“ |integration| tests/integration/comments-api.test.ts > Comments API (edge) > DELETE /api/comments/:id should require auth (401) 515ms
[dev] [wrangler:info] GET /api/dashboard/activity 401 Unauthorized (213ms)
[dev] [wrangler:info] DELETE /api/comments/a730d241ce53f3e518cdd01502bd658a 401 Unauthorized (213ms)
[dev] [2025-11-12T04:34:02.356Z] [INFO][64gwos4x] GET /api/ai-image/jobs/
Context: {
  "requestId": "64gwos4xmhvi9lo4",
  "endpoint": "/api/ai-image/jobs/",
  "method": "GET"
}
[dev] [2025-11-12T04:34:02.357Z] [DEBUG][64gwos4x] [Middleware] Session ID from cookie
Context: {
  "requestId": "64gwos4xmhvi9lo4",
  "present": false
}
[2025-11-12T04:34:02.357Z] [DEBUG][64gwos4x] [Middleware] Outgoing response
Context: {
  "requestId": "64gwos4xmhvi9lo4",
  "status": 405,
  "statusText": "Method Not Allowed",
  "headers": {
    "allow": "POST",
    "content-type": "application/json"
  }
}
[2025-11-12T04:34:02.357Z] [DEBUG][64gwos4x] [Middleware] Processing path
Context: {
  "requestId": "64gwos4xmhvi9lo4",
  "path": "/api/ai-image/jobs/"
}
[2025-11-12T04:34:02.357Z] [INFO][64gwos4x] GET /api/ai-image/jobs/ -> 405 (1ms)
Context: {
  "requestId": "64gwos4xmhvi9lo4",
  "duration": 1,
  "status": 405
}
[dev] [wrangler:info] GET /api/ai-image/jobs/ 405 Method Not Allowed (96ms)
[dev] [2025-11-12T04:34:02.361Z] [INFO][uqjjk0aa] POST /api/comments/moderate
Context: {
  "requestId": "uqjjk0aamhvi9lo9",
  "endpoint": "/api/comments/moderate",
  "method": "POST"
}
[dev] [2025-11-12T04:34:02.361Z] [DEBUG][uqjjk0aa] [Middleware] Session ID from cookie
Context: {
  "requestId": "uqjjk0aamhvi9lo9",
  "present": false
}
[dev] [2025-11-12T04:34:02.361Z] [DEBUG][uqjjk0aa] [Middleware] Outgoing response
Context: {
  "requestId": "uqjjk0aamhvi9lo9",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json"
  }
}
[2025-11-12T04:34:02.361Z] [DEBUG][uqjjk0aa] [Middleware] Processing path
Context: {
  "requestId": "uqjjk0aamhvi9lo9",
  "path": "/api/comments/moderate"
}
[2025-11-12T04:34:02.361Z] [INFO][uqjjk0aa] POST /api/comments/moderate -> 401
Context: {
  "requestId": "uqjjk0aamhvi9lo9",
  "duration": 0,
  "status": 401
}
[dev] [2025-11-12T04:34:02.362Z] [INFO][f17nfe4d] GET /blog/ki-als-kollege
Context: {
  "requestId": "f17nfe4dmhvi9loa",
  "endpoint": "/blog/ki-als-kollege",
  "method": "GET"
}
[dev] [2025-11-12T04:34:02.362Z] [DEBUG][f17nfe4d] [Middleware] Session ID from cookie
Context: {
  "requestId": "f17nfe4dmhvi9loa",
  "present": false
}
[dev] [2025-11-12T04:34:02.364Z] [DEBUG][f17nfe4d] [Middleware] Outgoing response
Context: {
  "requestId": "f17nfe4dmhvi9loa",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "text/html",
    "x-astro-route-type": "page"
  }
}
[dev] [2025-11-12T04:34:02.364Z] [DEBUG][f17nfe4d] [Middleware] Processing path
Context: {
  "requestId": "f17nfe4dmhvi9loa",
  "path": "/blog/ki-als-kollege"
}
[2025-11-12T04:34:02.364Z] [INFO][f17nfe4d] GET /blog/ki-als-kollege -> 200 (2ms)
Context: {
  "requestId": "f17nfe4dmhvi9loa",
  "duration": 2,
  "status": 200
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1mWarning: Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:[0m

  1. You might have mismatching versions of React and the renderer (such as React DOM)
  2. You might be breaking the Rules of Hooks
  3. You might have more than one copy of React in the same app
  See [4mhttps://reactjs.org/link/invalid-hook-call[0m for tips about how to debug and fix this problem.
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1mWarning: Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:[0m

  1. You might have mismatching versions of React and the renderer (such as React DOM)
  2. You might be breaking the Rules of Hooks
  3. You might have more than one copy of React in the same app
  See [4mhttps://reactjs.org/link/invalid-hook-call[0m for tips about how to debug and fix this problem.
[dev] [2025-11-12T04:34:02.367Z] [INFO][9v6idc0y] POST /api/lead-magnets/download
Context: {
  "requestId": "9v6idc0ymhvi9lof",
  "endpoint": "/api/lead-magnets/download",
  "method": "POST"
}
[dev] [2025-11-12T04:34:02.367Z] [DEBUG][9v6idc0y] [Middleware] Session ID from cookie
Context: {
  "requestId": "9v6idc0ymhvi9lof",
  "present": false
}
[dev] [2025-11-12T04:34:02.368Z] [INFO][j9fzcs2n] POST /api/newsletter/subscribe
Context: {
  "requestId": "j9fzcs2nmhvi9log",
  "endpoint": "/api/newsletter/subscribe",
  "method": "POST"
}
[dev] [2025-11-12T04:34:02.368Z] [DEBUG][j9fzcs2n] [Middleware] Session ID from cookie
Context: {
  "requestId": "j9fzcs2nmhvi9log",
  "present": false
}
[dev] [2025-11-12T04:34:02.368Z] [INFO][5grteqql] GET /api/dashboard/activity
Context: {
  "requestId": "5grteqqlmhvi9log",
  "endpoint": "/api/dashboard/activity",
  "method": "GET"
}
[dev] [2025-11-12T04:34:02.368Z] [DEBUG][5grteqql] [Middleware] Session ID from cookie
Context: {
  "requestId": "5grteqqlmhvi9log",
  "present": false
}
[dev] [wrangler:info] GET /blog/ki-als-kollege 200 OK (106ms)
[dev] [wrangler:info] POST /api/comments/moderate 401 Unauthorized (99ms)
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:02.370Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/lead-magnets/download",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "leadMagnetDownload",
      "maxRequests": 10,
      "windowMs": 60000,
      "resetAt": 1762922043137
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/lead-magnets/download",
      "ipAddress": "::1",
      "timestamp": 1762922042370,
      "details": {
        "limiterName": "leadMagnetDownload",
        "maxRequests": 10,
        "windowMs": 60000,
        "resetAt": 1762922043137
      }
    }
  }
[dev] [2025-11-12T04:34:02.371Z] [DEBUG][9v6idc0y] [Middleware] Outgoing response
Context: {
  "requestId": "9v6idc0ymhvi9lof",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "1",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:02.371Z] [DEBUG][9v6idc0y] [Middleware] Processing path
Context: {
  "requestId": "9v6idc0ymhvi9lof",
  "path": "/api/lead-magnets/download"
}
[2025-11-12T04:34:02.371Z] [INFO][9v6idc0y] POST /api/lead-magnets/download -> 429 (4ms)
Context: {
  "requestId": "9v6idc0ymhvi9lof",
  "duration": 4,
  "status": 429
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:02.371Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/newsletter/subscribe",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "newsletterSubscribe",
      "maxRequests": 10,
      "windowMs": 60000,
      "resetAt": 1762922045219
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/newsletter/subscribe",
      "ipAddress": "::1",
      "timestamp": 1762922042371,
      "details": {
        "limiterName": "newsletterSubscribe",
        "maxRequests": 10,
        "windowMs": 60000,
        "resetAt": 1762922045219
      }
    }
  }
[dev] [2025-11-12T04:34:02.371Z] [DEBUG][j9fzcs2n] [Middleware] Outgoing response
Context: {
  "requestId": "j9fzcs2nmhvi9log",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "3",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:02.371Z] [DEBUG][j9fzcs2n] [Middleware] Processing path
Context: {
  "requestId": "j9fzcs2nmhvi9log",
  "path": "/api/newsletter/subscribe"
}
[2025-11-12T04:34:02.371Z] [INFO][j9fzcs2n] POST /api/newsletter/subscribe -> 429 (3ms)
Context: {
  "requestId": "j9fzcs2nmhvi9log",
  "duration": 3,
  "status": 429
}
[dev] [wrangler:info] POST /api/lead-magnets/download 429 Too Many Requests (112ms)
[dev] [wrangler:info] POST /api/newsletter/subscribe 429 Too Many Requests (111ms)
 âœ“ |integration| tests/integration/comments-api.test.ts > Comments API (edge) > POST /api/comments/moderate should require moderator (401) 109ms
[dev] [2025-11-12T04:34:02.379Z] [DEBUG][pggdnsz2] [Middleware] Outgoing response
Context: {
  "requestId": "pggdnsz2mhvi9koa",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY",
    "x-xss-protection": "1; mode=block"
  }
}
[2025-11-12T04:34:02.379Z] [DEBUG][pggdnsz2] [Middleware] Processing path
Context: {
  "requestId": "pggdnsz2mhvi9koa",
  "path": "/api/test/seed-suite-v2"
}
[2025-11-12T04:34:02.379Z] [INFO][pggdnsz2] POST /api/test/seed-suite-v2 -> 200 (1313ms)
Context: {
  "requestId": "pggdnsz2mhvi9koa",
  "duration": 1313,
  "status": 200
}
[2025-11-12T04:34:02.379Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/dashboard/activity',
    method: 'GET',
    action: 'activity_feed_accessed'
  }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:02.379Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: {
      reason: 'unauthenticated_access',
      endpoint: '/api/dashboard/activity'
    }
  }
[dev] [2025-11-12T04:34:02.379Z] [DEBUG][5grteqql] [Middleware] Outgoing response
Context: {
  "requestId": "5grteqqlmhvi9log",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:02.379Z] [DEBUG][5grteqql] [Middleware] Processing path
Context: {
  "requestId": "5grteqqlmhvi9log",
  "path": "/api/dashboard/activity"
}
[2025-11-12T04:34:02.379Z] [INFO][5grteqql] GET /api/dashboard/activity -> 401 (11ms)
Context: {
  "requestId": "5grteqqlmhvi9log",
  "duration": 11,
  "status": 401
}
[dev] [wrangler:info] GET /api/dashboard/activity 401 Unauthorized (111ms)
[wrangler:info] POST /api/test/seed-suite-v2 200 OK (1317ms)
[dev] [2025-11-12T04:34:02.391Z] [INFO][w4lupbll] GET /api/dashboard/projects
Context: {
  "requestId": "w4lupbllmhvi9lp3",
  "endpoint": "/api/dashboard/projects",
  "method": "GET"
}
[dev] [2025-11-12T04:34:02.391Z] [DEBUG][w4lupbll] [Middleware] Session ID from cookie
Context: {
  "requestId": "w4lupbllmhvi9lp3",
  "present": false
}
[dev] [2025-11-12T04:34:02.392Z] [INFO][f8jcjs3q] GET /api/ai-image/jobs/
Context: {
  "requestId": "f8jcjs3qmhvi9lp4",
  "endpoint": "/api/ai-image/jobs/",
  "method": "GET"
}
[2025-11-12T04:34:02.392Z] [DEBUG][f8jcjs3q] [Middleware] Session ID from cookie
Context: {
  "requestId": "f8jcjs3qmhvi9lp4",
  "present": false
}
[2025-11-12T04:34:02.392Z] [DEBUG][f8jcjs3q] [Middleware] Outgoing response
Context: {
  "requestId": "f8jcjs3qmhvi9lp4",
  "status": 405,
  "statusText": "Method Not Allowed",
  "headers": {
    "allow": "POST",
    "content-type": "application/json"
  }
}
[2025-11-12T04:34:02.392Z] [DEBUG][f8jcjs3q] [Middleware] Processing path
Context: {
  "requestId": "f8jcjs3qmhvi9lp4",
  "path": "/api/ai-image/jobs/"
}
[2025-11-12T04:34:02.392Z] [INFO][f8jcjs3q] GET /api/ai-image/jobs/ -> 405
Context: {
  "requestId": "f8jcjs3qmhvi9lp4",
  "duration": 0,
  "status": 405
}
[2025-11-12T04:34:02.393Z] [INFO][yl5udy5a] POST /api/lead-magnets/download
Context: {
  "requestId": "yl5udy5amhvi9lp5",
  "endpoint": "/api/lead-magnets/download",
  "method": "POST"
}
[2025-11-12T04:34:02.393Z] [DEBUG][yl5udy5a] [Middleware] Session ID from cookie
Context: {
  "requestId": "yl5udy5amhvi9lp5",
  "present": false
}
[2025-11-12T04:34:02.393Z] [INFO][ds3p5t9p] GET /api/newsletter/subscribe
Context: {
  "requestId": "ds3p5t9pmhvi9lp5",
  "endpoint": "/api/newsletter/subscribe",
  "method": "GET"
}
[2025-11-12T04:34:02.393Z] [DEBUG][ds3p5t9p] [Middleware] Session ID from cookie
Context: {
  "requestId": "ds3p5t9pmhvi9lp5",
  "present": false
}
05:34:02 [WARN] [router] No API Route handler exists for the method "GET" for the route "/api/newsletter/subscribe".
Found handlers: "POST"

[2025-11-12T04:34:02.394Z] [DEBUG][ds3p5t9p] [Middleware] Outgoing response
Context: {
  "requestId": "ds3p5t9pmhvi9lp5",
  "status": 404,
  "statusText": "Not Found",
  "headers": "[empty object]"
}
[2025-11-12T04:34:02.394Z] [DEBUG][ds3p5t9p] [Middleware] Processing path
Context: {
  "requestId": "ds3p5t9pmhvi9lp5",
  "path": "/api/newsletter/subscribe"
}
[dev] [2025-11-12T04:34:02.394Z] [INFO][ds3p5t9p] GET /api/newsletter/subscribe -> 404 (1ms)
Context: {
  "requestId": "ds3p5t9pmhvi9lp5",
  "duration": 1,
  "status": 404
}
[dev] [2025-11-12T04:34:02.398Z] [INFO][ypljnfht] GET /api/newsletter/subscribe
Context: {
  "requestId": "ypljnfhtmhvi9lpa",
  "endpoint": "/api/newsletter/subscribe",
  "method": "GET"
}
[2025-11-12T04:34:02.398Z] [DEBUG][ypljnfht] [Middleware] Session ID from cookie
Context: {
  "requestId": "ypljnfhtmhvi9lpa",
  "present": false
}
[2025-11-12T04:34:02.398Z] [DEBUG][ypljnfht] [Middleware] Outgoing response
Context: {
  "requestId": "ypljnfhtmhvi9lpa",
  "status": 404,
  "statusText": "Not Found",
  "headers": {
    "content-type": "text/html",
    "x-astro-reroute": "no",
    "x-astro-route-type": "page"
  }
}
[2025-11-12T04:34:02.398Z] [DEBUG][ypljnfht] [Middleware] Processing path
Context: {
  "requestId": "ypljnfhtmhvi9lpa",
  "path": "/api/newsletter/subscribe"
}
[2025-11-12T04:34:02.398Z] [INFO][ypljnfht] GET /api/newsletter/subscribe -> 404
Context: {
  "requestId": "ypljnfhtmhvi9lpa",
  "duration": 0,
  "status": 404
}
 Ã— |integration| tests/integration/ai-image-enhancer.test.ts > AI Image Enhancer API + R2 Proxy (Integration) > POST /api/ai-image/jobs/{id}/cancel as owner -> 200 success envelope with status=canceled 217ms
   â†’ expected 404 to be 200 // Object.is equality
 Ã— |integration| tests/integration/ai-image-enhancer.test.ts > AI Image Enhancer API + R2 Proxy (Integration) > GET /api/ai-image/jobs/{id} as owner -> 200 success envelope 99ms
   â†’ expected 405 to be 200 // Object.is equality
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:02.400Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/lead-magnets/download",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "leadMagnetDownload",
      "maxRequests": 10,
      "windowMs": 60000,
      "resetAt": 1762922043137
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/lead-magnets/download",
      "ipAddress": "::1",
      "timestamp": 1762922042400,
      "details": {
        "limiterName": "leadMagnetDownload",
        "maxRequests": 10,
        "windowMs": 60000,
        "resetAt": 1762922043137
      }
    }
  }
[dev] [2025-11-12T04:34:02.400Z] [DEBUG][yl5udy5a] [Middleware] Outgoing response
Context: {
  "requestId": "yl5udy5amhvi9lp5",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "1",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:02.400Z] [DEBUG][yl5udy5a] [Middleware] Processing path
Context: {
  "requestId": "yl5udy5amhvi9lp5",
  "path": "/api/lead-magnets/download"
}
[2025-11-12T04:34:02.400Z] [INFO][yl5udy5a] POST /api/lead-magnets/download -> 429 (7ms)
Context: {
  "requestId": "yl5udy5amhvi9lp5",
  "duration": 7,
  "status": 429
}
[dev] [2025-11-12T04:34:02.401Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/dashboard/projects',
    method: 'GET',
    action: 'projects_accessed'
  }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:02.401Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: {
      reason: 'unauthenticated_access',
      endpoint: '/api/dashboard/projects'
    }
  }
[dev] [2025-11-12T04:34:02.401Z] [DEBUG][w4lupbll] [Middleware] Outgoing response
Context: {
  "requestId": "w4lupbllmhvi9lp3",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:02.401Z] [DEBUG][w4lupbll] [Middleware] Processing path
Context: {
  "requestId": "w4lupbllmhvi9lp3",
  "path": "/api/dashboard/projects"
}
[2025-11-12T04:34:02.401Z] [INFO][w4lupbll] GET /api/dashboard/projects -> 401 (10ms)
Context: {
  "requestId": "w4lupbllmhvi9lp3",
  "duration": 10,
  "status": 401
}
[2025-11-12T04:34:02.404Z] [INFO][wjart4qg] POST /api/comments/create
Context: {
  "requestId": "wjart4qgmhvi9lpg",
  "endpoint": "/api/comments/create",
  "method": "POST"
}
[2025-11-12T04:34:02.404Z] [DEBUG][wjart4qg] [Middleware] Session ID from cookie
Context: {
  "requestId": "wjart4qgmhvi9lpg",
  "present": true
}
[2025-11-12T04:34:02.407Z] [DEBUG][wjart4qg] [Middleware] Session validation result
Context: {
  "requestId": "wjart4qgmhvi9lpg",
  "sessionValid": true,
  "userValid": true
}
[dev] [wrangler:info] GET /api/ai-image/jobs/ 405 Method Not Allowed (42ms)
[dev] [wrangler:info] GET /api/newsletter/subscribe 404 Not Found (20ms)
[dev] [wrangler:info] POST /api/lead-magnets/download 429 Too Many Requests (21ms)
[dev] [wrangler:info] GET /api/dashboard/projects 401 Unauthorized (17ms)
[2025-11-12T04:34:02.409Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'e2e-admin-0001',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/comments/create',
    method: 'POST',
    action: 'comment_create'
  }
}
[dev] [2025-11-12T04:34:02.413Z] [DEBUG][wjart4qg] [Middleware] Outgoing response
Context: {
  "requestId": "wjart4qgmhvi9lpg",
  "status": 400,
  "statusText": "Bad Request",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:02.413Z] [DEBUG][wjart4qg] [Middleware] Processing path
Context: {
  "requestId": "wjart4qgmhvi9lpg",
  "path": "/api/comments/create"
}
[2025-11-12T04:34:02.413Z] [INFO][wjart4qg] POST /api/comments/create -> 400 (9ms)
Context: {
  "requestId": "wjart4qgmhvi9lpg",
  "duration": 9,
  "status": 400
}
[dev] [wrangler:info] POST /api/comments/create 400 Bad Request (23ms)
[dev] [2025-11-12T04:34:02.420Z] [INFO][t6ugtpqe] GET /api/dashboard/projects
Context: {
  "requestId": "t6ugtpqemhvi9lpw",
  "endpoint": "/api/dashboard/projects",
  "method": "GET"
}
[dev] [2025-11-12T04:34:02.421Z] [DEBUG][t6ugtpqe] [Middleware] Session ID from cookie
Context: {
  "requestId": "t6ugtpqemhvi9lpw",
  "present": false
}
[2025-11-12T04:34:02.421Z] [INFO][fgywzs99] GET /api/ai-image/jobs/
Context: {
  "requestId": "fgywzs99mhvi9lpx",
  "endpoint": "/api/ai-image/jobs/",
  "method": "GET"
}
[dev] [2025-11-12T04:34:02.422Z] [DEBUG][fgywzs99] [Middleware] Session ID from cookie
Context: {
  "requestId": "fgywzs99mhvi9lpx",
  "present": false
}
[2025-11-12T04:34:02.422Z] [DEBUG][fgywzs99] [Middleware] Outgoing response
Context: {
  "requestId": "fgywzs99mhvi9lpx",
  "status": 405,
  "statusText": "Method Not Allowed",
  "headers": {
    "allow": "POST",
    "content-type": "application/json"
  }
}
[2025-11-12T04:34:02.422Z] [DEBUG][fgywzs99] [Middleware] Processing path
Context: {
  "requestId": "fgywzs99mhvi9lpx",
  "path": "/api/ai-image/jobs/"
}
[dev] [2025-11-12T04:34:02.422Z] [INFO][fgywzs99] GET /api/ai-image/jobs/ -> 405 (1ms)
Context: {
  "requestId": "fgywzs99mhvi9lpx",
  "duration": 1,
  "status": 405
}
[dev] [2025-11-12T04:34:02.423Z] [INFO][u2ovhob6] POST /api/newsletter/subscribe
Context: {
  "requestId": "u2ovhob6mhvi9lpz",
  "endpoint": "/api/newsletter/subscribe",
  "method": "POST"
}
[dev] [2025-11-12T04:34:02.423Z] [DEBUG][u2ovhob6] [Middleware] Session ID from cookie
Context: {
  "requestId": "u2ovhob6mhvi9lpz",
  "present": false
}
[2025-11-12T04:34:02.423Z] [INFO][8ft3lag4] POST /api/lead-magnets/download
Context: {
  "requestId": "8ft3lag4mhvi9lpz",
  "endpoint": "/api/lead-magnets/download",
  "method": "POST"
}
[2025-11-12T04:34:02.423Z] [DEBUG][8ft3lag4] [Middleware] Session ID from cookie
Context: {
  "requestId": "8ft3lag4mhvi9lpz",
  "present": false
}
 Ã— |integration| tests/integration/routing/blog-i18n-seo-integration.test.ts > Blog i18n & SEO (integration) > EN: category uses /en/blog/category/, share links have prod origin, single H1, related heading present 306ms
   â†’ expected 0 to be greater than 0
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:02.424Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/lead-magnets/download",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "leadMagnetDownload",
      "maxRequests": 10,
      "windowMs": 60000,
      "resetAt": 1762922043137
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/lead-magnets/download",
      "ipAddress": "::1",
      "timestamp": 1762922042424,
      "details": {
        "limiterName": "leadMagnetDownload",
        "maxRequests": 10,
        "windowMs": 60000,
        "resetAt": 1762922043137
      }
    }
  }
[dev] [2025-11-12T04:34:02.424Z] [DEBUG][8ft3lag4] [Middleware] Outgoing response
Context: {
  "requestId": "8ft3lag4mhvi9lpz",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "1",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:02.425Z] [DEBUG][8ft3lag4] [Middleware] Processing path
Context: {
  "requestId": "8ft3lag4mhvi9lpz",
  "path": "/api/lead-magnets/download"
}
[2025-11-12T04:34:02.425Z] [INFO][8ft3lag4] POST /api/lead-magnets/download -> 429 (2ms)
Context: {
  "requestId": "8ft3lag4mhvi9lpz",
  "duration": 2,
  "status": 429
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:02.425Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/newsletter/subscribe",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "newsletterSubscribe",
      "maxRequests": 10,
      "windowMs": 60000,
      "resetAt": 1762922045219
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/newsletter/subscribe",
      "ipAddress": "::1",
      "timestamp": 1762922042425,
      "details": {
        "limiterName": "newsletterSubscribe",
        "maxRequests": 10,
        "windowMs": 60000,
        "resetAt": 1762922045219
      }
    }
  }


[31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:02.428Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: {
      reason: 'unauthenticated_access',
      endpoint: '/api/dashboard/projects'
    }
  }
[dev] [2025-11-12T04:34:02.425Z] [DEBUG][u2ovhob6] [Middleware] Outgoing response
Context: {
  "requestId": "u2ovhob6mhvi9lpz",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "3",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:02.425Z] [DEBUG][u2ovhob6] [Middleware] Processing path
Context: {
  "requestId": "u2ovhob6mhvi9lpz",
  "path": "/api/newsletter/subscribe"
}
[2025-11-12T04:34:02.425Z] [INFO][u2ovhob6] POST /api/newsletter/subscribe -> 429 (2ms)
Context: {
  "requestId": "u2ovhob6mhvi9lpz",
  "duration": 2,
  "status": 429
}
[wrangler:info] GET /api/ai-image/jobs/ 405 Method Not Allowed (21ms)
[2025-11-12T04:34:02.428Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/dashboard/projects',
    method: 'GET',
    action: 'projects_accessed'
  }
}
[2025-11-12T04:34:02.428Z] [DEBUG][t6ugtpqe] [Middleware] Outgoing response
Context: {
  "requestId": "t6ugtpqemhvi9lpw",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:02.428Z] [DEBUG][t6ugtpqe] [Middleware] Processing path
Context: {
  "requestId": "t6ugtpqemhvi9lpw",
  "path": "/api/dashboard/projects"
}
[2025-11-12T04:34:02.428Z] [INFO][t6ugtpqe] GET /api/dashboard/projects -> 401 (8ms)
Context: {
  "requestId": "t6ugtpqemhvi9lpw",
  "duration": 8,
  "status": 401
}
[2025-11-12T04:34:02.430Z] [INFO][hn67rksv] GET /api/comments/performance
Context: {
  "requestId": "hn67rksvmhvi9lq6",
  "endpoint": "/api/comments/performance",
  "method": "GET"
}
[2025-11-12T04:34:02.431Z] [DEBUG][hn67rksv] [Middleware] Session ID from cookie
Context: {
  "requestId": "hn67rksvmhvi9lq6",
  "present": false
}
[wrangler:info] POST /api/lead-magnets/download 429 Too Many Requests (21ms)
[wrangler:info] POST /api/newsletter/subscribe 429 Too Many Requests (24ms)
[wrangler:info] GET /api/dashboard/projects 401 Unauthorized (23ms)
[2025-11-12T04:34:02.432Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/comments/performance',
    method: 'GET',
    action: 'comments_performance'
  }
}
[2025-11-12T04:34:02.433Z] [DEBUG][hn67rksv] [Middleware] Outgoing response
Context: {
  "requestId": "hn67rksvmhvi9lq6",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:02.433Z] [DEBUG][hn67rksv] [Middleware] Processing path
Context: {
  "requestId": "hn67rksvmhvi9lq6",
  "path": "/api/comments/performance"
}
[2025-11-12T04:34:02.433Z] [INFO][hn67rksv] GET /api/comments/performance -> 401 (3ms)
Context: {
  "requestId": "hn67rksvmhvi9lq6",
  "duration": 3,
  "status": 401
}
[2025-11-12T04:34:02.435Z] [INFO][p8o9mggh] POST /api/ai-image/jobs//cancel
Context: {
  "requestId": "p8o9mgghmhvi9lqb",
  "endpoint": "/api/ai-image/jobs//cancel",
  "method": "POST"
}
[2025-11-12T04:34:02.435Z] [DEBUG][p8o9mggh] [Middleware] Session ID from cookie
Context: {
  "requestId": "p8o9mgghmhvi9lqb",
  "present": false
}
[dev] [2025-11-12T04:34:02.435Z] [DEBUG][p8o9mggh] [Middleware] Outgoing response
Context: {
  "requestId": "p8o9mgghmhvi9lqb",
  "status": 404,
  "statusText": "Not Found",
  "headers": {
    "content-type": "text/html",
    "x-astro-reroute": "no",
    "x-astro-route-type": "page"
  }
}
[2025-11-12T04:34:02.435Z] [DEBUG][p8o9mggh] [Middleware] Processing path
Context: {
  "requestId": "p8o9mgghmhvi9lqb",
  "path": "/api/ai-image/jobs//cancel"
}
[dev] [2025-11-12T04:34:02.436Z] [INFO][p8o9mggh] POST /api/ai-image/jobs//cancel -> 404 (1ms)
Context: {
  "requestId": "p8o9mgghmhvi9lqb",
  "duration": 1,
  "status": 404
}
[wrangler:info] GET /api/comments/performance 401 Unauthorized (14ms)
[dev] [2025-11-12T04:34:02.439Z] [INFO][v3huew13] GET /api/lead-magnets/download
Context: {
  "requestId": "v3huew13mhvi9lqf",
  "endpoint": "/api/lead-magnets/download",
  "method": "GET"
}
[2025-11-12T04:34:02.439Z] [DEBUG][v3huew13] [Middleware] Session ID from cookie
Context: {
  "requestId": "v3huew13mhvi9lqf",
  "present": false
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:02.440Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/lead-magnets/download",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "leadMagnetDownload",
      "maxRequests": 10,
      "windowMs": 60000,
      "resetAt": 1762922043137
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/lead-magnets/download",
      "ipAddress": "::1",
      "timestamp": 1762922042440,
      "details": {
        "limiterName": "leadMagnetDownload",
        "maxRequests": 10,
        "windowMs": 60000,
        "resetAt": 1762922043137
      }
    }
  }
[dev] [2025-11-12T04:34:02.440Z] [DEBUG][v3huew13] [Middleware] Outgoing response
Context: {
  "requestId": "v3huew13mhvi9lqf",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "1",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:02.440Z] [DEBUG][v3huew13] [Middleware] Processing path
Context: {
  "requestId": "v3huew13mhvi9lqf",
  "path": "/api/lead-magnets/download"
}
[2025-11-12T04:34:02.440Z] [INFO][v3huew13] GET /api/lead-magnets/download -> 429 (1ms)
Context: {
  "requestId": "v3huew13mhvi9lqf",
  "duration": 1,
  "status": 429
}
[dev] [wrangler:info] POST /api/ai-image/jobs//cancel 404 Not Found (9ms)
[dev] [2025-11-12T04:34:02.444Z] [INFO][rf14i8f4] GET /api/dashboard/notifications
Context: {
  "requestId": "rf14i8f4mhvi9lqk",
  "endpoint": "/api/dashboard/notifications",
  "method": "GET"
}
[2025-11-12T04:34:02.444Z] [DEBUG][rf14i8f4] [Middleware] Session ID from cookie
Context: {
  "requestId": "rf14i8f4mhvi9lqk",
  "present": false
}
[2025-11-12T04:34:02.446Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/dashboard/notifications',
    method: 'GET',
    action: 'notifications_accessed'
  }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:02.446Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: {
      reason: 'unauthenticated_access',
      endpoint: '/api/dashboard/notifications'
    }
  }
[dev] [2025-11-12T04:34:02.446Z] [DEBUG][rf14i8f4] [Middleware] Outgoing response
Context: {
  "requestId": "rf14i8f4mhvi9lqk",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:02.446Z] [DEBUG][rf14i8f4] [Middleware] Processing path
Context: {
  "requestId": "rf14i8f4mhvi9lqk",
  "path": "/api/dashboard/notifications"
}
[2025-11-12T04:34:02.446Z] [INFO][rf14i8f4] GET /api/dashboard/notifications -> 401 (2ms)
Context: {
  "requestId": "rf14i8f4mhvi9lqk",
  "duration": 2,
  "status": 401
}
[2025-11-12T04:34:02.448Z] [INFO][nddwf8ip] POST /api/test/seed-suite-v2
Context: {
  "requestId": "nddwf8ipmhvi9lqo",
  "endpoint": "/api/test/seed-suite-v2",
  "method": "POST"
}
[2025-11-12T04:34:02.448Z] [DEBUG][nddwf8ip] [Middleware] Session ID from cookie
Context: {
  "requestId": "nddwf8ipmhvi9lqo",
  "present": false
}
[dev] [wrangler:info] GET /api/lead-magnets/download 429 Too Many Requests (4ms)
[dev] [2025-11-12T04:34:02.449Z] [INFO][qcf9wvty] GET /r2-ai/ai-enhancer/results/guest/-x/nonexistent.png
Context: {
  "requestId": "qcf9wvtymhvi9lqp",
  "endpoint": "/r2-ai/ai-enhancer/results/guest/-x/nonexistent.png",
  "method": "GET"
}
[2025-11-12T04:34:02.450Z] [DEBUG][qcf9wvty] [Middleware] Session ID from cookie
Context: {
  "requestId": "qcf9wvtymhvi9lqp",
  "present": false
}
[R2Proxy][R2AI-1762922042450-0ei58] start {
  url: 'http://localhost:8787/r2-ai/ai-enhancer/results/guest/-x/nonexistent.png',
  key: 'ai-enhancer/results/guest/-x/nonexistent.png'
}
[R2Proxy][R2AI-1762922042450-0ei58] parsed path { category: 'results', pathOwnerType: 'guest', pathOwnerId: '-x' }
[R2Proxy][R2AI-1762922042450-0ei58] owner gate {
  currentOwnerType: 'guest',
  currentOwnerId: 'db77f0c5-51dd-422d-88bd-aaf7e4d70723',
  isOwner: false
}
[dev] [33mâ–² [43;33m[[43;30mWARNING[43;33m][0m [1m[R2Proxy][R2AI-1762922042450-0ei58] forbidden for non-owner[0m
[dev] [2025-11-12T04:34:02.451Z] [DEBUG][qcf9wvty] [Middleware] Outgoing response
Context: {
  "requestId": "qcf9wvtymhvi9lqp",
  "status": 403,
  "statusText": "Forbidden",
  "headers": {
    "content-type": "text/plain;charset=UTF-8"
  }
}
[2025-11-12T04:34:02.451Z] [DEBUG][qcf9wvty] [Middleware] Processing path
Context: {
  "requestId": "qcf9wvtymhvi9lqp",
  "path": "/r2-ai/ai-enhancer/results/guest/-x/nonexistent.png"
}
[2025-11-12T04:34:02.451Z] [INFO][qcf9wvty] GET /r2-ai/ai-enhancer/results/guest/-x/nonexistent.png -> 403 (2ms)
Context: {
  "requestId": "qcf9wvtymhvi9lqp",
  "duration": 2,
  "status": 403
}
[dev] [wrangler:info] GET /api/dashboard/notifications 401 Unauthorized (8ms)
[dev] [2025-11-12T04:34:02.451Z] [INFO][g9v1q9qt] POST /api/newsletter/subscribe
Context: {
  "requestId": "g9v1q9qtmhvi9lqr",
  "endpoint": "/api/newsletter/subscribe",
  "method": "POST"
}
[2025-11-12T04:34:02.452Z] [DEBUG][g9v1q9qt] [Middleware] Session ID from cookie
Context: {
  "requestId": "g9v1q9qtmhvi9lqr",
  "present": false
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:02.453Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/newsletter/subscribe",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "newsletterSubscribe",
      "maxRequests": 10,
      "windowMs": 60000,
      "resetAt": 1762922045219
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/newsletter/subscribe",
      "ipAddress": "::1",
      "timestamp": 1762922042453,
      "details": {
        "limiterName": "newsletterSubscribe",
        "maxRequests": 10,
        "windowMs": 60000,
        "resetAt": 1762922045219
      }
    }
  }
 âœ“ |integration| tests/integration/newsletter-api.test.ts > Newsletter-API-Integration > POST /api/newsletter/subscribe > sollte Validierungsfehler fÃ¼r fehlende E-Mail zurÃ¼ckgeben 115ms
 âœ“ |integration| tests/integration/newsletter-api.test.ts > Newsletter-API-Integration > POST /api/newsletter/subscribe > sollte 405 fÃ¼r GET-Methode zurÃ¼ckgeben 25ms
 âœ“ |integration| tests/integration/newsletter-api.test.ts > Newsletter-API-Integration > POST /api/newsletter/subscribe > sollte CSRF-Schutz korrekt handhaben 36ms
 âœ“ |integration| tests/integration/newsletter-api.test.ts > Newsletter-API-Integration > POST /api/newsletter/subscribe > sollte Security-Headers setzen 16ms
[dev] [2025-11-12T04:34:02.453Z] [DEBUG][g9v1q9qt] [Middleware] Outgoing response
Context: {
  "requestId": "g9v1q9qtmhvi9lqr",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "3",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:02.453Z] [DEBUG][g9v1q9qt] [Middleware] Processing path
Context: {
  "requestId": "g9v1q9qtmhvi9lqr",
  "path": "/api/newsletter/subscribe"
}
[2025-11-12T04:34:02.453Z] [INFO][g9v1q9qt] POST /api/newsletter/subscribe -> 429 (2ms)
Context: {
  "requestId": "g9v1q9qtmhvi9lqr",
  "duration": 2,
  "status": 429
}
[dev] [wrangler:info] GET /r2-ai/ai-enhancer/results/guest/-x/nonexistent.png 403 Forbidden (11ms)
[dev] [wrangler:info] POST /api/newsletter/subscribe 429 Too Many Requests (13ms)
 âœ“ |integration| tests/integration/lead-magnet-api.test.ts > Lead-Magnet-API-Integration > POST /api/lead-magnets/download > sollte Validierungsfehler fÃ¼r fehlende E-Mail zurÃ¼ckgeben 115ms
 âœ“ |integration| tests/integration/lead-magnet-api.test.ts > Lead-Magnet-API-Integration > POST /api/lead-magnets/download > sollte Validierungsfehler fÃ¼r fehlende magnetId zurÃ¼ckgeben 25ms
 âœ“ |integration| tests/integration/lead-magnet-api.test.ts > Lead-Magnet-API-Integration > POST /api/lead-magnets/download > sollte Validierungsfehler fÃ¼r nicht existierende magnetId zurÃ¼ckgeben 31ms
 âœ“ |integration| tests/integration/lead-magnet-api.test.ts > Lead-Magnet-API-Integration > POST /api/lead-magnets/download > sollte 405 fÃ¼r GET-Methode zurÃ¼ckgeben 8ms
 âœ“ |integration| tests/integration/dashboard-api.test.ts > Dashboard-API-Integration > GET /api/dashboard/activity > sollte 401 fÃ¼r nicht authentifizierte Anfragen zurÃ¼ckgeben 117ms
 âœ“ |integration| tests/integration/dashboard-api.test.ts > Dashboard-API-Integration > GET /api/dashboard/projects > sollte Projektliste fÃ¼r authentifizierten Benutzer zurÃ¼ckgeben 22ms
 âœ“ |integration| tests/integration/dashboard-api.test.ts > Dashboard-API-Integration > GET /api/dashboard/projects > sollte 401 fÃ¼r nicht authentifizierte Anfragen zurÃ¼ckgeben 32ms
 âœ“ |integration| tests/integration/dashboard-api.test.ts > Dashboard-API-Integration > GET /api/dashboard/notifications > sollte Benachrichtigungen fÃ¼r authentifizierten Benutzer zurÃ¼ckgeben 14ms
 Ã— |integration| tests/integration/ai-image-enhancer.test.ts > AI Image Enhancer API + R2 Proxy (Integration) > GET /api/ai-image/jobs/{id} without cookie -> 403 forbidden and sets guest_id 43ms
   â†’ expected 405 to be 403 // Object.is equality
 Ã— |integration| tests/integration/ai-image-enhancer.test.ts > AI Image Enhancer API + R2 Proxy (Integration) > GET /api/ai-image/jobs/{id} with different guest_id -> 403 forbidden envelope 23ms
   â†’ expected 405 to be 403 // Object.is equality
 Ã— |integration| tests/integration/ai-image-enhancer.test.ts > AI Image Enhancer API + R2 Proxy (Integration) > POST /api/ai-image/jobs/{id}/cancel with different guest_id -> 403 forbidden envelope 14ms
   â†’ expected 404 to be 403 // Object.is equality
 Ã— |integration| tests/integration/ai-image-enhancer.test.ts > AI Image Enhancer API + R2 Proxy (Integration) > R2 proxy: GET uploads URL is public and cached (Cache-Control: public, max-age=900, immutable) 1ms
   â†’ expected null to be truthy
 Ã— |integration| tests/integration/api/comments-performance.test.ts > /api/comments/performance (integration) > returns paginated data for seeded post 1359ms
   â†’ Failed to create comment: 400 Bad Request â€” {"success":false,"error":{"type":"validation_error","message":"Invalid request body","details":{"details":{"fieldErrors":{"_form":["Unrecognized key(s) in object: 'csrfToken'"]},"issues":[{"path":[],"code":"unrecognized_keys","message":"Unrecognized key(s) in object: 'csrfToken'"}]}}}}
 âœ“ |integration| tests/integration/api/comments-performance.test.ts > /api/comments/performance (integration) > requires authentication for search mode 23ms
[dev] [2025-11-12T04:34:02.561Z] [INFO][9fwk34yd] GET /api/dashboard/notifications
Context: {
  "requestId": "9fwk34ydmhvi9ltt",
  "endpoint": "/api/dashboard/notifications",
  "method": "GET"
}
[2025-11-12T04:34:02.561Z] [DEBUG][9fwk34yd] [Middleware] Session ID from cookie
Context: {
  "requestId": "9fwk34ydmhvi9ltt",
  "present": false
}
[2025-11-12T04:34:02.562Z] [INFO][w6anohen] POST /api/lead-magnets/download
Context: {
  "requestId": "w6anohenmhvi9ltu",
  "endpoint": "/api/lead-magnets/download",
  "method": "POST"
}
[2025-11-12T04:34:02.562Z] [DEBUG][w6anohen] [Middleware] Session ID from cookie
Context: {
  "requestId": "w6anohenmhvi9ltu",
  "present": false
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:02.564Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/lead-magnets/download",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "leadMagnetDownload",
      "maxRequests": 10,
      "windowMs": 60000,
      "resetAt": 1762922043137
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/lead-magnets/download",
      "ipAddress": "::1",
      "timestamp": 1762922042564,
      "details": {
        "limiterName": "leadMagnetDownload",
        "maxRequests": 10,
        "windowMs": 60000,
        "resetAt": 1762922043137
      }
    }
  }
[dev] [2025-11-12T04:34:02.564Z] [DEBUG][w6anohen] [Middleware] Outgoing response
Context: {
  "requestId": "w6anohenmhvi9ltu",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "1",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:02.564Z] [DEBUG][w6anohen] [Middleware] Processing path
Context: {
  "requestId": "w6anohenmhvi9ltu",
  "path": "/api/lead-magnets/download"
}
[2025-11-12T04:34:02.564Z] [INFO][w6anohen] POST /api/lead-magnets/download -> 429 (2ms)
Context: {
  "requestId": "w6anohenmhvi9ltu",
  "duration": 2,
  "status": 429
}
[dev] [2025-11-12T04:34:02.566Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/dashboard/notifications',
    method: 'GET',
    action: 'notifications_accessed'
  }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:02.566Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: {
      reason: 'unauthenticated_access',
      endpoint: '/api/dashboard/notifications'
    }
  }
[dev] [2025-11-12T04:34:02.566Z] [DEBUG][9fwk34yd] [Middleware] Outgoing response
Context: {
  "requestId": "9fwk34ydmhvi9ltt",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:02.566Z] [DEBUG][9fwk34yd] [Middleware] Processing path
Context: {
  "requestId": "9fwk34ydmhvi9ltt",
  "path": "/api/dashboard/notifications"
}
[2025-11-12T04:34:02.566Z] [INFO][9fwk34yd] GET /api/dashboard/notifications -> 401 (5ms)
Context: {
  "requestId": "9fwk34ydmhvi9ltt",
  "duration": 5,
  "status": 401
}
[dev] [wrangler:info] GET /api/dashboard/notifications 401 Unauthorized (115ms)
[dev] [wrangler:info] POST /api/lead-magnets/download 429 Too Many Requests (120ms)
[dev] [2025-11-12T04:34:02.668Z] [INFO][n62z7di7] GET /r2-ai/ai-enhancer/results/guest//nonexistent.png
Context: {
  "requestId": "n62z7di7mhvi9lwr",
  "endpoint": "/r2-ai/ai-enhancer/results/guest//nonexistent.png",
  "method": "GET"
}
[2025-11-12T04:34:02.668Z] [DEBUG][n62z7di7] [Middleware] Session ID from cookie
Context: {
  "requestId": "n62z7di7mhvi9lwr",
  "present": false
}
[dev] [R2Proxy][R2AI-1762922042668-olnrz] start {
  url: 'http://localhost:8787/r2-ai/ai-enhancer/results/guest//nonexistent.png',
  key: 'ai-enhancer/results/guest//nonexistent.png'
}
[R2Proxy][R2AI-1762922042668-olnrz] parsed path { category: 'results', pathOwnerType: 'guest', pathOwnerId: '' }
[dev] [2025-11-12T04:34:02.668Z] [DEBUG][n62z7di7] [Middleware] Outgoing response
Context: {
  "requestId": "n62z7di7mhvi9lwr",
  "status": 404,
  "statusText": "Not Found",
  "headers": {
    "content-type": "text/plain;charset=UTF-8",
    "x-astro-reroute": "no"
  }
}
[2025-11-12T04:34:02.668Z] [DEBUG][n62z7di7] [Middleware] Processing path
Context: {
  "requestId": "n62z7di7mhvi9lwr",
  "path": "/r2-ai/ai-enhancer/results/guest//nonexistent.png"
}
[2025-11-12T04:34:02.668Z] [INFO][n62z7di7] GET /r2-ai/ai-enhancer/results/guest//nonexistent.png -> 404 (1ms)
Context: {
  "requestId": "n62z7di7mhvi9lwr",
  "duration": 1,
  "status": 404
}
 âœ“ |integration| tests/integration/lead-magnet-api.test.ts > Lead-Magnet-API-Integration > POST /api/lead-magnets/download > sollte CSRF-Schutz korrekt handhaben 122ms
[dev] [wrangler:info] GET /r2-ai/ai-enhancer/results/guest//nonexistent.png 404 Not Found (215ms)
 âœ“ |integration| tests/integration/ai-image-enhancer.test.ts > AI Image Enhancer API + R2 Proxy (Integration) > R2 proxy: results path is owner-gated (403 for non-owner, 404 for owner when missing) 230ms
 âœ“ |integration| tests/integration/dashboard-api.test.ts > Dashboard-API-Integration > GET /api/dashboard/notifications > sollte 401 fÃ¼r nicht authentifizierte Anfragen zurÃ¼ckgeben 120ms
 Ã— |integration| tests/integration/api/ai-video/usage.test.ts > GET /api/ai-video/usage > returns guest limits when no KV entry exists 22ms
   â†’ expected 500 to be 200 // Object.is equality
 Ã— |integration| tests/integration/api/ai-video/usage.test.ts > GET /api/ai-video/usage > honours existing KV usage for users 1ms
   â†’ expected 500 to be 200 // Object.is equality
 Ã— |integration| tests/integration/api/referrals/referral-rewards-webhook.test.ts > POST /api/billing/stripe-webhook referral rewards integration > calls verifyReferral on checkout.session.completed when rewards enabled 22ms
   â†’ expected 500 to be 200 // Object.is equality
 Ã— |integration| tests/integration/api/referrals/referral-rewards-webhook.test.ts > POST /api/billing/stripe-webhook referral rewards integration > skips verifyReferral when rewards feature flag disabled 2ms
   â†’ expected 500 to be 200 // Object.is equality
 Ã— |integration| tests/integration/api/referrals/referral-rewards-webhook.test.ts > POST /api/billing/stripe-webhook referral rewards integration > triggers verifyReferral on active subscription update 2ms
   â†’ expected 500 to be 200 // Object.is equality
[dev] [2025-11-12T04:34:02.772Z] [INFO][k0nbalor] POST /api/dashboard/perform-action
Context: {
  "requestId": "k0nbalormhvi9lzo",
  "endpoint": "/api/dashboard/perform-action",
  "method": "POST"
}
[2025-11-12T04:34:02.772Z] [DEBUG][k0nbalor] [Middleware] Session ID from cookie
Context: {
  "requestId": "k0nbalormhvi9lzo",
  "present": false
}
[2025-11-12T04:34:02.772Z] [INFO][spimi8et] POST /api/lead-magnets/download
Context: {
  "requestId": "spimi8etmhvi9lzo",
  "endpoint": "/api/lead-magnets/download",
  "method": "POST"
}
[2025-11-12T04:34:02.772Z] [DEBUG][spimi8et] [Middleware] Session ID from cookie
Context: {
  "requestId": "spimi8etmhvi9lzo",
  "present": false
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:02.773Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/lead-magnets/download",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "leadMagnetDownload",
      "maxRequests": 10,
      "windowMs": 60000,
      "resetAt": 1762922043137
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/lead-magnets/download",
      "ipAddress": "::1",
      "timestamp": 1762922042773,
      "details": {
        "limiterName": "leadMagnetDownload",
        "maxRequests": 10,
        "windowMs": 60000,
        "resetAt": 1762922043137
      }
    }
  }
[dev] [2025-11-12T04:34:02.773Z] [DEBUG][spimi8et] [Middleware] Outgoing response
Context: {
  "requestId": "spimi8etmhvi9lzo",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "1",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:02.773Z] [DEBUG][spimi8et] [Middleware] Processing path
Context: {
  "requestId": "spimi8etmhvi9lzo",
  "path": "/api/lead-magnets/download"
}
[2025-11-12T04:34:02.773Z] [INFO][spimi8et] POST /api/lead-magnets/download -> 429 (1ms)
Context: {
  "requestId": "spimi8etmhvi9lzo",
  "duration": 1,
  "status": 429
}
[2025-11-12T04:34:02.775Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/dashboard/perform-action',
    method: 'POST',
    action: 'perform_dashboard_action'
  }
}
[dev] [2025-11-12T04:34:02.775Z] [DEBUG][k0nbalor] [Middleware] Outgoing response
Context: {
  "requestId": "k0nbalormhvi9lzo",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:02.775Z] [DEBUG][k0nbalor] [Middleware] Processing path
Context: {
  "requestId": "k0nbalormhvi9lzo",
  "path": "/api/dashboard/perform-action"
}
[2025-11-12T04:34:02.775Z] [INFO][k0nbalor] POST /api/dashboard/perform-action -> 401 (3ms)
Context: {
  "requestId": "k0nbalormhvi9lzo",
  "duration": 3,
  "status": 401
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:02.775Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: {
      reason: 'unauthenticated_access',
      endpoint: '/api/dashboard/perform-action'
    }
  }
 âœ“ |integration| tests/integration/lead-magnet-api.test.ts > Lead-Magnet-API-Integration > POST /api/lead-magnets/download > sollte Security-Headers setzen 210ms
[dev] [wrangler:info] POST /api/lead-magnets/download 429 Too Many Requests (207ms)
[dev] [wrangler:info] POST /api/dashboard/perform-action 401 Unauthorized (200ms)
 âœ“ |integration| tests/integration/dashboard-api.test.ts > Dashboard-API-Integration > POST /api/dashboard/perform-action > sollte Dashboard-Aktionen erfolgreich ausfÃ¼hren 206ms
[dev] [2025-11-12T04:34:02.824Z] [INFO][kdzp26r4] POST /api/prompt-enhance
Context: {
  "requestId": "kdzp26r4mhvi9m14",
  "endpoint": "/api/prompt-enhance",
  "method": "POST"
}
[2025-11-12T04:34:02.824Z] [DEBUG][kdzp26r4] [Middleware] Session ID from cookie
Context: {
  "requestId": "kdzp26r4mhvi9m14",
  "present": false
}
[dev] [2025-11-12T04:34:02.825Z] [INFO][y0jzi33v] GET /api/ai-image/jobs/
Context: {
  "requestId": "y0jzi33vmhvi9m15",
  "endpoint": "/api/ai-image/jobs/",
  "method": "GET"
}
[dev] [2025-11-12T04:34:02.825Z] [DEBUG][y0jzi33v] [Middleware] Session ID from cookie
Context: {
  "requestId": "y0jzi33vmhvi9m15",
  "present": false
}
[dev] [2025-11-12T04:34:02.825Z] [DEBUG][y0jzi33v] [Middleware] Outgoing response
Context: {
  "requestId": "y0jzi33vmhvi9m15",
  "status": 405,
  "statusText": "Method Not Allowed",
  "headers": {
    "allow": "POST",
    "content-type": "application/json"
  }
}
[dev] [2025-11-12T04:34:02.825Z] [DEBUG][y0jzi33v] [Middleware] Processing path
Context: {
  "requestId": "y0jzi33vmhvi9m15",
  "path": "/api/ai-image/jobs/"
}
[2025-11-12T04:34:02.825Z] [INFO][y0jzi33v] GET /api/ai-image/jobs/ -> 405
Context: {
  "requestId": "y0jzi33vmhvi9m15",
  "duration": 0,
  "status": 405
}
[dev] [wrangler:info] GET /api/ai-image/jobs/ 405 Method Not Allowed (155ms)
[dev] [2025-11-12T04:34:02.827Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: { endpoint: '/api/prompt-enhance', method: 'POST' }
}
[dev] [2025-11-12T04:34:02.838Z] [INFO][zhm1lm74] GET /api/ai-image/jobs/
Context: {
  "requestId": "zhm1lm74mhvi9m1i",
  "endpoint": "/api/ai-image/jobs/",
  "method": "GET"
}
[2025-11-12T04:34:02.838Z] [DEBUG][zhm1lm74] [Middleware] Session ID from cookie
Context: {
  "requestId": "zhm1lm74mhvi9m1i",
  "present": false
}
[dev] [2025-11-12T04:34:02.838Z] [DEBUG][zhm1lm74] [Middleware] Outgoing response
Context: {
  "requestId": "zhm1lm74mhvi9m1i",
  "status": 405,
  "statusText": "Method Not Allowed",
  "headers": {
    "allow": "POST",
    "content-type": "application/json"
  }
}
[dev] [2025-11-12T04:34:02.838Z] [DEBUG][zhm1lm74] [Middleware] Processing path
Context: {
  "requestId": "zhm1lm74mhvi9m1i",
  "path": "/api/ai-image/jobs/"
}
[2025-11-12T04:34:02.838Z] [INFO][zhm1lm74] GET /api/ai-image/jobs/ -> 405
Context: {
  "requestId": "zhm1lm74mhvi9m1i",
  "duration": 0,
  "status": 405
}
[2025-11-12T04:34:02.839Z] [INFO][k7jhbjrj] POST /api/lead-magnets/download
Context: {
  "requestId": "k7jhbjrjmhvi9m1j",
  "endpoint": "/api/lead-magnets/download",
  "method": "POST"
}
[2025-11-12T04:34:02.839Z] [DEBUG][k7jhbjrj] [Middleware] Session ID from cookie
Context: {
  "requestId": "k7jhbjrjmhvi9m1j",
  "present": false
}
[dev] [2025-11-12T04:34:02.839Z] [INFO][iv8jup8e] POST /api/dashboard/perform-action
Context: {
  "requestId": "iv8jup8emhvi9m1j",
  "endpoint": "/api/dashboard/perform-action",
  "method": "POST"
}
[2025-11-12T04:34:02.839Z] [DEBUG][iv8jup8e] [Middleware] Session ID from cookie
Context: {
  "requestId": "iv8jup8emhvi9m1j",
  "present": false
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:02.840Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/lead-magnets/download",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "leadMagnetDownload",
      "maxRequests": 10,
      "windowMs": 60000,
      "resetAt": 1762922043137
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/lead-magnets/download",
      "ipAddress": "::1",
      "timestamp": 1762922042840,
      "details": {
        "limiterName": "leadMagnetDownload",
        "maxRequests": 10,
        "windowMs": 60000,
        "resetAt": 1762922043137
      }
    }
  }
[dev] [2025-11-12T04:34:02.840Z] [DEBUG][k7jhbjrj] [Middleware] Outgoing response
Context: {
  "requestId": "k7jhbjrjmhvi9m1j",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "1",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:02.840Z] [DEBUG][k7jhbjrj] [Middleware] Processing path
Context: {
  "requestId": "k7jhbjrjmhvi9m1j",
  "path": "/api/lead-magnets/download"
}
[2025-11-12T04:34:02.841Z] [INFO][k7jhbjrj] POST /api/lead-magnets/download -> 429 (2ms)
Context: {
  "requestId": "k7jhbjrjmhvi9m1j",
  "duration": 2,
  "status": 429
}
[wrangler:info] GET /api/ai-image/jobs/ 405 Method Not Allowed (11ms)
[dev] [2025-11-12T04:34:02.842Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/dashboard/perform-action',
    method: 'POST',
    action: 'perform_dashboard_action'
  }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:02.842Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: {
      reason: 'unauthenticated_access',
      endpoint: '/api/dashboard/perform-action'
    }
  }
[dev] [2025-11-12T04:34:02.842Z] [DEBUG][iv8jup8e] [Middleware] Outgoing response
Context: {
  "requestId": "iv8jup8emhvi9m1j",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:02.842Z] [DEBUG][iv8jup8e] [Middleware] Processing path
Context: {
  "requestId": "iv8jup8emhvi9m1j",
  "path": "/api/dashboard/perform-action"
}
[2025-11-12T04:34:02.842Z] [INFO][iv8jup8e] POST /api/dashboard/perform-action -> 401 (3ms)
Context: {
  "requestId": "iv8jup8emhvi9m1j",
  "duration": 3,
  "status": 401
}
[dev] [wrangler:info] POST /api/lead-magnets/download 429 Too Many Requests (65ms)
[dev] [wrangler:info] POST /api/dashboard/perform-action 401 Unauthorized (69ms)
 âœ“ |integration| tests/integration/lead-magnet-api.test.ts > Lead-Magnet-API-Integration > POST /api/lead-magnets/download > sollte Audit-Logging fÃ¼r erfolgreiche Downloads durchfÃ¼hren 69ms
 âœ“ |integration| tests/integration/dashboard-api.test.ts > Dashboard-API-Integration > POST /api/dashboard/perform-action > sollte Validierungsfehler fÃ¼r fehlende action zurÃ¼ckgeben 72ms
[dev] [2025-11-12T04:34:03.052Z] [INFO][26awnvd9] POST /api/dashboard/perform-action
Context: {
  "requestId": "26awnvd9mhvi9m7g",
  "endpoint": "/api/dashboard/perform-action",
  "method": "POST"
}
[dev] [2025-11-12T04:34:03.052Z] [DEBUG][26awnvd9] [Middleware] Session ID from cookie
Context: {
  "requestId": "26awnvd9mhvi9m7g",
  "present": false
}
[2025-11-12T04:34:03.052Z] [INFO][a171qbh9] GET /api/ai-image/jobs/
Context: {
  "requestId": "a171qbh9mhvi9m7g",
  "endpoint": "/api/ai-image/jobs/",
  "method": "GET"
}
[2025-11-12T04:34:03.053Z] [DEBUG][a171qbh9] [Middleware] Session ID from cookie
Context: {
  "requestId": "a171qbh9mhvi9m7g",
  "present": false
}
[dev] [2025-11-12T04:34:03.053Z] [DEBUG][a171qbh9] [Middleware] Outgoing response
Context: {
  "requestId": "a171qbh9mhvi9m7g",
  "status": 405,
  "statusText": "Method Not Allowed",
  "headers": {
    "allow": "POST",
    "content-type": "application/json"
  }
}
[dev] [2025-11-12T04:34:03.053Z] [DEBUG][a171qbh9] [Middleware] Processing path
Context: {
  "requestId": "a171qbh9mhvi9m7g",
  "path": "/api/ai-image/jobs/"
}
[2025-11-12T04:34:03.053Z] [INFO][a171qbh9] GET /api/ai-image/jobs/ -> 405 (1ms)
Context: {
  "requestId": "a171qbh9mhvi9m7g",
  "duration": 1,
  "status": 405
}
[2025-11-12T04:34:03.053Z] [INFO][9pwxw2t2] POST /api/lead-magnets/download
Context: {
  "requestId": "9pwxw2t2mhvi9m7h",
  "endpoint": "/api/lead-magnets/download",
  "method": "POST"
}
[2025-11-12T04:34:03.053Z] [DEBUG][9pwxw2t2] [Middleware] Session ID from cookie
Context: {
  "requestId": "9pwxw2t2mhvi9m7h",
  "present": false
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:03.054Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/lead-magnets/download",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "leadMagnetDownload",
      "maxRequests": 10,
      "windowMs": 60000,
      "resetAt": 1762922043137
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/lead-magnets/download",
      "ipAddress": "::1",
      "timestamp": 1762922043054,
      "details": {
        "limiterName": "leadMagnetDownload",
        "maxRequests": 10,
        "windowMs": 60000,
        "resetAt": 1762922043137
      }
    }
  }
[dev] [2025-11-12T04:34:03.054Z] [DEBUG][9pwxw2t2] [Middleware] Outgoing response
Context: {
  "requestId": "9pwxw2t2mhvi9m7h",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "1",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:03.055Z] [DEBUG][9pwxw2t2] [Middleware] Processing path
Context: {
  "requestId": "9pwxw2t2mhvi9m7h",
  "path": "/api/lead-magnets/download"
}
[2025-11-12T04:34:03.055Z] [INFO][9pwxw2t2] POST /api/lead-magnets/download -> 429 (2ms)
Context: {
  "requestId": "9pwxw2t2mhvi9m7h",
  "duration": 2,
  "status": 429
}
[dev] [wrangler:info] GET /api/ai-image/jobs/ 405 Method Not Allowed (212ms)
[dev] [2025-11-12T04:34:03.056Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/dashboard/perform-action',
    method: 'POST',
    action: 'perform_dashboard_action'
  }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:03.056Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: {
      reason: 'unauthenticated_access',
      endpoint: '/api/dashboard/perform-action'
    }
  }
[dev] [2025-11-12T04:34:03.057Z] [DEBUG][26awnvd9] [Middleware] Outgoing response
Context: {
  "requestId": "26awnvd9mhvi9m7g",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:03.057Z] [DEBUG][26awnvd9] [Middleware] Processing path
Context: {
  "requestId": "26awnvd9mhvi9m7g",
  "path": "/api/dashboard/perform-action"
}
[2025-11-12T04:34:03.057Z] [INFO][26awnvd9] POST /api/dashboard/perform-action -> 401 (5ms)
Context: {
  "requestId": "26awnvd9mhvi9m7g",
  "duration": 5,
  "status": 401
}
[dev] [wrangler:info] POST /api/lead-magnets/download 429 Too Many Requests (206ms)
[dev] [wrangler:info] POST /api/dashboard/perform-action 401 Unauthorized (206ms)
 âœ“ |integration| tests/integration/dashboard-api.test.ts > Dashboard-API-Integration > POST /api/dashboard/perform-action > sollte Validierungsfehler fÃ¼r unbekannte action zurÃ¼ckgeben 208ms
[dev] [2025-11-12T04:34:03.158Z] [INFO][yxwh3ual] GET /
Context: {
  "requestId": "yxwh3ualmhvi9mae",
  "endpoint": "/",
  "method": "GET"
}
[dev] [2025-11-12T04:34:03.158Z] [DEBUG][yxwh3ual] [Middleware] Session splash gate -> set session_welcome_seen cookie
Context: {
  "requestId": "yxwh3ualmhvi9mae"
}
[2025-11-12T04:34:03.159Z] [DEBUG][yxwh3ual] [Middleware] First visible visit this session -> redirect to welcome
Context: {
  "requestId": "yxwh3ualmhvi9mae",
  "location": "/welcome?next=%2F"
}
[dev] [2025-11-12T04:34:03.159Z] [INFO][dkcazuki] GET /
Context: {
  "requestId": "dkcazukimhvi9maf",
  "endpoint": "/",
  "method": "GET"
}
[2025-11-12T04:34:03.159Z] [DEBUG][dkcazuki] [Middleware] Session splash gate -> set session_welcome_seen cookie
Context: {
  "requestId": "dkcazukimhvi9maf"
}
[2025-11-12T04:34:03.160Z] [DEBUG][dkcazuki] [Middleware] First visible visit this session -> redirect to welcome
Context: {
  "requestId": "dkcazukimhvi9maf",
  "location": "/welcome?next=%2F"
}
[dev] [wrangler:info] GET / 302 Found (146ms)
[dev] [wrangler:info] GET / 302 Found (146ms)
[dev] [2025-11-12T04:34:03.163Z] [INFO][z8hyoepu] POST /api/dashboard/perform-action
Context: {
  "requestId": "z8hyoepumhvi9maj",
  "endpoint": "/api/dashboard/perform-action",
  "method": "POST"
}
[2025-11-12T04:34:03.164Z] [DEBUG][z8hyoepu] [Middleware] Session ID from cookie
Context: {
  "requestId": "z8hyoepumhvi9maj",
  "present": false
}
[2025-11-12T04:34:03.164Z] [INFO][nu1po7zy] GET /api/ai-image/jobs/
Context: {
  "requestId": "nu1po7zymhvi9mak",
  "endpoint": "/api/ai-image/jobs/",
  "method": "GET"
}
[2025-11-12T04:34:03.164Z] [DEBUG][nu1po7zy] [Middleware] Session ID from cookie
Context: {
  "requestId": "nu1po7zymhvi9mak",
  "present": false
}
[dev] [2025-11-12T04:34:03.164Z] [DEBUG][nu1po7zy] [Middleware] Outgoing response
Context: {
  "requestId": "nu1po7zymhvi9mak",
  "status": 405,
  "statusText": "Method Not Allowed",
  "headers": {
    "allow": "POST",
    "content-type": "application/json"
  }
}
[2025-11-12T04:34:03.164Z] [DEBUG][nu1po7zy] [Middleware] Processing path
Context: {
  "requestId": "nu1po7zymhvi9mak",
  "path": "/api/ai-image/jobs/"
}
[2025-11-12T04:34:03.165Z] [INFO][nu1po7zy] GET /api/ai-image/jobs/ -> 405 (1ms)
Context: {
  "requestId": "nu1po7zymhvi9mak",
  "duration": 1,
  "status": 405
}
[2025-11-12T04:34:03.165Z] [INFO][xg77k8s1] POST /api/lead-magnets/download
Context: {
  "requestId": "xg77k8s1mhvi9mal",
  "endpoint": "/api/lead-magnets/download",
  "method": "POST"
}
[2025-11-12T04:34:03.165Z] [DEBUG][xg77k8s1] [Middleware] Session ID from cookie
Context: {
  "requestId": "xg77k8s1mhvi9mal",
  "present": false
}
[dev] [wrangler:info] GET /api/ai-image/jobs/ 405 Method Not Allowed (121ms)
[dev] [2025-11-12T04:34:03.181Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: { endpoint: '/api/lead-magnets/download', method: 'POST' }
}
[dev] [2025-11-12T04:34:03.183Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/dashboard/perform-action',
    method: 'POST',
    action: 'perform_dashboard_action'
  }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:03.183Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: {
      reason: 'unauthenticated_access',
      endpoint: '/api/dashboard/perform-action'
    }
  }
[dev] [2025-11-12T04:34:03.183Z] [DEBUG][z8hyoepu] [Middleware] Outgoing response
Context: {
  "requestId": "z8hyoepumhvi9maj",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:03.184Z] [DEBUG][z8hyoepu] [Middleware] Processing path
Context: {
  "requestId": "z8hyoepumhvi9maj",
  "path": "/api/dashboard/perform-action"
}
[2025-11-12T04:34:03.184Z] [INFO][z8hyoepu] POST /api/dashboard/perform-action -> 401 (21ms)
Context: {
  "requestId": "z8hyoepumhvi9maj",
  "duration": 21,
  "status": 401
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:03.185Z] [ERROR] Error in POST /api/lead-magnets/download: Unexpected token 'e', "email=test"... is not valid JSON { timestamp: {}, resource: 'api-middleware' }[0m
 Ã— |integration| tests/integration/lead-magnet-api.test.ts > Lead-Magnet-API-Integration > POST /api/lead-magnets/download > sollte verschiedene Lead-Magnet-IDs unterstÃ¼tzen 357ms
   â†’ expected [ 200, 429 ] to include 500
stdout | tests/integration/billing-api.test.ts > Billing-API-Integration
Testserver erreichbar unter http://localhost:8787

stdout | tests/integration/projects-api.test.ts > Projects-API-Integration
Testserver erreichbar unter http://localhost:8787

 Ã— |integration| tests/integration/dashboard-api.test.ts > Dashboard-API-Integration > POST /api/dashboard/perform-action > sollte 401 fÃ¼r nicht authentifizierte Anfragen zurÃ¼ckgeben 154ms
   â†’ expected 'auth_error' to be 'UNAUTHORIZED' // Object.is equality
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:03.186Z] [ERROR] API_ERROR {[0m

    timestamp: {},
    resource: 'security',
    userId: 'anonymous',
    ipAddress: '::1',
    securityEventType: 'API_ERROR',
    details: {
      endpoint: '/api/lead-magnets/download',
      method: 'POST',
      error: `Unexpected token 'e', "email=test"... is not valid JSON`,
      stack: `SyntaxError: Unexpected token 'e', "email=test"... is not valid JSON\n` +
        '    at async withApiMiddleware.rateLimiter (file:///Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/dist/_worker.js/pages/api/lead-magnets/download.astro.mjs:107:25)\n' +
        '    at async Module.POST (file:///Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/dist/_worker.js/chunks/api-middleware_DRoneA8a.mjs:235:24)\n' +
        '    at async renderEndpoint (file:///Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/dist/_worker.js/chunks/astro/server_DuD7EVtC.mjs:555:18)\n' +
        '    at async lastNext (file:///Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/dist/_worker.js/chunks/index_BejKFP2t.mjs:2593:23)\n' +
        '    at null.<anonymous> (async file:///Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/.wrangler/tmp/dev-0udwZ9/index.js:179275:22)\n' +
        '    at async callMiddleware (file:///Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/dist/_worker.js/chunks/index_BejKFP2t.mjs:1355:10)\n' +
        '    at [object Object]
[dev] [2025-11-12T04:34:03.188Z] [DEBUG][xg77k8s1] [Middleware] Outgoing response
Context: {
  "requestId": "xg77k8s1mhvi9mal",
  "status": 500,
  "statusText": "Internal Server Error",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-astro-reroute": "no",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:03.189Z] [DEBUG][xg77k8s1] [Middleware] Processing path
Context: {
  "requestId": "xg77k8s1mhvi9mal",
  "path": "/api/lead-magnets/download"
}
[2025-11-12T04:34:03.189Z] [INFO][xg77k8s1] POST /api/lead-magnets/download -> 500 (24ms)
Context: {
  "requestId": "xg77k8s1mhvi9mal",
  "duration": 24,
  "status": 500
}
[2025-11-12T04:34:03.293Z] [INFO][rbxe51vd] GET /api/ai-image/jobs/
Context: {
  "requestId": "rbxe51vdmhvi9me5",
  "endpoint": "/api/ai-image/jobs/",
  "method": "GET"
}
[2025-11-12T04:34:03.294Z] [DEBUG][rbxe51vd] [Middleware] Session ID from cookie
Context: {
  "requestId": "rbxe51vdmhvi9me5",
  "present": false
}
[2025-11-12T04:34:03.294Z] [DEBUG][rbxe51vd] [Middleware] Outgoing response
Context: {
  "requestId": "rbxe51vdmhvi9me5",
  "status": 405,
  "statusText": "Method Not Allowed",
  "headers": {
    "allow": "POST",
    "content-type": "application/json"
  }
}
[2025-11-12T04:34:03.295Z] [DEBUG][rbxe51vd] [Middleware] Processing path
Context: {
  "requestId": "rbxe51vdmhvi9me5",
  "path": "/api/ai-image/jobs/"
}
[2025-11-12T04:34:03.295Z] [INFO][rbxe51vd] GET /api/ai-image/jobs/ -> 405 (2ms)
Context: {
  "requestId": "rbxe51vdmhvi9me5",
  "duration": 2,
  "status": 405
}
[2025-11-12T04:34:03.295Z] [INFO][xbfulwqm] GET /welcome
Context: {
  "requestId": "xbfulwqmmhvi9me7",
  "endpoint": "/welcome",
  "method": "GET"
}
[2025-11-12T04:34:03.296Z] [DEBUG][xbfulwqm] [Middleware] Session ID from cookie
Context: {
  "requestId": "xbfulwqmmhvi9me7",
  "present": false
}
[2025-11-12T04:34:03.298Z] [DEBUG][xbfulwqm] [Middleware] Outgoing response
Context: {
  "requestId": "xbfulwqmmhvi9me7",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "text/html",
    "x-astro-route-type": "page"
  }
}
[dev] [2025-11-12T04:34:03.298Z] [DEBUG][xbfulwqm] [Middleware] Processing path
Context: {
  "requestId": "xbfulwqmmhvi9me7",
  "path": "/welcome"
}
[2025-11-12T04:34:03.298Z] [INFO][xbfulwqm] GET /welcome -> 200 (3ms)
Context: {
  "requestId": "xbfulwqmmhvi9me7",
  "duration": 3,
  "status": 200
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1mWarning: Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:[0m

  1. You might have mismatching versions of React and the renderer (such as React DOM)
  2. You might be breaking the Rules of Hooks
  3. You might have more than one copy of React in the same app
  See [4mhttps://reactjs.org/link/invalid-hook-call[0m for tips about how to debug and fix this problem.
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1mWarning: Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:[0m

  1. You might have mismatching versions of React and the renderer (such as React DOM)
  2. You might be breaking the Rules of Hooks
  3. You might have more than one copy of React in the same app
  See [4mhttps://reactjs.org/link/invalid-hook-call[0m for tips about how to debug and fix this problem.
[dev] [2025-11-12T04:34:03.301Z] [INFO][d4tn8a2p] GET /welcome
Context: {
  "requestId": "d4tn8a2pmhvi9med",
  "endpoint": "/welcome",
  "method": "GET"
}
[2025-11-12T04:34:03.302Z] [DEBUG][d4tn8a2p] [Middleware] Session ID from cookie
Context: {
  "requestId": "d4tn8a2pmhvi9med",
  "present": false
}
[2025-11-12T04:34:03.303Z] [DEBUG][d4tn8a2p] [Middleware] Outgoing response
Context: {
  "requestId": "d4tn8a2pmhvi9med",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "text/html",
    "x-astro-route-type": "page"
  }
}
[2025-11-12T04:34:03.303Z] [DEBUG][d4tn8a2p] [Middleware] Processing path
Context: {
  "requestId": "d4tn8a2pmhvi9med",
  "path": "/welcome"
}
[2025-11-12T04:34:03.303Z] [INFO][d4tn8a2p] GET /welcome -> 200 (2ms)
Context: {
  "requestId": "d4tn8a2pmhvi9med",
  "duration": 2,
  "status": 200
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1mWarning: Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:[0m

  1. You might have mismatching versions of React and the renderer (such as React DOM)
  2. You might be breaking the Rules of Hooks
  3. You might have more than one copy of React in the same app
  See [4mhttps://reactjs.org/link/invalid-hook-call[0m for tips about how to debug and fix this problem.
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1mWarning: Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:[0m

  1. You might have mismatching versions of React and the renderer (such as React DOM)
  2. You might be breaking the Rules of Hooks
  3. You might have more than one copy of React in the same app
  See [4mhttps://reactjs.org/link/invalid-hook-call[0m for tips about how to debug and fix this problem.
[dev] [wrangler:info] POST /api/lead-magnets/download 500 Internal Server Error (132ms)
[wrangler:info] POST /api/dashboard/perform-action 401 Unauthorized (130ms)
[dev] [wrangler:info] GET /api/ai-image/jobs/ 405 Method Not Allowed (124ms)
[wrangler:info] GET /welcome 200 OK (132ms)
[wrangler:info] GET /welcome 200 OK (131ms)
[dev] [2025-11-12T04:34:03.412Z] [INFO][o57v6jou] GET /api/ai-image/jobs/
Context: {
  "requestId": "o57v6joumhvi9mhg",
  "endpoint": "/api/ai-image/jobs/",
  "method": "GET"
}
[dev] [2025-11-12T04:34:03.413Z] [DEBUG][o57v6jou] [Middleware] Session ID from cookie
Context: {
  "requestId": "o57v6joumhvi9mhg",
  "present": false
}
[2025-11-12T04:34:03.413Z] [DEBUG][o57v6jou] [Middleware] Outgoing response
Context: {
  "requestId": "o57v6joumhvi9mhg",
  "status": 405,
  "statusText": "Method Not Allowed",
  "headers": {
    "allow": "POST",
    "content-type": "application/json"
  }
}
[2025-11-12T04:34:03.413Z] [DEBUG][o57v6jou] [Middleware] Processing path
Context: {
  "requestId": "o57v6joumhvi9mhg",
  "path": "/api/ai-image/jobs/"
}
[2025-11-12T04:34:03.413Z] [INFO][o57v6jou] GET /api/ai-image/jobs/ -> 405 (1ms)
Context: {
  "requestId": "o57v6joumhvi9mhg",
  "duration": 1,
  "status": 405
}
[dev] [2025-11-12T04:34:03.414Z] [INFO][sfhvx6ze] GET /api/dashboard/quick-actions
Context: {
  "requestId": "sfhvx6zemhvi9mhi",
  "endpoint": "/api/dashboard/quick-actions",
  "method": "GET"
}
[dev] [2025-11-12T04:34:03.416Z] [DEBUG][sfhvx6ze] [Middleware] Session ID from cookie
Context: {
  "requestId": "sfhvx6zemhvi9mhi",
  "present": false
}
[dev] [wrangler:info] GET /api/ai-image/jobs/ 405 Method Not Allowed (112ms)
[dev] [2025-11-12T04:34:03.421Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/dashboard/quick-actions',
    method: 'GET',
    action: 'public_quick_actions_accessed'
  }
}
[dev] [2025-11-12T04:34:03.421Z] [INFO][U:anonymous] Security Event: API_ACCESS
Context: {
  "userId": "anonymous",
  "ipAddress": "::1",
  "targetResource": "unknown",
  "securityEventType": "API_ACCESS",
  "originalDetails": {
    "event": "quick_actions_accessed",
    "actionCount": 1
  },
  "logLevel": "info",
  "eventSnapshot": {
    "type": "API_ACCESS",
    "userId": "anonymous",
    "targetResource": "unknown",
    "ipAddress": "::1",
    "timestamp": 1762922043421,
    "details": {
      "event": "quick_actions_accessed",
      "actionCount": 1
    }
  }
}
[dev] [2025-11-12T04:34:03.422Z] [DEBUG][sfhvx6ze] [Middleware] Outgoing response
Context: {
  "requestId": "sfhvx6zemhvi9mhi",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:03.422Z] [DEBUG][sfhvx6ze] [Middleware] Processing path
Context: {
  "requestId": "sfhvx6zemhvi9mhi",
  "path": "/api/dashboard/quick-actions"
}
[dev] [2025-11-12T04:34:03.422Z] [INFO][sfhvx6ze] GET /api/dashboard/quick-actions -> 200 (8ms)
Context: {
  "requestId": "sfhvx6zemhvi9mhi",
  "duration": 8,
  "status": 200
}
[dev] [wrangler:info] GET /api/dashboard/quick-actions 200 OK (206ms)
 âœ“ |integration| tests/integration/dashboard-api.test.ts > Dashboard-API-Integration > GET /api/dashboard/quick-actions > sollte Quick-Actions fÃ¼r authentifizierten Benutzer zurÃ¼ckgeben 211ms
[dev] [2025-11-12T04:34:03.525Z] [INFO][dxznz564] GET /api/projects
Context: {
  "requestId": "dxznz564mhvi9mkl",
  "endpoint": "/api/projects",
  "method": "GET"
}
[dev] [2025-11-12T04:34:03.525Z] [DEBUG][dxznz564] [Middleware] Session ID from cookie
Context: {
  "requestId": "dxznz564mhvi9mkl",
  "present": false
}
[dev] 05:34:03 [WARN] [router] No API Route handler exists for the method "GET" for the route "/api/projects".
Found handlers: "POST"

[2025-11-12T04:34:03.527Z] [DEBUG][dxznz564] [Middleware] Outgoing response
Context: {
  "requestId": "dxznz564mhvi9mkl",
  "status": 404,
  "statusText": "Not Found",
  "headers": "[empty object]"
}
[dev] [2025-11-12T04:34:03.527Z] [DEBUG][dxznz564] [Middleware] Processing path
Context: {
  "requestId": "dxznz564mhvi9mkl",
  "path": "/api/projects"
}
[2025-11-12T04:34:03.527Z] [INFO][dxznz564] GET /api/projects -> 404 (2ms)
Context: {
  "requestId": "dxznz564mhvi9mkl",
  "duration": 2,
  "status": 404
}
[dev] [2025-11-12T04:34:03.528Z] [INFO][bmocdyaw] GET /api/projects
Context: {
  "requestId": "bmocdyawmhvi9mko",
  "endpoint": "/api/projects",
  "method": "GET"
}
[2025-11-12T04:34:03.528Z] [DEBUG][bmocdyaw] [Middleware] Session ID from cookie
Context: {
  "requestId": "bmocdyawmhvi9mko",
  "present": false
}
[dev] [2025-11-12T04:34:03.528Z] [DEBUG][bmocdyaw] [Middleware] Outgoing response
Context: {
  "requestId": "bmocdyawmhvi9mko",
  "status": 404,
  "statusText": "Not Found",
  "headers": {
    "content-type": "text/html",
    "x-astro-reroute": "no",
    "x-astro-route-type": "page"
  }
}
[dev] [2025-11-12T04:34:03.528Z] [DEBUG][bmocdyaw] [Middleware] Processing path
Context: {
  "requestId": "bmocdyawmhvi9mko",
  "path": "/api/projects"
}
[dev] [2025-11-12T04:34:03.529Z] [INFO][bmocdyaw] GET /api/projects -> 404 (1ms)
Context: {
  "requestId": "bmocdyawmhvi9mko",
  "duration": 1,
  "status": 404
}
[dev] [2025-11-12T04:34:03.532Z] [INFO][6g88oea5] POST /api/billing/session
Context: {
  "requestId": "6g88oea5mhvi9mks",
  "endpoint": "/api/billing/session",
  "method": "POST"
}
[dev] [2025-11-12T04:34:03.532Z] [DEBUG][6g88oea5] [Middleware] Session ID from cookie
Context: {
  "requestId": "6g88oea5mhvi9mks",
  "present": false
}
[dev] [wrangler:info] GET /api/projects 404 Not Found (218ms)
[dev] [2025-11-12T04:34:03.535Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/billing/session',
    method: 'POST',
    action: 'create_checkout_session'
  }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:03.535Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: {
      reason: 'unauthenticated_access',
      endpoint: '/api/billing/session'
    }
  }
[dev] [2025-11-12T04:34:03.536Z] [DEBUG][6g88oea5] [Middleware] Outgoing response
Context: {
  "requestId": "6g88oea5mhvi9mks",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:03.536Z] [DEBUG][6g88oea5] [Middleware] Processing path
Context: {
  "requestId": "6g88oea5mhvi9mks",
  "path": "/api/billing/session"
}
[2025-11-12T04:34:03.536Z] [INFO][6g88oea5] POST /api/billing/session -> 401 (4ms)
Context: {
  "requestId": "6g88oea5mhvi9mks",
  "duration": 4,
  "status": 401
}
 âœ“ |integration| tests/integration/projects-api.test.ts > Projects-API-Integration > GET /api/projects > sollte Projektliste fÃ¼r authentifizierten Benutzer zurÃ¼ckgeben 224ms
[dev] [wrangler:info] POST /api/billing/session 401 Unauthorized (223ms)
 âœ“ |integration| tests/integration/billing-api.test.ts > Billing-API-Integration > POST /api/billing/session > sollte erfolgreich Billing-Session erstellen 231ms
[dev] [2025-11-12T04:34:03.622Z] [INFO][ck6zexf6] POST /api/debug-login
Context: {
  "requestId": "ck6zexf6mhvi9mna",
  "endpoint": "/api/debug-login",
  "method": "POST"
}
[dev] [2025-11-12T04:34:03.622Z] [DEBUG][ck6zexf6] [Middleware] Session ID from cookie
Context: {
  "requestId": "ck6zexf6mhvi9mna",
  "present": false
}
[2025-11-12T04:34:03.622Z] [INFO][hq0p7wc4] GET /api/ai-image/jobs/
Context: {
  "requestId": "hq0p7wc4mhvi9mna",
  "endpoint": "/api/ai-image/jobs/",
  "method": "GET"
}
[2025-11-12T04:34:03.622Z] [DEBUG][hq0p7wc4] [Middleware] Session ID from cookie
Context: {
  "requestId": "hq0p7wc4mhvi9mna",
  "present": false
}
[dev] [2025-11-12T04:34:03.622Z] [DEBUG][hq0p7wc4] [Middleware] Outgoing response
Context: {
  "requestId": "hq0p7wc4mhvi9mna",
  "status": 405,
  "statusText": "Method Not Allowed",
  "headers": {
    "allow": "POST",
    "content-type": "application/json"
  }
}
[2025-11-12T04:34:03.622Z] [DEBUG][hq0p7wc4] [Middleware] Processing path
Context: {
  "requestId": "hq0p7wc4mhvi9mna",
  "path": "/api/ai-image/jobs/"
}
[2025-11-12T04:34:03.622Z] [INFO][hq0p7wc4] GET /api/ai-image/jobs/ -> 405
Context: {
  "requestId": "hq0p7wc4mhvi9mna",
  "duration": 0,
  "status": 405
}
[dev] [2025-11-12T04:34:03.622Z] [INFO][prmvv42y] GET /api/dashboard/quick-actions
Context: {
  "requestId": "prmvv42ymhvi9mna",
  "endpoint": "/api/dashboard/quick-actions",
  "method": "GET"
}
[2025-11-12T04:34:03.622Z] [DEBUG][prmvv42y] [Middleware] Session ID from cookie
Context: {
  "requestId": "prmvv42ymhvi9mna",
  "present": false
}
[dev] [2025-11-12T04:34:03.625Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/dashboard/quick-actions',
    method: 'GET',
    action: 'public_quick_actions_accessed'
  }
}
[dev] [2025-11-12T04:34:03.625Z] [INFO][U:anonymous] Security Event: API_ACCESS
Context: {
  "userId": "anonymous",
  "ipAddress": "::1",
  "targetResource": "unknown",
  "securityEventType": "API_ACCESS",
  "originalDetails": {
    "event": "quick_actions_accessed",
    "actionCount": 1
  },
  "logLevel": "info",
  "eventSnapshot": {
    "type": "API_ACCESS",
    "userId": "anonymous",
    "targetResource": "unknown",
    "ipAddress": "::1",
    "timestamp": 1762922043625,
    "details": {
      "event": "quick_actions_accessed",
      "actionCount": 1
    }
  }
}
[2025-11-12T04:34:03.625Z] [DEBUG][prmvv42y] [Middleware] Outgoing response
Context: {
  "requestId": "prmvv42ymhvi9mna",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:03.625Z] [DEBUG][prmvv42y] [Middleware] Processing path
Context: {
  "requestId": "prmvv42ymhvi9mna",
  "path": "/api/dashboard/quick-actions"
}
[dev] [2025-11-12T04:34:03.626Z] [INFO][prmvv42y] GET /api/dashboard/quick-actions -> 200 (4ms)
Context: {
  "requestId": "prmvv42ymhvi9mna",
  "duration": 4,
  "status": 200
}
[2025-11-12T04:34:03.626Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/debug-login',
    method: 'POST',
    action: 'debug_login'
  }
}
[dev] [wrangler:info] GET /api/ai-image/jobs/ 405 Method Not Allowed (203ms)
[dev] [wrangler:info] GET /api/dashboard/quick-actions 200 OK (201ms)
 âœ“ |integration| tests/integration/dashboard-api.test.ts > Dashboard-API-Integration > GET /api/dashboard/quick-actions > sollte 401 fÃ¼r nicht authentifizierte Anfragen zurÃ¼ckgeben 203ms
[dev] [2025-11-12T04:34:03.628Z] [INFO][U:d44cd9d1-b68d-41bd-9c69-87ac5bda927f] Security Event: USER_EVENT
Context: {
  "userId": "d44cd9d1-b68d-41bd-9c69-87ac5bda927f",
  "securityEventType": "USER_EVENT",
  "originalDetails": {
    "eventType": "debug_login_created",
    "ipAddress": "::1",
    "debugUser": true
  },
  "logLevel": "info",
  "eventSnapshot": {
    "type": "USER_EVENT",
    "userId": "d44cd9d1-b68d-41bd-9c69-87ac5bda927f",
    "timestamp": 1762922043628,
    "details": {
      "eventType": "debug_login_created",
      "ipAddress": "::1",
      "debugUser": true
    }
  }
}
[dev] [2025-11-12T04:34:03.628Z] [DEBUG][ck6zexf6] [Middleware] Outgoing response
Context: {
  "requestId": "ck6zexf6mhvi9mna",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:03.628Z] [DEBUG][ck6zexf6] [Middleware] Processing path
Context: {
  "requestId": "ck6zexf6mhvi9mna",
  "path": "/api/debug-login"
}
[2025-11-12T04:34:03.628Z] [INFO][ck6zexf6] POST /api/debug-login -> 200 (6ms)
Context: {
  "requestId": "ck6zexf6mhvi9mna",
  "duration": 6,
  "status": 200
}
[dev] [2025-11-12T04:34:03.631Z] [INFO][qoxsblwv] GET /api/ai-image/jobs/
Context: {
  "requestId": "qoxsblwvmhvi9mnj",
  "endpoint": "/api/ai-image/jobs/",
  "method": "GET"
}
[dev] [2025-11-12T04:34:03.631Z] [DEBUG][qoxsblwv] [Middleware] Session ID from cookie
Context: {
  "requestId": "qoxsblwvmhvi9mnj",
  "present": false
}
[dev] [2025-11-12T04:34:03.631Z] [DEBUG][qoxsblwv] [Middleware] Outgoing response
Context: {
  "requestId": "qoxsblwvmhvi9mnj",
  "status": 405,
  "statusText": "Method Not Allowed",
  "headers": {
    "allow": "POST",
    "content-type": "application/json"
  }
}
[dev] [wrangler:info] POST /api/debug-login 200 OK (98ms)
[dev] [2025-11-12T04:34:03.631Z] [DEBUG][qoxsblwv] [Middleware] Processing path
Context: {
  "requestId": "qoxsblwvmhvi9mnj",
  "path": "/api/ai-image/jobs/"
}
[2025-11-12T04:34:03.631Z] [INFO][qoxsblwv] GET /api/ai-image/jobs/ -> 405
Context: {
  "requestId": "qoxsblwvmhvi9mnj",
  "duration": 0,
  "status": 405
}
[dev] [2025-11-12T04:34:03.632Z] [INFO][tfrpo0sk] GET /api/projects
Context: {
  "requestId": "tfrpo0skmhvi9mnk",
  "endpoint": "/api/projects",
  "method": "GET"
}
[dev] [2025-11-12T04:34:03.632Z] [DEBUG][tfrpo0sk] [Middleware] Session ID from cookie
Context: {
  "requestId": "tfrpo0skmhvi9mnk",
  "present": false
}
05:34:03 [WARN] [router] No API Route handler exists for the method "GET" for the route "/api/projects".
Found handlers: "POST"

[2025-11-12T04:34:03.632Z] [DEBUG][tfrpo0sk] [Middleware] Outgoing response
Context: {
  "requestId": "tfrpo0skmhvi9mnk",
  "status": 404,
  "statusText": "Not Found",
  "headers": "[empty object]"
}
[2025-11-12T04:34:03.632Z] [DEBUG][tfrpo0sk] [Middleware] Processing path
Context: {
  "requestId": "tfrpo0skmhvi9mnk",
  "path": "/api/projects"
}
[dev] [2025-11-12T04:34:03.632Z] [INFO][tfrpo0sk] GET /api/projects -> 404
Context: {
  "requestId": "tfrpo0skmhvi9mnk",
  "duration": 0,
  "status": 404
}
[2025-11-12T04:34:03.633Z] [INFO][pc3lt8bx] GET /api/projects
Context: {
  "requestId": "pc3lt8bxmhvi9mnl",
  "endpoint": "/api/projects",
  "method": "GET"
}
[2025-11-12T04:34:03.633Z] [DEBUG][pc3lt8bx] [Middleware] Session ID from cookie
Context: {
  "requestId": "pc3lt8bxmhvi9mnl",
  "present": false
}
[2025-11-12T04:34:03.633Z] [DEBUG][pc3lt8bx] [Middleware] Outgoing response
Context: {
  "requestId": "pc3lt8bxmhvi9mnl",
  "status": 404,
  "statusText": "Not Found",
  "headers": {
    "content-type": "text/html",
    "x-astro-reroute": "no",
    "x-astro-route-type": "page"
  }
}
[2025-11-12T04:34:03.633Z] [DEBUG][pc3lt8bx] [Middleware] Processing path
Context: {
  "requestId": "pc3lt8bxmhvi9mnl",
  "path": "/api/projects"
}
[dev] [2025-11-12T04:34:03.633Z] [INFO][pc3lt8bx] GET /api/projects -> 404
Context: {
  "requestId": "pc3lt8bxmhvi9mnl",
  "duration": 0,
  "status": 404
}
[dev] [2025-11-12T04:34:03.633Z] [INFO][iw8834d7] POST /api/billing/session
Context: {
  "requestId": "iw8834d7mhvi9mnl",
  "endpoint": "/api/billing/session",
  "method": "POST"
}
[dev] [2025-11-12T04:34:03.633Z] [DEBUG][iw8834d7] [Middleware] Session ID from cookie
Context: {
  "requestId": "iw8834d7mhvi9mnl",
  "present": false
}
[dev] [wrangler:info] GET /api/ai-image/jobs/ 405 Method Not Allowed (8ms)
[wrangler:info] GET /api/projects 404 Not Found (96ms)
[dev] [2025-11-12T04:34:03.637Z] [DEBUG][nddwf8ip] [Middleware] Outgoing response
Context: {
  "requestId": "nddwf8ipmhvi9lqo",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY",
    "x-xss-protection": "1; mode=block"
  }
}
[dev] [2025-11-12T04:34:03.637Z] [DEBUG][nddwf8ip] [Middleware] Processing path
Context: {
  "requestId": "nddwf8ipmhvi9lqo",
  "path": "/api/test/seed-suite-v2"
}
[2025-11-12T04:34:03.637Z] [INFO][nddwf8ip] POST /api/test/seed-suite-v2 -> 200 (1189ms)
Context: {
  "requestId": "nddwf8ipmhvi9lqo",
  "duration": 1189,
  "status": 200
}
[dev] [2025-11-12T04:34:03.638Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/billing/session',
    method: 'POST',
    action: 'create_checkout_session'
  }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:03.638Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: {
      reason: 'unauthenticated_access',
      endpoint: '/api/billing/session'
    }
  }
[dev] [2025-11-12T04:34:03.638Z] [DEBUG][iw8834d7] [Middleware] Outgoing response
Context: {
  "requestId": "iw8834d7mhvi9mnl",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:03.638Z] [DEBUG][iw8834d7] [Middleware] Processing path
Context: {
  "requestId": "iw8834d7mhvi9mnl",
  "path": "/api/billing/session"
}
[2025-11-12T04:34:03.638Z] [INFO][iw8834d7] POST /api/billing/session -> 401 (5ms)
Context: {
  "requestId": "iw8834d7mhvi9mnl",
  "duration": 5,
  "status": 401
}
[dev] [wrangler:info] POST /api/test/seed-suite-v2 200 OK (1193ms)
[wrangler:info] POST /api/billing/session 401 Unauthorized (98ms)
[2025-11-12T04:34:03.640Z] [INFO][citm9ilz] GET /api/ai-image/jobs/
Context: {
  "requestId": "citm9ilzmhvi9mns",
  "endpoint": "/api/ai-image/jobs/",
  "method": "GET"
}
[2025-11-12T04:34:03.640Z] [DEBUG][citm9ilz] [Middleware] Session ID from cookie
Context: {
  "requestId": "citm9ilzmhvi9mns",
  "present": false
}
[2025-11-12T04:34:03.640Z] [DEBUG][citm9ilz] [Middleware] Outgoing response
Context: {
  "requestId": "citm9ilzmhvi9mns",
  "status": 405,
  "statusText": "Method Not Allowed",
  "headers": {
    "allow": "POST",
    "content-type": "application/json"
  }
}
[2025-11-12T04:34:03.641Z] [DEBUG][citm9ilz] [Middleware] Processing path
Context: {
  "requestId": "citm9ilzmhvi9mns",
  "path": "/api/ai-image/jobs/"
}
[2025-11-12T04:34:03.641Z] [INFO][citm9ilz] GET /api/ai-image/jobs/ -> 405 (1ms)
Context: {
  "requestId": "citm9ilzmhvi9mns",
  "duration": 1,
  "status": 405
}
[2025-11-12T04:34:03.641Z] [INFO][y0vem528] GET /api/dashboard/stats
Context: {
  "requestId": "y0vem528mhvi9mnt",
  "endpoint": "/api/dashboard/stats",
  "method": "GET"
}
 âœ“ |integration| tests/integration/projects-api.test.ts > Projects-API-Integration > GET /api/projects > sollte 401 fÃ¼r nicht authentifizierte Anfragen zurÃ¼ckgeben 99ms
[dev] [2025-11-12T04:34:03.642Z] [DEBUG][y0vem528] [Middleware] Session ID from cookie
Context: {
  "requestId": "y0vem528mhvi9mnt",
  "present": false
}
[dev] [wrangler:info] GET /api/ai-image/jobs/ 405 Method Not Allowed (7ms)
[dev] [2025-11-12T04:34:03.645Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/dashboard/stats',
    method: 'GET',
    action: 'dashboard_stats_accessed'
  }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:03.645Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: {
      reason: 'unauthenticated_access',
      endpoint: '/api/dashboard/stats'
    }
  }
[dev] [2025-11-12T04:34:03.645Z] [DEBUG][y0vem528] [Middleware] Outgoing response
Context: {
  "requestId": "y0vem528mhvi9mnt",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:03.645Z] [DEBUG][y0vem528] [Middleware] Processing path
Context: {
  "requestId": "y0vem528mhvi9mnt",
  "path": "/api/dashboard/stats"
}
[dev] [2025-11-12T04:34:03.645Z] [INFO][y0vem528] GET /api/dashboard/stats -> 401 (4ms)
Context: {
  "requestId": "y0vem528mhvi9mnt",
  "duration": 4,
  "status": 401
}
[dev] [wrangler:info] GET /api/dashboard/stats 401 Unauthorized (15ms)
[dev] [2025-11-12T04:34:03.648Z] [INFO][tttsoxeo] GET /api/ai-image/jobs/
Context: {
  "requestId": "tttsoxeomhvi9mo0",
  "endpoint": "/api/ai-image/jobs/",
  "method": "GET"
}
[dev] [2025-11-12T04:34:03.648Z] [DEBUG][tttsoxeo] [Middleware] Session ID from cookie
Context: {
  "requestId": "tttsoxeomhvi9mo0",
  "present": false
}
[2025-11-12T04:34:03.648Z] [DEBUG][tttsoxeo] [Middleware] Outgoing response
Context: {
  "requestId": "tttsoxeomhvi9mo0",
  "status": 405,
  "statusText": "Method Not Allowed",
  "headers": {
    "allow": "POST",
    "content-type": "application/json"
  }
}
[2025-11-12T04:34:03.648Z] [DEBUG][tttsoxeo] [Middleware] Processing path
Context: {
  "requestId": "tttsoxeomhvi9mo0",
  "path": "/api/ai-image/jobs/"
}
[dev] [2025-11-12T04:34:03.648Z] [INFO][tttsoxeo] GET /api/ai-image/jobs/ -> 405
Context: {
  "requestId": "tttsoxeomhvi9mo0",
  "duration": 0,
  "status": 405
}
[dev] [2025-11-12T04:34:03.648Z] [INFO][e1c9q4sn] POST /api/projects
Context: {
  "requestId": "e1c9q4snmhvi9mo0",
  "endpoint": "/api/projects",
  "method": "POST"
}
[dev] [2025-11-12T04:34:03.648Z] [DEBUG][e1c9q4sn] [Middleware] Session ID from cookie
Context: {
  "requestId": "e1c9q4snmhvi9mo0",
  "present": false
}
[2025-11-12T04:34:03.648Z] [INFO][domd1njo] POST /api/comments/create
Context: {
  "requestId": "domd1njomhvi9mo0",
  "endpoint": "/api/comments/create",
  "method": "POST"
}
[2025-11-12T04:34:03.649Z] [DEBUG][domd1njo] [Middleware] Session ID from cookie
Context: {
  "requestId": "domd1njomhvi9mo0",
  "present": true
}
[2025-11-12T04:34:03.649Z] [INFO][eoo9ntc1] POST /api/user/avatar
Context: {
  "requestId": "eoo9ntc1mhvi9mo1",
  "endpoint": "/api/user/avatar",
  "method": "POST"
}
[2025-11-12T04:34:03.649Z] [DEBUG][eoo9ntc1] [Middleware] Session ID from cookie
Context: {
  "requestId": "eoo9ntc1mhvi9mo1",
  "present": true
}
[dev] [2025-11-12T04:34:03.649Z] [INFO][ksrjm1da] POST /api/billing/session
Context: {
  "requestId": "ksrjm1damhvi9mo1",
  "endpoint": "/api/billing/session",
  "method": "POST"
}
[2025-11-12T04:34:03.649Z] [DEBUG][ksrjm1da] [Middleware] Session ID from cookie
Context: {
  "requestId": "ksrjm1damhvi9mo1",
  "present": false
}
[dev] [wrangler:info] GET /api/ai-image/jobs/ 405 Method Not Allowed (6ms)
[dev] [2025-11-12T04:34:03.652Z] [DEBUG][domd1njo] [Middleware] Session validation result
Context: {
  "requestId": "domd1njomhvi9mo0",
  "sessionValid": true,
  "userValid": true
}
[dev] [2025-11-12T04:34:03.652Z] [DEBUG][eoo9ntc1] [Middleware] Session validation result
Context: {
  "requestId": "eoo9ntc1mhvi9mo1",
  "sessionValid": true,
  "userValid": true
}
[dev] [2025-11-12T04:34:03.655Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/billing/session',
    method: 'POST',
    action: 'create_checkout_session'
  }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:03.655Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: {
      reason: 'unauthenticated_access',
      endpoint: '/api/billing/session'
    }
  }
[dev] [2025-11-12T04:34:03.655Z] [DEBUG][ksrjm1da] [Middleware] Outgoing response
Context: {
  "requestId": "ksrjm1damhvi9mo1",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:03.655Z] [DEBUG][ksrjm1da] [Middleware] Processing path
Context: {
  "requestId": "ksrjm1damhvi9mo1",
  "path": "/api/billing/session"
}
[2025-11-12T04:34:03.655Z] [INFO][ksrjm1da] POST /api/billing/session -> 401 (6ms)
Context: {
  "requestId": "ksrjm1damhvi9mo1",
  "duration": 6,
  "status": 401
}
[2025-11-12T04:34:03.656Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/projects',
    method: 'POST',
    action: 'project_created'
  }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:03.656Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: { reason: 'unauthenticated_access', endpoint: '/api/projects' }
  }
[dev] [2025-11-12T04:34:03.656Z] [DEBUG][e1c9q4sn] [Middleware] Outgoing response
Context: {
  "requestId": "e1c9q4snmhvi9mo0",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:03.656Z] [DEBUG][e1c9q4sn] [Middleware] Processing path
Context: {
  "requestId": "e1c9q4snmhvi9mo0",
  "path": "/api/projects"
}
[2025-11-12T04:34:03.656Z] [INFO][e1c9q4sn] POST /api/projects -> 401 (8ms)
Context: {
  "requestId": "e1c9q4snmhvi9mo0",
  "duration": 8,
  "status": 401
}
[dev] [2025-11-12T04:34:03.658Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'e2e-admin-0001',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/comments/create',
    method: 'POST',
    action: 'comment_create'
  }
}
[dev] [2025-11-12T04:34:03.659Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'd44cd9d1-b68d-41bd-9c69-87ac5bda927f',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/user/avatar',
    method: 'POST',
    action: 'avatar_upload'
  }
}
[wrangler:info] POST /api/billing/session 401 Unauthorized (15ms)
[dev] [wrangler:info] POST /api/projects 401 Unauthorized (19ms)
[dev] [2025-11-12T04:34:03.669Z] [DEBUG][domd1njo] [Middleware] Outgoing response
Context: {
  "requestId": "domd1njomhvi9mo0",
  "status": 400,
  "statusText": "Bad Request",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:03.669Z] [DEBUG][domd1njo] [Middleware] Processing path
Context: {
  "requestId": "domd1njomhvi9mo0",
  "path": "/api/comments/create"
}
[2025-11-12T04:34:03.669Z] [INFO][domd1njo] POST /api/comments/create -> 400 (21ms)
Context: {
  "requestId": "domd1njomhvi9mo0",
  "duration": 21,
  "status": 400
}
[2025-11-12T04:34:03.670Z] [INFO][U:d44cd9d1-b68d-41bd-9c69-87ac5bda927f] Security Event: USER_EVENT
Context: {
  "userId": "d44cd9d1-b68d-41bd-9c69-87ac5bda927f",
  "securityEventType": "USER_EVENT",
  "originalDetails": {
    "eventType": "avatar_updated",
    "ipAddress": "::1",
    "imageUrl": "/r2/avatar-d44cd9d1-b68d-41bd-9c69-87ac5bda927f-1762922043659.jpg"
  },
  "logLevel": "info",
  "eventSnapshot": {
    "type": "USER_EVENT",
    "userId": "d44cd9d1-b68d-41bd-9c69-87ac5bda927f",
    "timestamp": 1762922043670,
    "details": {
      "eventType": "avatar_updated",
      "ipAddress": "::1",
      "imageUrl": "/r2/avatar-d44cd9d1-b68d-41bd-9c69-87ac5bda927f-1762922043659.jpg"
    }
  }
}
[dev] [2025-11-12T04:34:03.670Z] [DEBUG][eoo9ntc1] [Middleware] Outgoing response
Context: {
  "requestId": "eoo9ntc1mhvi9mo1",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:03.670Z] [DEBUG][eoo9ntc1] [Middleware] Processing path
Context: {
  "requestId": "eoo9ntc1mhvi9mo1",
  "path": "/api/user/avatar"
}
[2025-11-12T04:34:03.670Z] [INFO][eoo9ntc1] POST /api/user/avatar -> 200 (21ms)
Context: {
  "requestId": "eoo9ntc1mhvi9mo1",
  "duration": 21,
  "status": 200
}
[dev] [wrangler:info] POST /api/comments/create 400 Bad Request (28ms)
[dev] [wrangler:info] POST /api/user/avatar 200 OK (28ms)
[dev] [2025-11-12T04:34:03.672Z] [INFO][9zi5n7y1] POST /api/projects
Context: {
  "requestId": "9zi5n7y1mhvi9moo",
  "endpoint": "/api/projects",
  "method": "POST"
}
[2025-11-12T04:34:03.672Z] [DEBUG][9zi5n7y1] [Middleware] Session ID from cookie
Context: {
  "requestId": "9zi5n7y1mhvi9moo",
  "present": false
}
[2025-11-12T04:34:03.672Z] [INFO][wknp5bsc] GET /api/dashboard/activity
Context: {
  "requestId": "wknp5bscmhvi9moo",
  "endpoint": "/api/dashboard/activity",
  "method": "GET"
}
[2025-11-12T04:34:03.672Z] [DEBUG][wknp5bsc] [Middleware] Session ID from cookie
Context: {
  "requestId": "wknp5bscmhvi9moo",
  "present": false
}
[2025-11-12T04:34:03.673Z] [INFO][ph75ifu0] GET /api/ai-image/jobs/
Context: {
  "requestId": "ph75ifu0mhvi9mop",
  "endpoint": "/api/ai-image/jobs/",
  "method": "GET"
}
[dev] [2025-11-12T04:34:03.673Z] [DEBUG][ph75ifu0] [Middleware] Session ID from cookie
Context: {
  "requestId": "ph75ifu0mhvi9mop",
  "present": false
}
[2025-11-12T04:34:03.673Z] [DEBUG][ph75ifu0] [Middleware] Outgoing response
Context: {
  "requestId": "ph75ifu0mhvi9mop",
  "status": 405,
  "statusText": "Method Not Allowed",
  "headers": {
    "allow": "POST",
    "content-type": "application/json"
  }
}
[2025-11-12T04:34:03.673Z] [DEBUG][ph75ifu0] [Middleware] Processing path
Context: {
  "requestId": "ph75ifu0mhvi9mop",
  "path": "/api/ai-image/jobs/"
}
[2025-11-12T04:34:03.673Z] [INFO][ph75ifu0] GET /api/ai-image/jobs/ -> 405
Context: {
  "requestId": "ph75ifu0mhvi9mop",
  "duration": 0,
  "status": 405
}
[2025-11-12T04:34:03.673Z] [INFO][ord3ibgl] GET /api/billing/credits
Context: {
  "requestId": "ord3ibglmhvi9mop",
  "endpoint": "/api/billing/credits",
  "method": "GET"
}
[2025-11-12T04:34:03.673Z] [DEBUG][ord3ibgl] [Middleware] Session ID from cookie
Context: {
  "requestId": "ord3ibglmhvi9mop",
  "present": false
}
05:34:03 [WARN] [router] No API Route handler exists for the method "GET" for the route "/api/billing/credits".
Found handlers: "POST"

[2025-11-12T04:34:03.674Z] [DEBUG][ord3ibgl] [Middleware] Outgoing response
Context: {
  "requestId": "ord3ibglmhvi9mop",
  "status": 404,
  "statusText": "Not Found",
  "headers": "[empty object]"
}
[2025-11-12T04:34:03.674Z] [DEBUG][ord3ibgl] [Middleware] Processing path
Context: {
  "requestId": "ord3ibglmhvi9mop",
  "path": "/api/billing/credits"
}
[2025-11-12T04:34:03.674Z] [INFO][ord3ibgl] GET /api/billing/credits -> 404 (1ms)
Context: {
  "requestId": "ord3ibglmhvi9mop",
  "duration": 1,
  "status": 404
}
[2025-11-12T04:34:03.674Z] [INFO][j3slgy4n] GET /api/billing/credits
Context: {
  "requestId": "j3slgy4nmhvi9moq",
  "endpoint": "/api/billing/credits",
  "method": "GET"
}
[2025-11-12T04:34:03.674Z] [DEBUG][j3slgy4n] [Middleware] Session ID from cookie
Context: {
  "requestId": "j3slgy4nmhvi9moq",
  "present": false
}
[dev] [2025-11-12T04:34:03.674Z] [DEBUG][j3slgy4n] [Middleware] Outgoing response
Context: {
  "requestId": "j3slgy4nmhvi9moq",
  "status": 404,
  "statusText": "Not Found",
  "headers": {
    "content-type": "text/html",
    "x-astro-reroute": "no",
    "x-astro-route-type": "page"
  }
}
[2025-11-12T04:34:03.674Z] [DEBUG][j3slgy4n] [Middleware] Processing path
Context: {
  "requestId": "j3slgy4nmhvi9moq",
  "path": "/api/billing/credits"
}
[2025-11-12T04:34:03.674Z] [INFO][j3slgy4n] GET /api/billing/credits -> 404
Context: {
  "requestId": "j3slgy4nmhvi9moq",
  "duration": 0,
  "status": 404
}
 Ã— |integration| tests/integration/api/comments-performance.test.ts > /api/comments/performance (integration) > returns search results when authenticated 1231ms
   â†’ Failed to create comment: 400 Bad Request â€” {"success":false,"error":{"type":"validation_error","message":"Invalid request body","details":{"details":{"fieldErrors":{"_form":["Unrecognized key(s) in object: 'csrfToken'"]},"issues":[{"path":[],"code":"unrecognized_keys","message":"Unrecognized key(s) in object: 'csrfToken'"}]}}}}
[dev] [wrangler:info] GET /api/ai-image/jobs/ 405 Method Not Allowed (24ms)
[wrangler:info] GET /api/billing/credits 404 Not Found (14ms)
[dev] [2025-11-12T04:34:03.682Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/dashboard/activity',
    method: 'GET',
    action: 'activity_feed_accessed'
  }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:03.682Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: {
      reason: 'unauthenticated_access',
      endpoint: '/api/dashboard/activity'
    }
  }
[dev] [2025-11-12T04:34:03.682Z] [DEBUG][wknp5bsc] [Middleware] Outgoing response
Context: {
  "requestId": "wknp5bscmhvi9moo",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:03.683Z] [DEBUG][wknp5bsc] [Middleware] Processing path
Context: {
  "requestId": "wknp5bscmhvi9moo",
  "path": "/api/dashboard/activity"
}
[2025-11-12T04:34:03.683Z] [INFO][wknp5bsc] GET /api/dashboard/activity -> 401 (11ms)
Context: {
  "requestId": "wknp5bscmhvi9moo",
  "duration": 11,
  "status": 401
}
[2025-11-12T04:34:03.683Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/projects',
    method: 'POST',
    action: 'project_created'
  }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:03.683Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: { reason: 'unauthenticated_access', endpoint: '/api/projects' }
  }
[dev] [2025-11-12T04:34:03.684Z] [DEBUG][9zi5n7y1] [Middleware] Outgoing response
Context: {
  "requestId": "9zi5n7y1mhvi9moo",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:03.684Z] [DEBUG][9zi5n7y1] [Middleware] Processing path
Context: {
  "requestId": "9zi5n7y1mhvi9moo",
  "path": "/api/projects"
}
[2025-11-12T04:34:03.684Z] [INFO][9zi5n7y1] POST /api/projects -> 401 (12ms)
Context: {
  "requestId": "9zi5n7y1mhvi9moo",
  "duration": 12,
  "status": 401
}
[dev] [2025-11-12T04:34:03.688Z] [INFO][85n18dak] POST /api/user/avatar
Context: {
  "requestId": "85n18dakmhvi9mp4",
  "endpoint": "/api/user/avatar",
  "method": "POST"
}
[2025-11-12T04:34:03.688Z] [DEBUG][85n18dak] [Middleware] Session ID from cookie
Context: {
  "requestId": "85n18dakmhvi9mp4",
  "present": true
}
[2025-11-12T04:34:03.688Z] [INFO][7n7z7hvc] GET /api/ai-image/jobs/
Context: {
  "requestId": "7n7z7hvcmhvi9mp4",
  "endpoint": "/api/ai-image/jobs/",
  "method": "GET"
}
[2025-11-12T04:34:03.688Z] [DEBUG][7n7z7hvc] [Middleware] Session ID from cookie
Context: {
  "requestId": "7n7z7hvcmhvi9mp4",
  "present": false
}
[2025-11-12T04:34:03.688Z] [DEBUG][7n7z7hvc] [Middleware] Outgoing response
Context: {
  "requestId": "7n7z7hvcmhvi9mp4",
  "status": 405,
  "statusText": "Method Not Allowed",
  "headers": {
    "allow": "POST",
    "content-type": "application/json"
  }
}
[2025-11-12T04:34:03.688Z] [DEBUG][7n7z7hvc] [Middleware] Processing path
Context: {
  "requestId": "7n7z7hvcmhvi9mp4",
  "path": "/api/ai-image/jobs/"
}
[2025-11-12T04:34:03.688Z] [INFO][7n7z7hvc] GET /api/ai-image/jobs/ -> 405
Context: {
  "requestId": "7n7z7hvcmhvi9mp4",
  "duration": 0,
  "status": 405
}
[dev] [2025-11-12T04:34:03.690Z] [DEBUG][85n18dak] [Middleware] Session validation result
Context: {
  "requestId": "85n18dakmhvi9mp4",
  "sessionValid": true,
  "userValid": true
}
[dev] [wrangler:info] GET /api/dashboard/activity 401 Unauthorized (41ms)
[dev] [2025-11-12T04:34:03.692Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'd44cd9d1-b68d-41bd-9c69-87ac5bda927f',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/user/avatar',
    method: 'POST',
    action: 'avatar_upload'
  }
}
[dev] [wrangler:info] POST /api/projects 401 Unauthorized (28ms)
[wrangler:info] POST /api/user/avatar 200 OK (14ms)
[2025-11-12T04:34:03.695Z] [INFO][U:d44cd9d1-b68d-41bd-9c69-87ac5bda927f] Security Event: USER_EVENT
Context: {
  "userId": "d44cd9d1-b68d-41bd-9c69-87ac5bda927f",
  "securityEventType": "USER_EVENT",
  "originalDetails": {
    "eventType": "avatar_updated",
    "ipAddress": "::1",
    "imageUrl": "/r2/avatar-d44cd9d1-b68d-41bd-9c69-87ac5bda927f-1762922043692.jpg"
  },
  "logLevel": "info",
  "eventSnapshot": {
    "type": "USER_EVENT",
    "userId": "d44cd9d1-b68d-41bd-9c69-87ac5bda927f",
    "timestamp": 1762922043695,
    "details": {
      "eventType": "avatar_updated",
      "ipAddress": "::1",
      "imageUrl": "/r2/avatar-d44cd9d1-b68d-41bd-9c69-87ac5bda927f-1762922043692.jpg"
    }
  }
}
[2025-11-12T04:34:03.695Z] [DEBUG][85n18dak] [Middleware] Outgoing response
Context: {
  "requestId": "85n18dakmhvi9mp4",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:03.695Z] [DEBUG][85n18dak] [Middleware] Processing path
Context: {
  "requestId": "85n18dakmhvi9mp4",
  "path": "/api/user/avatar"
}
[2025-11-12T04:34:03.695Z] [INFO][85n18dak] POST /api/user/avatar -> 200 (7ms)
Context: {
  "requestId": "85n18dakmhvi9mp4",
  "duration": 7,
  "status": 200
}
[dev] [wrangler:info] GET /api/ai-image/jobs/ 405 Method Not Allowed (15ms)
[dev] [2025-11-12T04:34:03.698Z] [INFO][jmofh7uj] POST /api/user/avatar
Context: {
  "requestId": "jmofh7ujmhvi9mpe",
  "endpoint": "/api/user/avatar",
  "method": "POST"
}
[2025-11-12T04:34:03.699Z] [DEBUG][jmofh7uj] [Middleware] Session ID from cookie
Context: {
  "requestId": "jmofh7ujmhvi9mpe",
  "present": true
}
[dev] [2025-11-12T04:34:03.702Z] [INFO][b8jx4wme] GET /api/billing/credits
Context: {
  "requestId": "b8jx4wmemhvi9mpi",
  "endpoint": "/api/billing/credits",
  "method": "GET"
}
[dev] [2025-11-12T04:34:03.703Z] [DEBUG][b8jx4wme] [Middleware] Session ID from cookie
Context: {
  "requestId": "b8jx4wmemhvi9mpi",
  "present": false
}
05:34:03 [WARN] [router] No API Route handler exists for the method "GET" for the route "/api/billing/credits".
Found handlers: "POST"
[dev] [2025-11-12T04:34:03.703Z] [DEBUG][b8jx4wme] [Middleware] Outgoing response
Context: {
  "requestId": "b8jx4wmemhvi9mpi",
  "status": 404,
  "statusText": "Not Found",
  "headers": "[empty object]"
}
[dev] [2025-11-12T04:34:03.703Z] [DEBUG][b8jx4wme] [Middleware] Processing path
Context: {
  "requestId": "b8jx4wmemhvi9mpi",
  "path": "/api/billing/credits"
}
[2025-11-12T04:34:03.703Z] [INFO][b8jx4wme] GET /api/billing/credits -> 404 (1ms)
Context: {
  "requestId": "b8jx4wmemhvi9mpi",
  "duration": 1,
  "status": 404
}
[dev] [2025-11-12T04:34:03.703Z] [INFO][c0yks8y0] GET /api/billing/credits
Context: {
  "requestId": "c0yks8y0mhvi9mpj",
  "endpoint": "/api/billing/credits",
  "method": "GET"
}
[dev] [2025-11-12T04:34:03.703Z] [DEBUG][c0yks8y0] [Middleware] Session ID from cookie
Context: {
  "requestId": "c0yks8y0mhvi9mpj",
  "present": false
}
[dev] [2025-11-12T04:34:03.704Z] [DEBUG][c0yks8y0] [Middleware] Outgoing response
Context: {
  "requestId": "c0yks8y0mhvi9mpj",
  "status": 404,
  "statusText": "Not Found",
  "headers": {
    "content-type": "text/html",
    "x-astro-reroute": "no",
    "x-astro-route-type": "page"
  }
}
[dev] [2025-11-12T04:34:03.704Z] [DEBUG][c0yks8y0] [Middleware] Processing path
Context: {
  "requestId": "c0yks8y0mhvi9mpj",
  "path": "/api/billing/credits"
}
[2025-11-12T04:34:03.704Z] [INFO][c0yks8y0] GET /api/billing/credits -> 404 (1ms)
Context: {
  "requestId": "c0yks8y0mhvi9mpj",
  "duration": 1,
  "status": 404
}
[2025-11-12T04:34:03.704Z] [INFO][elsjgpxo] POST /api/user/avatar
Context: {
  "requestId": "elsjgpxomhvi9mpk",
  "endpoint": "/api/user/avatar",
  "method": "POST"
}
[2025-11-12T04:34:03.704Z] [DEBUG][elsjgpxo] [Middleware] Session ID from cookie
Context: {
  "requestId": "elsjgpxomhvi9mpk",
  "present": true
}
[2025-11-12T04:34:03.704Z] [INFO][9xkryzrh] POST /api/user/avatar
Context: {
  "requestId": "9xkryzrhmhvi9mpk",
  "endpoint": "/api/user/avatar",
  "method": "POST"
}
[2025-11-12T04:34:03.704Z] [DEBUG][9xkryzrh] [Middleware] Session ID from cookie
Context: {
  "requestId": "9xkryzrhmhvi9mpk",
  "present": true
}
[2025-11-12T04:34:03.704Z] [INFO][j45q8cie] POST /api/user/avatar
Context: {
  "requestId": "j45q8ciemhvi9mpk",
  "endpoint": "/api/user/avatar",
  "method": "POST"
}
[2025-11-12T04:34:03.704Z] [DEBUG][j45q8cie] [Middleware] Session ID from cookie
Context: {
  "requestId": "j45q8ciemhvi9mpk",
  "present": true
}
[dev] [2025-11-12T04:34:03.705Z] [INFO][t82i1ufq] POST /api/user/avatar
Context: {
  "requestId": "t82i1ufqmhvi9mpl",
  "endpoint": "/api/user/avatar",
  "method": "POST"
}
[2025-11-12T04:34:03.705Z] [DEBUG][t82i1ufq] [Middleware] Session ID from cookie
Context: {
  "requestId": "t82i1ufqmhvi9mpl",
  "present": true
}
[dev] [2025-11-12T04:34:03.705Z] [INFO][6an6rr91] POST /api/user/avatar
Context: {
  "requestId": "6an6rr91mhvi9mpl",
  "endpoint": "/api/user/avatar",
  "method": "POST"
}
[2025-11-12T04:34:03.705Z] [DEBUG][6an6rr91] [Middleware] Session ID from cookie
Context: {
  "requestId": "6an6rr91mhvi9mpl",
  "present": true
}
[2025-11-12T04:34:03.705Z] [INFO][3my1ehxg] POST /api/user/avatar
Context: {
  "requestId": "3my1ehxgmhvi9mpl",
  "endpoint": "/api/user/avatar",
  "method": "POST"
}
[2025-11-12T04:34:03.705Z] [DEBUG][3my1ehxg] [Middleware] Session ID from cookie
Context: {
  "requestId": "3my1ehxgmhvi9mpl",
  "present": true
}
[dev] [2025-11-12T04:34:03.708Z] [DEBUG][jmofh7uj] [Middleware] Session validation result
Context: {
  "requestId": "jmofh7ujmhvi9mpe",
  "sessionValid": true,
  "userValid": true
}
[2025-11-12T04:34:03.708Z] [DEBUG][elsjgpxo] [Middleware] Session validation result
Context: {
  "requestId": "elsjgpxomhvi9mpk",
  "sessionValid": true,
  "userValid": true
}
[dev] [2025-11-12T04:34:03.709Z] [DEBUG][9xkryzrh] [Middleware] Session validation result
Context: {
  "requestId": "9xkryzrhmhvi9mpk",
  "sessionValid": true,
  "userValid": true
}
[2025-11-12T04:34:03.709Z] [DEBUG][j45q8cie] [Middleware] Session validation result
Context: {
  "requestId": "j45q8ciemhvi9mpk",
  "sessionValid": true,
  "userValid": true
}
[2025-11-12T04:34:03.709Z] [DEBUG][t82i1ufq] [Middleware] Session validation result
Context: {
  "requestId": "t82i1ufqmhvi9mpl",
  "sessionValid": true,
  "userValid": true
}
[2025-11-12T04:34:03.709Z] [DEBUG][6an6rr91] [Middleware] Session validation result
Context: {
  "requestId": "6an6rr91mhvi9mpl",
  "sessionValid": true,
  "userValid": true
}
[2025-11-12T04:34:03.709Z] [DEBUG][3my1ehxg] [Middleware] Session validation result
Context: {
  "requestId": "3my1ehxgmhvi9mpl",
  "sessionValid": true,
  "userValid": true
}
[dev] [wrangler:info] GET /api/billing/credits 404 Not Found (24ms)
[dev] [2025-11-12T04:34:03.715Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'd44cd9d1-b68d-41bd-9c69-87ac5bda927f',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/user/avatar',
    method: 'POST',
    action: 'avatar_upload'
  }
}
[dev] [2025-11-12T04:34:03.716Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'd44cd9d1-b68d-41bd-9c69-87ac5bda927f',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/user/avatar',
    method: 'POST',
    action: 'avatar_upload'
  }
}
[2025-11-12T04:34:03.716Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'd44cd9d1-b68d-41bd-9c69-87ac5bda927f',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/user/avatar',
    method: 'POST',
    action: 'avatar_upload'
  }
}
[2025-11-12T04:34:03.716Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'd44cd9d1-b68d-41bd-9c69-87ac5bda927f',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/user/avatar',
    method: 'POST',
    action: 'avatar_upload'
  }
}
[dev] [2025-11-12T04:34:03.716Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'd44cd9d1-b68d-41bd-9c69-87ac5bda927f',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/user/avatar',
    method: 'POST',
    action: 'avatar_upload'
  }
}
[2025-11-12T04:34:03.716Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'd44cd9d1-b68d-41bd-9c69-87ac5bda927f',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/user/avatar',
    method: 'POST',
    action: 'avatar_upload'
  }
}
[dev] [2025-11-12T04:34:03.716Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'd44cd9d1-b68d-41bd-9c69-87ac5bda927f',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/user/avatar',
    method: 'POST',
    action: 'avatar_upload'
  }
}
[dev] [2025-11-12T04:34:03.729Z] [INFO][U:d44cd9d1-b68d-41bd-9c69-87ac5bda927f] Security Event: USER_EVENT
Context: {
  "userId": "d44cd9d1-b68d-41bd-9c69-87ac5bda927f",
  "securityEventType": "USER_EVENT",
  "originalDetails": {
    "eventType": "avatar_updated",
    "ipAddress": "::1",
    "imageUrl": "/r2/avatar-d44cd9d1-b68d-41bd-9c69-87ac5bda927f-1762922043716.jpg"
  },
  "logLevel": "info",
  "eventSnapshot": {
    "type": "USER_EVENT",
    "userId": "d44cd9d1-b68d-41bd-9c69-87ac5bda927f",
    "timestamp": 1762922043729,
    "details": {
      "eventType": "avatar_updated",
      "ipAddress": "::1",
      "imageUrl": "/r2/avatar-d44cd9d1-b68d-41bd-9c69-87ac5bda927f-1762922043716.jpg"
    }
  }
}
[dev] [2025-11-12T04:34:03.730Z] [DEBUG][3my1ehxg] [Middleware] Outgoing response
Context: {
  "requestId": "3my1ehxgmhvi9mpl",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:03.730Z] [DEBUG][3my1ehxg] [Middleware] Processing path
Context: {
  "requestId": "3my1ehxgmhvi9mpl",
  "path": "/api/user/avatar"
}
 âœ“ |integration| tests/integration/dashboard-api.test.ts > Dashboard-API-Integration > Security-Headers fÃ¼r alle Dashboard-Endpunkte > sollte Security-Headers fÃ¼r /api/dashboard/stats setzen 20ms
 âœ“ |integration| tests/integration/dashboard-api.test.ts > Dashboard-API-Integration > Security-Headers fÃ¼r alle Dashboard-Endpunkte > sollte Security-Headers fÃ¼r /api/dashboard/activity setzen 48ms
[dev] [2025-11-12T04:34:03.730Z] [INFO][3my1ehxg] POST /api/user/avatar -> 200 (25ms)
Context: {
  "requestId": "3my1ehxgmhvi9mpl",
  "duration": 25,
  "status": 200
}
[dev] [2025-11-12T04:34:03.730Z] [INFO][U:d44cd9d1-b68d-41bd-9c69-87ac5bda927f] Security Event: USER_EVENT
Context: {
  "userId": "d44cd9d1-b68d-41bd-9c69-87ac5bda927f",
  "securityEventType": "USER_EVENT",
  "originalDetails": {
    "eventType": "avatar_updated",
    "ipAddress": "::1",
    "imageUrl": "/r2/avatar-d44cd9d1-b68d-41bd-9c69-87ac5bda927f-1762922043716.jpg"
  },
  "logLevel": "info",
  "eventSnapshot": {
    "type": "USER_EVENT",
    "userId": "d44cd9d1-b68d-41bd-9c69-87ac5bda927f",
    "timestamp": 1762922043730,
    "details": {
      "eventType": "avatar_updated",
      "ipAddress": "::1",
      "imageUrl": "/r2/avatar-d44cd9d1-b68d-41bd-9c69-87ac5bda927f-1762922043716.jpg"
    }
  }
}
[2025-11-12T04:34:03.730Z] [DEBUG][jmofh7uj] [Middleware] Outgoing response
Context: {
  "requestId": "jmofh7ujmhvi9mpe",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:03.730Z] [DEBUG][jmofh7uj] [Middleware] Processing path
Context: {
  "requestId": "jmofh7ujmhvi9mpe",
  "path": "/api/user/avatar"
}
[2025-11-12T04:34:03.730Z] [INFO][jmofh7uj] POST /api/user/avatar -> 200 (32ms)
Context: {
  "requestId": "jmofh7ujmhvi9mpe",
  "duration": 32,
  "status": 200
}
[2025-11-12T04:34:03.730Z] [INFO][U:d44cd9d1-b68d-41bd-9c69-87ac5bda927f] Security Event: USER_EVENT
Context: {
  "userId": "d44cd9d1-b68d-41bd-9c69-87ac5bda927f",
  "securityEventType": "USER_EVENT",
  "originalDetails": {
    "eventType": "avatar_updated",
    "ipAddress": "::1",
    "imageUrl": "/r2/avatar-d44cd9d1-b68d-41bd-9c69-87ac5bda927f-1762922043716.jpg"
  },
  "logLevel": "info",
  "eventSnapshot": {
    "type": "USER_EVENT",
    "userId": "d44cd9d1-b68d-41bd-9c69-87ac5bda927f",
    "timestamp": 1762922043730,
    "details": {
      "eventType": "avatar_updated",
      "ipAddress": "::1",
      "imageUrl": "/r2/avatar-d44cd9d1-b68d-41bd-9c69-87ac5bda927f-1762922043716.jpg"
    }
  }
}
[2025-11-12T04:34:03.730Z] [DEBUG][elsjgpxo] [Middleware] Outgoing response
Context: {
  "requestId": "elsjgpxomhvi9mpk",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:03.730Z] [DEBUG][elsjgpxo] [Middleware] Processing path
Context: {
  "requestId": "elsjgpxomhvi9mpk",
  "path": "/api/user/avatar"
}
[2025-11-12T04:34:03.730Z] [INFO][elsjgpxo] POST /api/user/avatar -> 200 (26ms)
Context: {
  "requestId": "elsjgpxomhvi9mpk",
  "duration": 26,
  "status": 200
}
[2025-11-12T04:34:03.730Z] [INFO][U:d44cd9d1-b68d-41bd-9c69-87ac5bda927f] Security Event: USER_EVENT
Context: {
  "userId": "d44cd9d1-b68d-41bd-9c69-87ac5bda927f",
  "securityEventType": "USER_EVENT",
  "originalDetails": {
    "eventType": "avatar_updated",
    "ipAddress": "::1",
    "imageUrl": "/r2/avatar-d44cd9d1-b68d-41bd-9c69-87ac5bda927f-1762922043716.jpg"
  },
  "logLevel": "info",
  "eventSnapshot": {
    "type": "USER_EVENT",
    "userId": "d44cd9d1-b68d-41bd-9c69-87ac5bda927f",
    "timestamp": 1762922043730,
    "details": {
      "eventType": "avatar_updated",
      "ipAddress": "::1",
      "imageUrl": "/r2/avatar-d44cd9d1-b68d-41bd-9c69-87ac5bda927f-1762922043716.jpg"
    }
  }
}
[dev] [2025-11-12T04:34:03.731Z] [DEBUG][9xkryzrh] [Middleware] Outgoing response
Context: {
  "requestId": "9xkryzrhmhvi9mpk",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:03.731Z] [DEBUG][9xkryzrh] [Middleware] Processing path
Context: {
  "requestId": "9xkryzrhmhvi9mpk",
  "path": "/api/user/avatar"
}
[2025-11-12T04:34:03.731Z] [INFO][9xkryzrh] POST /api/user/avatar -> 200 (27ms)
Context: {
  "requestId": "9xkryzrhmhvi9mpk",
  "duration": 27,
  "status": 200
}
[2025-11-12T04:34:03.731Z] [INFO][U:d44cd9d1-b68d-41bd-9c69-87ac5bda927f] Security Event: USER_EVENT
Context: {
  "userId": "d44cd9d1-b68d-41bd-9c69-87ac5bda927f",
  "securityEventType": "USER_EVENT",
  "originalDetails": {
    "eventType": "avatar_updated",
    "ipAddress": "::1",
    "imageUrl": "/r2/avatar-d44cd9d1-b68d-41bd-9c69-87ac5bda927f-1762922043717.jpg"
  },
  "logLevel": "info",
  "eventSnapshot": {
    "type": "USER_EVENT",
    "userId": "d44cd9d1-b68d-41bd-9c69-87ac5bda927f",
    "timestamp": 1762922043731,
    "details": {
      "eventType": "avatar_updated",
      "ipAddress": "::1",
      "imageUrl": "/r2/avatar-d44cd9d1-b68d-41bd-9c69-87ac5bda927f-1762922043717.jpg"
    }
  }
}
[2025-11-12T04:34:03.731Z] [DEBUG][j45q8cie] [Middleware] Outgoing response
Context: {
  "requestId": "j45q8ciemhvi9mpk",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:03.731Z] [DEBUG][j45q8cie] [Middleware] Processing path
Context: {
  "requestId": "j45q8ciemhvi9mpk",
  "path": "/api/user/avatar"
}
[2025-11-12T04:34:03.731Z] [INFO][j45q8cie] POST /api/user/avatar -> 200 (27ms)
Context: {
  "requestId": "j45q8ciemhvi9mpk",
  "duration": 27,
  "status": 200
}
[2025-11-12T04:34:03.731Z] [INFO][U:d44cd9d1-b68d-41bd-9c69-87ac5bda927f] Security Event: USER_EVENT
Context: {
  "userId": "d44cd9d1-b68d-41bd-9c69-87ac5bda927f",
  "securityEventType": "USER_EVENT",
  "originalDetails": {
    "eventType": "avatar_updated",
    "ipAddress": "::1",
    "imageUrl": "/r2/avatar-d44cd9d1-b68d-41bd-9c69-87ac5bda927f-1762922043717.jpg"
  },
  "logLevel": "info",
  "eventSnapshot": {
    "type": "USER_EVENT",
    "userId": "d44cd9d1-b68d-41bd-9c69-87ac5bda927f",
    "timestamp": 1762922043731,
    "details": {
      "eventType": "avatar_updated",
      "ipAddress": "::1",
      "imageUrl": "/r2/avatar-d44cd9d1-b68d-41bd-9c69-87ac5bda927f-1762922043717.jpg"
    }
  }
}
[2025-11-12T04:34:03.731Z] [DEBUG][t82i1ufq] [Middleware] Outgoing response
Context: {
  "requestId": "t82i1ufqmhvi9mpl",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:03.731Z] [DEBUG][t82i1ufq] [Middleware] Processing path
Context: {
  "requestId": "t82i1ufqmhvi9mpl",
  "path": "/api/user/avatar"
}
[2025-11-12T04:34:03.731Z] [INFO][t82i1ufq] POST /api/user/avatar -> 200 (26ms)
Context: {
  "requestId": "t82i1ufqmhvi9mpl",
  "duration": 26,
  "status": 200
}
[2025-11-12T04:34:03.731Z] [INFO][U:d44cd9d1-b68d-41bd-9c69-87ac5bda927f] Security Event: USER_EVENT
Context: {
  "userId": "d44cd9d1-b68d-41bd-9c69-87ac5bda927f",
  "securityEventType": "USER_EVENT",
  "originalDetails": {
    "eventType": "avatar_updated",
    "ipAddress": "::1",
    "imageUrl": "/r2/avatar-d44cd9d1-b68d-41bd-9c69-87ac5bda927f-1762922043717.jpg"
  },
  "logLevel": "info",
  "eventSnapshot": {
    "type": "USER_EVENT",
    "userId": "d44cd9d1-b68d-41bd-9c69-87ac5bda927f",
    "timestamp": 1762922043731,
    "details": {
      "eventType": "avatar_updated",
      "ipAddress": "::1",
      "imageUrl": "/r2/avatar-d44cd9d1-b68d-41bd-9c69-87ac5bda927f-1762922043717.jpg"
    }
  }
}
[2025-11-12T04:34:03.731Z] [DEBUG][6an6rr91] [Middleware] Outgoing response
Context: {
  "requestId": "6an6rr91mhvi9mpl",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:03.731Z] [DEBUG][6an6rr91] [Middleware] Processing path
Context: {
  "requestId": "6an6rr91mhvi9mpl",
  "path": "/api/user/avatar"
}
[2025-11-12T04:34:03.731Z] [INFO][6an6rr91] POST /api/user/avatar -> 200 (26ms)
Context: {
  "requestId": "6an6rr91mhvi9mpl",
  "duration": 26,
  "status": 200
}
[dev] [2025-11-12T04:34:03.734Z] [INFO][jrx9duan] POST /api/billing/sync
Context: {
  "requestId": "jrx9duanmhvi9mqe",
  "endpoint": "/api/billing/sync",
  "method": "POST"
}
[2025-11-12T04:34:03.734Z] [DEBUG][jrx9duan] [Middleware] Session ID from cookie
Context: {
  "requestId": "jrx9duanmhvi9mqe",
  "present": false
}
05:34:03 [WARN] [router] No API Route handler exists for the method "POST" for the route "/api/billing/sync".
Found handlers: "GET"

[2025-11-12T04:34:03.735Z] [DEBUG][jrx9duan] [Middleware] Outgoing response
Context: {
  "requestId": "jrx9duanmhvi9mqe",
  "status": 404,
  "statusText": "Not Found",
  "headers": "[empty object]"
}
[2025-11-12T04:34:03.735Z] [DEBUG][jrx9duan] [Middleware] Processing path
Context: {
  "requestId": "jrx9duanmhvi9mqe",
  "path": "/api/billing/sync"
}
[2025-11-12T04:34:03.735Z] [INFO][jrx9duan] POST /api/billing/sync -> 404 (1ms)
Context: {
  "requestId": "jrx9duanmhvi9mqe",
  "duration": 1,
  "status": 404
}
[2025-11-12T04:34:03.735Z] [INFO][8mm6yuxe] POST /api/billing/sync
Context: {
  "requestId": "8mm6yuxemhvi9mqf",
  "endpoint": "/api/billing/sync",
  "method": "POST"
}
[2025-11-12T04:34:03.735Z] [DEBUG][8mm6yuxe] [Middleware] Session ID from cookie
Context: {
  "requestId": "8mm6yuxemhvi9mqf",
  "present": false
}
[2025-11-12T04:34:03.735Z] [DEBUG][8mm6yuxe] [Middleware] Outgoing response
Context: {
  "requestId": "8mm6yuxemhvi9mqf",
  "status": 404,
  "statusText": "Not Found",
  "headers": {
    "content-type": "text/html",
    "x-astro-reroute": "no",
    "x-astro-route-type": "page"
  }
}
[2025-11-12T04:34:03.735Z] [DEBUG][8mm6yuxe] [Middleware] Processing path
Context: {
  "requestId": "8mm6yuxemhvi9mqf",
  "path": "/api/billing/sync"
}
[2025-11-12T04:34:03.735Z] [INFO][8mm6yuxe] POST /api/billing/sync -> 404
Context: {
  "requestId": "8mm6yuxemhvi9mqf",
  "duration": 0,
  "status": 404
}
[2025-11-12T04:34:03.736Z] [INFO][pthf9ajf] GET /api/dashboard/projects
Context: {
  "requestId": "pthf9ajfmhvi9mqg",
  "endpoint": "/api/dashboard/projects",
  "method": "GET"
}
[2025-11-12T04:34:03.736Z] [DEBUG][pthf9ajf] [Middleware] Session ID from cookie
Context: {
  "requestId": "pthf9ajfmhvi9mqg",
  "present": false
}
[2025-11-12T04:34:03.736Z] [INFO][ks9fdi8x] POST /api/projects
Context: {
  "requestId": "ks9fdi8xmhvi9mqg",
  "endpoint": "/api/projects",
  "method": "POST"
}
[2025-11-12T04:34:03.736Z] [DEBUG][ks9fdi8x] [Middleware] Session ID from cookie
Context: {
  "requestId": "ks9fdi8xmhvi9mqg",
  "present": false
}
[2025-11-12T04:34:03.739Z] [INFO][rnyt0bb2] GET /api/ai-image/generate
Context: {
  "requestId": "rnyt0bb2mhvi9mqj",
  "endpoint": "/api/ai-image/generate",
  "method": "GET"
}
[2025-11-12T04:34:03.739Z] [DEBUG][rnyt0bb2] [Middleware] Session ID from cookie
Context: {
  "requestId": "rnyt0bb2mhvi9mqj",
  "present": false
}
[2025-11-12T04:34:03.740Z] [DEBUG][rnyt0bb2] [Middleware] Outgoing response
Context: {
  "requestId": "rnyt0bb2mhvi9mqj",
  "status": 405,
  "statusText": "Method Not Allowed",
  "headers": {
    "allow": "POST",
    "content-type": "application/json"
  }
}
[2025-11-12T04:34:03.740Z] [DEBUG][rnyt0bb2] [Middleware] Processing path
Context: {
  "requestId": "rnyt0bb2mhvi9mqj",
  "path": "/api/ai-image/generate"
}
[2025-11-12T04:34:03.740Z] [INFO][rnyt0bb2] GET /api/ai-image/generate -> 405 (1ms)
Context: {
  "requestId": "rnyt0bb2mhvi9mqj",
  "duration": 1,
  "status": 405
}
 âœ“ |integration| tests/integration/user-avatar-api.test.ts > User-Avatar-API-Integration > POST /api/user/avatar > sollte erfolgreich Avatar hochladen fÃ¼r authentifizierten Benutzer 34ms
[dev] [wrangler:info] POST /api/user/avatar 200 OK (52ms)
[wrangler:info] POST /api/user/avatar 200 OK (52ms)
[wrangler:info] POST /api/user/avatar 200 OK (58ms)
[dev] [wrangler:info] POST /api/user/avatar 200 OK (54ms)
[wrangler:info] POST /api/user/avatar 200 OK (55ms)
[wrangler:info] POST /api/user/avatar 200 OK (54ms)
[wrangler:info] POST /api/user/avatar 200 OK (54ms)
 âœ“ |integration| tests/integration/billing-api.test.ts > Billing-API-Integration > POST /api/billing/session > sollte Validierungsfehler fÃ¼r fehlende priceId zurÃ¼ckgeben 102ms
 âœ“ |integration| tests/integration/billing-api.test.ts > Billing-API-Integration > POST /api/billing/session > sollte 401 fÃ¼r nicht authentifizierte Anfragen zurÃ¼ckgeben 19ms
 âœ“ |integration| tests/integration/billing-api.test.ts > Billing-API-Integration > GET /api/billing/credits > sollte Credits fÃ¼r authentifizierten Benutzer zurÃ¼ckgeben 21ms
 âœ“ |integration| tests/integration/billing-api.test.ts > Billing-API-Integration > GET /api/billing/credits > sollte 401 fÃ¼r nicht authentifizierte Anfragen zurÃ¼ckgeben 30ms
[dev] [wrangler:info] GET /api/ai-image/generate 405 Method Not Allowed (45ms)
[dev] [2025-11-12T04:34:03.748Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/projects',
    method: 'POST',
    action: 'project_created'
  }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:03.748Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: { reason: 'unauthenticated_access', endpoint: '/api/projects' }
  }
[dev] [2025-11-12T04:34:03.748Z] [DEBUG][ks9fdi8x] [Middleware] Outgoing response
Context: {
  "requestId": "ks9fdi8xmhvi9mqg",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[wrangler:info] POST /api/billing/sync 404 Not Found (34ms)
[2025-11-12T04:34:03.748Z] [DEBUG][ks9fdi8x] [Middleware] Processing path
Context: {
  "requestId": "ks9fdi8xmhvi9mqg",
  "path": "/api/projects"
}
[2025-11-12T04:34:03.748Z] [INFO][ks9fdi8x] POST /api/projects -> 401 (12ms)
Context: {
  "requestId": "ks9fdi8xmhvi9mqg",
  "duration": 12,
  "status": 401
}
[2025-11-12T04:34:03.748Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/dashboard/projects',
    method: 'GET',
    action: 'projects_accessed'
  }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:03.748Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: {
      reason: 'unauthenticated_access',
      endpoint: '/api/dashboard/projects'
    }
  }
[dev] [2025-11-12T04:34:03.748Z] [DEBUG][pthf9ajf] [Middleware] Outgoing response
Context: {
  "requestId": "pthf9ajfmhvi9mqg",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:03.748Z] [DEBUG][pthf9ajf] [Middleware] Processing path
Context: {
  "requestId": "pthf9ajfmhvi9mqg",
  "path": "/api/dashboard/projects"
}
[2025-11-12T04:34:03.748Z] [INFO][pthf9ajf] GET /api/dashboard/projects -> 401 (12ms)
Context: {
  "requestId": "pthf9ajfmhvi9mqg",
  "duration": 12,
  "status": 401
}
[wrangler:info] GET /api/dashboard/projects 401 Unauthorized (49ms)
[wrangler:info] POST /api/projects 401 Unauthorized (48ms)
 âœ“ |integration| tests/integration/projects-api.test.ts > Projects-API-Integration > Projekt-CRUD-Operationen > sollte erfolgreich neues Projekt erstellen 25ms
 âœ“ |integration| tests/integration/projects-api.test.ts > Projects-API-Integration > Projekt-CRUD-Operationen > sollte Validierungsfehler fÃ¼r fehlenden Projektnamen zurÃ¼ckgeben 36ms
 âœ“ |integration| tests/integration/projects-api.test.ts > Projects-API-Integration > Projekt-CRUD-Operationen > sollte Validierungsfehler fÃ¼r ungÃ¼ltigen Projektstatus zurÃ¼ckgeben 53ms
[dev] [2025-11-12T04:34:03.755Z] [INFO][qsp9446n] POST /api/billing/sync
Context: {
  "requestId": "qsp9446nmhvi9mqz",
  "endpoint": "/api/billing/sync",
  "method": "POST"
}
[2025-11-12T04:34:03.756Z] [DEBUG][qsp9446n] [Middleware] Session ID from cookie
Context: {
  "requestId": "qsp9446nmhvi9mqz",
  "present": false
}
05:34:03 [WARN] [router] No API Route handler exists for the method "POST" for the route "/api/billing/sync".
Found handlers: "GET"
[dev] [2025-11-12T04:34:03.756Z] [DEBUG][qsp9446n] [Middleware] Outgoing response
Context: {
  "requestId": "qsp9446nmhvi9mqz",
  "status": 404,
  "statusText": "Not Found",
  "headers": "[empty object]"
}
[2025-11-12T04:34:03.756Z] [DEBUG][qsp9446n] [Middleware] Processing path
Context: {
  "requestId": "qsp9446nmhvi9mqz",
  "path": "/api/billing/sync"
}
[2025-11-12T04:34:03.756Z] [INFO][qsp9446n] POST /api/billing/sync -> 404 (1ms)
Context: {
  "requestId": "qsp9446nmhvi9mqz",
  "duration": 1,
  "status": 404
}
[2025-11-12T04:34:03.756Z] [INFO][zaejvwyg] POST /api/billing/sync
Context: {
  "requestId": "zaejvwygmhvi9mr0",
  "endpoint": "/api/billing/sync",
  "method": "POST"
}
[dev] [2025-11-12T04:34:03.756Z] [DEBUG][zaejvwyg] [Middleware] Session ID from cookie
Context: {
  "requestId": "zaejvwygmhvi9mr0",
  "present": false
}
[2025-11-12T04:34:03.756Z] [DEBUG][zaejvwyg] [Middleware] Outgoing response
Context: {
  "requestId": "zaejvwygmhvi9mr0",
  "status": 404,
  "statusText": "Not Found",
  "headers": {
    "content-type": "text/html",
    "x-astro-reroute": "no",
    "x-astro-route-type": "page"
  }
}
[dev] [2025-11-12T04:34:03.756Z] [DEBUG][zaejvwyg] [Middleware] Processing path
Context: {
  "requestId": "zaejvwygmhvi9mr0",
  "path": "/api/billing/sync"
}
[dev] [2025-11-12T04:34:03.757Z] [INFO][zaejvwyg] POST /api/billing/sync -> 404 (1ms)
Context: {
  "requestId": "zaejvwygmhvi9mr0",
  "duration": 1,
  "status": 404
}
[2025-11-12T04:34:03.757Z] [INFO][bz0quk0w] POST /api/user/avatar
Context: {
  "requestId": "bz0quk0wmhvi9mr1",
  "endpoint": "/api/user/avatar",
  "method": "POST"
}
[2025-11-12T04:34:03.757Z] [DEBUG][bz0quk0w] [Middleware] Session ID from cookie
Context: {
  "requestId": "bz0quk0wmhvi9mr1",
  "present": true
}
[dev] [2025-11-12T04:34:03.758Z] [DEBUG][bz0quk0w] [Middleware] Session validation result
Context: {
  "requestId": "bz0quk0wmhvi9mr1",
  "sessionValid": true,
  "userValid": true
}
[dev] [wrangler:info] POST /api/billing/sync 404 Not Found (8ms)
[dev] [2025-11-12T04:34:03.760Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'd44cd9d1-b68d-41bd-9c69-87ac5bda927f',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/user/avatar',
    method: 'POST',
    action: 'avatar_upload'
  }
}
[dev] [2025-11-12T04:34:03.760Z] [DEBUG][bz0quk0w] [Middleware] Outgoing response
Context: {
  "requestId": "bz0quk0wmhvi9mr1",
  "status": 400,
  "statusText": "Bad Request",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:03.760Z] [DEBUG][bz0quk0w] [Middleware] Processing path
Context: {
  "requestId": "bz0quk0wmhvi9mr1",
  "path": "/api/user/avatar"
}
[2025-11-12T04:34:03.760Z] [INFO][bz0quk0w] POST /api/user/avatar -> 400 (3ms)
Context: {
  "requestId": "bz0quk0wmhvi9mr1",
  "duration": 3,
  "status": 400
}
[dev] [wrangler:info] POST /api/user/avatar 400 Bad Request (11ms)
[dev] [2025-11-12T04:34:03.763Z] [INFO][9m58r6en] POST /api/ai-image/generate
Context: {
  "requestId": "9m58r6enmhvi9mr7",
  "endpoint": "/api/ai-image/generate",
  "method": "POST"
}
[2025-11-12T04:34:03.763Z] [DEBUG][9m58r6en] [Middleware] Session ID from cookie
Context: {
  "requestId": "9m58r6enmhvi9mr7",
  "present": false
}
[dev] [2025-11-12T04:34:03.764Z] [INFO][o2283c8j] GET /api/dashboard/notifications
Context: {
  "requestId": "o2283c8jmhvi9mr8",
  "endpoint": "/api/dashboard/notifications",
  "method": "GET"
}
[dev] [2025-11-12T04:34:03.764Z] [DEBUG][o2283c8j] [Middleware] Session ID from cookie
Context: {
  "requestId": "o2283c8jmhvi9mr8",
  "present": false
}
[dev] [2025-11-12T04:34:03.765Z] [INFO][s7l9cjug] PUT /api/projects/non-existent-id
Context: {
  "requestId": "s7l9cjugmhvi9mr9",
  "endpoint": "/api/projects/non-existent-id",
  "method": "PUT"
}
[2025-11-12T04:34:03.765Z] [DEBUG][s7l9cjug] [Middleware] Session ID from cookie
Context: {
  "requestId": "s7l9cjugmhvi9mr9",
  "present": false
}
[dev] [2025-11-12T04:34:03.765Z] [DEBUG][s7l9cjug] [Middleware] Outgoing response
Context: {
  "requestId": "s7l9cjugmhvi9mr9",
  "status": 404,
  "statusText": "Not Found",
  "headers": {
    "content-type": "text/html",
    "x-astro-reroute": "no",
    "x-astro-route-type": "page"
  }
}
[2025-11-12T04:34:03.765Z] [DEBUG][s7l9cjug] [Middleware] Processing path
Context: {
  "requestId": "s7l9cjugmhvi9mr9",
  "path": "/api/projects/non-existent-id"
}
[2025-11-12T04:34:03.766Z] [INFO][s7l9cjug] PUT /api/projects/non-existent-id -> 404 (1ms)
Context: {
  "requestId": "s7l9cjugmhvi9mr9",
  "duration": 1,
  "status": 404
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:03.767Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/ai-image/generate",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "aiGenerate",
      "maxRequests": 15,
      "windowMs": 60000,
      "resetAt": 1762922045937
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/ai-image/generate",
      "ipAddress": "::1",
      "timestamp": 1762922043767,
      "details": {
        "limiterName": "aiGenerate",
        "maxRequests": 15,
        "windowMs": 60000,
        "resetAt": 1762922045937
      }
    }
  }
[dev] [2025-11-12T04:34:03.767Z] [DEBUG][9m58r6en] [Middleware] Outgoing response
Context: {
  "requestId": "9m58r6enmhvi9mr7",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "3",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:03.767Z] [DEBUG][9m58r6en] [Middleware] Processing path
Context: {
  "requestId": "9m58r6enmhvi9mr7",
  "path": "/api/ai-image/generate"
}
[2025-11-12T04:34:03.767Z] [INFO][9m58r6en] POST /api/ai-image/generate -> 429 (4ms)
Context: {
  "requestId": "9m58r6enmhvi9mr7",
  "duration": 4,
  "status": 429
}
[dev] [wrangler:info] PUT /api/projects/non-existent-id 404 Not Found (12ms)
[2025-11-12T04:34:03.769Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/dashboard/notifications',
    method: 'GET',
    action: 'notifications_accessed'
  }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:03.770Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: {
      reason: 'unauthenticated_access',
      endpoint: '/api/dashboard/notifications'
    }
  }
[dev] [2025-11-12T04:34:03.770Z] [DEBUG][o2283c8j] [Middleware] Outgoing response
Context: {
  "requestId": "o2283c8jmhvi9mr8",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:03.770Z] [DEBUG][o2283c8j] [Middleware] Processing path
Context: {
  "requestId": "o2283c8jmhvi9mr8",
  "path": "/api/dashboard/notifications"
}
[2025-11-12T04:34:03.770Z] [INFO][o2283c8j] GET /api/dashboard/notifications -> 401 (6ms)
Context: {
  "requestId": "o2283c8jmhvi9mr8",
  "duration": 6,
  "status": 401
}
[2025-11-12T04:34:03.772Z] [INFO][w7wmru8v] POST /api/user/avatar
Context: {
  "requestId": "w7wmru8vmhvi9mrg",
  "endpoint": "/api/user/avatar",
  "method": "POST"
}
[dev] [wrangler:info] POST /api/ai-image/generate 429 Too Many Requests (19ms)
[dev] [2025-11-12T04:34:03.774Z] [DEBUG][w7wmru8v] [Middleware] Session ID from cookie
Context: {
  "requestId": "w7wmru8vmhvi9mrg",
  "present": true
}
[2025-11-12T04:34:03.775Z] [INFO][f8clznuu] POST /api/billing/link-pending
Context: {
  "requestId": "f8clznuumhvi9mrj",
  "endpoint": "/api/billing/link-pending",
  "method": "POST"
}
[2025-11-12T04:34:03.775Z] [DEBUG][f8clznuu] [Middleware] Session ID from cookie
Context: {
  "requestId": "f8clznuumhvi9mrj",
  "present": false
}
05:34:03 [WARN] [router] No API Route handler exists for the method "POST" for the route "/api/billing/link-pending".
Found handlers: "GET"

[2025-11-12T04:34:03.775Z] [DEBUG][f8clznuu] [Middleware] Outgoing response
Context: {
  "requestId": "f8clznuumhvi9mrj",
  "status": 404,
  "statusText": "Not Found",
  "headers": "[empty object]"
}
[2025-11-12T04:34:03.775Z] [DEBUG][f8clznuu] [Middleware] Processing path
Context: {
  "requestId": "f8clznuumhvi9mrj",
  "path": "/api/billing/link-pending"
}
[2025-11-12T04:34:03.775Z] [INFO][f8clznuu] POST /api/billing/link-pending -> 404
Context: {
  "requestId": "f8clznuumhvi9mrj",
  "duration": 0,
  "status": 404
}
[2025-11-12T04:34:03.776Z] [INFO][zlvefuc0] POST /api/billing/link-pending
Context: {
  "requestId": "zlvefuc0mhvi9mrk",
  "endpoint": "/api/billing/link-pending",
  "method": "POST"
}
[2025-11-12T04:34:03.776Z] [DEBUG][zlvefuc0] [Middleware] Session ID from cookie
Context: {
  "requestId": "zlvefuc0mhvi9mrk",
  "present": false
}
[2025-11-12T04:34:03.776Z] [DEBUG][zlvefuc0] [Middleware] Outgoing response
Context: {
  "requestId": "zlvefuc0mhvi9mrk",
  "status": 404,
  "statusText": "Not Found",
  "headers": {
    "content-type": "text/html",
    "x-astro-reroute": "no",
    "x-astro-route-type": "page"
  }
}
[2025-11-12T04:34:03.776Z] [DEBUG][zlvefuc0] [Middleware] Processing path
Context: {
  "requestId": "zlvefuc0mhvi9mrk",
  "path": "/api/billing/link-pending"
}
[2025-11-12T04:34:03.776Z] [INFO][zlvefuc0] POST /api/billing/link-pending -> 404
Context: {
  "requestId": "zlvefuc0mhvi9mrk",
  "duration": 0,
  "status": 404
}
[2025-11-12T04:34:03.778Z] [DEBUG][w7wmru8v] [Middleware] Session validation result
Context: {
  "requestId": "w7wmru8vmhvi9mrg",
  "sessionValid": true,
  "userValid": true
}
[wrangler:info] GET /api/dashboard/notifications 401 Unauthorized (20ms)
[dev] [2025-11-12T04:34:03.780Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'd44cd9d1-b68d-41bd-9c69-87ac5bda927f',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/user/avatar',
    method: 'POST',
    action: 'avatar_upload'
  }
}
[dev] [wrangler:info] POST /api/billing/link-pending 404 Not Found (18ms)
[dev] [2025-11-12T04:34:03.782Z] [INFO][6gopgz3j] POST /api/dashboard/perform-action
Context: {
  "requestId": "6gopgz3jmhvi9mrq",
  "endpoint": "/api/dashboard/perform-action",
  "method": "POST"
}
[2025-11-12T04:34:03.783Z] [DEBUG][6gopgz3j] [Middleware] Session ID from cookie
Context: {
  "requestId": "6gopgz3jmhvi9mrq",
  "present": false
}
[dev] [2025-11-12T04:34:03.784Z] [INFO][7hjf68gs] DELETE /api/projects/non-existent-id
Context: {
  "requestId": "7hjf68gsmhvi9mrs",
  "endpoint": "/api/projects/non-existent-id",
  "method": "DELETE"
}
[dev] [2025-11-12T04:34:03.784Z] [DEBUG][7hjf68gs] [Middleware] Session ID from cookie
Context: {
  "requestId": "7hjf68gsmhvi9mrs",
  "present": false
}
[2025-11-12T04:34:03.784Z] [DEBUG][7hjf68gs] [Middleware] Outgoing response
Context: {
  "requestId": "7hjf68gsmhvi9mrs",
  "status": 404,
  "statusText": "Not Found",
  "headers": {
    "content-type": "text/html",
    "x-astro-reroute": "no",
    "x-astro-route-type": "page"
  }
}
[2025-11-12T04:34:03.784Z] [DEBUG][7hjf68gs] [Middleware] Processing path
Context: {
  "requestId": "7hjf68gsmhvi9mrs",
  "path": "/api/projects/non-existent-id"
}
[2025-11-12T04:34:03.784Z] [INFO][7hjf68gs] DELETE /api/projects/non-existent-id -> 404
Context: {
  "requestId": "7hjf68gsmhvi9mrs",
  "duration": 0,
  "status": 404
}
[dev] [wrangler:info] DELETE /api/projects/non-existent-id 404 Not Found (10ms)
[dev] [2025-11-12T04:34:03.786Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/dashboard/perform-action',
    method: 'POST',
    action: 'perform_dashboard_action'
  }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:03.786Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: {
      reason: 'unauthenticated_access',
      endpoint: '/api/dashboard/perform-action'
    }
  }
[dev] [2025-11-12T04:34:03.786Z] [DEBUG][6gopgz3j] [Middleware] Outgoing response
Context: {
  "requestId": "6gopgz3jmhvi9mrq",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:03.786Z] [DEBUG][6gopgz3j] [Middleware] Processing path
Context: {
  "requestId": "6gopgz3jmhvi9mrq",
  "path": "/api/dashboard/perform-action"
}
[2025-11-12T04:34:03.787Z] [INFO][6gopgz3j] POST /api/dashboard/perform-action -> 401 (5ms)
Context: {
  "requestId": "6gopgz3jmhvi9mrq",
  "duration": 5,
  "status": 401
}
[dev] [2025-11-12T04:34:03.788Z] [INFO][f3eveuw8] POST /api/billing/link-pending
Context: {
  "requestId": "f3eveuw8mhvi9mrw",
  "endpoint": "/api/billing/link-pending",
  "method": "POST"
}
[2025-11-12T04:34:03.788Z] [DEBUG][f3eveuw8] [Middleware] Session ID from cookie
Context: {
  "requestId": "f3eveuw8mhvi9mrw",
  "present": false
}
[dev] [wrangler:info] POST /api/dashboard/perform-action 401 Unauthorized (10ms)
05:34:03 [WARN] [router] No API Route handler exists for the method "POST" for the route "/api/billing/link-pending".
Found handlers: "GET"

[2025-11-12T04:34:03.788Z] [DEBUG][f3eveuw8] [Middleware] Outgoing response
Context: {
  "requestId": "f3eveuw8mhvi9mrw",
  "status": 404,
  "statusText": "Not Found",
  "headers": "[empty object]"
}
[2025-11-12T04:34:03.789Z] [DEBUG][f3eveuw8] [Middleware] Processing path
Context: {
  "requestId": "f3eveuw8mhvi9mrw",
  "path": "/api/billing/link-pending"
}
[2025-11-12T04:34:03.789Z] [INFO][f3eveuw8] POST /api/billing/link-pending -> 404 (1ms)
Context: {
  "requestId": "f3eveuw8mhvi9mrw",
  "duration": 1,
  "status": 404
}
[2025-11-12T04:34:03.789Z] [INFO][4yf2ap76] POST /api/billing/link-pending
Context: {
  "requestId": "4yf2ap76mhvi9mrx",
  "endpoint": "/api/billing/link-pending",
  "method": "POST"
}
[2025-11-12T04:34:03.789Z] [DEBUG][4yf2ap76] [Middleware] Session ID from cookie
Context: {
  "requestId": "4yf2ap76mhvi9mrx",
  "present": false
}
[dev] [2025-11-12T04:34:03.789Z] [DEBUG][4yf2ap76] [Middleware] Outgoing response
Context: {
  "requestId": "4yf2ap76mhvi9mrx",
  "status": 404,
  "statusText": "Not Found",
  "headers": {
    "content-type": "text/html",
    "x-astro-reroute": "no",
    "x-astro-route-type": "page"
  }
}
[2025-11-12T04:34:03.789Z] [DEBUG][4yf2ap76] [Middleware] Processing path
Context: {
  "requestId": "4yf2ap76mhvi9mrx",
  "path": "/api/billing/link-pending"
}
[2025-11-12T04:34:03.789Z] [INFO][4yf2ap76] POST /api/billing/link-pending -> 404
Context: {
  "requestId": "4yf2ap76mhvi9mrx",
  "duration": 0,
  "status": 404
}
[2025-11-12T04:34:03.789Z] [INFO][x2bj1w78] POST /api/ai-image/generate
Context: {
  "requestId": "x2bj1w78mhvi9mrx",
  "endpoint": "/api/ai-image/generate",
  "method": "POST"
}
[dev] [2025-11-12T04:34:03.789Z] [DEBUG][x2bj1w78] [Middleware] Session ID from cookie
Context: {
  "requestId": "x2bj1w78mhvi9mrx",
  "present": false
}
[2025-11-12T04:34:03.790Z] [INFO] SECURITY_EVENT {
  timestamp: {},
  resource: 'security',
  ipAddress: '::1',
  type: 'SUSPICIOUS_ACTIVITY',
  details: {
    reason: 'csrf_token_mismatch',
    endpoint: '/api/ai-image/generate',
    hasHeader: false,
    hasCookie: false
  }
}
[dev] [2025-11-12T04:34:03.790Z] [DEBUG][x2bj1w78] [Middleware] Outgoing response
Context: {
  "requestId": "x2bj1w78mhvi9mrx",
  "status": 403,
  "statusText": "Forbidden",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:03.790Z] [DEBUG][x2bj1w78] [Middleware] Processing path
Context: {
  "requestId": "x2bj1w78mhvi9mrx",
  "path": "/api/ai-image/generate"
}
[2025-11-12T04:34:03.790Z] [INFO][x2bj1w78] POST /api/ai-image/generate -> 403 (1ms)
Context: {
  "requestId": "x2bj1w78mhvi9mrx",
  "duration": 1,
  "status": 403
}
[dev] [wrangler:info] POST /api/billing/link-pending 404 Not Found (6ms)
[dev] [wrangler:info] POST /api/ai-image/generate 403 Forbidden (11ms)
[2025-11-12T04:34:03.792Z] [INFO][y261yxf8] GET /api/dashboard/quick-actions
Context: {
  "requestId": "y261yxf8mhvi9ms0",
  "endpoint": "/api/dashboard/quick-actions",
  "method": "GET"
}
[2025-11-12T04:34:03.792Z] [DEBUG][y261yxf8] [Middleware] Session ID from cookie
Context: {
  "requestId": "y261yxf8mhvi9ms0",
  "present": false
}
[dev] [2025-11-12T04:34:03.793Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/dashboard/quick-actions',
    method: 'GET',
    action: 'public_quick_actions_accessed'
  }
}
[dev] [2025-11-12T04:34:03.793Z] [INFO][U:anonymous] Security Event: API_ACCESS
Context: {
  "userId": "anonymous",
  "ipAddress": "::1",
  "targetResource": "unknown",
  "securityEventType": "API_ACCESS",
  "originalDetails": {
    "event": "quick_actions_accessed",
    "actionCount": 1
  },
  "logLevel": "info",
  "eventSnapshot": {
    "type": "API_ACCESS",
    "userId": "anonymous",
    "targetResource": "unknown",
    "ipAddress": "::1",
    "timestamp": 1762922043793,
    "details": {
      "event": "quick_actions_accessed",
      "actionCount": 1
    }
  }
}
[2025-11-12T04:34:03.794Z] [DEBUG][y261yxf8] [Middleware] Outgoing response
Context: {
  "requestId": "y261yxf8mhvi9ms0",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:03.794Z] [DEBUG][y261yxf8] [Middleware] Processing path
Context: {
  "requestId": "y261yxf8mhvi9ms0",
  "path": "/api/dashboard/quick-actions"
}
[2025-11-12T04:34:03.794Z] [INFO][y261yxf8] GET /api/dashboard/quick-actions -> 200 (2ms)
Context: {
  "requestId": "y261yxf8mhvi9ms0",
  "duration": 2,
  "status": 200
}
[dev] [wrangler:info] GET /api/dashboard/quick-actions 200 OK (10ms)
[dev] [2025-11-12T04:34:03.800Z] [INFO][x3jppi38] POST /api/ai-image/generate
Context: {
  "requestId": "x3jppi38mhvi9ms8",
  "endpoint": "/api/ai-image/generate",
  "method": "POST"
}
[dev] [2025-11-12T04:34:03.800Z] [DEBUG][x3jppi38] [Middleware] Session ID from cookie
Context: {
  "requestId": "x3jppi38mhvi9ms8",
  "present": false
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:03.801Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/ai-image/generate",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "aiGenerate",
      "maxRequests": 15,
      "windowMs": 60000,
      "resetAt": 1762922045937
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/ai-image/generate",
      "ipAddress": "::1",
      "timestamp": 1762922043801,
      "details": {
        "limiterName": "aiGenerate",
        "maxRequests": 15,
        "windowMs": 60000,
        "resetAt": 1762922045937
      }
    }
  }
[dev] [2025-11-12T04:34:03.801Z] [DEBUG][x3jppi38] [Middleware] Outgoing response
Context: {
  "requestId": "x3jppi38mhvi9ms8",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "3",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:03.801Z] [DEBUG][x3jppi38] [Middleware] Processing path
Context: {
  "requestId": "x3jppi38mhvi9ms8",
  "path": "/api/ai-image/generate"
}
[2025-11-12T04:34:03.801Z] [INFO][x3jppi38] POST /api/ai-image/generate -> 429 (1ms)
Context: {
  "requestId": "x3jppi38mhvi9ms8",
  "duration": 1,
  "status": 429
}
[dev] [2025-11-12T04:34:03.803Z] [INFO][a94ufrwh] POST /api/projects
Context: {
  "requestId": "a94ufrwhmhvi9msb",
  "endpoint": "/api/projects",
  "method": "POST"
}
[dev] [2025-11-12T04:34:03.803Z] [DEBUG][a94ufrwh] [Middleware] Session ID from cookie
Context: {
  "requestId": "a94ufrwhmhvi9msb",
  "present": false
}
[2025-11-12T04:34:03.803Z] [INFO][7kmam2b7] POST /api/billing/sync-callback
Context: {
  "requestId": "7kmam2b7mhvi9msb",
  "endpoint": "/api/billing/sync-callback",
  "method": "POST"
}
[2025-11-12T04:34:03.803Z] [DEBUG][7kmam2b7] [Middleware] Session ID from cookie
Context: {
  "requestId": "7kmam2b7mhvi9msb",
  "present": false
}
05:34:03 [WARN] [router] No API Route handler exists for the method "POST" for the route "/api/billing/sync-callback".
Found handlers: "GET"
[dev] [2025-11-12T04:34:03.803Z] [DEBUG][7kmam2b7] [Middleware] Outgoing response
Context: {
  "requestId": "7kmam2b7mhvi9msb",
  "status": 404,
  "statusText": "Not Found",
  "headers": "[empty object]"
}
[2025-11-12T04:34:03.804Z] [DEBUG][7kmam2b7] [Middleware] Processing path
Context: {
  "requestId": "7kmam2b7mhvi9msb",
  "path": "/api/billing/sync-callback"
}
[2025-11-12T04:34:03.804Z] [INFO][7kmam2b7] POST /api/billing/sync-callback -> 404 (1ms)
Context: {
  "requestId": "7kmam2b7mhvi9msb",
  "duration": 1,
  "status": 404
}
[2025-11-12T04:34:03.804Z] [INFO][0ecuop0m] POST /api/billing/sync-callback
Context: {
  "requestId": "0ecuop0mmhvi9msc",
  "endpoint": "/api/billing/sync-callback",
  "method": "POST"
}
[dev] [2025-11-12T04:34:03.804Z] [DEBUG][0ecuop0m] [Middleware] Session ID from cookie
Context: {
  "requestId": "0ecuop0mmhvi9msc",
  "present": false
}
[2025-11-12T04:34:03.804Z] [DEBUG][0ecuop0m] [Middleware] Outgoing response
Context: {
  "requestId": "0ecuop0mmhvi9msc",
  "status": 404,
  "statusText": "Not Found",
  "headers": {
    "content-type": "text/html",
    "x-astro-reroute": "no",
    "x-astro-route-type": "page"
  }
}
[2025-11-12T04:34:03.804Z] [DEBUG][0ecuop0m] [Middleware] Processing path
Context: {
  "requestId": "0ecuop0mmhvi9msc",
  "path": "/api/billing/sync-callback"
}
[2025-11-12T04:34:03.804Z] [INFO][0ecuop0m] POST /api/billing/sync-callback -> 404
Context: {
  "requestId": "0ecuop0mmhvi9msc",
  "duration": 0,
  "status": 404
}
[dev] [wrangler:info] POST /api/ai-image/generate 429 Too Many Requests (7ms)
[dev] [2025-11-12T04:34:03.807Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/projects',
    method: 'POST',
    action: 'project_created'
  }
}
 Ã— |integration| tests/integration/ai-image-enhancer.test.ts > AI Image Enhancer API + R2 Proxy (Integration) > Rate limiting: excessive GET /api/ai-image/jobs/{id} eventually returns 429 with Retry-After 1029ms
   â†’ expected false to be true // Object.is equality
 âœ“ |integration| tests/integration/ai-image-enhancer.test.ts > AI Image Enhancer API + R2 Proxy (Integration) > GET /api/ai-image/generate -> 405 with Allow: POST 47ms
 Ã— |integration| tests/integration/ai-image-enhancer.test.ts > AI Image Enhancer API + R2 Proxy (Integration) > POST /api/ai-image/generate (multipart) -> 200 success envelope with limits 28ms
   â†’ expected [ 200, 403 ] to include 429
 âœ“ |integration| tests/integration/ai-image-enhancer.test.ts > AI Image Enhancer API + R2 Proxy (Integration) > POST /api/ai-image/generate without CSRF -> 403 forbidden 17ms
 âœ“ |integration| tests/integration/ai-image-enhancer.test.ts > AI Image Enhancer API + R2 Proxy (Integration) > Rate limiting: excessive POST /api/ai-image/generate hits 429 (stricter 15/min) 15ms
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:03.807Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: { reason: 'unauthenticated_access', endpoint: '/api/projects' }
  }
[dev] [2025-11-12T04:34:03.807Z] [DEBUG][a94ufrwh] [Middleware] Outgoing response
Context: {
  "requestId": "a94ufrwhmhvi9msb",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:03.808Z] [DEBUG][a94ufrwh] [Middleware] Processing path
Context: {
  "requestId": "a94ufrwhmhvi9msb",
  "path": "/api/projects"
}
[dev] [2025-11-12T04:34:03.808Z] [INFO][a94ufrwh] POST /api/projects -> 401 (5ms)
Context: {
  "requestId": "a94ufrwhmhvi9msb",
  "duration": 5,
  "status": 401
}
[wrangler:info] POST /api/billing/sync-callback 404 Not Found (10ms)
[dev] [wrangler:info] POST /api/projects 401 Unauthorized (13ms)
[dev] [2025-11-12T04:34:03.816Z] [DEBUG][w7wmru8v] [Middleware] Outgoing response
Context: {
  "requestId": "w7wmru8vmhvi9mrg",
  "status": 400,
  "statusText": "Bad Request",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[dev] [2025-11-12T04:34:03.816Z] [DEBUG][w7wmru8v] [Middleware] Processing path
Context: {
  "requestId": "w7wmru8vmhvi9mrg",
  "path": "/api/user/avatar"
}
[2025-11-12T04:34:03.816Z] [INFO][w7wmru8v] POST /api/user/avatar -> 400 (44ms)
Context: {
  "requestId": "w7wmru8vmhvi9mrg",
  "duration": 44,
  "status": 400
}
[dev] [wrangler:info] POST /api/user/avatar 400 Bad Request (47ms)
[dev] [2025-11-12T04:34:03.822Z] [INFO][py4fqvn8] GET /api/dashboard/stats
Context: {
  "requestId": "py4fqvn8mhvi9msu",
  "endpoint": "/api/dashboard/stats",
  "method": "GET"
}
[2025-11-12T04:34:03.822Z] [DEBUG][py4fqvn8] [Middleware] Session ID from cookie
Context: {
  "requestId": "py4fqvn8mhvi9msu",
  "present": false
}
[dev] [2025-11-12T04:34:03.822Z] [INFO][4gc1p16y] GET /api/dashboard/stats
Context: {
  "requestId": "4gc1p16ymhvi9msu",
  "endpoint": "/api/dashboard/stats",
  "method": "GET"
}
[2025-11-12T04:34:03.822Z] [DEBUG][4gc1p16y] [Middleware] Session ID from cookie
Context: {
  "requestId": "4gc1p16ymhvi9msu",
  "present": false
}
[2025-11-12T04:34:03.823Z] [INFO][6svy9ziw] GET /api/dashboard/stats
Context: {
  "requestId": "6svy9ziwmhvi9msv",
  "endpoint": "/api/dashboard/stats",
  "method": "GET"
}
[2025-11-12T04:34:03.823Z] [DEBUG][6svy9ziw] [Middleware] Session ID from cookie
Context: {
  "requestId": "6svy9ziwmhvi9msv",
  "present": false
}
[2025-11-12T04:34:03.823Z] [INFO][46wv8e0z] GET /api/dashboard/stats
Context: {
  "requestId": "46wv8e0zmhvi9msv",
  "endpoint": "/api/dashboard/stats",
  "method": "GET"
}
[2025-11-12T04:34:03.823Z] [DEBUG][46wv8e0z] [Middleware] Session ID from cookie
Context: {
  "requestId": "46wv8e0zmhvi9msv",
  "present": false
}
[2025-11-12T04:34:03.823Z] [INFO][h061oucv] GET /api/dashboard/stats
Context: {
  "requestId": "h061oucvmhvi9msv",
  "endpoint": "/api/dashboard/stats",
  "method": "GET"
}
[dev] [2025-11-12T04:34:03.823Z] [DEBUG][h061oucv] [Middleware] Session ID from cookie
Context: {
  "requestId": "h061oucvmhvi9msv",
  "present": false
}
[2025-11-12T04:34:03.823Z] [INFO][rj65r4cd] GET /api/dashboard/stats
Context: {
  "requestId": "rj65r4cdmhvi9msv",
  "endpoint": "/api/dashboard/stats",
  "method": "GET"
}
[2025-11-12T04:34:03.823Z] [DEBUG][rj65r4cd] [Middleware] Session ID from cookie
Context: {
  "requestId": "rj65r4cdmhvi9msv",
  "present": false
}
[dev] [2025-11-12T04:34:03.824Z] [INFO][7ike07fe] GET /api/dashboard/stats
Context: {
  "requestId": "7ike07femhvi9msw",
  "endpoint": "/api/dashboard/stats",
  "method": "GET"
}
[2025-11-12T04:34:03.824Z] [DEBUG][7ike07fe] [Middleware] Session ID from cookie
Context: {
  "requestId": "7ike07femhvi9msw",
  "present": false
}
[2025-11-12T04:34:03.824Z] [INFO][rybvthlo] GET /api/dashboard/stats
Context: {
  "requestId": "rybvthlomhvi9msw",
  "endpoint": "/api/dashboard/stats",
  "method": "GET"
}
[2025-11-12T04:34:03.824Z] [DEBUG][rybvthlo] [Middleware] Session ID from cookie
Context: {
  "requestId": "rybvthlomhvi9msw",
  "present": false
}
[2025-11-12T04:34:03.824Z] [INFO][iyai0lxa] GET /api/dashboard/stats
Context: {
  "requestId": "iyai0lxamhvi9msw",
  "endpoint": "/api/dashboard/stats",
  "method": "GET"
}
[2025-11-12T04:34:03.824Z] [DEBUG][iyai0lxa] [Middleware] Session ID from cookie
Context: {
  "requestId": "iyai0lxamhvi9msw",
  "present": false
}
[2025-11-12T04:34:03.824Z] [INFO][vtio5wfk] GET /api/dashboard/stats
Context: {
  "requestId": "vtio5wfkmhvi9msw",
  "endpoint": "/api/dashboard/stats",
  "method": "GET"
}
[2025-11-12T04:34:03.824Z] [DEBUG][vtio5wfk] [Middleware] Session ID from cookie
Context: {
  "requestId": "vtio5wfkmhvi9msw",
  "present": false
}
[dev] [2025-11-12T04:34:03.825Z] [INFO][1djgasp8] GET /api/dashboard/stats
Context: {
  "requestId": "1djgasp8mhvi9msx",
  "endpoint": "/api/dashboard/stats",
  "method": "GET"
}
[2025-11-12T04:34:03.825Z] [DEBUG][1djgasp8] [Middleware] Session ID from cookie
Context: {
  "requestId": "1djgasp8mhvi9msx",
  "present": false
}
[2025-11-12T04:34:03.825Z] [INFO][n8pdwau9] GET /api/dashboard/stats
Context: {
  "requestId": "n8pdwau9mhvi9msx",
  "endpoint": "/api/dashboard/stats",
  "method": "GET"
}
[2025-11-12T04:34:03.825Z] [DEBUG][n8pdwau9] [Middleware] Session ID from cookie
Context: {
  "requestId": "n8pdwau9mhvi9msx",
  "present": false
}
[2025-11-12T04:34:03.825Z] [INFO][onshighp] GET /api/dashboard/stats
Context: {
  "requestId": "onshighpmhvi9msx",
  "endpoint": "/api/dashboard/stats",
  "method": "GET"
}
[2025-11-12T04:34:03.825Z] [DEBUG][onshighp] [Middleware] Session ID from cookie
Context: {
  "requestId": "onshighpmhvi9msx",
  "present": false
}
[dev] [2025-11-12T04:34:03.837Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/dashboard/stats',
    method: 'GET',
    action: 'dashboard_stats_accessed'
  }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:03.837Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: {
      reason: 'unauthenticated_access',
      endpoint: '/api/dashboard/stats'
    }
  }
[dev] [2025-11-12T04:34:03.837Z] [DEBUG][onshighp] [Middleware] Outgoing response
Context: {
  "requestId": "onshighpmhvi9msx",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:03.837Z] [DEBUG][onshighp] [Middleware] Processing path
Context: {
  "requestId": "onshighpmhvi9msx",
  "path": "/api/dashboard/stats"
}
[2025-11-12T04:34:03.837Z] [INFO][onshighp] GET /api/dashboard/stats -> 401 (12ms)
Context: {
  "requestId": "onshighpmhvi9msx",
  "duration": 12,
  "status": 401
}
[2025-11-12T04:34:03.837Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/dashboard/stats',
    method: 'GET',
    action: 'dashboard_stats_accessed'
  }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:03.838Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: {
      reason: 'unauthenticated_access',
      endpoint: '/api/dashboard/stats'
    }
  }
[dev] [2025-11-12T04:34:03.838Z] [DEBUG][py4fqvn8] [Middleware] Outgoing response
Context: {
  "requestId": "py4fqvn8mhvi9msu",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:03.838Z] [DEBUG][py4fqvn8] [Middleware] Processing path
Context: {
  "requestId": "py4fqvn8mhvi9msu",
  "path": "/api/dashboard/stats"
}
[2025-11-12T04:34:03.838Z] [INFO][py4fqvn8] GET /api/dashboard/stats -> 401 (16ms)
Context: {
  "requestId": "py4fqvn8mhvi9msu",
  "duration": 16,
  "status": 401
}
[2025-11-12T04:34:03.838Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/dashboard/stats',
    method: 'GET',
    action: 'dashboard_stats_accessed'
  }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:03.838Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: {
      reason: 'unauthenticated_access',
      endpoint: '/api/dashboard/stats'
    }
  }
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:03.838Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: {
      reason: 'unauthenticated_access',
      endpoint: '/api/dashboard/stats'
    }
  }
[dev] [2025-11-12T04:34:03.838Z] [DEBUG][4gc1p16y] [Middleware] Outgoing response
Context: {
  "requestId": "4gc1p16ymhvi9msu",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:03.838Z] [DEBUG][4gc1p16y] [Middleware] Processing path
Context: {
  "requestId": "4gc1p16ymhvi9msu",
  "path": "/api/dashboard/stats"
}
[2025-11-12T04:34:03.838Z] [INFO][4gc1p16y] GET /api/dashboard/stats -> 401 (16ms)
Context: {
  "requestId": "4gc1p16ymhvi9msu",
  "duration": 16,
  "status": 401
}
[2025-11-12T04:34:03.838Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/dashboard/stats',
    method: 'GET',
    action: 'dashboard_stats_accessed'
  }
}
[2025-11-12T04:34:03.838Z] [DEBUG][6svy9ziw] [Middleware] Outgoing response
Context: {
  "requestId": "6svy9ziwmhvi9msv",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:03.838Z] [DEBUG][6svy9ziw] [Middleware] Processing path
Context: {
  "requestId": "6svy9ziwmhvi9msv",
  "path": "/api/dashboard/stats"
}
[dev] [2025-11-12T04:34:03.838Z] [INFO][6svy9ziw] GET /api/dashboard/stats -> 401 (15ms)
Context: {
  "requestId": "6svy9ziwmhvi9msv",
  "duration": 15,
  "status": 401
}
[2025-11-12T04:34:03.838Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/dashboard/stats',
    method: 'GET',
    action: 'dashboard_stats_accessed'
  }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:03.839Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: {
      reason: 'unauthenticated_access',
      endpoint: '/api/dashboard/stats'
    }
  }
[dev] [2025-11-12T04:34:03.839Z] [DEBUG][46wv8e0z] [Middleware] Outgoing response
Context: {
  "requestId": "46wv8e0zmhvi9msv",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:03.839Z] [DEBUG][46wv8e0z] [Middleware] Processing path
Context: {
  "requestId": "46wv8e0zmhvi9msv",
  "path": "/api/dashboard/stats"
}
[2025-11-12T04:34:03.839Z] [INFO][46wv8e0z] GET /api/dashboard/stats -> 401 (16ms)
Context: {
  "requestId": "46wv8e0zmhvi9msv",
  "duration": 16,
  "status": 401
}
[2025-11-12T04:34:03.839Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/dashboard/stats',
    method: 'GET',
    action: 'dashboard_stats_accessed'
  }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:03.839Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: {
      reason: 'unauthenticated_access',
      endpoint: '/api/dashboard/stats'
    }
  }
[dev] [2025-11-12T04:34:03.839Z] [DEBUG][h061oucv] [Middleware] Outgoing response
Context: {
  "requestId": "h061oucvmhvi9msv",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:03.839Z] [DEBUG][h061oucv] [Middleware] Processing path
Context: {
  "requestId": "h061oucvmhvi9msv",
  "path": "/api/dashboard/stats"
}
[2025-11-12T04:34:03.839Z] [INFO][h061oucv] GET /api/dashboard/stats -> 401 (16ms)
Context: {
  "requestId": "h061oucvmhvi9msv",
  "duration": 16,
  "status": 401
}
[2025-11-12T04:34:03.839Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/dashboard/stats',
    method: 'GET',
    action: 'dashboard_stats_accessed'
  }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:03.839Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: {
      reason: 'unauthenticated_access',
      endpoint: '/api/dashboard/stats'
    }
  }
[dev] [2025-11-12T04:34:03.839Z] [DEBUG][rj65r4cd] [Middleware] Outgoing response
Context: {
  "requestId": "rj65r4cdmhvi9msv",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:03.839Z] [DEBUG][rj65r4cd] [Middleware] Processing path
Context: {
  "requestId": "rj65r4cdmhvi9msv",
  "path": "/api/dashboard/stats"
}
[2025-11-12T04:34:03.839Z] [INFO][rj65r4cd] GET /api/dashboard/stats -> 401 (16ms)
Context: {
  "requestId": "rj65r4cdmhvi9msv",
  "duration": 16,
  "status": 401
}
[2025-11-12T04:34:03.839Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/dashboard/stats',
    method: 'GET',
    action: 'dashboard_stats_accessed'
  }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:03.840Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: {
      reason: 'unauthenticated_access',
      endpoint: '/api/dashboard/stats'
    }
  }
[dev] [2025-11-12T04:34:03.840Z] [DEBUG][7ike07fe] [Middleware] Outgoing response
Context: {
  "requestId": "7ike07femhvi9msw",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:03.840Z] [DEBUG][7ike07fe] [Middleware] Processing path
Context: {
  "requestId": "7ike07femhvi9msw",
  "path": "/api/dashboard/stats"
}
[2025-11-12T04:34:03.840Z] [INFO][7ike07fe] GET /api/dashboard/stats -> 401 (16ms)
Context: {
  "requestId": "7ike07femhvi9msw",
  "duration": 16,
  "status": 401
}
[dev] [2025-11-12T04:34:03.840Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/dashboard/stats',
    method: 'GET',
    action: 'dashboard_stats_accessed'
  }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:03.842Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: {
      reason: 'unauthenticated_access',
      endpoint: '/api/dashboard/stats'
    }
  }
[dev] [2025-11-12T04:34:03.842Z] [DEBUG][rybvthlo] [Middleware] Outgoing response
Context: {
  "requestId": "rybvthlomhvi9msw",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:03.842Z] [DEBUG][rybvthlo] [Middleware] Processing path
Context: {
  "requestId": "rybvthlomhvi9msw",
  "path": "/api/dashboard/stats"
}
[2025-11-12T04:34:03.842Z] [INFO][rybvthlo] GET /api/dashboard/stats -> 401 (18ms)
Context: {
  "requestId": "rybvthlomhvi9msw",
  "duration": 18,
  "status": 401
}
[2025-11-12T04:34:03.843Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/dashboard/stats',
    method: 'GET',
    action: 'dashboard_stats_accessed'
  }
}
 âœ“ |integration| tests/integration/user-avatar-api.test.ts > User-Avatar-API-Integration > POST /api/user/avatar > sollte Rate-Limiting fÃ¼r Avatar-Uploads korrekt handhaben 75ms
 âœ“ |integration| tests/integration/user-avatar-api.test.ts > User-Avatar-API-Integration > POST /api/user/avatar > sollte Validierungsfehler fÃ¼r ungÃ¼ltige Dateitypen zurÃ¼ckgeben 14ms
 âœ“ |integration| tests/integration/user-avatar-api.test.ts > User-Avatar-API-Integration > POST /api/user/avatar > sollte Validierungsfehler fÃ¼r zu groÃŸe Dateien zurÃ¼ckgeben 57ms
 âœ“ |integration| tests/integration/billing-api.test.ts > Billing-API-Integration > POST /api/billing/sync > sollte erfolgreich Billing-Daten synchronisieren 37ms
 âœ“ |integration| tests/integration/billing-api.test.ts > Billing-API-Integration > POST /api/billing/sync > sollte 401 fÃ¼r nicht authentifizierte Anfragen zurÃ¼ckgeben 12ms
 âœ“ |integration| tests/integration/billing-api.test.ts > Billing-API-Integration > POST /api/billing/link-pending > sollte erfolgreich pending Payment-Link erstellen 22ms
 âœ“ |integration| tests/integration/billing-api.test.ts > Billing-API-Integration > POST /api/billing/link-pending > sollte Validierungsfehler fÃ¼r ungÃ¼ltige E-Mail zurÃ¼ckgeben 11ms
 âœ“ |integration| tests/integration/billing-api.test.ts > Billing-API-Integration > POST /api/billing/sync-callback > sollte erfolgreich Sync-Callback verarbeiten 16ms
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:03.843Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: {
      reason: 'unauthenticated_access',
      endpoint: '/api/dashboard/stats'
    }
  }
[dev] [2025-11-12T04:34:03.843Z] [DEBUG][iyai0lxa] [Middleware] Outgoing response
Context: {
  "requestId": "iyai0lxamhvi9msw",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:03.843Z] [DEBUG][iyai0lxa] [Middleware] Processing path
Context: {
  "requestId": "iyai0lxamhvi9msw",
  "path": "/api/dashboard/stats"
}
[2025-11-12T04:34:03.843Z] [INFO][iyai0lxa] GET /api/dashboard/stats -> 401 (19ms)
Context: {
  "requestId": "iyai0lxamhvi9msw",
  "duration": 19,
  "status": 401
}
[2025-11-12T04:34:03.843Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/dashboard/stats',
    method: 'GET',
    action: 'dashboard_stats_accessed'
  }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:03.843Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: {
      reason: 'unauthenticated_access',
      endpoint: '/api/dashboard/stats'
    }
  }
[dev] [2025-11-12T04:34:03.843Z] [DEBUG][vtio5wfk] [Middleware] Outgoing response
Context: {
  "requestId": "vtio5wfkmhvi9msw",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:03.843Z] [DEBUG][vtio5wfk] [Middleware] Processing path
Context: {
  "requestId": "vtio5wfkmhvi9msw",
  "path": "/api/dashboard/stats"
}
[2025-11-12T04:34:03.843Z] [INFO][vtio5wfk] GET /api/dashboard/stats -> 401 (19ms)
Context: {
  "requestId": "vtio5wfkmhvi9msw",
  "duration": 19,
  "status": 401
}
[2025-11-12T04:34:03.843Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/dashboard/stats',
    method: 'GET',
    action: 'dashboard_stats_accessed'
  }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:03.843Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: {
      reason: 'unauthenticated_access',
      endpoint: '/api/dashboard/stats'
    }
  }
[dev] [2025-11-12T04:34:03.843Z] [DEBUG][1djgasp8] [Middleware] Outgoing response
Context: {
  "requestId": "1djgasp8mhvi9msx",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:03.843Z] [DEBUG][1djgasp8] [Middleware] Processing path
Context: {
  "requestId": "1djgasp8mhvi9msx",
  "path": "/api/dashboard/stats"
}
[2025-11-12T04:34:03.843Z] [INFO][1djgasp8] GET /api/dashboard/stats -> 401 (18ms)
Context: {
  "requestId": "1djgasp8mhvi9msx",
  "duration": 18,
  "status": 401
}
[2025-11-12T04:34:03.844Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/dashboard/stats',
    method: 'GET',
    action: 'dashboard_stats_accessed'
  }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:03.844Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: {
      reason: 'unauthenticated_access',
      endpoint: '/api/dashboard/stats'
    }
  }
 âœ“ |integration| tests/integration/dashboard-api.test.ts > Dashboard-API-Integration > Security-Headers fÃ¼r alle Dashboard-Endpunkte > sollte Security-Headers fÃ¼r /api/dashboard/projects setzen 56ms
 âœ“ |integration| tests/integration/dashboard-api.test.ts > Dashboard-API-Integration > Security-Headers fÃ¼r alle Dashboard-Endpunkte > sollte Security-Headers fÃ¼r /api/dashboard/notifications setzen 24ms
 âœ“ |integration| tests/integration/dashboard-api.test.ts > Dashboard-API-Integration > Security-Headers fÃ¼r alle Dashboard-Endpunkte > sollte Security-Headers fÃ¼r /api/dashboard/perform-action setzen 12ms
 âœ“ |integration| tests/integration/dashboard-api.test.ts > Dashboard-API-Integration > Security-Headers fÃ¼r alle Dashboard-Endpunkte > sollte Security-Headers fÃ¼r /api/dashboard/quick-actions setzen 12ms
 âœ“ |integration| tests/integration/projects-api.test.ts > Projects-API-Integration > Projekt-CRUD-Operationen > sollte erfolgreich Projekt aktualisieren 0ms
 âœ“ |integration| tests/integration/projects-api.test.ts > Projects-API-Integration > Projekt-CRUD-Operationen > sollte 404 fÃ¼r nicht existierende Projekt-Updates zurÃ¼ckgeben 19ms
 âœ“ |integration| tests/integration/projects-api.test.ts > Projects-API-Integration > Projekt-CRUD-Operationen > sollte erfolgreich Projekt lÃ¶schen 0ms
 âœ“ |integration| tests/integration/projects-api.test.ts > Projects-API-Integration > Projekt-CRUD-Operationen > sollte 404 fÃ¼r LÃ¶schen nicht existierender Projekte zurÃ¼ckgeben 18ms
[dev] [2025-11-12T04:34:03.844Z] [DEBUG][n8pdwau9] [Middleware] Outgoing response
Context: {
  "requestId": "n8pdwau9mhvi9msx",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:03.849Z] [DEBUG][n8pdwau9] [Middleware] Processing path
Context: {
  "requestId": "n8pdwau9mhvi9msx",
  "path": "/api/dashboard/stats"
}
[2025-11-12T04:34:03.849Z] [INFO][n8pdwau9] GET /api/dashboard/stats -> 401 (24ms)
Context: {
  "requestId": "n8pdwau9mhvi9msx",
  "duration": 24,
  "status": 401
}
[2025-11-12T04:34:03.855Z] [INFO][r5bzcqjq] POST /api/user/avatar
Context: {
  "requestId": "r5bzcqjqmhvi9mtr",
  "endpoint": "/api/user/avatar",
  "method": "POST"
}
[2025-11-12T04:34:03.856Z] [DEBUG][r5bzcqjq] [Middleware] Session ID from cookie
Context: {
  "requestId": "r5bzcqjqmhvi9mtr",
  "present": false
}
[2025-11-12T04:34:03.856Z] [INFO][nz8eytcc] GET /api/dashboard/stats
Context: {
  "requestId": "nz8eytccmhvi9mts",
  "endpoint": "/api/dashboard/stats",
  "method": "GET"
}
[2025-11-12T04:34:03.856Z] [DEBUG][nz8eytcc] [Middleware] Session ID from cookie
Context: {
  "requestId": "nz8eytccmhvi9mts",
  "present": false
}
[2025-11-12T04:34:03.856Z] [INFO][zldd4u52] GET /api/dashboard/stats
Context: {
  "requestId": "zldd4u52mhvi9mts",
  "endpoint": "/api/dashboard/stats",
  "method": "GET"
}
[2025-11-12T04:34:03.856Z] [DEBUG][zldd4u52] [Middleware] Session ID from cookie
Context: {
  "requestId": "zldd4u52mhvi9mts",
  "present": false
}
[2025-11-12T04:34:03.856Z] [INFO][i1yr1hrq] POST /api/billing/sync-callback
Context: {
  "requestId": "i1yr1hrqmhvi9mts",
  "endpoint": "/api/billing/sync-callback",
  "method": "POST"
}
[2025-11-12T04:34:03.856Z] [DEBUG][i1yr1hrq] [Middleware] Session ID from cookie
Context: {
  "requestId": "i1yr1hrqmhvi9mts",
  "present": false
}
05:34:03 [WARN] [router] No API Route handler exists for the method "POST" for the route "/api/billing/sync-callback".
Found handlers: "GET"

[2025-11-12T04:34:03.857Z] [DEBUG][i1yr1hrq] [Middleware] Outgoing response
Context: {
  "requestId": "i1yr1hrqmhvi9mts",
  "status": 404,
  "statusText": "Not Found",
  "headers": "[empty object]"
}
[2025-11-12T04:34:03.857Z] [DEBUG][i1yr1hrq] [Middleware] Processing path
Context: {
  "requestId": "i1yr1hrqmhvi9mts",
  "path": "/api/billing/sync-callback"
}
[2025-11-12T04:34:03.857Z] [INFO][i1yr1hrq] POST /api/billing/sync-callback -> 404 (1ms)
Context: {
  "requestId": "i1yr1hrqmhvi9mts",
  "duration": 1,
  "status": 404
}
[2025-11-12T04:34:03.857Z] [INFO][tjek58ld] POST /api/billing/sync-callback
Context: {
  "requestId": "tjek58ldmhvi9mtt",
  "endpoint": "/api/billing/sync-callback",
  "method": "POST"
}
[2025-11-12T04:34:03.857Z] [DEBUG][tjek58ld] [Middleware] Session ID from cookie
Context: {
  "requestId": "tjek58ldmhvi9mtt",
  "present": false
}
[wrangler:info] GET /api/dashboard/stats 401 Unauthorized (47ms)
[wrangler:info] GET /api/dashboard/stats 401 Unauthorized (47ms)
[wrangler:info] GET /api/dashboard/stats 401 Unauthorized (53ms)
[wrangler:info] GET /api/dashboard/stats 401 Unauthorized (53ms)
[wrangler:info] GET /api/dashboard/stats 401 Unauthorized (50ms)
[wrangler:info] GET /api/dashboard/stats 401 Unauthorized (50ms)
[wrangler:info] GET /api/dashboard/stats 401 Unauthorized (50ms)
[wrangler:info] GET /api/dashboard/stats 401 Unauthorized (49ms)
[wrangler:info] GET /api/dashboard/stats 401 Unauthorized (49ms)
[wrangler:info] GET /api/dashboard/stats 401 Unauthorized (48ms)
[wrangler:info] GET /api/dashboard/stats 401 Unauthorized (48ms)
[wrangler:info] GET /api/dashboard/stats 401 Unauthorized (47ms)
[dev] [2025-11-12T04:34:03.857Z] [DEBUG][tjek58ld] [Middleware] Outgoing response
Context: {
  "requestId": "tjek58ldmhvi9mtt",
  "status": 404,
  "statusText": "Not Found",
  "headers": {
    "content-type": "text/html",
    "x-astro-reroute": "no",
    "x-astro-route-type": "page"
  }
}
[2025-11-12T04:34:03.857Z] [DEBUG][tjek58ld] [Middleware] Processing path
Context: {
  "requestId": "tjek58ldmhvi9mtt",
  "path": "/api/billing/sync-callback"
}
[2025-11-12T04:34:03.857Z] [INFO][tjek58ld] POST /api/billing/sync-callback -> 404
Context: {
  "requestId": "tjek58ldmhvi9mtt",
  "duration": 0,
  "status": 404
}
[2025-11-12T04:34:03.857Z] [INFO][8x4tfkfh] POST /api/projects
Context: {
  "requestId": "8x4tfkfhmhvi9mtt",
  "endpoint": "/api/projects",
  "method": "POST"
}
[2025-11-12T04:34:03.857Z] [DEBUG][8x4tfkfh] [Middleware] Session ID from cookie
Context: {
  "requestId": "8x4tfkfhmhvi9mtt",
  "present": false
}
[wrangler:info] GET /api/dashboard/stats 401 Unauthorized (48ms)
[dev] [wrangler:info] POST /api/billing/sync-callback 404 Not Found (50ms)
[2025-11-12T04:34:03.863Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/projects',
    method: 'POST',
    action: 'project_created'
  }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:03.863Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: { reason: 'unauthenticated_access', endpoint: '/api/projects' }
  }
[dev] [2025-11-12T04:34:03.863Z] [DEBUG][8x4tfkfh] [Middleware] Outgoing response
Context: {
  "requestId": "8x4tfkfhmhvi9mtt",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:03.864Z] [DEBUG][8x4tfkfh] [Middleware] Processing path
Context: {
  "requestId": "8x4tfkfhmhvi9mtt",
  "path": "/api/projects"
}
[2025-11-12T04:34:03.864Z] [INFO][8x4tfkfh] POST /api/projects -> 401 (7ms)
Context: {
  "requestId": "8x4tfkfhmhvi9mtt",
  "duration": 7,
  "status": 401
}
[2025-11-12T04:34:03.864Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/user/avatar',
    method: 'POST',
    action: 'avatar_upload'
  }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:03.864Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: { reason: 'unauthenticated_access', endpoint: '/api/user/avatar' }
  }
[dev] [2025-11-12T04:34:03.864Z] [DEBUG][r5bzcqjq] [Middleware] Outgoing response
Context: {
  "requestId": "r5bzcqjqmhvi9mtr",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:03.864Z] [DEBUG][r5bzcqjq] [Middleware] Processing path
Context: {
  "requestId": "r5bzcqjqmhvi9mtr",
  "path": "/api/user/avatar"
}
[2025-11-12T04:34:03.864Z] [INFO][r5bzcqjq] POST /api/user/avatar -> 401 (9ms)
Context: {
  "requestId": "r5bzcqjqmhvi9mtr",
  "duration": 9,
  "status": 401
}
[2025-11-12T04:34:03.864Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/dashboard/stats',
    method: 'GET',
    action: 'dashboard_stats_accessed'
  }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:03.864Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: {
      reason: 'unauthenticated_access',
      endpoint: '/api/dashboard/stats'
    }
  }
[dev] [2025-11-12T04:34:03.864Z] [DEBUG][nz8eytcc] [Middleware] Outgoing response
Context: {
  "requestId": "nz8eytccmhvi9mts",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:03.864Z] [DEBUG][nz8eytcc] [Middleware] Processing path
Context: {
  "requestId": "nz8eytccmhvi9mts",
  "path": "/api/dashboard/stats"
}
[2025-11-12T04:34:03.864Z] [INFO][nz8eytcc] GET /api/dashboard/stats -> 401 (8ms)
Context: {
  "requestId": "nz8eytccmhvi9mts",
  "duration": 8,
  "status": 401
}
[2025-11-12T04:34:03.864Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/dashboard/stats',
    method: 'GET',
    action: 'dashboard_stats_accessed'
  }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:03.864Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: {
      reason: 'unauthenticated_access',
      endpoint: '/api/dashboard/stats'
    }
  }
[dev] [2025-11-12T04:34:03.865Z] [DEBUG][zldd4u52] [Middleware] Outgoing response
Context: {
  "requestId": "zldd4u52mhvi9mts",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:03.865Z] [DEBUG][zldd4u52] [Middleware] Processing path
Context: {
  "requestId": "zldd4u52mhvi9mts",
  "path": "/api/dashboard/stats"
}
[2025-11-12T04:34:03.865Z] [INFO][zldd4u52] GET /api/dashboard/stats -> 401 (9ms)
Context: {
  "requestId": "zldd4u52mhvi9mts",
  "duration": 9,
  "status": 401
}
[2025-11-12T04:34:03.869Z] [INFO][olchiyh4] POST /api/billing/sync-callback
Context: {
  "requestId": "olchiyh4mhvi9mu5",
  "endpoint": "/api/billing/sync-callback",
  "method": "POST"
}
[2025-11-12T04:34:03.869Z] [DEBUG][olchiyh4] [Middleware] Session ID from cookie
Context: {
  "requestId": "olchiyh4mhvi9mu5",
  "present": false
}
05:34:03 [WARN] [router] No API Route handler exists for the method "POST" for the route "/api/billing/sync-callback".
Found handlers: "GET"

[2025-11-12T04:34:03.869Z] [DEBUG][olchiyh4] [Middleware] Outgoing response
Context: {
  "requestId": "olchiyh4mhvi9mu5",
  "status": 404,
  "statusText": "Not Found",
  "headers": "[empty object]"
}
[2025-11-12T04:34:03.869Z] [DEBUG][olchiyh4] [Middleware] Processing path
Context: {
  "requestId": "olchiyh4mhvi9mu5",
  "path": "/api/billing/sync-callback"
}
[2025-11-12T04:34:03.869Z] [INFO][olchiyh4] POST /api/billing/sync-callback -> 404
Context: {
  "requestId": "olchiyh4mhvi9mu5",
  "duration": 0,
  "status": 404
}
[2025-11-12T04:34:03.870Z] [INFO][5c4r6oz8] POST /api/billing/sync-callback
Context: {
  "requestId": "5c4r6oz8mhvi9mu6",
  "endpoint": "/api/billing/sync-callback",
  "method": "POST"
}
[2025-11-12T04:34:03.870Z] [DEBUG][5c4r6oz8] [Middleware] Session ID from cookie
Context: {
  "requestId": "5c4r6oz8mhvi9mu6",
  "present": false
}
[2025-11-12T04:34:03.870Z] [DEBUG][5c4r6oz8] [Middleware] Outgoing response
Context: {
  "requestId": "5c4r6oz8mhvi9mu6",
  "status": 404,
  "statusText": "Not Found",
  "headers": {
    "content-type": "text/html",
    "x-astro-reroute": "no",
    "x-astro-route-type": "page"
  }
}
[2025-11-12T04:34:03.870Z] [DEBUG][5c4r6oz8] [Middleware] Processing path
Context: {
  "requestId": "5c4r6oz8mhvi9mu6",
  "path": "/api/billing/sync-callback"
}
[2025-11-12T04:34:03.870Z] [INFO][5c4r6oz8] POST /api/billing/sync-callback -> 404
Context: {
  "requestId": "5c4r6oz8mhvi9mu6",
  "duration": 0,
  "status": 404
}
[dev] [wrangler:info] GET /api/dashboard/stats 401 Unauthorized (56ms)
[wrangler:info] GET /api/dashboard/stats 401 Unauthorized (56ms)
[wrangler:info] POST /api/projects 401 Unauthorized (53ms)
[wrangler:info] POST /api/user/avatar 401 Unauthorized (46ms)
[dev] [2025-11-12T04:34:03.875Z] [INFO][t5dajnwq] POST /api/projects
Context: {
  "requestId": "t5dajnwqmhvi9mub",
  "endpoint": "/api/projects",
  "method": "POST"
}
[dev] [wrangler:info] POST /api/billing/sync-callback 404 Not Found (6ms)
[2025-11-12T04:34:03.875Z] [DEBUG][t5dajnwq] [Middleware] Session ID from cookie
Context: {
  "requestId": "t5dajnwqmhvi9mub",
  "present": false
}
[dev] [2025-11-12T04:34:03.878Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/projects',
    method: 'POST',
    action: 'project_created'
  }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:03.879Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: { reason: 'unauthenticated_access', endpoint: '/api/projects' }
  }
[dev] [2025-11-12T04:34:03.879Z] [DEBUG][t5dajnwq] [Middleware] Outgoing response
Context: {
  "requestId": "t5dajnwqmhvi9mub",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:03.879Z] [DEBUG][t5dajnwq] [Middleware] Processing path
Context: {
  "requestId": "t5dajnwqmhvi9mub",
  "path": "/api/projects"
}
[2025-11-12T04:34:03.879Z] [INFO][t5dajnwq] POST /api/projects -> 401 (4ms)
Context: {
  "requestId": "t5dajnwqmhvi9mub",
  "duration": 4,
  "status": 401
}
[dev] [2025-11-12T04:34:03.882Z] [INFO][vx1weqrc] POST /api/dashboard/perform-action
Context: {
  "requestId": "vx1weqrcmhvi9mui",
  "endpoint": "/api/dashboard/perform-action",
  "method": "POST"
}
[2025-11-12T04:34:03.882Z] [DEBUG][vx1weqrc] [Middleware] Session ID from cookie
Context: {
  "requestId": "vx1weqrcmhvi9mui",
  "present": false
}
[dev] [2025-11-12T04:34:03.882Z] [INFO][lioewrox] POST /api/user/avatar
Context: {
  "requestId": "lioewroxmhvi9mui",
  "endpoint": "/api/user/avatar",
  "method": "POST"
}
[2025-11-12T04:34:03.882Z] [DEBUG][lioewrox] [Middleware] Session ID from cookie
Context: {
  "requestId": "lioewroxmhvi9mui",
  "present": true
}
[wrangler:info] POST /api/projects 401 Unauthorized (10ms)
[dev] [2025-11-12T04:34:03.884Z] [DEBUG][lioewrox] [Middleware] Session validation result
Context: {
  "requestId": "lioewroxmhvi9mui",
  "sessionValid": true,
  "userValid": true
}
[dev] [2025-11-12T04:34:03.884Z] [INFO] SECURITY_EVENT {
  timestamp: {},
  resource: 'security',
  ipAddress: '::1',
  type: 'SUSPICIOUS_ACTIVITY',
  details: {
    reason: 'csrf_token_mismatch',
    endpoint: '/api/user/avatar',
    hasHeader: true,
    hasCookie: true
  }
}
[dev] [2025-11-12T04:34:03.884Z] [DEBUG][lioewrox] [Middleware] Outgoing response
Context: {
  "requestId": "lioewroxmhvi9mui",
  "status": 403,
  "statusText": "Forbidden",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:03.884Z] [DEBUG][lioewrox] [Middleware] Processing path
Context: {
  "requestId": "lioewroxmhvi9mui",
  "path": "/api/user/avatar"
}
[2025-11-12T04:34:03.884Z] [INFO][lioewrox] POST /api/user/avatar -> 403 (2ms)
Context: {
  "requestId": "lioewroxmhvi9mui",
  "duration": 2,
  "status": 403
}
[dev] [2025-11-12T04:34:03.886Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/dashboard/perform-action',
    method: 'POST',
    action: 'perform_dashboard_action'
  }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:03.886Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: {
      reason: 'unauthenticated_access',
      endpoint: '/api/dashboard/perform-action'
    }
  }
[dev] [2025-11-12T04:34:03.886Z] [DEBUG][vx1weqrc] [Middleware] Outgoing response
Context: {
  "requestId": "vx1weqrcmhvi9mui",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:03.886Z] [DEBUG][vx1weqrc] [Middleware] Processing path
Context: {
  "requestId": "vx1weqrcmhvi9mui",
  "path": "/api/dashboard/perform-action"
}
[2025-11-12T04:34:03.886Z] [INFO][vx1weqrc] POST /api/dashboard/perform-action -> 401 (4ms)
Context: {
  "requestId": "vx1weqrcmhvi9mui",
  "duration": 4,
  "status": 401
}
[dev] [wrangler:info] POST /api/user/avatar 403 Forbidden (14ms)
[dev] [2025-11-12T04:34:03.887Z] [INFO][9di9l79y] GET /api/projects
Context: {
  "requestId": "9di9l79ymhvi9mun",
  "endpoint": "/api/projects",
  "method": "GET"
}
[2025-11-12T04:34:03.888Z] [DEBUG][9di9l79y] [Middleware] Session ID from cookie
Context: {
  "requestId": "9di9l79ymhvi9mun",
  "present": false
}
[dev] 05:34:03 [WARN] [router] No API Route handler exists for the method "GET" for the route "/api/projects".
Found handlers: "POST"

[2025-11-12T04:34:03.888Z] [DEBUG][9di9l79y] [Middleware] Outgoing response
Context: {
  "requestId": "9di9l79ymhvi9mun",
  "status": 404,
  "statusText": "Not Found",
  "headers": "[empty object]"
}
[2025-11-12T04:34:03.888Z] [DEBUG][9di9l79y] [Middleware] Processing path
Context: {
  "requestId": "9di9l79ymhvi9mun",
  "path": "/api/projects"
}
[2025-11-12T04:34:03.888Z] [INFO][9di9l79y] GET /api/projects -> 404 (1ms)
Context: {
  "requestId": "9di9l79ymhvi9mun",
  "duration": 1,
  "status": 404
}
[dev] [wrangler:info] POST /api/dashboard/perform-action 401 Unauthorized (15ms)
[dev] [2025-11-12T04:34:03.888Z] [INFO][gl0a76jv] GET /api/projects
Context: {
  "requestId": "gl0a76jvmhvi9muo",
  "endpoint": "/api/projects",
  "method": "GET"
}
[2025-11-12T04:34:03.888Z] [DEBUG][gl0a76jv] [Middleware] Session ID from cookie
Context: {
  "requestId": "gl0a76jvmhvi9muo",
  "present": false
}
[2025-11-12T04:34:03.888Z] [DEBUG][gl0a76jv] [Middleware] Outgoing response
Context: {
  "requestId": "gl0a76jvmhvi9muo",
  "status": 404,
  "statusText": "Not Found",
  "headers": {
    "content-type": "text/html",
    "x-astro-reroute": "no",
    "x-astro-route-type": "page"
  }
}
[2025-11-12T04:34:03.888Z] [DEBUG][gl0a76jv] [Middleware] Processing path
Context: {
  "requestId": "gl0a76jvmhvi9muo",
  "path": "/api/projects"
}
[2025-11-12T04:34:03.888Z] [INFO][gl0a76jv] GET /api/projects -> 404
Context: {
  "requestId": "gl0a76jvmhvi9muo",
  "duration": 0,
  "status": 404
}
[2025-11-12T04:34:03.889Z] [INFO][6l52nloj] POST /api/billing/sync-callback
Context: {
  "requestId": "6l52nlojmhvi9mup",
  "endpoint": "/api/billing/sync-callback",
  "method": "POST"
}
[2025-11-12T04:34:03.889Z] [DEBUG][6l52nloj] [Middleware] Session ID from cookie
Context: {
  "requestId": "6l52nlojmhvi9mup",
  "present": false
}
05:34:03 [WARN] [router] No API Route handler exists for the method "POST" for the route "/api/billing/sync-callback".
Found handlers: "GET"

[2025-11-12T04:34:03.889Z] [DEBUG][6l52nloj] [Middleware] Outgoing response
Context: {
  "requestId": "6l52nlojmhvi9mup",
  "status": 404,
  "statusText": "Not Found",
  "headers": "[empty object]"
}
[2025-11-12T04:34:03.889Z] [DEBUG][6l52nloj] [Middleware] Processing path
Context: {
  "requestId": "6l52nlojmhvi9mup",
  "path": "/api/billing/sync-callback"
}
[2025-11-12T04:34:03.889Z] [INFO][6l52nloj] POST /api/billing/sync-callback -> 404
Context: {
  "requestId": "6l52nlojmhvi9mup",
  "duration": 0,
  "status": 404
}
[2025-11-12T04:34:03.889Z] [INFO][3hpdssi9] POST /api/billing/sync-callback
Context: {
  "requestId": "3hpdssi9mhvi9mup",
  "endpoint": "/api/billing/sync-callback",
  "method": "POST"
}
[2025-11-12T04:34:03.889Z] [DEBUG][3hpdssi9] [Middleware] Session ID from cookie
Context: {
  "requestId": "3hpdssi9mhvi9mup",
  "present": false
}
[2025-11-12T04:34:03.889Z] [DEBUG][3hpdssi9] [Middleware] Outgoing response
Context: {
  "requestId": "3hpdssi9mhvi9mup",
  "status": 404,
  "statusText": "Not Found",
  "headers": {
    "content-type": "text/html",
    "x-astro-reroute": "no",
    "x-astro-route-type": "page"
  }
}
[2025-11-12T04:34:03.889Z] [DEBUG][3hpdssi9] [Middleware] Processing path
Context: {
  "requestId": "3hpdssi9mhvi9mup",
  "path": "/api/billing/sync-callback"
}
[2025-11-12T04:34:03.889Z] [INFO][3hpdssi9] POST /api/billing/sync-callback -> 404
Context: {
  "requestId": "3hpdssi9mhvi9mup",
  "duration": 0,
  "status": 404
}
[dev] [wrangler:info] GET /api/projects 404 Not Found (6ms)
[wrangler:info] POST /api/billing/sync-callback 404 Not Found (10ms)
[dev] [2025-11-12T04:34:03.894Z] [INFO][miladqn0] GET /api/user/avatar
Context: {
  "requestId": "miladqn0mhvi9muu",
  "endpoint": "/api/user/avatar",
  "method": "GET"
}
[dev] [2025-11-12T04:34:03.894Z] [DEBUG][miladqn0] [Middleware] Session ID from cookie
Context: {
  "requestId": "miladqn0mhvi9muu",
  "present": false
}
[dev] [2025-11-12T04:34:03.894Z] [DEBUG][miladqn0] [Middleware] Outgoing response
Context: {
  "requestId": "miladqn0mhvi9muu",
  "status": 405,
  "statusText": "Method Not Allowed",
  "headers": {
    "allow": "POST",
    "content-type": "application/json"
  }
}
[2025-11-12T04:34:03.894Z] [DEBUG][miladqn0] [Middleware] Processing path
Context: {
  "requestId": "miladqn0mhvi9muu",
  "path": "/api/user/avatar"
}
[2025-11-12T04:34:03.894Z] [INFO][miladqn0] GET /api/user/avatar -> 405
Context: {
  "requestId": "miladqn0mhvi9muu",
  "duration": 0,
  "status": 405
}
[dev] [2025-11-12T04:34:03.895Z] [INFO][n47ehbcp] DELETE /api/dashboard/stats
Context: {
  "requestId": "n47ehbcpmhvi9muv",
  "endpoint": "/api/dashboard/stats",
  "method": "DELETE"
}
[2025-11-12T04:34:03.895Z] [DEBUG][n47ehbcp] [Middleware] Session ID from cookie
Context: {
  "requestId": "n47ehbcpmhvi9muv",
  "present": false
}
05:34:03 [WARN] [router] No API Route handler exists for the method "DELETE" for the route "/api/dashboard/stats".
Found handlers: "GET"

[2025-11-12T04:34:03.896Z] [DEBUG][n47ehbcp] [Middleware] Outgoing response
Context: {
  "requestId": "n47ehbcpmhvi9muv",
  "status": 404,
  "statusText": "Not Found",
  "headers": "[empty object]"
}
[2025-11-12T04:34:03.896Z] [DEBUG][n47ehbcp] [Middleware] Processing path
Context: {
  "requestId": "n47ehbcpmhvi9muv",
  "path": "/api/dashboard/stats"
}
[2025-11-12T04:34:03.896Z] [INFO][n47ehbcp] DELETE /api/dashboard/stats -> 404 (1ms)
Context: {
  "requestId": "n47ehbcpmhvi9muv",
  "duration": 1,
  "status": 404
}
[2025-11-12T04:34:03.896Z] [INFO][3ie7rzda] DELETE /api/dashboard/stats
Context: {
  "requestId": "3ie7rzdamhvi9muw",
  "endpoint": "/api/dashboard/stats",
  "method": "DELETE"
}
[2025-11-12T04:34:03.896Z] [DEBUG][3ie7rzda] [Middleware] Session ID from cookie
Context: {
  "requestId": "3ie7rzdamhvi9muw",
  "present": false
}
[2025-11-12T04:34:03.896Z] [DEBUG][3ie7rzda] [Middleware] Outgoing response
Context: {
  "requestId": "3ie7rzdamhvi9muw",
  "status": 404,
  "statusText": "Not Found",
  "headers": {
    "content-type": "text/html",
    "x-astro-reroute": "no",
    "x-astro-route-type": "page"
  }
}
[2025-11-12T04:34:03.896Z] [DEBUG][3ie7rzda] [Middleware] Processing path
Context: {
  "requestId": "3ie7rzdamhvi9muw",
  "path": "/api/dashboard/stats"
}
[dev] [2025-11-12T04:34:03.896Z] [INFO][3ie7rzda] DELETE /api/dashboard/stats -> 404
Context: {
  "requestId": "3ie7rzdamhvi9muw",
  "duration": 0,
  "status": 404
}
[wrangler:info] GET /api/user/avatar 405 Method Not Allowed (4ms)
[2025-11-12T04:34:03.897Z] [INFO][3c8cvp41] GET /api/projects
Context: {
  "requestId": "3c8cvp41mhvi9mux",
  "endpoint": "/api/projects",
  "method": "GET"
}
[dev] [2025-11-12T04:34:03.898Z] [DEBUG][3c8cvp41] [Middleware] Session ID from cookie
Context: {
  "requestId": "3c8cvp41mhvi9mux",
  "present": false
}
05:34:03 [WARN] [router] No API Route handler exists for the method "GET" for the route "/api/projects".
Found handlers: "POST"
[dev] [2025-11-12T04:34:03.898Z] [DEBUG][3c8cvp41] [Middleware] Outgoing response
Context: {
  "requestId": "3c8cvp41mhvi9mux",
  "status": 404,
  "statusText": "Not Found",
  "headers": "[empty object]"
}
[dev] [2025-11-12T04:34:03.898Z] [DEBUG][3c8cvp41] [Middleware] Processing path
Context: {
  "requestId": "3c8cvp41mhvi9mux",
  "path": "/api/projects"
}
[2025-11-12T04:34:03.898Z] [INFO][3c8cvp41] GET /api/projects -> 404 (1ms)
Context: {
  "requestId": "3c8cvp41mhvi9mux",
  "duration": 1,
  "status": 404
}
[dev] [2025-11-12T04:34:03.898Z] [INFO][m846v6t3] GET /api/projects
Context: {
  "requestId": "m846v6t3mhvi9muy",
  "endpoint": "/api/projects",
  "method": "GET"
}
[2025-11-12T04:34:03.898Z] [DEBUG][m846v6t3] [Middleware] Session ID from cookie
Context: {
  "requestId": "m846v6t3mhvi9muy",
  "present": false
}
[2025-11-12T04:34:03.899Z] [DEBUG][m846v6t3] [Middleware] Outgoing response
Context: {
  "requestId": "m846v6t3mhvi9muy",
  "status": 404,
  "statusText": "Not Found",
  "headers": {
    "content-type": "text/html",
    "x-astro-reroute": "no",
    "x-astro-route-type": "page"
  }
}
[2025-11-12T04:34:03.899Z] [DEBUG][m846v6t3] [Middleware] Processing path
Context: {
  "requestId": "m846v6t3mhvi9muy",
  "path": "/api/projects"
}
[2025-11-12T04:34:03.899Z] [INFO][m846v6t3] GET /api/projects -> 404 (1ms)
Context: {
  "requestId": "m846v6t3mhvi9muy",
  "duration": 1,
  "status": 404
}
[dev] [wrangler:info] DELETE /api/dashboard/stats 404 Not Found (7ms)
[dev] [2025-11-12T04:34:03.903Z] [INFO][psjqqg4u] POST /api/billing/sync-callback
Context: {
  "requestId": "psjqqg4umhvi9mv3",
  "endpoint": "/api/billing/sync-callback",
  "method": "POST"
}
[2025-11-12T04:34:03.903Z] [DEBUG][psjqqg4u] [Middleware] Session ID from cookie
Context: {
  "requestId": "psjqqg4umhvi9mv3",
  "present": false
}
05:34:03 [WARN] [router] No API Route handler exists for the method "POST" for the route "/api/billing/sync-callback".
Found handlers: "GET"

[2025-11-12T04:34:03.903Z] [DEBUG][psjqqg4u] [Middleware] Outgoing response
Context: {
  "requestId": "psjqqg4umhvi9mv3",
  "status": 404,
  "statusText": "Not Found",
  "headers": "[empty object]"
}
[2025-11-12T04:34:03.904Z] [DEBUG][psjqqg4u] [Middleware] Processing path
Context: {
  "requestId": "psjqqg4umhvi9mv3",
  "path": "/api/billing/sync-callback"
}
[2025-11-12T04:34:03.904Z] [INFO][psjqqg4u] POST /api/billing/sync-callback -> 404 (1ms)
Context: {
  "requestId": "psjqqg4umhvi9mv3",
  "duration": 1,
  "status": 404
}
[2025-11-12T04:34:03.904Z] [INFO][l3i4xrdv] POST /api/billing/sync-callback
Context: {
  "requestId": "l3i4xrdvmhvi9mv4",
  "endpoint": "/api/billing/sync-callback",
  "method": "POST"
}
[2025-11-12T04:34:03.904Z] [DEBUG][l3i4xrdv] [Middleware] Session ID from cookie
Context: {
  "requestId": "l3i4xrdvmhvi9mv4",
  "present": false
}
[2025-11-12T04:34:03.904Z] [DEBUG][l3i4xrdv] [Middleware] Outgoing response
Context: {
  "requestId": "l3i4xrdvmhvi9mv4",
  "status": 404,
  "statusText": "Not Found",
  "headers": {
    "content-type": "text/html",
    "x-astro-reroute": "no",
    "x-astro-route-type": "page"
  }
}
[2025-11-12T04:34:03.904Z] [DEBUG][l3i4xrdv] [Middleware] Processing path
Context: {
  "requestId": "l3i4xrdvmhvi9mv4",
  "path": "/api/billing/sync-callback"
}
[2025-11-12T04:34:03.904Z] [INFO][l3i4xrdv] POST /api/billing/sync-callback -> 404
Context: {
  "requestId": "l3i4xrdvmhvi9mv4",
  "duration": 0,
  "status": 404
}
[2025-11-12T04:34:03.905Z] [INFO][weq5lccg] POST /api/user/avatar
Context: {
  "requestId": "weq5lccgmhvi9mv5",
  "endpoint": "/api/user/avatar",
  "method": "POST"
}
[2025-11-12T04:34:03.905Z] [DEBUG][weq5lccg] [Middleware] Session ID from cookie
Context: {
  "requestId": "weq5lccgmhvi9mv5",
  "present": true
}
[wrangler:info] GET /api/projects 404 Not Found (9ms)
[dev] [2025-11-12T04:34:03.906Z] [DEBUG][weq5lccg] [Middleware] Session validation result
Context: {
  "requestId": "weq5lccgmhvi9mv5",
  "sessionValid": true,
  "userValid": true
}
[wrangler:info] POST /api/billing/sync-callback 404 Not Found (10ms)
[dev] [2025-11-12T04:34:03.908Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'd44cd9d1-b68d-41bd-9c69-87ac5bda927f',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/user/avatar',
    method: 'POST',
    action: 'avatar_upload'
  }
}
[dev] [2025-11-12T04:34:03.911Z] [INFO][U:d44cd9d1-b68d-41bd-9c69-87ac5bda927f] Security Event: USER_EVENT
Context: {
  "userId": "d44cd9d1-b68d-41bd-9c69-87ac5bda927f",
  "securityEventType": "USER_EVENT",
  "originalDetails": {
    "eventType": "avatar_updated",
    "ipAddress": "::1",
    "imageUrl": "/r2/avatar-d44cd9d1-b68d-41bd-9c69-87ac5bda927f-1762922043909.jpg"
  },
  "logLevel": "info",
  "eventSnapshot": {
    "type": "USER_EVENT",
    "userId": "d44cd9d1-b68d-41bd-9c69-87ac5bda927f",
    "timestamp": 1762922043911,
    "details": {
      "eventType": "avatar_updated",
      "ipAddress": "::1",
      "imageUrl": "/r2/avatar-d44cd9d1-b68d-41bd-9c69-87ac5bda927f-1762922043909.jpg"
    }
  }
}
[2025-11-12T04:34:03.911Z] [DEBUG][weq5lccg] [Middleware] Outgoing response
Context: {
  "requestId": "weq5lccgmhvi9mv5",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[dev] [2025-11-12T04:34:03.911Z] [DEBUG][weq5lccg] [Middleware] Processing path
Context: {
  "requestId": "weq5lccgmhvi9mv5",
  "path": "/api/user/avatar"
}
[2025-11-12T04:34:03.911Z] [INFO][weq5lccg] POST /api/user/avatar -> 200 (6ms)
Context: {
  "requestId": "weq5lccgmhvi9mv5",
  "duration": 6,
  "status": 200
}
[dev] [wrangler:info] POST /api/user/avatar 200 OK (9ms)
[dev] [2025-11-12T04:34:03.913Z] [INFO][wqceqm0l] DELETE /api/dashboard/activity
Context: {
  "requestId": "wqceqm0lmhvi9mvd",
  "endpoint": "/api/dashboard/activity",
  "method": "DELETE"
}
[2025-11-12T04:34:03.913Z] [DEBUG][wqceqm0l] [Middleware] Session ID from cookie
Context: {
  "requestId": "wqceqm0lmhvi9mvd",
  "present": false
}
05:34:03 [WARN] [router] No API Route handler exists for the method "DELETE" for the route "/api/dashboard/activity".
Found handlers: "GET"

[2025-11-12T04:34:03.913Z] [DEBUG][wqceqm0l] [Middleware] Outgoing response
Context: {
  "requestId": "wqceqm0lmhvi9mvd",
  "status": 404,
  "statusText": "Not Found",
  "headers": "[empty object]"
}
[2025-11-12T04:34:03.913Z] [DEBUG][wqceqm0l] [Middleware] Processing path
Context: {
  "requestId": "wqceqm0lmhvi9mvd",
  "path": "/api/dashboard/activity"
}
[2025-11-12T04:34:03.913Z] [INFO][wqceqm0l] DELETE /api/dashboard/activity -> 404
Context: {
  "requestId": "wqceqm0lmhvi9mvd",
  "duration": 0,
  "status": 404
}
[dev] [2025-11-12T04:34:03.914Z] [INFO][cjo4hjqh] DELETE /api/dashboard/activity
Context: {
  "requestId": "cjo4hjqhmhvi9mve",
  "endpoint": "/api/dashboard/activity",
  "method": "DELETE"
}
[2025-11-12T04:34:03.914Z] [DEBUG][cjo4hjqh] [Middleware] Session ID from cookie
Context: {
  "requestId": "cjo4hjqhmhvi9mve",
  "present": false
}
[2025-11-12T04:34:03.914Z] [DEBUG][cjo4hjqh] [Middleware] Outgoing response
Context: {
  "requestId": "cjo4hjqhmhvi9mve",
  "status": 404,
  "statusText": "Not Found",
  "headers": {
    "content-type": "text/html",
    "x-astro-reroute": "no",
    "x-astro-route-type": "page"
  }
}
[2025-11-12T04:34:03.914Z] [DEBUG][cjo4hjqh] [Middleware] Processing path
Context: {
  "requestId": "cjo4hjqhmhvi9mve",
  "path": "/api/dashboard/activity"
}
[2025-11-12T04:34:03.914Z] [INFO][cjo4hjqh] DELETE /api/dashboard/activity -> 404
Context: {
  "requestId": "cjo4hjqhmhvi9mve",
  "duration": 0,
  "status": 404
}
[2025-11-12T04:34:03.914Z] [INFO][v2d3tvbq] GET /api/projects
Context: {
  "requestId": "v2d3tvbqmhvi9mve",
  "endpoint": "/api/projects",
  "method": "GET"
}
[2025-11-12T04:34:03.914Z] [DEBUG][v2d3tvbq] [Middleware] Session ID from cookie
Context: {
  "requestId": "v2d3tvbqmhvi9mve",
  "present": false
}
[dev] 05:34:03 [WARN] [router] No API Route handler exists for the method "GET" for the route "/api/projects".
Found handlers: "POST"

[2025-11-12T04:34:03.914Z] [DEBUG][v2d3tvbq] [Middleware] Outgoing response
Context: {
  "requestId": "v2d3tvbqmhvi9mve",
  "status": 404,
  "statusText": "Not Found",
  "headers": "[empty object]"
}
[2025-11-12T04:34:03.914Z] [DEBUG][v2d3tvbq] [Middleware] Processing path
Context: {
  "requestId": "v2d3tvbqmhvi9mve",
  "path": "/api/projects"
}
[2025-11-12T04:34:03.915Z] [INFO][v2d3tvbq] GET /api/projects -> 404 (1ms)
Context: {
  "requestId": "v2d3tvbqmhvi9mve",
  "duration": 1,
  "status": 404
}
[2025-11-12T04:34:03.915Z] [INFO][rgal9twm] GET /api/projects
Context: {
  "requestId": "rgal9twmmhvi9mvf",
  "endpoint": "/api/projects",
  "method": "GET"
}
[2025-11-12T04:34:03.915Z] [DEBUG][rgal9twm] [Middleware] Session ID from cookie
Context: {
  "requestId": "rgal9twmmhvi9mvf",
  "present": false
}
[dev] [2025-11-12T04:34:03.915Z] [DEBUG][rgal9twm] [Middleware] Outgoing response
Context: {
  "requestId": "rgal9twmmhvi9mvf",
  "status": 404,
  "statusText": "Not Found",
  "headers": {
    "content-type": "text/html",
    "x-astro-reroute": "no",
    "x-astro-route-type": "page"
  }
}
[2025-11-12T04:34:03.915Z] [DEBUG][rgal9twm] [Middleware] Processing path
Context: {
  "requestId": "rgal9twmmhvi9mvf",
  "path": "/api/projects"
}
[2025-11-12T04:34:03.915Z] [INFO][rgal9twm] GET /api/projects -> 404
Context: {
  "requestId": "rgal9twmmhvi9mvf",
  "duration": 0,
  "status": 404
}
[2025-11-12T04:34:03.915Z] [INFO][h2zy8ok4] POST /api/billing/sync-callback
Context: {
  "requestId": "h2zy8ok4mhvi9mvf",
  "endpoint": "/api/billing/sync-callback",
  "method": "POST"
}
[2025-11-12T04:34:03.915Z] [DEBUG][h2zy8ok4] [Middleware] Session ID from cookie
Context: {
  "requestId": "h2zy8ok4mhvi9mvf",
  "present": false
}
05:34:03 [WARN] [router] No API Route handler exists for the method "POST" for the route "/api/billing/sync-callback".
Found handlers: "GET"

[2025-11-12T04:34:03.915Z] [DEBUG][h2zy8ok4] [Middleware] Outgoing response
Context: {
  "requestId": "h2zy8ok4mhvi9mvf",
  "status": 404,
  "statusText": "Not Found",
  "headers": "[empty object]"
}
[2025-11-12T04:34:03.916Z] [DEBUG][h2zy8ok4] [Middleware] Processing path
Context: {
  "requestId": "h2zy8ok4mhvi9mvf",
  "path": "/api/billing/sync-callback"
}
[2025-11-12T04:34:03.916Z] [INFO][h2zy8ok4] POST /api/billing/sync-callback -> 404 (1ms)
Context: {
  "requestId": "h2zy8ok4mhvi9mvf",
  "duration": 1,
  "status": 404
}
[2025-11-12T04:34:03.916Z] [INFO][ntgbdmp8] POST /api/billing/sync-callback
Context: {
  "requestId": "ntgbdmp8mhvi9mvg",
  "endpoint": "/api/billing/sync-callback",
  "method": "POST"
}
[2025-11-12T04:34:03.916Z] [DEBUG][ntgbdmp8] [Middleware] Session ID from cookie
Context: {
  "requestId": "ntgbdmp8mhvi9mvg",
  "present": false
}
[dev] [2025-11-12T04:34:03.917Z] [DEBUG][ntgbdmp8] [Middleware] Outgoing response
Context: {
  "requestId": "ntgbdmp8mhvi9mvg",
  "status": 404,
  "statusText": "Not Found",
  "headers": {
    "content-type": "text/html",
    "x-astro-reroute": "no",
    "x-astro-route-type": "page"
  }
}
[dev] [2025-11-12T04:34:03.917Z] [DEBUG][ntgbdmp8] [Middleware] Processing path
Context: {
  "requestId": "ntgbdmp8mhvi9mvg",
  "path": "/api/billing/sync-callback"
}
[dev] [2025-11-12T04:34:03.917Z] [INFO][ntgbdmp8] POST /api/billing/sync-callback -> 404 (1ms)
Context: {
  "requestId": "ntgbdmp8mhvi9mvg",
  "duration": 1,
  "status": 404
}
[dev] [wrangler:info] GET /api/projects 404 Not Found (12ms)
[2025-11-12T04:34:03.920Z] [INFO][43yg8e5t] POST /api/user/avatar
Context: {
  "requestId": "43yg8e5tmhvi9mvk",
  "endpoint": "/api/user/avatar",
  "method": "POST"
}
[2025-11-12T04:34:03.920Z] [DEBUG][43yg8e5t] [Middleware] Session ID from cookie
Context: {
  "requestId": "43yg8e5tmhvi9mvk",
  "present": true
}
[dev] [wrangler:info] DELETE /api/dashboard/activity 404 Not Found (11ms)
[dev] [wrangler:info] POST /api/billing/sync-callback 404 Not Found (12ms)
[dev] [2025-11-12T04:34:03.921Z] [DEBUG][43yg8e5t] [Middleware] Session validation result
Context: {
  "requestId": "43yg8e5tmhvi9mvk",
  "sessionValid": true,
  "userValid": true
}
[dev] [2025-11-12T04:34:03.923Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'd44cd9d1-b68d-41bd-9c69-87ac5bda927f',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/user/avatar',
    method: 'POST',
    action: 'avatar_upload'
  }
}
[dev] [2025-11-12T04:34:03.929Z] [INFO][U:d44cd9d1-b68d-41bd-9c69-87ac5bda927f] Security Event: USER_EVENT
Context: {
  "userId": "d44cd9d1-b68d-41bd-9c69-87ac5bda927f",
  "securityEventType": "USER_EVENT",
  "originalDetails": {
    "eventType": "avatar_updated",
    "ipAddress": "::1",
    "imageUrl": "/r2/avatar-d44cd9d1-b68d-41bd-9c69-87ac5bda927f-1762922043923.jpg"
  },
  "logLevel": "info",
  "eventSnapshot": {
    "type": "USER_EVENT",
    "userId": "d44cd9d1-b68d-41bd-9c69-87ac5bda927f",
    "timestamp": 1762922043929,
    "details": {
      "eventType": "avatar_updated",
      "ipAddress": "::1",
      "imageUrl": "/r2/avatar-d44cd9d1-b68d-41bd-9c69-87ac5bda927f-1762922043923.jpg"
    }
  }
}
[dev] [2025-11-12T04:34:03.929Z] [DEBUG][43yg8e5t] [Middleware] Outgoing response
Context: {
  "requestId": "43yg8e5tmhvi9mvk",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:03.929Z] [DEBUG][43yg8e5t] [Middleware] Processing path
Context: {
  "requestId": "43yg8e5tmhvi9mvk",
  "path": "/api/user/avatar"
}
[2025-11-12T04:34:03.929Z] [INFO][43yg8e5t] POST /api/user/avatar -> 200 (9ms)
Context: {
  "requestId": "43yg8e5tmhvi9mvk",
  "duration": 9,
  "status": 200
}
[dev] [wrangler:info] POST /api/user/avatar 200 OK (17ms)
[2025-11-12T04:34:03.931Z] [INFO][jdqjjtmt] POST /api/billing/session
Context: {
  "requestId": "jdqjjtmtmhvi9mvv",
  "endpoint": "/api/billing/session",
  "method": "POST"
}
[2025-11-12T04:34:03.931Z] [DEBUG][jdqjjtmt] [Middleware] Session ID from cookie
Context: {
  "requestId": "jdqjjtmtmhvi9mvv",
  "present": false
}
[2025-11-12T04:34:03.931Z] [INFO][3jw0nep0] GET /api/projects
Context: {
  "requestId": "3jw0nep0mhvi9mvv",
  "endpoint": "/api/projects",
  "method": "GET"
}
[2025-11-12T04:34:03.931Z] [DEBUG][3jw0nep0] [Middleware] Session ID from cookie
Context: {
  "requestId": "3jw0nep0mhvi9mvv",
  "present": false
}
05:34:03 [WARN] [router] No API Route handler exists for the method "GET" for the route "/api/projects".
Found handlers: "POST"
[dev] [2025-11-12T04:34:03.932Z] [DEBUG][3jw0nep0] [Middleware] Outgoing response
Context: {
  "requestId": "3jw0nep0mhvi9mvv",
  "status": 404,
  "statusText": "Not Found",
  "headers": "[empty object]"
}
[2025-11-12T04:34:03.932Z] [DEBUG][3jw0nep0] [Middleware] Processing path
Context: {
  "requestId": "3jw0nep0mhvi9mvv",
  "path": "/api/projects"
}
[dev] [2025-11-12T04:34:03.932Z] [INFO][3jw0nep0] GET /api/projects -> 404 (1ms)
Context: {
  "requestId": "3jw0nep0mhvi9mvv",
  "duration": 1,
  "status": 404
}
[2025-11-12T04:34:03.932Z] [INFO][xvpqyu9v] GET /api/projects
Context: {
  "requestId": "xvpqyu9vmhvi9mvw",
  "endpoint": "/api/projects",
  "method": "GET"
}
[2025-11-12T04:34:03.932Z] [DEBUG][xvpqyu9v] [Middleware] Session ID from cookie
Context: {
  "requestId": "xvpqyu9vmhvi9mvw",
  "present": false
}
[2025-11-12T04:34:03.933Z] [DEBUG][xvpqyu9v] [Middleware] Outgoing response
Context: {
  "requestId": "xvpqyu9vmhvi9mvw",
  "status": 404,
  "statusText": "Not Found",
  "headers": {
    "content-type": "text/html",
    "x-astro-reroute": "no",
    "x-astro-route-type": "page"
  }
}
[2025-11-12T04:34:03.933Z] [DEBUG][xvpqyu9v] [Middleware] Processing path
Context: {
  "requestId": "xvpqyu9vmhvi9mvw",
  "path": "/api/projects"
}
[2025-11-12T04:34:03.933Z] [INFO][xvpqyu9v] GET /api/projects -> 404 (1ms)
Context: {
  "requestId": "xvpqyu9vmhvi9mvw",
  "duration": 1,
  "status": 404
}
[dev] [wrangler:info] GET /api/projects 404 Not Found (11ms)
[2025-11-12T04:34:03.937Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/billing/session',
    method: 'POST',
    action: 'create_checkout_session'
  }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:03.937Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: {
      reason: 'unauthenticated_access',
      endpoint: '/api/billing/session'
    }
  }
[dev] [2025-11-12T04:34:03.937Z] [DEBUG][jdqjjtmt] [Middleware] Outgoing response
Context: {
  "requestId": "jdqjjtmtmhvi9mvv",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:03.937Z] [DEBUG][jdqjjtmt] [Middleware] Processing path
Context: {
  "requestId": "jdqjjtmtmhvi9mvv",
  "path": "/api/billing/session"
}
[2025-11-12T04:34:03.938Z] [INFO][jdqjjtmt] POST /api/billing/session -> 401 (7ms)
Context: {
  "requestId": "jdqjjtmtmhvi9mvv",
  "duration": 7,
  "status": 401
}
[2025-11-12T04:34:03.939Z] [INFO][zy6n5vwi] DELETE /api/dashboard/projects
Context: {
  "requestId": "zy6n5vwimhvi9mw3",
  "endpoint": "/api/dashboard/projects",
  "method": "DELETE"
}
[2025-11-12T04:34:03.940Z] [DEBUG][zy6n5vwi] [Middleware] Session ID from cookie
Context: {
  "requestId": "zy6n5vwimhvi9mw3",
  "present": false
}
05:34:03 [WARN] [router] No API Route handler exists for the method "DELETE" for the route "/api/dashboard/projects".
Found handlers: "GET"
[dev] [wrangler:info] POST /api/billing/session 401 Unauthorized (11ms)
[dev] [2025-11-12T04:34:03.940Z] [DEBUG][zy6n5vwi] [Middleware] Outgoing response
Context: {
  "requestId": "zy6n5vwimhvi9mw3",
  "status": 404,
  "statusText": "Not Found",
  "headers": "[empty object]"
}
[2025-11-12T04:34:03.940Z] [DEBUG][zy6n5vwi] [Middleware] Processing path
Context: {
  "requestId": "zy6n5vwimhvi9mw3",
  "path": "/api/dashboard/projects"
}
[2025-11-12T04:34:03.941Z] [INFO][zy6n5vwi] DELETE /api/dashboard/projects -> 404 (2ms)
Context: {
  "requestId": "zy6n5vwimhvi9mw3",
  "duration": 2,
  "status": 404
}
[2025-11-12T04:34:03.941Z] [INFO][66k3cjby] DELETE /api/dashboard/projects
Context: {
  "requestId": "66k3cjbymhvi9mw5",
  "endpoint": "/api/dashboard/projects",
  "method": "DELETE"
}
[2025-11-12T04:34:03.941Z] [DEBUG][66k3cjby] [Middleware] Session ID from cookie
Context: {
  "requestId": "66k3cjbymhvi9mw5",
  "present": false
}
[dev] [2025-11-12T04:34:03.941Z] [DEBUG][66k3cjby] [Middleware] Outgoing response
Context: {
  "requestId": "66k3cjbymhvi9mw5",
  "status": 404,
  "statusText": "Not Found",
  "headers": {
    "content-type": "text/html",
    "x-astro-reroute": "no",
    "x-astro-route-type": "page"
  }
}
[2025-11-12T04:34:03.941Z] [DEBUG][66k3cjby] [Middleware] Processing path
Context: {
  "requestId": "66k3cjbymhvi9mw5",
  "path": "/api/dashboard/projects"
}
[2025-11-12T04:34:03.941Z] [INFO][66k3cjby] DELETE /api/dashboard/projects -> 404
Context: {
  "requestId": "66k3cjbymhvi9mw5",
  "duration": 0,
  "status": 404
}
[dev] [2025-11-12T04:34:03.943Z] [INFO][xwnq3n10] POST /api/user/avatar
Context: {
  "requestId": "xwnq3n10mhvi9mw7",
  "endpoint": "/api/user/avatar",
  "method": "POST"
}
[2025-11-12T04:34:03.943Z] [DEBUG][xwnq3n10] [Middleware] Session ID from cookie
Context: {
  "requestId": "xwnq3n10mhvi9mw7",
  "present": true
}
[2025-11-12T04:34:03.944Z] [DEBUG][xwnq3n10] [Middleware] Session validation result
Context: {
  "requestId": "xwnq3n10mhvi9mw7",
  "sessionValid": true,
  "userValid": true
}
[dev] [wrangler:info] DELETE /api/dashboard/projects 404 Not Found (8ms)
[2025-11-12T04:34:03.945Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'd44cd9d1-b68d-41bd-9c69-87ac5bda927f',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/user/avatar',
    method: 'POST',
    action: 'avatar_upload'
  }
}
[dev] [2025-11-12T04:34:03.949Z] [INFO][U:d44cd9d1-b68d-41bd-9c69-87ac5bda927f] Security Event: USER_EVENT
Context: {
  "userId": "d44cd9d1-b68d-41bd-9c69-87ac5bda927f",
  "securityEventType": "USER_EVENT",
  "originalDetails": {
    "eventType": "avatar_updated",
    "ipAddress": "::1",
    "imageUrl": "/r2/avatar-d44cd9d1-b68d-41bd-9c69-87ac5bda927f-1762922043946.jpeg"
  },
  "logLevel": "info",
  "eventSnapshot": {
    "type": "USER_EVENT",
    "userId": "d44cd9d1-b68d-41bd-9c69-87ac5bda927f",
    "timestamp": 1762922043949,
    "details": {
      "eventType": "avatar_updated",
      "ipAddress": "::1",
      "imageUrl": "/r2/avatar-d44cd9d1-b68d-41bd-9c69-87ac5bda927f-1762922043946.jpeg"
    }
  }
}
[2025-11-12T04:34:03.950Z] [DEBUG][xwnq3n10] [Middleware] Outgoing response
Context: {
  "requestId": "xwnq3n10mhvi9mw7",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:03.950Z] [DEBUG][xwnq3n10] [Middleware] Processing path
Context: {
  "requestId": "xwnq3n10mhvi9mw7",
  "path": "/api/user/avatar"
}
[2025-11-12T04:34:03.950Z] [INFO][xwnq3n10] POST /api/user/avatar -> 200 (7ms)
Context: {
  "requestId": "xwnq3n10mhvi9mw7",
  "duration": 7,
  "status": 200
}
[dev] [wrangler:info] POST /api/user/avatar 200 OK (13ms)
[2025-11-12T04:34:03.951Z] [INFO][7nok5nyt] POST /api/test/seed-suite-v2
Context: {
  "requestId": "7nok5nytmhvi9mwf",
  "endpoint": "/api/test/seed-suite-v2",
  "method": "POST"
}
[2025-11-12T04:34:03.951Z] [DEBUG][7nok5nyt] [Middleware] Session ID from cookie
Context: {
  "requestId": "7nok5nytmhvi9mwf",
  "present": false
}
[dev] [2025-11-12T04:34:03.952Z] [INFO][ad26fah0] POST /api/projects
Context: {
  "requestId": "ad26fah0mhvi9mwg",
  "endpoint": "/api/projects",
  "method": "POST"
}
[2025-11-12T04:34:03.952Z] [DEBUG][ad26fah0] [Middleware] Session ID from cookie
Context: {
  "requestId": "ad26fah0mhvi9mwg",
  "present": false
}
[2025-11-12T04:34:03.952Z] [INFO][m3fioj4r] POST /api/billing/credits
Context: {
  "requestId": "m3fioj4rmhvi9mwg",
  "endpoint": "/api/billing/credits",
  "method": "POST"
}
[2025-11-12T04:34:03.952Z] [DEBUG][m3fioj4r] [Middleware] Session ID from cookie
Context: {
  "requestId": "m3fioj4rmhvi9mwg",
  "present": false
}
[dev] [2025-11-12T04:34:03.956Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: { endpoint: '/api/billing/credits', method: 'POST' }
}
[dev] [2025-11-12T04:34:03.956Z] [DEBUG][m3fioj4r] [Middleware] Outgoing response
Context: {
  "requestId": "m3fioj4rmhvi9mwg",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:03.956Z] [DEBUG][m3fioj4r] [Middleware] Processing path
Context: {
  "requestId": "m3fioj4rmhvi9mwg",
  "path": "/api/billing/credits"
}
[2025-11-12T04:34:03.956Z] [INFO][m3fioj4r] POST /api/billing/credits -> 401 (4ms)
Context: {
  "requestId": "m3fioj4rmhvi9mwg",
  "duration": 4,
  "status": 401
}
[2025-11-12T04:34:03.957Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/projects',
    method: 'POST',
    action: 'project_created'
  }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:03.956Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: {
      reason: 'unauthenticated_access',
      endpoint: '/api/billing/credits'
    }
  }
[dev] [2025-11-12T04:34:03.957Z] [DEBUG][ad26fah0] [Middleware] Outgoing response
Context: {
  "requestId": "ad26fah0mhvi9mwg",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:03.957Z] [DEBUG][ad26fah0] [Middleware] Processing path
Context: {
  "requestId": "ad26fah0mhvi9mwg",
  "path": "/api/projects"
}
[2025-11-12T04:34:03.957Z] [INFO][ad26fah0] POST /api/projects -> 401 (5ms)
Context: {
  "requestId": "ad26fah0mhvi9mwg",
  "duration": 5,
  "status": 401
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:03.957Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: { reason: 'unauthenticated_access', endpoint: '/api/projects' }
  }
[dev] [wrangler:info] POST /api/billing/credits 401 Unauthorized (15ms)
[dev] [wrangler:info] POST /api/projects 401 Unauthorized (17ms)
 âœ“ |integration| tests/integration/billing-api.test.ts > Billing-API-Integration > POST /api/billing/sync-callback > sollte verschiedene Webhook-Events verarbeiten 113ms
 âœ“ |integration| tests/integration/billing-api.test.ts > Billing-API-Integration > Security-Headers fÃ¼r alle Billing-Endpunkte > sollte Security-Headers fÃ¼r /api/billing/session setzen 19ms
 âœ“ |integration| tests/integration/billing-api.test.ts > Billing-API-Integration > Security-Headers fÃ¼r alle Billing-Endpunkte > sollte Security-Headers fÃ¼r /api/billing/credits setzen 19ms
 âœ“ |integration| tests/integration/projects-api.test.ts > Projects-API-Integration > Projekt-Filter und Suche > sollte Projekte nach Status filtern kÃ¶nnen 10ms
 âœ“ |integration| tests/integration/projects-api.test.ts > Projects-API-Integration > Projekt-Filter und Suche > sollte Projekte nach Suchbegriff filtern kÃ¶nnen 12ms
 âœ“ |integration| tests/integration/projects-api.test.ts > Projects-API-Integration > Projekt-Filter und Suche > sollte leeres Array fÃ¼r nicht passende Filter zurÃ¼ckgeben 17ms
 âœ“ |integration| tests/integration/projects-api.test.ts > Projects-API-Integration > Security-Headers fÃ¼r alle Projekt-Endpunkte > sollte Security-Headers fÃ¼r GET /api/projects setzen 17ms
 âœ“ |integration| tests/integration/projects-api.test.ts > Projects-API-Integration > Security-Headers fÃ¼r alle Projekt-Endpunkte > sollte Security-Headers fÃ¼r POST /api/projects setzen 24ms
 âœ“ |integration| tests/integration/user-avatar-api.test.ts > User-Avatar-API-Integration > POST /api/user/avatar > sollte 401 fÃ¼r nicht authentifizierte Anfragen zurÃ¼ckgeben 51ms
 âœ“ |integration| tests/integration/user-avatar-api.test.ts > User-Avatar-API-Integration > POST /api/user/avatar > sollte CSRF-Schutz korrekt handhaben 18ms
 âœ“ |integration| tests/integration/user-avatar-api.test.ts > User-Avatar-API-Integration > POST /api/user/avatar > sollte 405 fÃ¼r GET-Methode zurÃ¼ckgeben 9ms
 âœ“ |integration| tests/integration/user-avatar-api.test.ts > User-Avatar-API-Integration > POST /api/user/avatar > sollte Security-Headers setzen 15ms
 âœ“ |integration| tests/integration/dashboard-api.test.ts > Dashboard-API-Integration > Rate-Limiting fÃ¼r Dashboard-Endpunkte > sollte Rate-Limiting fÃ¼r Dashboard-Stats korrekt handhaben 71ms
 âœ“ |integration| tests/integration/dashboard-api.test.ts > Dashboard-API-Integration > Fehlerbehandlung > sollte strukturierte Fehler fÃ¼r alle Dashboard-Endpunkte zurÃ¼ckgeben 18ms
[dev] [2025-11-12T04:34:04.062Z] [INFO][1kprh6xb] POST /api/user/avatar
Context: {
  "requestId": "1kprh6xbmhvi9mzi",
  "endpoint": "/api/user/avatar",
  "method": "POST"
}
[dev] [2025-11-12T04:34:04.063Z] [DEBUG][1kprh6xb] [Middleware] Session ID from cookie
Context: {
  "requestId": "1kprh6xbmhvi9mzi",
  "present": true
}
[dev] [2025-11-12T04:34:04.063Z] [INFO][t3ms0v0v] DELETE /api/dashboard/notifications
Context: {
  "requestId": "t3ms0v0vmhvi9mzj",
  "endpoint": "/api/dashboard/notifications",
  "method": "DELETE"
}
[2025-11-12T04:34:04.063Z] [DEBUG][t3ms0v0v] [Middleware] Session ID from cookie
Context: {
  "requestId": "t3ms0v0vmhvi9mzj",
  "present": false
}
05:34:04 [WARN] [router] No API Route handler exists for the method "DELETE" for the route "/api/dashboard/notifications".
Found handlers: "GET"

[2025-11-12T04:34:04.063Z] [DEBUG][t3ms0v0v] [Middleware] Outgoing response
Context: {
  "requestId": "t3ms0v0vmhvi9mzj",
  "status": 404,
  "statusText": "Not Found",
  "headers": "[empty object]"
}
[2025-11-12T04:34:04.063Z] [DEBUG][t3ms0v0v] [Middleware] Processing path
Context: {
  "requestId": "t3ms0v0vmhvi9mzj",
  "path": "/api/dashboard/notifications"
}
[dev] [2025-11-12T04:34:04.063Z] [INFO][t3ms0v0v] DELETE /api/dashboard/notifications -> 404
Context: {
  "requestId": "t3ms0v0vmhvi9mzj",
  "duration": 0,
  "status": 404
}
[dev] [2025-11-12T04:34:04.064Z] [INFO][p8texp8i] DELETE /api/dashboard/notifications
Context: {
  "requestId": "p8texp8imhvi9mzk",
  "endpoint": "/api/dashboard/notifications",
  "method": "DELETE"
}
[2025-11-12T04:34:04.064Z] [DEBUG][p8texp8i] [Middleware] Session ID from cookie
Context: {
  "requestId": "p8texp8imhvi9mzk",
  "present": false
}
[2025-11-12T04:34:04.064Z] [DEBUG][p8texp8i] [Middleware] Outgoing response
Context: {
  "requestId": "p8texp8imhvi9mzk",
  "status": 404,
  "statusText": "Not Found",
  "headers": {
    "content-type": "text/html",
    "x-astro-reroute": "no",
    "x-astro-route-type": "page"
  }
}
[dev] [2025-11-12T04:34:04.064Z] [DEBUG][p8texp8i] [Middleware] Processing path
Context: {
  "requestId": "p8texp8imhvi9mzk",
  "path": "/api/dashboard/notifications"
}
[2025-11-12T04:34:04.064Z] [INFO][p8texp8i] DELETE /api/dashboard/notifications -> 404
Context: {
  "requestId": "p8texp8imhvi9mzk",
  "duration": 0,
  "status": 404
}
[dev] [2025-11-12T04:34:04.065Z] [DEBUG][1kprh6xb] [Middleware] Session validation result
Context: {
  "requestId": "1kprh6xbmhvi9mzi",
  "sessionValid": true,
  "userValid": true
}
[dev] [wrangler:info] DELETE /api/dashboard/notifications 404 Not Found (111ms)
[dev] [2025-11-12T04:34:04.067Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'd44cd9d1-b68d-41bd-9c69-87ac5bda927f',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/user/avatar',
    method: 'POST',
    action: 'avatar_upload'
  }
}
[dev] [2025-11-12T04:34:04.071Z] [INFO][U:d44cd9d1-b68d-41bd-9c69-87ac5bda927f] Security Event: USER_EVENT
Context: {
  "userId": "d44cd9d1-b68d-41bd-9c69-87ac5bda927f",
  "securityEventType": "USER_EVENT",
  "originalDetails": {
    "eventType": "avatar_updated",
    "ipAddress": "::1",
    "imageUrl": "/r2/avatar-d44cd9d1-b68d-41bd-9c69-87ac5bda927f-1762922044067.png"
  },
  "logLevel": "info",
  "eventSnapshot": {
    "type": "USER_EVENT",
    "userId": "d44cd9d1-b68d-41bd-9c69-87ac5bda927f",
    "timestamp": 1762922044071,
    "details": {
      "eventType": "avatar_updated",
      "ipAddress": "::1",
      "imageUrl": "/r2/avatar-d44cd9d1-b68d-41bd-9c69-87ac5bda927f-1762922044067.png"
    }
  }
}
[dev] [2025-11-12T04:34:04.071Z] [DEBUG][1kprh6xb] [Middleware] Outgoing response
Context: {
  "requestId": "1kprh6xbmhvi9mzi",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:04.071Z] [DEBUG][1kprh6xb] [Middleware] Processing path
Context: {
  "requestId": "1kprh6xbmhvi9mzi",
  "path": "/api/user/avatar"
}
[2025-11-12T04:34:04.071Z] [INFO][1kprh6xb] POST /api/user/avatar -> 200 (9ms)
Context: {
  "requestId": "1kprh6xbmhvi9mzi",
  "duration": 9,
  "status": 200
}
[dev] [wrangler:info] POST /api/user/avatar 200 OK (117ms)
[dev] [2025-11-12T04:34:04.177Z] [INFO][m9m3bhbh] POST /api/projects
Context: {
  "requestId": "m9m3bhbhmhvi9n2p",
  "endpoint": "/api/projects",
  "method": "POST"
}
[dev] [2025-11-12T04:34:04.177Z] [DEBUG][m9m3bhbh] [Middleware] Session ID from cookie
Context: {
  "requestId": "m9m3bhbhmhvi9n2p",
  "present": false
}
[2025-11-12T04:34:04.177Z] [INFO][wh1pzlzz] POST /api/billing/sync
Context: {
  "requestId": "wh1pzlzzmhvi9n2p",
  "endpoint": "/api/billing/sync",
  "method": "POST"
}
[2025-11-12T04:34:04.177Z] [DEBUG][wh1pzlzz] [Middleware] Session ID from cookie
Context: {
  "requestId": "wh1pzlzzmhvi9n2p",
  "present": false
}
[dev] 05:34:04 [WARN] [router] No API Route handler exists for the method "POST" for the route "/api/billing/sync".
Found handlers: "GET"

[2025-11-12T04:34:04.177Z] [DEBUG][wh1pzlzz] [Middleware] Outgoing response
Context: {
  "requestId": "wh1pzlzzmhvi9n2p",
  "status": 404,
  "statusText": "Not Found",
  "headers": "[empty object]"
}
[dev] [2025-11-12T04:34:04.178Z] [DEBUG][wh1pzlzz] [Middleware] Processing path
Context: {
  "requestId": "wh1pzlzzmhvi9n2p",
  "path": "/api/billing/sync"
}
[2025-11-12T04:34:04.178Z] [INFO][wh1pzlzz] POST /api/billing/sync -> 404 (1ms)
Context: {
  "requestId": "wh1pzlzzmhvi9n2p",
  "duration": 1,
  "status": 404
}
[2025-11-12T04:34:04.178Z] [INFO][xgg53cl4] POST /api/billing/sync
Context: {
  "requestId": "xgg53cl4mhvi9n2q",
  "endpoint": "/api/billing/sync",
  "method": "POST"
}
[2025-11-12T04:34:04.178Z] [DEBUG][xgg53cl4] [Middleware] Session ID from cookie
Context: {
  "requestId": "xgg53cl4mhvi9n2q",
  "present": false
}
[dev] [2025-11-12T04:34:04.178Z] [DEBUG][xgg53cl4] [Middleware] Outgoing response
Context: {
  "requestId": "xgg53cl4mhvi9n2q",
  "status": 404,
  "statusText": "Not Found",
  "headers": {
    "content-type": "text/html",
    "x-astro-reroute": "no",
    "x-astro-route-type": "page"
  }
}
[2025-11-12T04:34:04.178Z] [DEBUG][xgg53cl4] [Middleware] Processing path
Context: {
  "requestId": "xgg53cl4mhvi9n2q",
  "path": "/api/billing/sync"
}
[dev] [2025-11-12T04:34:04.178Z] [INFO][xgg53cl4] POST /api/billing/sync -> 404
Context: {
  "requestId": "xgg53cl4mhvi9n2q",
  "duration": 0,
  "status": 404
}
[2025-11-12T04:34:04.178Z] [INFO][hb99iqmf] POST /api/projects
Context: {
  "requestId": "hb99iqmfmhvi9n2q",
  "endpoint": "/api/projects",
  "method": "POST"
}
[2025-11-12T04:34:04.178Z] [DEBUG][hb99iqmf] [Middleware] Session ID from cookie
Context: {
  "requestId": "hb99iqmfmhvi9n2q",
  "present": false
}
[2025-11-12T04:34:04.179Z] [INFO][c8y9wj6j] POST /api/projects
Context: {
  "requestId": "c8y9wj6jmhvi9n2r",
  "endpoint": "/api/projects",
  "method": "POST"
}
[dev] [2025-11-12T04:34:04.179Z] [DEBUG][c8y9wj6j] [Middleware] Session ID from cookie
Context: {
  "requestId": "c8y9wj6jmhvi9n2r",
  "present": false
}
[dev] [2025-11-12T04:34:04.179Z] [INFO][0j0l8fex] POST /api/projects
Context: {
  "requestId": "0j0l8fexmhvi9n2r",
  "endpoint": "/api/projects",
  "method": "POST"
}
[2025-11-12T04:34:04.179Z] [DEBUG][0j0l8fex] [Middleware] Session ID from cookie
Context: {
  "requestId": "0j0l8fexmhvi9n2r",
  "present": false
}
[2025-11-12T04:34:04.179Z] [INFO][9rrcl9un] POST /api/projects
Context: {
  "requestId": "9rrcl9unmhvi9n2r",
  "endpoint": "/api/projects",
  "method": "POST"
}
[2025-11-12T04:34:04.179Z] [DEBUG][9rrcl9un] [Middleware] Session ID from cookie
Context: {
  "requestId": "9rrcl9unmhvi9n2r",
  "present": false
}
[dev] [2025-11-12T04:34:04.179Z] [INFO][l094ehq8] POST /api/projects
Context: {
  "requestId": "l094ehq8mhvi9n2r",
  "endpoint": "/api/projects",
  "method": "POST"
}
[2025-11-12T04:34:04.179Z] [DEBUG][l094ehq8] [Middleware] Session ID from cookie
Context: {
  "requestId": "l094ehq8mhvi9n2r",
  "present": false
}
[2025-11-12T04:34:04.179Z] [INFO][g8tad6uu] POST /api/projects
Context: {
  "requestId": "g8tad6uumhvi9n2r",
  "endpoint": "/api/projects",
  "method": "POST"
}
[2025-11-12T04:34:04.180Z] [DEBUG][g8tad6uu] [Middleware] Session ID from cookie
Context: {
  "requestId": "g8tad6uumhvi9n2r",
  "present": false
}
[dev] [2025-11-12T04:34:04.180Z] [INFO][b4hnxw36] POST /api/projects
Context: {
  "requestId": "b4hnxw36mhvi9n2s",
  "endpoint": "/api/projects",
  "method": "POST"
}
[dev] [2025-11-12T04:34:04.180Z] [DEBUG][b4hnxw36] [Middleware] Session ID from cookie
Context: {
  "requestId": "b4hnxw36mhvi9n2s",
  "present": false
}
[2025-11-12T04:34:04.180Z] [INFO][io0w9f6w] POST /api/projects
Context: {
  "requestId": "io0w9f6wmhvi9n2s",
  "endpoint": "/api/projects",
  "method": "POST"
}
[2025-11-12T04:34:04.180Z] [DEBUG][io0w9f6w] [Middleware] Session ID from cookie
Context: {
  "requestId": "io0w9f6wmhvi9n2s",
  "present": false
}
[dev] [2025-11-12T04:34:04.180Z] [INFO][w03khjq7] POST /api/projects
Context: {
  "requestId": "w03khjq7mhvi9n2s",
  "endpoint": "/api/projects",
  "method": "POST"
}
[dev] [2025-11-12T04:34:04.180Z] [DEBUG][w03khjq7] [Middleware] Session ID from cookie
Context: {
  "requestId": "w03khjq7mhvi9n2s",
  "present": false
}
[2025-11-12T04:34:04.181Z] [INFO][htx6qhdr] POST /api/projects
Context: {
  "requestId": "htx6qhdrmhvi9n2t",
  "endpoint": "/api/projects",
  "method": "POST"
}
[2025-11-12T04:34:04.181Z] [DEBUG][htx6qhdr] [Middleware] Session ID from cookie
Context: {
  "requestId": "htx6qhdrmhvi9n2t",
  "present": false
}
[2025-11-12T04:34:04.181Z] [INFO][cb9wi82c] POST /api/projects
Context: {
  "requestId": "cb9wi82cmhvi9n2t",
  "endpoint": "/api/projects",
  "method": "POST"
}
[2025-11-12T04:34:04.181Z] [DEBUG][cb9wi82c] [Middleware] Session ID from cookie
Context: {
  "requestId": "cb9wi82cmhvi9n2t",
  "present": false
}
[2025-11-12T04:34:04.182Z] [INFO][s5dp29ry] POST /api/projects
Context: {
  "requestId": "s5dp29rymhvi9n2u",
  "endpoint": "/api/projects",
  "method": "POST"
}
[dev] [2025-11-12T04:34:04.182Z] [DEBUG][s5dp29ry] [Middleware] Session ID from cookie
Context: {
  "requestId": "s5dp29rymhvi9n2u",
  "present": false
}
[dev] [wrangler:info] POST /api/billing/sync 404 Not Found (224ms)
 âœ“ |integration| tests/integration/billing-api.test.ts > Billing-API-Integration > Security-Headers fÃ¼r alle Billing-Endpunkte > sollte Security-Headers fÃ¼r /api/billing/sync setzen 227ms
[dev] [2025-11-12T04:34:04.194Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/projects',
    method: 'POST',
    action: 'project_created'
  }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:04.194Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: { reason: 'unauthenticated_access', endpoint: '/api/projects' }
  }
[dev] [2025-11-12T04:34:04.194Z] [DEBUG][s5dp29ry] [Middleware] Outgoing response
Context: {
  "requestId": "s5dp29rymhvi9n2u",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:04.195Z] [DEBUG][s5dp29ry] [Middleware] Processing path
Context: {
  "requestId": "s5dp29rymhvi9n2u",
  "path": "/api/projects"
}
[2025-11-12T04:34:04.195Z] [INFO][s5dp29ry] POST /api/projects -> 401 (13ms)
Context: {
  "requestId": "s5dp29rymhvi9n2u",
  "duration": 13,
  "status": 401
}
[2025-11-12T04:34:04.195Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/projects',
    method: 'POST',
    action: 'project_created'
  }
}
[dev] [2025-11-12T04:34:04.195Z] [DEBUG][m9m3bhbh] [Middleware] Outgoing response
Context: {
  "requestId": "m9m3bhbhmhvi9n2p",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:04.195Z] [DEBUG][m9m3bhbh] [Middleware] Processing path
Context: {
  "requestId": "m9m3bhbhmhvi9n2p",
  "path": "/api/projects"
}
[2025-11-12T04:34:04.195Z] [INFO][m9m3bhbh] POST /api/projects -> 401 (18ms)
Context: {
  "requestId": "m9m3bhbhmhvi9n2p",
  "duration": 18,
  "status": 401
}
[2025-11-12T04:34:04.195Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/projects',
    method: 'POST',
    action: 'project_created'
  }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:04.195Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: { reason: 'unauthenticated_access', endpoint: '/api/projects' }
  }
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:04.195Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: { reason: 'unauthenticated_access', endpoint: '/api/projects' }
  }
[dev] [2025-11-12T04:34:04.195Z] [DEBUG][hb99iqmf] [Middleware] Outgoing response
Context: {
  "requestId": "hb99iqmfmhvi9n2q",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:04.195Z] [DEBUG][hb99iqmf] [Middleware] Processing path
Context: {
  "requestId": "hb99iqmfmhvi9n2q",
  "path": "/api/projects"
}
[2025-11-12T04:34:04.195Z] [INFO][hb99iqmf] POST /api/projects -> 401 (17ms)
Context: {
  "requestId": "hb99iqmfmhvi9n2q",
  "duration": 17,
  "status": 401
}
[2025-11-12T04:34:04.195Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/projects',
    method: 'POST',
    action: 'project_created'
  }
}
[dev] [2025-11-12T04:34:04.196Z] [DEBUG][c8y9wj6j] [Middleware] Outgoing response
Context: {
  "requestId": "c8y9wj6jmhvi9n2r",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:04.196Z] [DEBUG][c8y9wj6j] [Middleware] Processing path
Context: {
  "requestId": "c8y9wj6jmhvi9n2r",
  "path": "/api/projects"
}
[2025-11-12T04:34:04.196Z] [INFO][c8y9wj6j] POST /api/projects -> 401 (17ms)
Context: {
  "requestId": "c8y9wj6jmhvi9n2r",
  "duration": 17,
  "status": 401
}
[2025-11-12T04:34:04.196Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/projects',
    method: 'POST',
    action: 'project_created'
  }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:04.195Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: { reason: 'unauthenticated_access', endpoint: '/api/projects' }
  }
[dev] [2025-11-12T04:34:04.196Z] [DEBUG][0j0l8fex] [Middleware] Outgoing response
Context: {
  "requestId": "0j0l8fexmhvi9n2r",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:04.196Z] [DEBUG][0j0l8fex] [Middleware] Processing path
Context: {
  "requestId": "0j0l8fexmhvi9n2r",
  "path": "/api/projects"
}
[2025-11-12T04:34:04.196Z] [INFO][0j0l8fex] POST /api/projects -> 401 (17ms)
Context: {
  "requestId": "0j0l8fexmhvi9n2r",
  "duration": 17,
  "status": 401
}
[2025-11-12T04:34:04.196Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/projects',
    method: 'POST',
    action: 'project_created'
  }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:04.196Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: { reason: 'unauthenticated_access', endpoint: '/api/projects' }
  }


[31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:04.196Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: { reason: 'unauthenticated_access', endpoint: '/api/projects' }
  }
[dev] [2025-11-12T04:34:04.196Z] [DEBUG][9rrcl9un] [Middleware] Outgoing response
Context: {
  "requestId": "9rrcl9unmhvi9n2r",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:04.196Z] [DEBUG][9rrcl9un] [Middleware] Processing path
Context: {
  "requestId": "9rrcl9unmhvi9n2r",
  "path": "/api/projects"
}
[2025-11-12T04:34:04.196Z] [INFO][9rrcl9un] POST /api/projects -> 401 (17ms)
Context: {
  "requestId": "9rrcl9unmhvi9n2r",
  "duration": 17,
  "status": 401
}
[2025-11-12T04:34:04.196Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/projects',
    method: 'POST',
    action: 'project_created'
  }
}
[dev] [2025-11-12T04:34:04.197Z] [DEBUG][l094ehq8] [Middleware] Outgoing response
Context: {
  "requestId": "l094ehq8mhvi9n2r",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:04.197Z] [DEBUG][l094ehq8] [Middleware] Processing path
Context: {
  "requestId": "l094ehq8mhvi9n2r",
  "path": "/api/projects"
}
[2025-11-12T04:34:04.197Z] [INFO][l094ehq8] POST /api/projects -> 401 (18ms)
Context: {
  "requestId": "l094ehq8mhvi9n2r",
  "duration": 18,
  "status": 401
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:04.196Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: { reason: 'unauthenticated_access', endpoint: '/api/projects' }
  }
[dev] [2025-11-12T04:34:04.197Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/projects',
    method: 'POST',
    action: 'project_created'
  }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:04.198Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: { reason: 'unauthenticated_access', endpoint: '/api/projects' }
  }
[dev] [2025-11-12T04:34:04.198Z] [DEBUG][g8tad6uu] [Middleware] Outgoing response
Context: {
  "requestId": "g8tad6uumhvi9n2r",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:04.198Z] [DEBUG][g8tad6uu] [Middleware] Processing path
Context: {
  "requestId": "g8tad6uumhvi9n2r",
  "path": "/api/projects"
}
[2025-11-12T04:34:04.198Z] [INFO][g8tad6uu] POST /api/projects -> 401 (19ms)
Context: {
  "requestId": "g8tad6uumhvi9n2r",
  "duration": 19,
  "status": 401
}
[2025-11-12T04:34:04.198Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/projects',
    method: 'POST',
    action: 'project_created'
  }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:04.198Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: { reason: 'unauthenticated_access', endpoint: '/api/projects' }
  }
[dev] [2025-11-12T04:34:04.198Z] [DEBUG][b4hnxw36] [Middleware] Outgoing response
Context: {
  "requestId": "b4hnxw36mhvi9n2s",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:04.198Z] [DEBUG][b4hnxw36] [Middleware] Processing path
Context: {
  "requestId": "b4hnxw36mhvi9n2s",
  "path": "/api/projects"
}
[2025-11-12T04:34:04.198Z] [INFO][b4hnxw36] POST /api/projects -> 401 (18ms)
Context: {
  "requestId": "b4hnxw36mhvi9n2s",
  "duration": 18,
  "status": 401
}
[2025-11-12T04:34:04.198Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/projects',
    method: 'POST',
    action: 'project_created'
  }
}
[2025-11-12T04:34:04.198Z] [DEBUG][io0w9f6w] [Middleware] Outgoing response
Context: {
  "requestId": "io0w9f6wmhvi9n2s",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:04.199Z] [DEBUG][io0w9f6w] [Middleware] Processing path
Context: {
  "requestId": "io0w9f6wmhvi9n2s",
  "path": "/api/projects"
}
[2025-11-12T04:34:04.199Z] [INFO][io0w9f6w] POST /api/projects -> 401 (19ms)
Context: {
  "requestId": "io0w9f6wmhvi9n2s",
  "duration": 19,
  "status": 401
}
[2025-11-12T04:34:04.199Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/projects',
    method: 'POST',
    action: 'project_created'
  }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:04.198Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: { reason: 'unauthenticated_access', endpoint: '/api/projects' }
  }
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:04.199Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: { reason: 'unauthenticated_access', endpoint: '/api/projects' }
  }
[dev] [2025-11-12T04:34:04.199Z] [DEBUG][w03khjq7] [Middleware] Outgoing response
Context: {
  "requestId": "w03khjq7mhvi9n2s",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:04.199Z] [DEBUG][w03khjq7] [Middleware] Processing path
Context: {
  "requestId": "w03khjq7mhvi9n2s",
  "path": "/api/projects"
}
[2025-11-12T04:34:04.199Z] [INFO][w03khjq7] POST /api/projects -> 401 (19ms)
Context: {
  "requestId": "w03khjq7mhvi9n2s",
  "duration": 19,
  "status": 401
}
[2025-11-12T04:34:04.199Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/projects',
    method: 'POST',
    action: 'project_created'
  }
}
[dev] [2025-11-12T04:34:04.199Z] [DEBUG][htx6qhdr] [Middleware] Outgoing response
Context: {
  "requestId": "htx6qhdrmhvi9n2t",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:04.199Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: { reason: 'unauthenticated_access', endpoint: '/api/projects' }
  }
[dev] [2025-11-12T04:34:04.199Z] [DEBUG][htx6qhdr] [Middleware] Processing path
Context: {
  "requestId": "htx6qhdrmhvi9n2t",
  "path": "/api/projects"
}
[dev] [2025-11-12T04:34:04.202Z] [INFO][htx6qhdr] POST /api/projects -> 401 (21ms)
Context: {
  "requestId": "htx6qhdrmhvi9n2t",
  "duration": 21,
  "status": 401
}
[2025-11-12T04:34:04.202Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/projects',
    method: 'POST',
    action: 'project_created'
  }
}
[2025-11-12T04:34:04.202Z] [DEBUG][cb9wi82c] [Middleware] Outgoing response
Context: {
  "requestId": "cb9wi82cmhvi9n2t",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:04.202Z] [DEBUG][cb9wi82c] [Middleware] Processing path
Context: {
  "requestId": "cb9wi82cmhvi9n2t",
  "path": "/api/projects"
}
[2025-11-12T04:34:04.202Z] [INFO][cb9wi82c] POST /api/projects -> 401 (21ms)
Context: {
  "requestId": "cb9wi82cmhvi9n2t",
  "duration": 21,
  "status": 401
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:04.202Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: { reason: 'unauthenticated_access', endpoint: '/api/projects' }
  }
[dev] [wrangler:info] POST /api/projects 401 Unauthorized (249ms)
[dev] [wrangler:info] POST /api/projects 401 Unauthorized (253ms)
[dev] [wrangler:info] POST /api/projects 401 Unauthorized (253ms)
[wrangler:info] POST /api/projects 401 Unauthorized (252ms)
[wrangler:info] POST /api/projects 401 Unauthorized (254ms)
[wrangler:info] POST /api/projects 401 Unauthorized (253ms)
[wrangler:info] POST /api/projects 401 Unauthorized (253ms)
[wrangler:info] POST /api/projects 401 Unauthorized (252ms)
[wrangler:info] POST /api/projects 401 Unauthorized (252ms)
[dev] [wrangler:info] POST /api/projects 401 Unauthorized (252ms)
[wrangler:info] POST /api/projects 401 Unauthorized (252ms)
[wrangler:info] POST /api/projects 401 Unauthorized (249ms)
[wrangler:info] POST /api/projects 401 Unauthorized (252ms)
[dev] [2025-11-12T04:34:04.318Z] [INFO][a0wdb0l5] POST /api/billing/link-pending
Context: {
  "requestId": "a0wdb0l5mhvi9n6m",
  "endpoint": "/api/billing/link-pending",
  "method": "POST"
}
[dev] [2025-11-12T04:34:04.318Z] [DEBUG][a0wdb0l5] [Middleware] Session ID from cookie
Context: {
  "requestId": "a0wdb0l5mhvi9n6m",
  "present": false
}
05:34:04 [WARN] [router] No API Route handler exists for the method "POST" for the route "/api/billing/link-pending".
Found handlers: "GET"
[dev] [2025-11-12T04:34:04.318Z] [DEBUG][a0wdb0l5] [Middleware] Outgoing response
Context: {
  "requestId": "a0wdb0l5mhvi9n6m",
  "status": 404,
  "statusText": "Not Found",
  "headers": "[empty object]"
}
[2025-11-12T04:34:04.318Z] [DEBUG][a0wdb0l5] [Middleware] Processing path
Context: {
  "requestId": "a0wdb0l5mhvi9n6m",
  "path": "/api/billing/link-pending"
}
[2025-11-12T04:34:04.318Z] [INFO][a0wdb0l5] POST /api/billing/link-pending -> 404
Context: {
  "requestId": "a0wdb0l5mhvi9n6m",
  "duration": 0,
  "status": 404
}
[dev] [2025-11-12T04:34:04.318Z] [INFO][md3y2bhr] POST /api/billing/link-pending
Context: {
  "requestId": "md3y2bhrmhvi9n6m",
  "endpoint": "/api/billing/link-pending",
  "method": "POST"
}
[2025-11-12T04:34:04.319Z] [DEBUG][md3y2bhr] [Middleware] Session ID from cookie
Context: {
  "requestId": "md3y2bhrmhvi9n6m",
  "present": false
}
[dev] [2025-11-12T04:34:04.319Z] [DEBUG][md3y2bhr] [Middleware] Outgoing response
Context: {
  "requestId": "md3y2bhrmhvi9n6m",
  "status": 404,
  "statusText": "Not Found",
  "headers": {
    "content-type": "text/html",
    "x-astro-reroute": "no",
    "x-astro-route-type": "page"
  }
}
[2025-11-12T04:34:04.319Z] [DEBUG][md3y2bhr] [Middleware] Processing path
Context: {
  "requestId": "md3y2bhrmhvi9n6m",
  "path": "/api/billing/link-pending"
}
[dev] [2025-11-12T04:34:04.319Z] [INFO][md3y2bhr] POST /api/billing/link-pending -> 404 (1ms)
Context: {
  "requestId": "md3y2bhrmhvi9n6m",
  "duration": 1,
  "status": 404
}
[2025-11-12T04:34:04.319Z] [INFO][do8z2v9g] POST /api/projects
Context: {
  "requestId": "do8z2v9gmhvi9n6n",
  "endpoint": "/api/projects",
  "method": "POST"
}
[2025-11-12T04:34:04.319Z] [DEBUG][do8z2v9g] [Middleware] Session ID from cookie
Context: {
  "requestId": "do8z2v9gmhvi9n6n",
  "present": false
}
[dev] [2025-11-12T04:34:04.319Z] [INFO][ey59xud6] POST /api/projects
Context: {
  "requestId": "ey59xud6mhvi9n6n",
  "endpoint": "/api/projects",
  "method": "POST"
}
[dev] [2025-11-12T04:34:04.320Z] [DEBUG][ey59xud6] [Middleware] Session ID from cookie
Context: {
  "requestId": "ey59xud6mhvi9n6n",
  "present": false
}
[dev] [2025-11-12T04:34:04.320Z] [INFO][7vh6tbg8] GET /api/admin/backup/jobs
Context: {
  "requestId": "7vh6tbg8mhvi9n6o",
  "endpoint": "/api/admin/backup/jobs",
  "method": "GET"
}
[dev] [2025-11-12T04:34:04.321Z] [DEBUG][7vh6tbg8] [Middleware] Session ID from cookie
Context: {
  "requestId": "7vh6tbg8mhvi9n6o",
  "present": false
}
[2025-11-12T04:34:04.321Z] [INFO][iwbqtnte] DELETE /api/dashboard/quick-actions
Context: {
  "requestId": "iwbqtntemhvi9n6p",
  "endpoint": "/api/dashboard/quick-actions",
  "method": "DELETE"
}
[2025-11-12T04:34:04.321Z] [DEBUG][iwbqtnte] [Middleware] Session ID from cookie
Context: {
  "requestId": "iwbqtntemhvi9n6p",
  "present": false
}
05:34:04 [WARN] [router] No API Route handler exists for the method "DELETE" for the route "/api/dashboard/quick-actions".
Found handlers: "GET"

[2025-11-12T04:34:04.321Z] [DEBUG][iwbqtnte] [Middleware] Outgoing response
Context: {
  "requestId": "iwbqtntemhvi9n6p",
  "status": 404,
  "statusText": "Not Found",
  "headers": "[empty object]"
}
[2025-11-12T04:34:04.321Z] [DEBUG][iwbqtnte] [Middleware] Processing path
Context: {
  "requestId": "iwbqtntemhvi9n6p",
  "path": "/api/dashboard/quick-actions"
}
[2025-11-12T04:34:04.321Z] [INFO][iwbqtnte] DELETE /api/dashboard/quick-actions -> 404
Context: {
  "requestId": "iwbqtntemhvi9n6p",
  "duration": 0,
  "status": 404
}
[2025-11-12T04:34:04.321Z] [INFO][eag1qud7] DELETE /api/dashboard/quick-actions
Context: {
  "requestId": "eag1qud7mhvi9n6p",
  "endpoint": "/api/dashboard/quick-actions",
  "method": "DELETE"
}
[2025-11-12T04:34:04.321Z] [DEBUG][eag1qud7] [Middleware] Session ID from cookie
Context: {
  "requestId": "eag1qud7mhvi9n6p",
  "present": false
}
[2025-11-12T04:34:04.322Z] [DEBUG][eag1qud7] [Middleware] Outgoing response
Context: {
  "requestId": "eag1qud7mhvi9n6p",
  "status": 404,
  "statusText": "Not Found",
  "headers": {
    "content-type": "text/html",
    "x-astro-reroute": "no",
    "x-astro-route-type": "page"
  }
}
[2025-11-12T04:34:04.322Z] [DEBUG][eag1qud7] [Middleware] Processing path
Context: {
  "requestId": "eag1qud7mhvi9n6p",
  "path": "/api/dashboard/quick-actions"
}
[2025-11-12T04:34:04.322Z] [INFO][eag1qud7] DELETE /api/dashboard/quick-actions -> 404 (1ms)
Context: {
  "requestId": "eag1qud7mhvi9n6p",
  "duration": 1,
  "status": 404
}
[dev] [2025-11-12T04:34:04.322Z] [INFO][aepngl58] POST /api/user/avatar
Context: {
  "requestId": "aepngl58mhvi9n6q",
  "endpoint": "/api/user/avatar",
  "method": "POST"
}
[dev] [2025-11-12T04:34:04.322Z] [DEBUG][aepngl58] [Middleware] Session ID from cookie
Context: {
  "requestId": "aepngl58mhvi9n6q",
  "present": true
}
[dev] [wrangler:info] POST /api/billing/link-pending 404 Not Found (135ms)
[dev] [wrangler:info] DELETE /api/dashboard/quick-actions 404 Not Found (255ms)
[dev] [2025-11-12T04:34:04.326Z] [DEBUG][aepngl58] [Middleware] Session validation result
Context: {
  "requestId": "aepngl58mhvi9n6q",
  "sessionValid": true,
  "userValid": true
}
 âœ“ |integration| tests/integration/billing-api.test.ts > Billing-API-Integration > Security-Headers fÃ¼r alle Billing-Endpunkte > sollte Security-Headers fÃ¼r /api/billing/link-pending setzen 139ms
[dev] [2025-11-12T04:34:04.327Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/admin/backup/jobs',
    method: 'GET',
    action: 'admin_backup_jobs'
  }
}
 âœ“ |integration| tests/integration/dashboard-api.test.ts > Dashboard-API-Integration > Fehlerbehandlung > sollte 405 fÃ¼r nicht unterstÃ¼tzte HTTP-Methoden zurÃ¼ckgeben 439ms
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:04.327Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: {
      reason: 'unauthenticated_access',
      endpoint: '/api/admin/backup/jobs'
    }
  }
[dev] [2025-11-12T04:34:04.327Z] [DEBUG][7vh6tbg8] [Middleware] Outgoing response
Context: {
  "requestId": "7vh6tbg8mhvi9n6o",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:04.327Z] [DEBUG][7vh6tbg8] [Middleware] Processing path
Context: {
  "requestId": "7vh6tbg8mhvi9n6o",
  "path": "/api/admin/backup/jobs"
}
[2025-11-12T04:34:04.327Z] [INFO][7vh6tbg8] GET /api/admin/backup/jobs -> 401 (7ms)
Context: {
  "requestId": "7vh6tbg8mhvi9n6o",
  "duration": 7,
  "status": 401
}
[2025-11-12T04:34:04.328Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/projects',
    method: 'POST',
    action: 'project_created'
  }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:04.328Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: { reason: 'unauthenticated_access', endpoint: '/api/projects' }
  }
[dev] [2025-11-12T04:34:04.328Z] [DEBUG][do8z2v9g] [Middleware] Outgoing response
Context: {
  "requestId": "do8z2v9gmhvi9n6n",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:04.328Z] [DEBUG][do8z2v9g] [Middleware] Processing path
Context: {
  "requestId": "do8z2v9gmhvi9n6n",
  "path": "/api/projects"
}
[2025-11-12T04:34:04.328Z] [INFO][do8z2v9g] POST /api/projects -> 401 (9ms)
Context: {
  "requestId": "do8z2v9gmhvi9n6n",
  "duration": 9,
  "status": 401
}
[2025-11-12T04:34:04.328Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/projects',
    method: 'POST',
    action: 'project_created'
  }
}
[dev] [2025-11-12T04:34:04.328Z] [DEBUG][ey59xud6] [Middleware] Outgoing response
Context: {
  "requestId": "ey59xud6mhvi9n6n",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:04.328Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: { reason: 'unauthenticated_access', endpoint: '/api/projects' }
  }
 âœ“ |integration| tests/integration/projects-api.test.ts > Projects-API-Integration > Rate-Limiting fÃ¼r Projekt-Endpunkte > sollte Rate-Limiting fÃ¼r Projekt-Erstellung korrekt handhaben 369ms
[dev] [wrangler:info] GET /api/admin/backup/jobs 401 Unauthorized (300ms)
[dev] [2025-11-12T04:34:04.328Z] [DEBUG][ey59xud6] [Middleware] Processing path
Context: {
  "requestId": "ey59xud6mhvi9n6n",
  "path": "/api/projects"
}
[2025-11-12T04:34:04.328Z] [INFO][ey59xud6] POST /api/projects -> 401 (9ms)
Context: {
  "requestId": "ey59xud6mhvi9n6n",
  "duration": 9,
  "status": 401
}
[2025-11-12T04:34:04.333Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'd44cd9d1-b68d-41bd-9c69-87ac5bda927f',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/user/avatar',
    method: 'POST',
    action: 'avatar_upload'
  }
}
[dev] [wrangler:info] POST /api/projects 401 Unauthorized (358ms)
[dev] [wrangler:info] POST /api/projects 401 Unauthorized (358ms)
[2025-11-12T04:34:04.335Z] [INFO][U:d44cd9d1-b68d-41bd-9c69-87ac5bda927f] Security Event: USER_EVENT
Context: {
  "userId": "d44cd9d1-b68d-41bd-9c69-87ac5bda927f",
  "securityEventType": "USER_EVENT",
  "originalDetails": {
    "eventType": "avatar_updated",
    "ipAddress": "::1",
    "imageUrl": "/r2/avatar-d44cd9d1-b68d-41bd-9c69-87ac5bda927f-1762922044333.webp"
  },
  "logLevel": "info",
  "eventSnapshot": {
    "type": "USER_EVENT",
    "userId": "d44cd9d1-b68d-41bd-9c69-87ac5bda927f",
    "timestamp": 1762922044335,
    "details": {
      "eventType": "avatar_updated",
      "ipAddress": "::1",
      "imageUrl": "/r2/avatar-d44cd9d1-b68d-41bd-9c69-87ac5bda927f-1762922044333.webp"
    }
  }
}
[2025-11-12T04:34:04.335Z] [DEBUG][aepngl58] [Middleware] Outgoing response
Context: {
  "requestId": "aepngl58mhvi9n6q",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:04.335Z] [DEBUG][aepngl58] [Middleware] Processing path
Context: {
  "requestId": "aepngl58mhvi9n6q",
  "path": "/api/user/avatar"
}
[2025-11-12T04:34:04.336Z] [INFO][aepngl58] POST /api/user/avatar -> 200 (14ms)
Context: {
  "requestId": "aepngl58mhvi9n6q",
  "duration": 14,
  "status": 200
}
 âœ“ |integration| tests/integration/user-avatar-api.test.ts > User-Avatar-API-Integration > POST /api/user/avatar > sollte verschiedene gÃ¼ltige Bildformate akzeptieren 426ms
[dev] [wrangler:info] POST /api/user/avatar 200 OK (264ms)
 âœ“ |integration| tests/integration/api/admin-backup.test.ts > Admin Backup API â€” unauthenticated and CSRF smokes > GET /api/admin/backup/jobs â†’ 401 unauthenticated 342ms
[dev] [2025-11-12T04:34:04.341Z] [INFO][yt0pxz4b] GET /api/dashboard/activity
Context: {
  "requestId": "yt0pxz4bmhvi9n79",
  "endpoint": "/api/dashboard/activity",
  "method": "GET"
}
[2025-11-12T04:34:04.341Z] [DEBUG][yt0pxz4b] [Middleware] Session ID from cookie
Context: {
  "requestId": "yt0pxz4bmhvi9n79",
  "present": false
}
[2025-11-12T04:34:04.341Z] [INFO][h58ds36x] POST /api/billing/sync-callback
Context: {
  "requestId": "h58ds36xmhvi9n79",
  "endpoint": "/api/billing/sync-callback",
  "method": "POST"
}
[2025-11-12T04:34:04.341Z] [DEBUG][h58ds36x] [Middleware] Session ID from cookie
Context: {
  "requestId": "h58ds36xmhvi9n79",
  "present": false
}
05:34:04 [WARN] [router] No API Route handler exists for the method "POST" for the route "/api/billing/sync-callback".
Found handlers: "GET"

[2025-11-12T04:34:04.342Z] [DEBUG][h58ds36x] [Middleware] Outgoing response
Context: {
  "requestId": "h58ds36xmhvi9n79",
  "status": 404,
  "statusText": "Not Found",
  "headers": "[empty object]"
}
[2025-11-12T04:34:04.342Z] [DEBUG][h58ds36x] [Middleware] Processing path
Context: {
  "requestId": "h58ds36xmhvi9n79",
  "path": "/api/billing/sync-callback"
}
[2025-11-12T04:34:04.342Z] [INFO][h58ds36x] POST /api/billing/sync-callback -> 404 (1ms)
Context: {
  "requestId": "h58ds36xmhvi9n79",
  "duration": 1,
  "status": 404
}
[dev] [2025-11-12T04:34:04.342Z] [INFO][0dptreh4] POST /api/billing/sync-callback
Context: {
  "requestId": "0dptreh4mhvi9n7a",
  "endpoint": "/api/billing/sync-callback",
  "method": "POST"
}
[dev] [2025-11-12T04:34:04.343Z] [DEBUG][0dptreh4] [Middleware] Session ID from cookie
Context: {
  "requestId": "0dptreh4mhvi9n7a",
  "present": false
}
[dev] [2025-11-12T04:34:04.343Z] [DEBUG][0dptreh4] [Middleware] Outgoing response
Context: {
  "requestId": "0dptreh4mhvi9n7a",
  "status": 404,
  "statusText": "Not Found",
  "headers": {
    "content-type": "text/html",
    "x-astro-reroute": "no",
    "x-astro-route-type": "page"
  }
}
[2025-11-12T04:34:04.343Z] [DEBUG][0dptreh4] [Middleware] Processing path
Context: {
  "requestId": "0dptreh4mhvi9n7a",
  "path": "/api/billing/sync-callback"
}
[2025-11-12T04:34:04.344Z] [INFO][0dptreh4] POST /api/billing/sync-callback -> 404 (2ms)
Context: {
  "requestId": "0dptreh4mhvi9n7a",
  "duration": 2,
  "status": 404
}
[dev] [2025-11-12T04:34:04.344Z] [INFO][3gjpbynu] GET /api/dashboard/projects
Context: {
  "requestId": "3gjpbynumhvi9n7c",
  "endpoint": "/api/dashboard/projects",
  "method": "GET"
}
[dev] [2025-11-12T04:34:04.344Z] [DEBUG][3gjpbynu] [Middleware] Session ID from cookie
Context: {
  "requestId": "3gjpbynumhvi9n7c",
  "present": false
}
[dev] [2025-11-12T04:34:04.348Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/dashboard/projects',
    method: 'GET',
    action: 'projects_accessed'
  }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:04.348Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: {
      reason: 'unauthenticated_access',
      endpoint: '/api/dashboard/projects'
    }
  }
[dev] [2025-11-12T04:34:04.348Z] [DEBUG][3gjpbynu] [Middleware] Outgoing response
Context: {
  "requestId": "3gjpbynumhvi9n7c",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:04.348Z] [DEBUG][3gjpbynu] [Middleware] Processing path
Context: {
  "requestId": "3gjpbynumhvi9n7c",
  "path": "/api/dashboard/projects"
}
[2025-11-12T04:34:04.348Z] [INFO][3gjpbynu] GET /api/dashboard/projects -> 401 (4ms)
Context: {
  "requestId": "3gjpbynumhvi9n7c",
  "duration": 4,
  "status": 401
}
[2025-11-12T04:34:04.348Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/dashboard/activity',
    method: 'GET',
    action: 'activity_feed_accessed'
  }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:04.348Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: {
      reason: 'unauthenticated_access',
      endpoint: '/api/dashboard/activity'
    }
  }
[dev] [2025-11-12T04:34:04.348Z] [DEBUG][yt0pxz4b] [Middleware] Outgoing response
Context: {
  "requestId": "yt0pxz4bmhvi9n79",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:04.348Z] [DEBUG][yt0pxz4b] [Middleware] Processing path
Context: {
  "requestId": "yt0pxz4bmhvi9n79",
  "path": "/api/dashboard/activity"
}
[2025-11-12T04:34:04.349Z] [INFO][yt0pxz4b] GET /api/dashboard/activity -> 401 (8ms)
Context: {
  "requestId": "yt0pxz4bmhvi9n79",
  "duration": 8,
  "status": 401
}
[dev] [wrangler:info] POST /api/billing/sync-callback 404 Not Found (29ms)
[dev] [wrangler:info] GET /api/dashboard/projects 401 Unauthorized (48ms)
[wrangler:info] GET /api/dashboard/activity 401 Unauthorized (47ms)
 âœ“ |integration| tests/integration/billing-api.test.ts > Billing-API-Integration > Security-Headers fÃ¼r alle Billing-Endpunkte > sollte Security-Headers fÃ¼r /api/billing/sync-callback setzen 44ms
[dev] [2025-11-12T04:34:04.451Z] [INFO][d6r69ovx] POST /api/admin/backup/create
Context: {
  "requestId": "d6r69ovxmhvi9nab",
  "endpoint": "/api/admin/backup/create",
  "method": "POST"
}
[dev] [2025-11-12T04:34:04.451Z] [DEBUG][d6r69ovx] [Middleware] Session ID from cookie
Context: {
  "requestId": "d6r69ovxmhvi9nab",
  "present": false
}
[dev] [2025-11-12T04:34:04.452Z] [INFO] SECURITY_EVENT {
  timestamp: {},
  resource: 'security',
  ipAddress: '::1',
  type: 'SUSPICIOUS_ACTIVITY',
  details: {
    reason: 'csrf_token_mismatch',
    endpoint: '/api/admin/backup/create',
    hasHeader: false,
    hasCookie: false
  }
}
[dev] [2025-11-12T04:34:04.452Z] [DEBUG][d6r69ovx] [Middleware] Outgoing response
Context: {
  "requestId": "d6r69ovxmhvi9nab",
  "status": 403,
  "statusText": "Forbidden",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:04.452Z] [DEBUG][d6r69ovx] [Middleware] Processing path
Context: {
  "requestId": "d6r69ovxmhvi9nab",
  "path": "/api/admin/backup/create"
}
[2025-11-12T04:34:04.452Z] [INFO][d6r69ovx] POST /api/admin/backup/create -> 403 (1ms)
Context: {
  "requestId": "d6r69ovxmhvi9nab",
  "duration": 1,
  "status": 403
}
[2025-11-12T04:34:04.452Z] [INFO][00fj8bcf] GET /api/dashboard/stats
Context: {
  "requestId": "00fj8bcfmhvi9nac",
  "endpoint": "/api/dashboard/stats",
  "method": "GET"
}
[2025-11-12T04:34:04.452Z] [DEBUG][00fj8bcf] [Middleware] Session ID from cookie
Context: {
  "requestId": "00fj8bcfmhvi9nac",
  "present": false
}
[dev] [2025-11-12T04:34:04.453Z] [INFO][m1d88ljh] GET /api/projects
Context: {
  "requestId": "m1d88ljhmhvi9nad",
  "endpoint": "/api/projects",
  "method": "GET"
}
[dev] [2025-11-12T04:34:04.453Z] [DEBUG][m1d88ljh] [Middleware] Session ID from cookie
Context: {
  "requestId": "m1d88ljhmhvi9nad",
  "present": false
}
05:34:04 [WARN] [router] No API Route handler exists for the method "GET" for the route "/api/projects".
Found handlers: "POST"

[2025-11-12T04:34:04.453Z] [DEBUG][m1d88ljh] [Middleware] Outgoing response
Context: {
  "requestId": "m1d88ljhmhvi9nad",
  "status": 404,
  "statusText": "Not Found",
  "headers": "[empty object]"
}
[2025-11-12T04:34:04.453Z] [DEBUG][m1d88ljh] [Middleware] Processing path
Context: {
  "requestId": "m1d88ljhmhvi9nad",
  "path": "/api/projects"
}
[2025-11-12T04:34:04.453Z] [INFO][m1d88ljh] GET /api/projects -> 404
Context: {
  "requestId": "m1d88ljhmhvi9nad",
  "duration": 0,
  "status": 404
}
[dev] [2025-11-12T04:34:04.453Z] [INFO][8b7bvvjs] GET /api/projects
Context: {
  "requestId": "8b7bvvjsmhvi9nad",
  "endpoint": "/api/projects",
  "method": "GET"
}
[2025-11-12T04:34:04.453Z] [DEBUG][8b7bvvjs] [Middleware] Session ID from cookie
Context: {
  "requestId": "8b7bvvjsmhvi9nad",
  "present": false
}
[dev] [2025-11-12T04:34:04.453Z] [DEBUG][8b7bvvjs] [Middleware] Outgoing response
Context: {
  "requestId": "8b7bvvjsmhvi9nad",
  "status": 404,
  "statusText": "Not Found",
  "headers": {
    "content-type": "text/html",
    "x-astro-reroute": "no",
    "x-astro-route-type": "page"
  }
}
[2025-11-12T04:34:04.453Z] [DEBUG][8b7bvvjs] [Middleware] Processing path
Context: {
  "requestId": "8b7bvvjsmhvi9nad",
  "path": "/api/projects"
}
[2025-11-12T04:34:04.454Z] [INFO][8b7bvvjs] GET /api/projects -> 404 (1ms)
Context: {
  "requestId": "8b7bvvjsmhvi9nad",
  "duration": 1,
  "status": 404
}
[dev] [2025-11-12T04:34:04.454Z] [INFO][hg710t4g] POST /api/user/avatar
Context: {
  "requestId": "hg710t4gmhvi9nae",
  "endpoint": "/api/user/avatar",
  "method": "POST"
}
[dev] [2025-11-12T04:34:04.454Z] [DEBUG][hg710t4g] [Middleware] Session ID from cookie
Context: {
  "requestId": "hg710t4gmhvi9nae",
  "present": true
}
[dev] [wrangler:info] GET /api/projects 404 Not Found (120ms)
[dev] [wrangler:info] POST /api/admin/backup/create 403 Forbidden (110ms)
[2025-11-12T04:34:04.456Z] [DEBUG][hg710t4g] [Middleware] Session validation result
Context: {
  "requestId": "hg710t4gmhvi9nae",
  "sessionValid": true,
  "userValid": true
}
[dev] [2025-11-12T04:34:04.458Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/dashboard/stats',
    method: 'GET',
    action: 'dashboard_stats_accessed'
  }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:04.458Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: {
      reason: 'unauthenticated_access',
      endpoint: '/api/dashboard/stats'
    }
  }
[dev] [2025-11-12T04:34:04.458Z] [DEBUG][00fj8bcf] [Middleware] Outgoing response
Context: {
  "requestId": "00fj8bcfmhvi9nac",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:04.458Z] [DEBUG][00fj8bcf] [Middleware] Processing path
Context: {
  "requestId": "00fj8bcfmhvi9nac",
  "path": "/api/dashboard/stats"
}
[2025-11-12T04:34:04.458Z] [INFO][00fj8bcf] GET /api/dashboard/stats -> 401 (6ms)
Context: {
  "requestId": "00fj8bcfmhvi9nac",
  "duration": 6,
  "status": 401
}
[dev] [2025-11-12T04:34:04.460Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'd44cd9d1-b68d-41bd-9c69-87ac5bda927f',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/user/avatar',
    method: 'POST',
    action: 'avatar_upload'
  }
}
[dev] [wrangler:info] GET /api/dashboard/stats 401 Unauthorized (129ms)
 âœ“ |integration| tests/integration/dashboard-api.test.ts > Dashboard-API-Integration > Datenkonsistenz > sollte konsistente Daten zwischen verschiedenen Dashboard-Endpunkten zurÃ¼ckgeben 133ms
[dev] [2025-11-12T04:34:04.463Z] [INFO][U:d44cd9d1-b68d-41bd-9c69-87ac5bda927f] Security Event: USER_EVENT
Context: {
  "userId": "d44cd9d1-b68d-41bd-9c69-87ac5bda927f",
  "securityEventType": "USER_EVENT",
  "originalDetails": {
    "eventType": "avatar_updated",
    "ipAddress": "::1",
    "imageUrl": "/r2/avatar-d44cd9d1-b68d-41bd-9c69-87ac5bda927f-1762922044460.jpg"
  },
  "logLevel": "info",
  "eventSnapshot": {
    "type": "USER_EVENT",
    "userId": "d44cd9d1-b68d-41bd-9c69-87ac5bda927f",
    "timestamp": 1762922044463,
    "details": {
      "eventType": "avatar_updated",
      "ipAddress": "::1",
      "imageUrl": "/r2/avatar-d44cd9d1-b68d-41bd-9c69-87ac5bda927f-1762922044460.jpg"
    }
  }
}
[2025-11-12T04:34:04.463Z] [DEBUG][hg710t4g] [Middleware] Outgoing response
Context: {
  "requestId": "hg710t4gmhvi9nae",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:04.463Z] [DEBUG][hg710t4g] [Middleware] Processing path
Context: {
  "requestId": "hg710t4gmhvi9nae",
  "path": "/api/user/avatar"
}
[2025-11-12T04:34:04.463Z] [INFO][hg710t4g] POST /api/user/avatar -> 200 (9ms)
Context: {
  "requestId": "hg710t4gmhvi9nae",
  "duration": 9,
  "status": 200
}
[dev] [wrangler:info] POST /api/user/avatar 200 OK (124ms)
 âœ“ |integration| tests/integration/user-avatar-api.test.ts > User-Avatar-API-Integration > POST /api/user/avatar > sollte Audit-Logging fÃ¼r Avatar-Uploads durchfÃ¼hren 126ms
 âœ“ |integration| tests/integration/api/admin-backup.test.ts > Admin Backup API â€” unauthenticated and CSRF smokes > POST /api/admin/backup/create without CSRF â†’ 403 119ms
[dev] [2025-11-12T04:34:04.578Z] [INFO][x5vb8xys] POST /api/billing/session
Context: {
  "requestId": "x5vb8xysmhvi9ndu",
  "endpoint": "/api/billing/session",
  "method": "POST"
}
[2025-11-12T04:34:04.578Z] [DEBUG][x5vb8xys] [Middleware] Session ID from cookie
Context: {
  "requestId": "x5vb8xysmhvi9ndu",
  "present": false
}
[dev] [2025-11-12T04:34:04.578Z] [INFO][a8bwruyc] POST /api/billing/session
Context: {
  "requestId": "a8bwruycmhvi9ndu",
  "endpoint": "/api/billing/session",
  "method": "POST"
}
[dev] [2025-11-12T04:34:04.591Z] [DEBUG][a8bwruyc] [Middleware] Session ID from cookie
Context: {
  "requestId": "a8bwruycmhvi9ndu",
  "present": false
}
[dev] [2025-11-12T04:34:04.592Z] [INFO][nlr3b7a7] POST /api/billing/session
Context: {
  "requestId": "nlr3b7a7mhvi9ne8",
  "endpoint": "/api/billing/session",
  "method": "POST"
}
[2025-11-12T04:34:04.592Z] [DEBUG][nlr3b7a7] [Middleware] Session ID from cookie
Context: {
  "requestId": "nlr3b7a7mhvi9ne8",
  "present": false
}
[2025-11-12T04:34:04.593Z] [INFO][5xfeq7bs] POST /api/billing/session
Context: {
  "requestId": "5xfeq7bsmhvi9ne9",
  "endpoint": "/api/billing/session",
  "method": "POST"
}
[dev] [2025-11-12T04:34:04.594Z] [DEBUG][5xfeq7bs] [Middleware] Session ID from cookie
Context: {
  "requestId": "5xfeq7bsmhvi9ne9",
  "present": false
}
[dev] [2025-11-12T04:34:04.595Z] [INFO][z6ewnak8] POST /api/billing/session
Context: {
  "requestId": "z6ewnak8mhvi9neb",
  "endpoint": "/api/billing/session",
  "method": "POST"
}
[2025-11-12T04:34:04.595Z] [DEBUG][z6ewnak8] [Middleware] Session ID from cookie
Context: {
  "requestId": "z6ewnak8mhvi9neb",
  "present": false
}
[dev] [2025-11-12T04:34:04.595Z] [INFO][jg2763xk] POST /api/billing/session
Context: {
  "requestId": "jg2763xkmhvi9neb",
  "endpoint": "/api/billing/session",
  "method": "POST"
}
[2025-11-12T04:34:04.596Z] [DEBUG][jg2763xk] [Middleware] Session ID from cookie
Context: {
  "requestId": "jg2763xkmhvi9neb",
  "present": false
}
[2025-11-12T04:34:04.596Z] [INFO][9qiiec33] POST /api/billing/session
Context: {
  "requestId": "9qiiec33mhvi9nec",
  "endpoint": "/api/billing/session",
  "method": "POST"
}
[dev] [2025-11-12T04:34:04.597Z] [DEBUG][9qiiec33] [Middleware] Session ID from cookie
Context: {
  "requestId": "9qiiec33mhvi9nec",
  "present": false
}
[dev] [2025-11-12T04:34:04.598Z] [INFO][h6fb40eh] POST /api/billing/session
Context: {
  "requestId": "h6fb40ehmhvi9nee",
  "endpoint": "/api/billing/session",
  "method": "POST"
}
[2025-11-12T04:34:04.598Z] [DEBUG][h6fb40eh] [Middleware] Session ID from cookie
Context: {
  "requestId": "h6fb40ehmhvi9nee",
  "present": false
}
[2025-11-12T04:34:04.599Z] [INFO][iuzlfwh7] POST /api/billing/session
Context: {
  "requestId": "iuzlfwh7mhvi9nef",
  "endpoint": "/api/billing/session",
  "method": "POST"
}
[2025-11-12T04:34:04.599Z] [DEBUG][iuzlfwh7] [Middleware] Session ID from cookie
Context: {
  "requestId": "iuzlfwh7mhvi9nef",
  "present": false
}
[dev] [2025-11-12T04:34:04.599Z] [INFO][ts5v1qor] POST /api/billing/session
Context: {
  "requestId": "ts5v1qormhvi9nef",
  "endpoint": "/api/billing/session",
  "method": "POST"
}
[2025-11-12T04:34:04.599Z] [DEBUG][ts5v1qor] [Middleware] Session ID from cookie
Context: {
  "requestId": "ts5v1qormhvi9nef",
  "present": false
}
[dev] [2025-11-12T04:34:04.599Z] [INFO][9s8bvnm8] POST /api/billing/session
Context: {
  "requestId": "9s8bvnm8mhvi9nef",
  "endpoint": "/api/billing/session",
  "method": "POST"
}
[dev] [2025-11-12T04:34:04.600Z] [DEBUG][9s8bvnm8] [Middleware] Session ID from cookie
Context: {
  "requestId": "9s8bvnm8mhvi9nef",
  "present": false
}
[2025-11-12T04:34:04.601Z] [INFO][6bv2f4ih] POST /api/billing/session
Context: {
  "requestId": "6bv2f4ihmhvi9neh",
  "endpoint": "/api/billing/session",
  "method": "POST"
}
[2025-11-12T04:34:04.601Z] [DEBUG][6bv2f4ih] [Middleware] Session ID from cookie
Context: {
  "requestId": "6bv2f4ihmhvi9neh",
  "present": false
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:04.606Z] [ERROR] rewrite_llm_failed {[0m

    timestamp: {},
    resource: 'prompt-enhancer-service',
    metadata: {
      message: "Cannot read properties of undefined (reading '_client')",
      status: 'unknown'
    }
  }
[dev] [33mâ–² [43;33m[[43;30mWARNING[43;33m][0m [1m[2025-11-12T04:34:04.607Z] [WARN] rewrite_fallback {[0m

    timestamp: {},
    resource: 'prompt-enhancer-service',
    metadata: { reason: 'Provider service error' }
  }
[dev] [2025-11-12T04:34:04.607Z] [INFO] enhance_completed {
  timestamp: {},
  resource: 'prompt-enhancer-service',
  requestId: 'enhance-1762922042828-oojws',
  metadata: {
    latency: 1779,
    enhancedLength: 518,
    maskedCount: 0,
    aiUsed: true,
    path: 'deterministic'
  }
}
[2025-11-12T04:34:04.607Z] [DEBUG][kdzp26r4] [Middleware] Outgoing response
Context: {
  "requestId": "kdzp26r4mhvi9m14",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:04.607Z] [DEBUG][kdzp26r4] [Middleware] Processing path
Context: {
  "requestId": "kdzp26r4mhvi9m14",
  "path": "/api/prompt-enhance"
}
[2025-11-12T04:34:04.607Z] [INFO][kdzp26r4] POST /api/prompt-enhance -> 200 (1783ms)
Context: {
  "requestId": "kdzp26r4mhvi9m14",
  "duration": 1783,
  "status": 200
}
[wrangler:info] POST /api/prompt-enhance 200 OK (1912ms)
[dev] [2025-11-12T04:34:04.618Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/billing/session',
    method: 'POST',
    action: 'create_checkout_session'
  }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:04.619Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: {
      reason: 'unauthenticated_access',
      endpoint: '/api/billing/session'
    }
  }
[dev] [2025-11-12T04:34:04.619Z] [DEBUG][6bv2f4ih] [Middleware] Outgoing response
Context: {
  "requestId": "6bv2f4ihmhvi9neh",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:04.619Z] [DEBUG][6bv2f4ih] [Middleware] Processing path
Context: {
  "requestId": "6bv2f4ihmhvi9neh",
  "path": "/api/billing/session"
}
[2025-11-12T04:34:04.619Z] [INFO][6bv2f4ih] POST /api/billing/session -> 401 (18ms)
Context: {
  "requestId": "6bv2f4ihmhvi9neh",
  "duration": 18,
  "status": 401
}
[2025-11-12T04:34:04.619Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/billing/session',
    method: 'POST',
    action: 'create_checkout_session'
  }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:04.619Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: {
      reason: 'unauthenticated_access',
      endpoint: '/api/billing/session'
    }
  }
[dev] [2025-11-12T04:34:04.619Z] [DEBUG][x5vb8xys] [Middleware] Outgoing response
Context: {
  "requestId": "x5vb8xysmhvi9ndu",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[dev] [2025-11-12T04:34:04.619Z] [DEBUG][x5vb8xys] [Middleware] Processing path
Context: {
  "requestId": "x5vb8xysmhvi9ndu",
  "path": "/api/billing/session"
}
[2025-11-12T04:34:04.619Z] [INFO][x5vb8xys] POST /api/billing/session -> 401 (41ms)
Context: {
  "requestId": "x5vb8xysmhvi9ndu",
  "duration": 41,
  "status": 401
}
[2025-11-12T04:34:04.619Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/billing/session',
    method: 'POST',
    action: 'create_checkout_session'
  }
}
[2025-11-12T04:34:04.619Z] [DEBUG][a8bwruyc] [Middleware] Outgoing response
Context: {
  "requestId": "a8bwruycmhvi9ndu",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:04.619Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: {
      reason: 'unauthenticated_access',
      endpoint: '/api/billing/session'
    }
  }


[31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:04.620Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: {
      reason: 'unauthenticated_access',
      endpoint: '/api/billing/session'
    }
  }
[dev] [2025-11-12T04:34:04.620Z] [DEBUG][a8bwruyc] [Middleware] Processing path
Context: {
  "requestId": "a8bwruycmhvi9ndu",
  "path": "/api/billing/session"
}
[2025-11-12T04:34:04.620Z] [INFO][a8bwruyc] POST /api/billing/session -> 401 (42ms)
Context: {
  "requestId": "a8bwruycmhvi9ndu",
  "duration": 42,
  "status": 401
}
[2025-11-12T04:34:04.620Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/billing/session',
    method: 'POST',
    action: 'create_checkout_session'
  }
}
[2025-11-12T04:34:04.620Z] [DEBUG][nlr3b7a7] [Middleware] Outgoing response
Context: {
  "requestId": "nlr3b7a7mhvi9ne8",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:04.620Z] [DEBUG][nlr3b7a7] [Middleware] Processing path
Context: {
  "requestId": "nlr3b7a7mhvi9ne8",
  "path": "/api/billing/session"
}
[2025-11-12T04:34:04.620Z] [INFO][nlr3b7a7] POST /api/billing/session -> 401 (28ms)
Context: {
  "requestId": "nlr3b7a7mhvi9ne8",
  "duration": 28,
  "status": 401
}
[2025-11-12T04:34:04.620Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/billing/session',
    method: 'POST',
    action: 'create_checkout_session'
  }
}
[2025-11-12T04:34:04.620Z] [DEBUG][5xfeq7bs] [Middleware] Outgoing response
Context: {
  "requestId": "5xfeq7bsmhvi9ne9",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:04.620Z] [DEBUG][5xfeq7bs] [Middleware] Processing path
Context: {
  "requestId": "5xfeq7bsmhvi9ne9",
  "path": "/api/billing/session"
}
[2025-11-12T04:34:04.620Z] [INFO][5xfeq7bs] POST /api/billing/session -> 401 (27ms)
Context: {
  "requestId": "5xfeq7bsmhvi9ne9",
  "duration": 27,
  "status": 401
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:04.620Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: {
      reason: 'unauthenticated_access',
      endpoint: '/api/billing/session'
    }
  }
 âœ“ |integration| tests/integration/prompt-enhance-multipart.test.ts > POST /api/prompt-enhance (multipart) > accepts image/png + text and returns success 1960ms
[dev] [2025-11-12T04:34:04.620Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/billing/session',
    method: 'POST',
    action: 'create_checkout_session'
  }
}
[2025-11-12T04:34:04.623Z] [DEBUG][z6ewnak8] [Middleware] Outgoing response
Context: {
  "requestId": "z6ewnak8mhvi9neb",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:04.623Z] [DEBUG][z6ewnak8] [Middleware] Processing path
Context: {
  "requestId": "z6ewnak8mhvi9neb",
  "path": "/api/billing/session"
}
[2025-11-12T04:34:04.624Z] [INFO][z6ewnak8] POST /api/billing/session -> 401 (29ms)
Context: {
  "requestId": "z6ewnak8mhvi9neb",
  "duration": 29,
  "status": 401
}
[2025-11-12T04:34:04.624Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/billing/session',
    method: 'POST',
    action: 'create_checkout_session'
  }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:04.623Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: {
      reason: 'unauthenticated_access',
      endpoint: '/api/billing/session'
    }
  }


[31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:04.624Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: {
      reason: 'unauthenticated_access',
      endpoint: '/api/billing/session'
    }
  }
[dev] [2025-11-12T04:34:04.624Z] [DEBUG][jg2763xk] [Middleware] Outgoing response
Context: {
  "requestId": "jg2763xkmhvi9neb",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:04.624Z] [DEBUG][jg2763xk] [Middleware] Processing path
Context: {
  "requestId": "jg2763xkmhvi9neb",
  "path": "/api/billing/session"
}
[2025-11-12T04:34:04.624Z] [INFO][jg2763xk] POST /api/billing/session -> 401 (29ms)
Context: {
  "requestId": "jg2763xkmhvi9neb",
  "duration": 29,
  "status": 401
}
[2025-11-12T04:34:04.624Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/billing/session',
    method: 'POST',
    action: 'create_checkout_session'
  }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:04.624Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: {
      reason: 'unauthenticated_access',
      endpoint: '/api/billing/session'
    }
  }
[dev] [2025-11-12T04:34:04.624Z] [DEBUG][9qiiec33] [Middleware] Outgoing response
Context: {
  "requestId": "9qiiec33mhvi9nec",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:04.624Z] [DEBUG][9qiiec33] [Middleware] Processing path
Context: {
  "requestId": "9qiiec33mhvi9nec",
  "path": "/api/billing/session"
}
[2025-11-12T04:34:04.624Z] [INFO][9qiiec33] POST /api/billing/session -> 401 (28ms)
Context: {
  "requestId": "9qiiec33mhvi9nec",
  "duration": 28,
  "status": 401
}
[2025-11-12T04:34:04.624Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/billing/session',
    method: 'POST',
    action: 'create_checkout_session'
  }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:04.624Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: {
      reason: 'unauthenticated_access',
      endpoint: '/api/billing/session'
    }
  }
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:04.625Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: {
      reason: 'unauthenticated_access',
      endpoint: '/api/billing/session'
    }
  }
[dev] [2025-11-12T04:34:04.625Z] [DEBUG][h6fb40eh] [Middleware] Outgoing response
Context: {
  "requestId": "h6fb40ehmhvi9nee",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:04.625Z] [DEBUG][h6fb40eh] [Middleware] Processing path
Context: {
  "requestId": "h6fb40ehmhvi9nee",
  "path": "/api/billing/session"
}
[2025-11-12T04:34:04.625Z] [INFO][h6fb40eh] POST /api/billing/session -> 401 (27ms)
Context: {
  "requestId": "h6fb40ehmhvi9nee",
  "duration": 27,
  "status": 401
}
[2025-11-12T04:34:04.625Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/billing/session',
    method: 'POST',
    action: 'create_checkout_session'
  }
}
[dev] [2025-11-12T04:34:04.625Z] [DEBUG][iuzlfwh7] [Middleware] Outgoing response
Context: {
  "requestId": "iuzlfwh7mhvi9nef",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:04.638Z] [DEBUG][iuzlfwh7] [Middleware] Processing path
Context: {
  "requestId": "iuzlfwh7mhvi9nef",
  "path": "/api/billing/session"
}
[2025-11-12T04:34:04.639Z] [INFO][iuzlfwh7] POST /api/billing/session -> 401 (40ms)
Context: {
  "requestId": "iuzlfwh7mhvi9nef",
  "duration": 40,
  "status": 401
}
[2025-11-12T04:34:04.639Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/billing/session',
    method: 'POST',
    action: 'create_checkout_session'
  }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:04.639Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: {
      reason: 'unauthenticated_access',
      endpoint: '/api/billing/session'
    }
  }
[dev] [2025-11-12T04:34:04.640Z] [DEBUG][ts5v1qor] [Middleware] Outgoing response
Context: {
  "requestId": "ts5v1qormhvi9nef",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:04.640Z] [DEBUG][ts5v1qor] [Middleware] Processing path
Context: {
  "requestId": "ts5v1qormhvi9nef",
  "path": "/api/billing/session"
}
[2025-11-12T04:34:04.640Z] [INFO][ts5v1qor] POST /api/billing/session -> 401 (41ms)
Context: {
  "requestId": "ts5v1qormhvi9nef",
  "duration": 41,
  "status": 401
}
[2025-11-12T04:34:04.640Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/billing/session',
    method: 'POST',
    action: 'create_checkout_session'
  }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:04.641Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: {
      reason: 'unauthenticated_access',
      endpoint: '/api/billing/session'
    }
  }
[dev] [2025-11-12T04:34:04.641Z] [DEBUG][9s8bvnm8] [Middleware] Outgoing response
Context: {
  "requestId": "9s8bvnm8mhvi9nef",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:04.641Z] [DEBUG][9s8bvnm8] [Middleware] Processing path
Context: {
  "requestId": "9s8bvnm8mhvi9nef",
  "path": "/api/billing/session"
}
[2025-11-12T04:34:04.641Z] [INFO][9s8bvnm8] POST /api/billing/session -> 401 (42ms)
Context: {
  "requestId": "9s8bvnm8mhvi9nef",
  "duration": 42,
  "status": 401
}
[wrangler:info] POST /api/billing/session 401 Unauthorized (265ms)
[wrangler:info] POST /api/billing/session 401 Unauthorized (262ms)
[dev] [wrangler:info] POST /api/billing/session 401 Unauthorized (262ms)
[dev] [wrangler:info] POST /api/billing/session 401 Unauthorized (267ms)
[dev] [wrangler:info] POST /api/billing/session 401 Unauthorized (266ms)
[wrangler:info] POST /api/billing/session 401 Unauthorized (266ms)
[wrangler:info] POST /api/billing/session 401 Unauthorized (266ms)
[wrangler:info] POST /api/billing/session 401 Unauthorized (266ms)
[wrangler:info] POST /api/billing/session 401 Unauthorized (266ms)
[wrangler:info] POST /api/billing/session 401 Unauthorized (265ms)
[wrangler:info] POST /api/billing/session 401 Unauthorized (265ms)
[wrangler:info] POST /api/billing/session 401 Unauthorized (266ms)
[dev] [2025-11-12T04:34:04.750Z] [INFO][hfkn5nj9] POST /api/prompt-enhance
Context: {
  "requestId": "hfkn5nj9mhvi9nim",
  "endpoint": "/api/prompt-enhance",
  "method": "POST"
}
[dev] [2025-11-12T04:34:04.750Z] [DEBUG][hfkn5nj9] [Middleware] Session ID from cookie
Context: {
  "requestId": "hfkn5nj9mhvi9nim",
  "present": false
}
[2025-11-12T04:34:04.750Z] [INFO][eflhy48v] POST /api/billing/session
Context: {
  "requestId": "eflhy48vmhvi9nim",
  "endpoint": "/api/billing/session",
  "method": "POST"
}
[2025-11-12T04:34:04.751Z] [DEBUG][eflhy48v] [Middleware] Session ID from cookie
Context: {
  "requestId": "eflhy48vmhvi9nim",
  "present": false
}
[2025-11-12T04:34:04.751Z] [INFO][gjqkoti5] POST /api/billing/session
Context: {
  "requestId": "gjqkoti5mhvi9nin",
  "endpoint": "/api/billing/session",
  "method": "POST"
}
[2025-11-12T04:34:04.751Z] [DEBUG][gjqkoti5] [Middleware] Session ID from cookie
Context: {
  "requestId": "gjqkoti5mhvi9nin",
  "present": false
}
[2025-11-12T04:34:04.752Z] [INFO][etcbaon8] POST /api/billing/session
Context: {
  "requestId": "etcbaon8mhvi9nio",
  "endpoint": "/api/billing/session",
  "method": "POST"
}
[2025-11-12T04:34:04.752Z] [DEBUG][etcbaon8] [Middleware] Session ID from cookie
Context: {
  "requestId": "etcbaon8mhvi9nio",
  "present": false
}
[2025-11-12T04:34:04.754Z] [INFO][mnqhxl03] POST /api/debug-login
Context: {
  "requestId": "mnqhxl03mhvi9niq",
  "endpoint": "/api/debug-login",
  "method": "POST"
}
[2025-11-12T04:34:04.754Z] [DEBUG][mnqhxl03] [Middleware] Session ID from cookie
Context: {
  "requestId": "mnqhxl03mhvi9niq",
  "present": false
}
[dev] [2025-11-12T04:34:04.756Z] [INFO][tjbn3zee] POST /api/projects/non-existent-id
Context: {
  "requestId": "tjbn3zeemhvi9nis",
  "endpoint": "/api/projects/non-existent-id",
  "method": "POST"
}
[dev] [2025-11-12T04:34:04.756Z] [DEBUG][tjbn3zee] [Middleware] Session ID from cookie
Context: {
  "requestId": "tjbn3zeemhvi9nis",
  "present": false
}
[2025-11-12T04:34:04.756Z] [DEBUG][tjbn3zee] [Middleware] Outgoing response
Context: {
  "requestId": "tjbn3zeemhvi9nis",
  "status": 404,
  "statusText": "Not Found",
  "headers": {
    "content-type": "text/html",
    "x-astro-reroute": "no",
    "x-astro-route-type": "page"
  }
}
[2025-11-12T04:34:04.756Z] [DEBUG][tjbn3zee] [Middleware] Processing path
Context: {
  "requestId": "tjbn3zeemhvi9nis",
  "path": "/api/projects/non-existent-id"
}
[2025-11-12T04:34:04.756Z] [INFO][tjbn3zee] POST /api/projects/non-existent-id -> 404
Context: {
  "requestId": "tjbn3zeemhvi9nis",
  "duration": 0,
  "status": 404
}
[dev] [wrangler:info] POST /api/projects/non-existent-id 404 Not Found (300ms)
 âœ“ |integration| tests/integration/projects-api.test.ts > Projects-API-Integration > Fehlerbehandlung > sollte strukturierte Fehler fÃ¼r alle Projekt-Endpunkte zurÃ¼ckgeben 427ms
[dev] [2025-11-12T04:34:04.761Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/debug-login',
    method: 'POST',
    action: 'debug_login'
  }
}
[dev] [2025-11-12T04:34:04.762Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: { endpoint: '/api/prompt-enhance', method: 'POST' }
}
[dev] [2025-11-12T04:34:04.762Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/billing/session',
    method: 'POST',
    action: 'create_checkout_session'
  }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:04.762Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: {
      reason: 'unauthenticated_access',
      endpoint: '/api/billing/session'
    }
  }
[dev] [2025-11-12T04:34:04.762Z] [DEBUG][eflhy48v] [Middleware] Outgoing response
Context: {
  "requestId": "eflhy48vmhvi9nim",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:04.762Z] [DEBUG][eflhy48v] [Middleware] Processing path
Context: {
  "requestId": "eflhy48vmhvi9nim",
  "path": "/api/billing/session"
}
[2025-11-12T04:34:04.762Z] [INFO][eflhy48v] POST /api/billing/session -> 401 (12ms)
Context: {
  "requestId": "eflhy48vmhvi9nim",
  "duration": 12,
  "status": 401
}
[2025-11-12T04:34:04.762Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/billing/session',
    method: 'POST',
    action: 'create_checkout_session'
  }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:04.762Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: {
      reason: 'unauthenticated_access',
      endpoint: '/api/billing/session'
    }
  }
[dev] [2025-11-12T04:34:04.762Z] [DEBUG][gjqkoti5] [Middleware] Outgoing response
Context: {
  "requestId": "gjqkoti5mhvi9nin",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:04.762Z] [DEBUG][gjqkoti5] [Middleware] Processing path
Context: {
  "requestId": "gjqkoti5mhvi9nin",
  "path": "/api/billing/session"
}
[2025-11-12T04:34:04.763Z] [INFO][gjqkoti5] POST /api/billing/session -> 401 (12ms)
Context: {
  "requestId": "gjqkoti5mhvi9nin",
  "duration": 12,
  "status": 401
}
[2025-11-12T04:34:04.763Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/billing/session',
    method: 'POST',
    action: 'create_checkout_session'
  }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:04.763Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: {
      reason: 'unauthenticated_access',
      endpoint: '/api/billing/session'
    }
  }
[dev] [2025-11-12T04:34:04.763Z] [DEBUG][etcbaon8] [Middleware] Outgoing response
Context: {
  "requestId": "etcbaon8mhvi9nio",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:04.763Z] [DEBUG][etcbaon8] [Middleware] Processing path
Context: {
  "requestId": "etcbaon8mhvi9nio",
  "path": "/api/billing/session"
}
[2025-11-12T04:34:04.763Z] [INFO][etcbaon8] POST /api/billing/session -> 401 (11ms)
Context: {
  "requestId": "etcbaon8mhvi9nio",
  "duration": 11,
  "status": 401
}
[dev] [wrangler:info] POST /api/billing/session 401 Unauthorized (389ms)
[dev] [wrangler:info] POST /api/billing/session 401 Unauthorized (389ms)
[wrangler:info] POST /api/billing/session 401 Unauthorized (389ms)
[dev] [2025-11-12T04:34:04.775Z] [INFO][U:d44cd9d1-b68d-41bd-9c69-87ac5bda927f] Security Event: USER_EVENT
Context: {
  "userId": "d44cd9d1-b68d-41bd-9c69-87ac5bda927f",
  "securityEventType": "USER_EVENT",
  "originalDetails": {
    "eventType": "debug_login_created",
    "ipAddress": "::1",
    "debugUser": true
  },
  "logLevel": "info",
  "eventSnapshot": {
    "type": "USER_EVENT",
    "userId": "d44cd9d1-b68d-41bd-9c69-87ac5bda927f",
    "timestamp": 1762922044775,
    "details": {
      "eventType": "debug_login_created",
      "ipAddress": "::1",
      "debugUser": true
    }
  }
}
[2025-11-12T04:34:04.775Z] [DEBUG][mnqhxl03] [Middleware] Outgoing response
Context: {
  "requestId": "mnqhxl03mhvi9niq",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:04.775Z] [DEBUG][mnqhxl03] [Middleware] Processing path
Context: {
  "requestId": "mnqhxl03mhvi9niq",
  "path": "/api/debug-login"
}
[2025-11-12T04:34:04.775Z] [INFO][mnqhxl03] POST /api/debug-login -> 200 (21ms)
Context: {
  "requestId": "mnqhxl03mhvi9niq",
  "duration": 21,
  "status": 200
}
[dev] [wrangler:info] POST /api/debug-login 200 OK (317ms)
 âœ“ |integration| tests/integration/billing-api.test.ts > Billing-API-Integration > Rate-Limiting fÃ¼r Billing-Endpunkte > sollte Rate-Limiting fÃ¼r Billing-Session korrekt handhaben 408ms
[dev] [2025-11-12T04:34:04.824Z] [INFO][cf8q7h49] PATCH /api/projects
Context: {
  "requestId": "cf8q7h49mhvi9nko",
  "endpoint": "/api/projects",
  "method": "PATCH"
}
[dev] [2025-11-12T04:34:04.824Z] [DEBUG][cf8q7h49] [Middleware] Session ID from cookie
Context: {
  "requestId": "cf8q7h49mhvi9nko",
  "present": false
}
05:34:04 [WARN] [router] No API Route handler exists for the method "PATCH" for the route "/api/projects".
Found handlers: "POST"

[2025-11-12T04:34:04.824Z] [DEBUG][cf8q7h49] [Middleware] Outgoing response
Context: {
  "requestId": "cf8q7h49mhvi9nko",
  "status": 404,
  "statusText": "Not Found",
  "headers": "[empty object]"
}
[dev] [2025-11-12T04:34:04.825Z] [DEBUG][cf8q7h49] [Middleware] Processing path
Context: {
  "requestId": "cf8q7h49mhvi9nko",
  "path": "/api/projects"
}
[2025-11-12T04:34:04.825Z] [INFO][cf8q7h49] PATCH /api/projects -> 404 (1ms)
Context: {
  "requestId": "cf8q7h49mhvi9nko",
  "duration": 1,
  "status": 404
}
[2025-11-12T04:34:04.825Z] [INFO][d2dne8ia] PATCH /api/projects
Context: {
  "requestId": "d2dne8iamhvi9nkp",
  "endpoint": "/api/projects",
  "method": "PATCH"
}
[2025-11-12T04:34:04.825Z] [DEBUG][d2dne8ia] [Middleware] Session ID from cookie
Context: {
  "requestId": "d2dne8iamhvi9nkp",
  "present": false
}
[2025-11-12T04:34:04.825Z] [DEBUG][d2dne8ia] [Middleware] Outgoing response
Context: {
  "requestId": "d2dne8iamhvi9nkp",
  "status": 404,
  "statusText": "Not Found",
  "headers": {
    "content-type": "text/html",
    "x-astro-reroute": "no",
    "x-astro-route-type": "page"
  }
}
[2025-11-12T04:34:04.825Z] [DEBUG][d2dne8ia] [Middleware] Processing path
Context: {
  "requestId": "d2dne8iamhvi9nkp",
  "path": "/api/projects"
}
[2025-11-12T04:34:04.825Z] [INFO][d2dne8ia] PATCH /api/projects -> 404
Context: {
  "requestId": "d2dne8iamhvi9nkp",
  "duration": 0,
  "status": 404
}
[dev] [2025-11-12T04:34:04.826Z] [INFO][nobq04qw] GET /api/admin/users/set-plan
Context: {
  "requestId": "nobq04qwmhvi9nkq",
  "endpoint": "/api/admin/users/set-plan",
  "method": "GET"
}
[dev] [2025-11-12T04:34:04.826Z] [DEBUG][nobq04qw] [Middleware] Session ID from cookie
Context: {
  "requestId": "nobq04qwmhvi9nkq",
  "present": false
}
[dev] [2025-11-12T04:34:04.826Z] [DEBUG][nobq04qw] [Middleware] Outgoing response
Context: {
  "requestId": "nobq04qwmhvi9nkq",
  "status": 405,
  "statusText": "Method Not Allowed",
  "headers": {
    "allow": "POST",
    "content-type": "application/json"
  }
}
[2025-11-12T04:34:04.826Z] [DEBUG][nobq04qw] [Middleware] Processing path
Context: {
  "requestId": "nobq04qwmhvi9nkq",
  "path": "/api/admin/users/set-plan"
}
[2025-11-12T04:34:04.826Z] [INFO][nobq04qw] GET /api/admin/users/set-plan -> 405
Context: {
  "requestId": "nobq04qwmhvi9nkq",
  "duration": 0,
  "status": 405
}
[dev] [2025-11-12T04:34:04.827Z] [INFO][7o9ve0up] GET /
Context: {
  "requestId": "7o9ve0upmhvi9nkr",
  "endpoint": "/",
  "method": "GET"
}
[2025-11-12T04:34:04.827Z] [DEBUG][7o9ve0up] [Middleware] Session ID from cookie
Context: {
  "requestId": "7o9ve0upmhvi9nkr",
  "present": false
}
[dev] [2025-11-12T04:34:04.836Z] [DEBUG][7o9ve0up] [Middleware] Outgoing response
Context: {
  "requestId": "7o9ve0upmhvi9nkr",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "text/html",
    "x-astro-route-type": "page"
  }
}
[dev] [2025-11-12T04:34:04.836Z] [DEBUG][7o9ve0up] [Middleware] Processing path
Context: {
  "requestId": "7o9ve0upmhvi9nkr",
  "path": "/"
}
[2025-11-12T04:34:04.836Z] [INFO][7o9ve0up] GET / -> 200 (9ms)
Context: {
  "requestId": "7o9ve0upmhvi9nkr",
  "duration": 9,
  "status": 200
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1mWarning: Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:[0m

  1. You might have mismatching versions of React and the renderer (such as React DOM)
  2. You might be breaking the Rules of Hooks
  3. You might have more than one copy of React in the same app
  See [4mhttps://reactjs.org/link/invalid-hook-call[0m for tips about how to debug and fix this problem.
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1mWarning: Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:[0m

  1. You might have mismatching versions of React and the renderer (such as React DOM)
  2. You might be breaking the Rules of Hooks
  3. You might have more than one copy of React in the same app
  See [4mhttps://reactjs.org/link/invalid-hook-call[0m for tips about how to debug and fix this problem.
[dev] [wrangler:info] GET /api/admin/users/set-plan 405 Method Not Allowed (172ms)
[dev] [wrangler:info] GET / 200 OK (99ms)
[dev] [wrangler:info] PATCH /api/projects 404 Not Found (96ms)
 âœ“ |integration| tests/integration/projects-api.test.ts > Projects-API-Integration > Fehlerbehandlung > sollte 405 fÃ¼r nicht unterstÃ¼tzte HTTP-Methoden zurÃ¼ckgeben 100ms
stdout | tests/integration/blog.test.ts > Blog Integration
Testserver erreichbar unter http://localhost:8787

[dev] [2025-11-12T04:34:04.870Z] [INFO][t5073xhf] POST /api/projects
Context: {
  "requestId": "t5073xhfmhvi9nly",
  "endpoint": "/api/projects",
  "method": "POST"
}
[2025-11-12T04:34:04.870Z] [DEBUG][t5073xhf] [Middleware] Session ID from cookie
Context: {
  "requestId": "t5073xhfmhvi9nly",
  "present": false
}
[2025-11-12T04:34:04.870Z] [INFO][01j0lcok] POST /api/billing/session
Context: {
  "requestId": "01j0lcokmhvi9nly",
  "endpoint": "/api/billing/session",
  "method": "POST"
}
[2025-11-12T04:34:04.870Z] [DEBUG][01j0lcok] [Middleware] Session ID from cookie
Context: {
  "requestId": "01j0lcokmhvi9nly",
  "present": false
}
[dev] [2025-11-12T04:34:04.870Z] [INFO][3u5k3yjt] GET /api/admin/backup/jobs
Context: {
  "requestId": "3u5k3yjtmhvi9nly",
  "endpoint": "/api/admin/backup/jobs",
  "method": "GET"
}
[2025-11-12T04:34:04.870Z] [DEBUG][3u5k3yjt] [Middleware] Session ID from cookie
Context: {
  "requestId": "3u5k3yjtmhvi9nly",
  "present": true
}
 âœ“ |integration| tests/integration/api/admin-users-set-plan.test.ts > Admin Users Set Plan â€” method/CSRF/auth checks > GET /api/admin/users/set-plan â†’ 405 method not allowed 223ms
[dev] [2025-11-12T04:34:04.876Z] [DEBUG][3u5k3yjt] [Middleware] Session validation result
Context: {
  "requestId": "3u5k3yjtmhvi9nly",
  "sessionValid": true,
  "userValid": true
}
[dev] [2025-11-12T04:34:04.877Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/billing/session',
    method: 'POST',
    action: 'create_checkout_session'
  }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:04.877Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: {
      reason: 'unauthenticated_access',
      endpoint: '/api/billing/session'
    }
  }
[dev] [2025-11-12T04:34:04.877Z] [DEBUG][01j0lcok] [Middleware] Outgoing response
Context: {
  "requestId": "01j0lcokmhvi9nly",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:04.877Z] [DEBUG][01j0lcok] [Middleware] Processing path
Context: {
  "requestId": "01j0lcokmhvi9nly",
  "path": "/api/billing/session"
}
[2025-11-12T04:34:04.877Z] [INFO][01j0lcok] POST /api/billing/session -> 401 (7ms)
Context: {
  "requestId": "01j0lcokmhvi9nly",
  "duration": 7,
  "status": 401
}
[2025-11-12T04:34:04.877Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/projects',
    method: 'POST',
    action: 'project_created'
  }
}
[dev] [2025-11-12T04:34:04.878Z] [DEBUG][t5073xhf] [Middleware] Outgoing response
Context: {
  "requestId": "t5073xhfmhvi9nly",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:04.878Z] [DEBUG][t5073xhf] [Middleware] Processing path
Context: {
  "requestId": "t5073xhfmhvi9nly",
  "path": "/api/projects"
}
[2025-11-12T04:34:04.878Z] [INFO][t5073xhf] POST /api/projects -> 401 (8ms)
Context: {
  "requestId": "t5073xhfmhvi9nly",
  "duration": 8,
  "status": 401
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:04.877Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: { reason: 'unauthenticated_access', endpoint: '/api/projects' }
  }
[dev] [2025-11-12T04:34:04.880Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'd44cd9d1-b68d-41bd-9c69-87ac5bda927f',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/admin/backup/jobs',
    method: 'GET',
    action: 'admin_backup_jobs'
  }
}
[2025-11-12T04:34:04.882Z] [DEBUG][3u5k3yjt] [Middleware] Outgoing response
Context: {
  "requestId": "3u5k3yjtmhvi9nly",
  "status": 403,
  "statusText": "Forbidden",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:04.882Z] [DEBUG][3u5k3yjt] [Middleware] Processing path
Context: {
  "requestId": "3u5k3yjtmhvi9nly",
  "path": "/api/admin/backup/jobs"
}
[2025-11-12T04:34:04.883Z] [INFO][3u5k3yjt] GET /api/admin/backup/jobs -> 403 (13ms)
Context: {
  "requestId": "3u5k3yjtmhvi9nly",
  "duration": 13,
  "status": 403
}
[dev] [wrangler:info] POST /api/billing/session 401 Unauthorized (96ms)
[dev] [wrangler:info] POST /api/projects 401 Unauthorized (17ms)
[dev] [wrangler:info] GET /api/admin/backup/jobs 403 Forbidden (105ms)
 âœ“ |integration| tests/integration/api/admin-backup.test.ts > Admin Backup API â€” authenticated (debug-user) but not admin > POST /api/debug-login then GET /api/admin/backup/jobs â†’ 403 (not admin) 431ms
 âœ“ |integration| tests/integration/projects-api.test.ts > Projects-API-Integration > Datenkonsistenz > sollte konsistente Projekt-Daten zwischen verschiedenen Endpunkten zurÃ¼ckgeben 28ms
[dev] [2025-11-12T04:34:04.988Z] [INFO][tw6e8p4d] POST /api/admin/users/set-plan
Context: {
  "requestId": "tw6e8p4dmhvi9np8",
  "endpoint": "/api/admin/users/set-plan",
  "method": "POST"
}
[dev] [2025-11-12T04:34:04.989Z] [DEBUG][tw6e8p4d] [Middleware] Session ID from cookie
Context: {
  "requestId": "tw6e8p4dmhvi9np8",
  "present": false
}
[2025-11-12T04:34:04.989Z] [INFO] SECURITY_EVENT {
  timestamp: {},
  resource: 'security',
  ipAddress: '::1',
  type: 'SUSPICIOUS_ACTIVITY',
  details: {
    reason: 'csrf_token_mismatch',
    endpoint: '/api/admin/users/set-plan',
    hasHeader: false,
    hasCookie: false
  }
}
[dev] [2025-11-12T04:34:04.989Z] [DEBUG][tw6e8p4d] [Middleware] Outgoing response
Context: {
  "requestId": "tw6e8p4dmhvi9np8",
  "status": 403,
  "statusText": "Forbidden",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:04.989Z] [DEBUG][tw6e8p4d] [Middleware] Processing path
Context: {
  "requestId": "tw6e8p4dmhvi9np8",
  "path": "/api/admin/users/set-plan"
}
[2025-11-12T04:34:04.989Z] [INFO][tw6e8p4d] POST /api/admin/users/set-plan -> 403 (1ms)
Context: {
  "requestId": "tw6e8p4dmhvi9np8",
  "duration": 1,
  "status": 403
}
[dev] [2025-11-12T04:34:04.992Z] [INFO][9yg1uvgl] GET /blog
Context: {
  "requestId": "9yg1uvglmhvi9npc",
  "endpoint": "/blog",
  "method": "GET"
}
[dev] [2025-11-12T04:34:04.992Z] [DEBUG][9yg1uvgl] [Middleware] Session ID from cookie
Context: {
  "requestId": "9yg1uvglmhvi9npc",
  "present": false
}
[dev] [33mâ–² [43;33m[[43;30mWARNING[43;33m][0m [1mKey "pages.blog.search.tags_placeholder" not found in locale "de". Falling back to English.[0m
[dev] [2025-11-12T04:34:05.004Z] [DEBUG][9yg1uvgl] [Middleware] Outgoing response
Context: {
  "requestId": "9yg1uvglmhvi9npc",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "text/html",
    "x-astro-route-type": "page"
  }
}
[2025-11-12T04:34:05.005Z] [DEBUG][9yg1uvgl] [Middleware] Processing path
Context: {
  "requestId": "9yg1uvglmhvi9npc",
  "path": "/blog"
}
[2025-11-12T04:34:05.005Z] [INFO][9yg1uvgl] GET /blog -> 200 (13ms)
Context: {
  "requestId": "9yg1uvglmhvi9npc",
  "duration": 13,
  "status": 200
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1mWarning: Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:[0m

  1. You might have mismatching versions of React and the renderer (such as React DOM)
  2. You might be breaking the Rules of Hooks
  3. You might have more than one copy of React in the same app
  See [4mhttps://reactjs.org/link/invalid-hook-call[0m for tips about how to debug and fix this problem.
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1mWarning: Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:[0m

  1. You might have mismatching versions of React and the renderer (such as React DOM)
  2. You might be breaking the Rules of Hooks
  3. You might have more than one copy of React in the same app
  See [4mhttps://reactjs.org/link/invalid-hook-call[0m for tips about how to debug and fix this problem.
[dev] [wrangler:info] GET /blog 200 OK (146ms)
[dev] [wrangler:info] POST /api/admin/users/set-plan 403 Forbidden (143ms)
 âœ“ |integration| tests/integration/api/admin-users-set-plan.test.ts > Admin Users Set Plan â€” method/CSRF/auth checks > POST /api/admin/users/set-plan without CSRF â†’ 403 154ms
[dev] [2025-11-12T04:34:05.135Z] [INFO][lnetp3xv] POST /api/debug-login
Context: {
  "requestId": "lnetp3xvmhvi9ntb",
  "endpoint": "/api/debug-login",
  "method": "POST"
}
[dev] [2025-11-12T04:34:05.135Z] [DEBUG][lnetp3xv] [Middleware] Session ID from cookie
Context: {
  "requestId": "lnetp3xvmhvi9ntb",
  "present": false
}
[2025-11-12T04:34:05.135Z] [INFO][9raft77x] POST /api/billing/sync
Context: {
  "requestId": "9raft77xmhvi9ntb",
  "endpoint": "/api/billing/sync",
  "method": "POST"
}
[dev] [2025-11-12T04:34:05.135Z] [DEBUG][9raft77x] [Middleware] Session ID from cookie
Context: {
  "requestId": "9raft77xmhvi9ntb",
  "present": false
}
05:34:05 [WARN] [router] No API Route handler exists for the method "POST" for the route "/api/billing/sync".
Found handlers: "GET"

[2025-11-12T04:34:05.135Z] [DEBUG][9raft77x] [Middleware] Outgoing response
Context: {
  "requestId": "9raft77xmhvi9ntb",
  "status": 404,
  "statusText": "Not Found",
  "headers": "[empty object]"
}
[2025-11-12T04:34:05.135Z] [DEBUG][9raft77x] [Middleware] Processing path
Context: {
  "requestId": "9raft77xmhvi9ntb",
  "path": "/api/billing/sync"
}
[2025-11-12T04:34:05.135Z] [INFO][9raft77x] POST /api/billing/sync -> 404
Context: {
  "requestId": "9raft77xmhvi9ntb",
  "duration": 0,
  "status": 404
}
[2025-11-12T04:34:05.136Z] [INFO][q1pyz1mc] POST /api/billing/sync
Context: {
  "requestId": "q1pyz1mcmhvi9ntc",
  "endpoint": "/api/billing/sync",
  "method": "POST"
}
[2025-11-12T04:34:05.136Z] [DEBUG][q1pyz1mc] [Middleware] Session ID from cookie
Context: {
  "requestId": "q1pyz1mcmhvi9ntc",
  "present": false
}
[dev] [2025-11-12T04:34:05.136Z] [DEBUG][q1pyz1mc] [Middleware] Outgoing response
Context: {
  "requestId": "q1pyz1mcmhvi9ntc",
  "status": 404,
  "statusText": "Not Found",
  "headers": {
    "content-type": "text/html",
    "x-astro-reroute": "no",
    "x-astro-route-type": "page"
  }
}
[dev] [2025-11-12T04:34:05.136Z] [DEBUG][q1pyz1mc] [Middleware] Processing path
Context: {
  "requestId": "q1pyz1mcmhvi9ntc",
  "path": "/api/billing/sync"
}
[2025-11-12T04:34:05.136Z] [INFO][q1pyz1mc] POST /api/billing/sync -> 404
Context: {
  "requestId": "q1pyz1mcmhvi9ntc",
  "duration": 0,
  "status": 404
}
[dev] [wrangler:info] POST /api/billing/sync 404 Not Found (248ms)
[dev] [2025-11-12T04:34:05.138Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/debug-login',
    method: 'POST',
    action: 'debug_login'
  }
}
[dev] [2025-11-12T04:34:05.140Z] [INFO][U:d44cd9d1-b68d-41bd-9c69-87ac5bda927f] Security Event: USER_EVENT
Context: {
  "userId": "d44cd9d1-b68d-41bd-9c69-87ac5bda927f",
  "securityEventType": "USER_EVENT",
  "originalDetails": {
    "eventType": "debug_login_created",
    "ipAddress": "::1",
    "debugUser": true
  },
  "logLevel": "info",
  "eventSnapshot": {
    "type": "USER_EVENT",
    "userId": "d44cd9d1-b68d-41bd-9c69-87ac5bda927f",
    "timestamp": 1762922045140,
    "details": {
      "eventType": "debug_login_created",
      "ipAddress": "::1",
      "debugUser": true
    }
  }
}
[dev] [2025-11-12T04:34:05.140Z] [DEBUG][lnetp3xv] [Middleware] Outgoing response
Context: {
  "requestId": "lnetp3xvmhvi9ntb",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:05.140Z] [DEBUG][lnetp3xv] [Middleware] Processing path
Context: {
  "requestId": "lnetp3xvmhvi9ntb",
  "path": "/api/debug-login"
}
[2025-11-12T04:34:05.140Z] [INFO][lnetp3xv] POST /api/debug-login -> 200 (5ms)
Context: {
  "requestId": "lnetp3xvmhvi9ntb",
  "duration": 5,
  "status": 200
}
[dev] [wrangler:info] POST /api/debug-login 200 OK (113ms)
 âœ“ |integration| tests/integration/blog.test.ts > Blog Integration > sollte die Blog-Ãœbersichtsseite korrekt anzeigen 182ms
[dev] [2025-11-12T04:34:05.228Z] [INFO][3afziltq] POST /api/billing/link-pending
Context: {
  "requestId": "3afziltqmhvi9nvw",
  "endpoint": "/api/billing/link-pending",
  "method": "POST"
}
[dev] [2025-11-12T04:34:05.228Z] [DEBUG][3afziltq] [Middleware] Session ID from cookie
Context: {
  "requestId": "3afziltqmhvi9nvw",
  "present": false
}
05:34:05 [WARN] [router] No API Route handler exists for the method "POST" for the route "/api/billing/link-pending".
Found handlers: "GET"

[2025-11-12T04:34:05.229Z] [DEBUG][3afziltq] [Middleware] Outgoing response
Context: {
  "requestId": "3afziltqmhvi9nvw",
  "status": 404,
  "statusText": "Not Found",
  "headers": "[empty object]"
}
[2025-11-12T04:34:05.229Z] [DEBUG][3afziltq] [Middleware] Processing path
Context: {
  "requestId": "3afziltqmhvi9nvw",
  "path": "/api/billing/link-pending"
}
[2025-11-12T04:34:05.229Z] [INFO][3afziltq] POST /api/billing/link-pending -> 404 (1ms)
Context: {
  "requestId": "3afziltqmhvi9nvw",
  "duration": 1,
  "status": 404
}
[dev] [2025-11-12T04:34:05.229Z] [INFO][vlu4o4ai] POST /api/billing/link-pending
Context: {
  "requestId": "vlu4o4aimhvi9nvx",
  "endpoint": "/api/billing/link-pending",
  "method": "POST"
}
[2025-11-12T04:34:05.229Z] [DEBUG][vlu4o4ai] [Middleware] Session ID from cookie
Context: {
  "requestId": "vlu4o4aimhvi9nvx",
  "present": false
}
[2025-11-12T04:34:05.229Z] [DEBUG][vlu4o4ai] [Middleware] Outgoing response
Context: {
  "requestId": "vlu4o4aimhvi9nvx",
  "status": 404,
  "statusText": "Not Found",
  "headers": {
    "content-type": "text/html",
    "x-astro-reroute": "no",
    "x-astro-route-type": "page"
  }
}
[dev] [2025-11-12T04:34:05.229Z] [DEBUG][vlu4o4ai] [Middleware] Processing path
Context: {
  "requestId": "vlu4o4aimhvi9nvx",
  "path": "/api/billing/link-pending"
}
[dev] [2025-11-12T04:34:05.229Z] [INFO][vlu4o4ai] POST /api/billing/link-pending -> 404
Context: {
  "requestId": "vlu4o4aimhvi9nvx",
  "duration": 0,
  "status": 404
}
[2025-11-12T04:34:05.230Z] [INFO][kazv761m] GET /blog/new-work-ist-eine-haltung
Context: {
  "requestId": "kazv761mmhvi9nvy",
  "endpoint": "/blog/new-work-ist-eine-haltung",
  "method": "GET"
}
[2025-11-12T04:34:05.230Z] [DEBUG][kazv761m] [Middleware] Session ID from cookie
Context: {
  "requestId": "kazv761mmhvi9nvy",
  "present": false
}
[dev] [2025-11-12T04:34:05.232Z] [DEBUG][kazv761m] [Middleware] Outgoing response
Context: {
  "requestId": "kazv761mmhvi9nvy",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "text/html",
    "x-astro-route-type": "page"
  }
}
[dev] [2025-11-12T04:34:05.232Z] [DEBUG][kazv761m] [Middleware] Processing path
Context: {
  "requestId": "kazv761mmhvi9nvy",
  "path": "/blog/new-work-ist-eine-haltung"
}
[dev] [2025-11-12T04:34:05.232Z] [INFO][kazv761m] GET /blog/new-work-ist-eine-haltung -> 200 (2ms)
Context: {
  "requestId": "kazv761mmhvi9nvy",
  "duration": 2,
  "status": 200
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1mWarning: Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:[0m

  1. You might have mismatching versions of React and the renderer (such as React DOM)
  2. You might be breaking the Rules of Hooks
  3. You might have more than one copy of React in the same app
  See [4mhttps://reactjs.org/link/invalid-hook-call[0m for tips about how to debug and fix this problem.
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1mWarning: Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:[0m

  1. You might have mismatching versions of React and the renderer (such as React DOM)
  2. You might be breaking the Rules of Hooks
  3. You might have more than one copy of React in the same app
  See [4mhttps://reactjs.org/link/invalid-hook-call[0m for tips about how to debug and fix this problem.
[dev] [2025-11-12T04:34:05.235Z] [INFO][kvppzbn9] GET /api/admin/users/summary
Context: {
  "requestId": "kvppzbn9mhvi9nw3",
  "endpoint": "/api/admin/users/summary",
  "method": "GET"
}
[2025-11-12T04:34:05.236Z] [DEBUG][kvppzbn9] [Middleware] Session ID from cookie
Context: {
  "requestId": "kvppzbn9mhvi9nw3",
  "present": false
}
[2025-11-12T04:34:05.236Z] [INFO][ayl2u1n7] GET /api/admin/audit/logs
Context: {
  "requestId": "ayl2u1n7mhvi9nw4",
  "endpoint": "/api/admin/audit/logs",
  "method": "GET"
}
[2025-11-12T04:34:05.236Z] [DEBUG][ayl2u1n7] [Middleware] Session ID from cookie
Context: {
  "requestId": "ayl2u1n7mhvi9nw4",
  "present": false
}
 âœ“ |integration| tests/integration/billing-api.test.ts > Billing-API-Integration > Fehlerbehandlung > sollte strukturierte Fehler fÃ¼r alle Billing-Endpunkte zurÃ¼ckgeben 460ms
[dev] [wrangler:info] GET /blog/new-work-ist-eine-haltung 200 OK (189ms)
[dev] [wrangler:info] POST /api/billing/link-pending 404 Not Found (99ms)
[2025-11-12T04:34:05.240Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: { endpoint: '/api/admin/audit/logs', method: 'GET' }
}
[dev] [2025-11-12T04:34:05.240Z] [DEBUG][ayl2u1n7] [Middleware] Outgoing response
Context: {
  "requestId": "ayl2u1n7mhvi9nw4",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:05.240Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: {
      reason: 'unauthenticated_access',
      endpoint: '/api/admin/audit/logs'
    }
  }


[31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:05.240Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: {
      reason: 'unauthenticated_access',
      endpoint: '/api/admin/users/summary'
    }
  }
[dev] [2025-11-12T04:34:05.240Z] [DEBUG][ayl2u1n7] [Middleware] Processing path
Context: {
  "requestId": "ayl2u1n7mhvi9nw4",
  "path": "/api/admin/audit/logs"
}
[2025-11-12T04:34:05.240Z] [INFO][ayl2u1n7] GET /api/admin/audit/logs -> 401 (4ms)
Context: {
  "requestId": "ayl2u1n7mhvi9nw4",
  "duration": 4,
  "status": 401
}
[2025-11-12T04:34:05.240Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: { endpoint: '/api/admin/users/summary', method: 'GET' }
}
[2025-11-12T04:34:05.240Z] [DEBUG][kvppzbn9] [Middleware] Outgoing response
Context: {
  "requestId": "kvppzbn9mhvi9nw3",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:05.241Z] [DEBUG][kvppzbn9] [Middleware] Processing path
Context: {
  "requestId": "kvppzbn9mhvi9nw3",
  "path": "/api/admin/users/summary"
}
[2025-11-12T04:34:05.241Z] [INFO][kvppzbn9] GET /api/admin/users/summary -> 401 (6ms)
Context: {
  "requestId": "kvppzbn9mhvi9nw3",
  "duration": 6,
  "status": 401
}
[dev] [wrangler:info] GET /api/admin/audit/logs 401 Unauthorized (154ms)
[dev] [wrangler:info] GET /api/admin/users/summary 401 Unauthorized (156ms)
 âœ“ |integration| tests/integration/blog.test.ts > Blog Integration > sollte einen einzelnen Blog-Post korrekt anzeigen 206ms
[dev] [2025-11-12T04:34:05.253Z] [INFO][0xlqoznq] DELETE /api/billing/session
Context: {
  "requestId": "0xlqoznqmhvi9nwl",
  "endpoint": "/api/billing/session",
  "method": "DELETE"
}
[dev] [2025-11-12T04:34:05.254Z] [DEBUG][0xlqoznq] [Middleware] Session ID from cookie
Context: {
  "requestId": "0xlqoznqmhvi9nwl",
  "present": false
}
05:34:05 [WARN] [router] No API Route handler exists for the method "DELETE" for the route "/api/billing/session".
Found handlers: "POST"

[2025-11-12T04:34:05.254Z] [DEBUG][0xlqoznq] [Middleware] Outgoing response
Context: {
  "requestId": "0xlqoznqmhvi9nwl",
  "status": 404,
  "statusText": "Not Found",
  "headers": "[empty object]"
}
[2025-11-12T04:34:05.254Z] [DEBUG][0xlqoznq] [Middleware] Processing path
Context: {
  "requestId": "0xlqoznqmhvi9nwl",
  "path": "/api/billing/session"
}
[2025-11-12T04:34:05.254Z] [INFO][0xlqoznq] DELETE /api/billing/session -> 404 (1ms)
Context: {
  "requestId": "0xlqoznqmhvi9nwl",
  "duration": 1,
  "status": 404
}
[2025-11-12T04:34:05.254Z] [INFO][2qso2zcr] DELETE /api/billing/session
Context: {
  "requestId": "2qso2zcrmhvi9nwm",
  "endpoint": "/api/billing/session",
  "method": "DELETE"
}
[2025-11-12T04:34:05.254Z] [DEBUG][2qso2zcr] [Middleware] Session ID from cookie
Context: {
  "requestId": "2qso2zcrmhvi9nwm",
  "present": false
}
[2025-11-12T04:34:05.254Z] [DEBUG][2qso2zcr] [Middleware] Outgoing response
Context: {
  "requestId": "2qso2zcrmhvi9nwm",
  "status": 404,
  "statusText": "Not Found",
  "headers": {
    "content-type": "text/html",
    "x-astro-reroute": "no",
    "x-astro-route-type": "page"
  }
}
[dev] [2025-11-12T04:34:05.254Z] [DEBUG][2qso2zcr] [Middleware] Processing path
Context: {
  "requestId": "2qso2zcrmhvi9nwm",
  "path": "/api/billing/session"
}
[2025-11-12T04:34:05.254Z] [INFO][2qso2zcr] DELETE /api/billing/session -> 404
Context: {
  "requestId": "2qso2zcrmhvi9nwm",
  "duration": 0,
  "status": 404
}
[dev] [2025-11-12T04:34:05.255Z] [INFO][gzm9b07f] POST /api/admin/users/set-plan
Context: {
  "requestId": "gzm9b07fmhvi9nwn",
  "endpoint": "/api/admin/users/set-plan",
  "method": "POST"
}
[2025-11-12T04:34:05.255Z] [DEBUG][gzm9b07f] [Middleware] Session ID from cookie
Context: {
  "requestId": "gzm9b07fmhvi9nwn",
  "present": true
}
[dev] [2025-11-12T04:34:05.257Z] [DEBUG][gzm9b07f] [Middleware] Session validation result
Context: {
  "requestId": "gzm9b07fmhvi9nwn",
  "sessionValid": true,
  "userValid": true
}
[dev] [wrangler:info] DELETE /api/billing/session 404 Not Found (17ms)
[dev] [2025-11-12T04:34:05.257Z] [DEBUG][7nok5nyt] [Middleware] Outgoing response
Context: {
  "requestId": "7nok5nytmhvi9mwf",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY",
    "x-xss-protection": "1; mode=block"
  }
}
[2025-11-12T04:34:05.257Z] [DEBUG][7nok5nyt] [Middleware] Processing path
Context: {
  "requestId": "7nok5nytmhvi9mwf",
  "path": "/api/test/seed-suite-v2"
}
[2025-11-12T04:34:05.258Z] [INFO][7nok5nyt] POST /api/test/seed-suite-v2 -> 200 (1307ms)
Context: {
  "requestId": "7nok5nytmhvi9mwf",
  "duration": 1307,
  "status": 200
}
[dev] [2025-11-12T04:34:05.262Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'd44cd9d1-b68d-41bd-9c69-87ac5bda927f',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/admin/users/set-plan',
    method: 'POST',
    action: 'admin_set_plan'
  }
}
[wrangler:info] POST /api/test/seed-suite-v2 200 OK (1314ms)
[dev] [2025-11-12T04:34:05.266Z] [DEBUG][gzm9b07f] [Middleware] Outgoing response
Context: {
  "requestId": "gzm9b07fmhvi9nwn",
  "status": 403,
  "statusText": "Forbidden",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:05.266Z] [DEBUG][gzm9b07f] [Middleware] Processing path
Context: {
  "requestId": "gzm9b07fmhvi9nwn",
  "path": "/api/admin/users/set-plan"
}
[2025-11-12T04:34:05.266Z] [INFO][gzm9b07f] POST /api/admin/users/set-plan -> 403 (11ms)
Context: {
  "requestId": "gzm9b07fmhvi9nwn",
  "duration": 11,
  "status": 403
}
 âœ“ |integration| tests/integration/api/admin-users-set-plan.test.ts > Admin Users Set Plan â€” method/CSRF/auth checks > debug-login then POST /api/admin/users/set-plan with CSRF â†’ 403 for non-admin 244ms
[dev] [wrangler:info] POST /api/admin/users/set-plan 403 Forbidden (124ms)
[2025-11-12T04:34:05.268Z] [INFO][irpzia78] GET /blog
Context: {
  "requestId": "irpzia78mhvi9nx0",
  "endpoint": "/blog",
  "method": "GET"
}
[2025-11-12T04:34:05.268Z] [DEBUG][irpzia78] [Middleware] Session ID from cookie
Context: {
  "requestId": "irpzia78mhvi9nx0",
  "present": false
}
[dev] [33mâ–² [43;33m[[43;30mWARNING[43;33m][0m [1mKey "pages.blog.search.tags_placeholder" not found in locale "de". Falling back to English.[0m
[dev] [2025-11-12T04:34:05.271Z] [DEBUG][irpzia78] [Middleware] Outgoing response
Context: {
  "requestId": "irpzia78mhvi9nx0",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "text/html",
    "x-astro-route-type": "page"
  }
}
[2025-11-12T04:34:05.271Z] [DEBUG][irpzia78] [Middleware] Processing path
Context: {
  "requestId": "irpzia78mhvi9nx0",
  "path": "/blog"
}
[2025-11-12T04:34:05.271Z] [INFO][irpzia78] GET /blog -> 200 (3ms)
Context: {
  "requestId": "irpzia78mhvi9nx0",
  "duration": 3,
  "status": 200
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1mWarning: Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:[0m

  1. You might have mismatching versions of React and the renderer (such as React DOM)
  2. You might be breaking the Rules of Hooks
  3. You might have more than one copy of React in the same app
  See [4mhttps://reactjs.org/link/invalid-hook-call[0m for tips about how to debug and fix this problem.
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1mWarning: Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:[0m

  1. You might have mismatching versions of React and the renderer (such as React DOM)
  2. You might be breaking the Rules of Hooks
  3. You might have more than one copy of React in the same app
  See [4mhttps://reactjs.org/link/invalid-hook-call[0m for tips about how to debug and fix this problem.
[dev] [2025-11-12T04:34:05.274Z] [INFO][q64u00ix] GET /api/admin/audit/logs/nonexistent
Context: {
  "requestId": "q64u00ixmhvi9nx6",
  "endpoint": "/api/admin/audit/logs/nonexistent",
  "method": "GET"
}
[2025-11-12T04:34:05.274Z] [DEBUG][q64u00ix] [Middleware] Session ID from cookie
Context: {
  "requestId": "q64u00ixmhvi9nx6",
  "present": false
}
[2025-11-12T04:34:05.274Z] [INFO][cnljfvsb] POST /api/debug-login
Context: {
  "requestId": "cnljfvsbmhvi9nx6",
  "endpoint": "/api/debug-login",
  "method": "POST"
}
[2025-11-12T04:34:05.274Z] [DEBUG][cnljfvsb] [Middleware] Session ID from cookie
Context: {
  "requestId": "cnljfvsbmhvi9nx6",
  "present": false
}
[wrangler:info] GET /blog 200 OK (25ms)
[dev] [2025-11-12T04:34:05.282Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/debug-login',
    method: 'POST',
    action: 'debug_login'
  }
}
[2025-11-12T04:34:05.282Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: { endpoint: '/api/admin/audit/logs/nonexistent', method: 'GET' }
}
[2025-11-12T04:34:05.283Z] [DEBUG][q64u00ix] [Middleware] Outgoing response
Context: {
  "requestId": "q64u00ixmhvi9nx6",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:05.283Z] [DEBUG][q64u00ix] [Middleware] Processing path
Context: {
  "requestId": "q64u00ixmhvi9nx6",
  "path": "/api/admin/audit/logs/nonexistent"
}
[2025-11-12T04:34:05.283Z] [INFO][q64u00ix] GET /api/admin/audit/logs/nonexistent -> 401 (9ms)
Context: {
  "requestId": "q64u00ixmhvi9nx6",
  "duration": 9,
  "status": 401
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:05.282Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: {
      reason: 'unauthenticated_access',
      endpoint: '/api/admin/audit/logs/nonexistent'
    }
  }
[dev] [2025-11-12T04:34:05.286Z] [INFO][U:d44cd9d1-b68d-41bd-9c69-87ac5bda927f] Security Event: USER_EVENT
Context: {
  "userId": "d44cd9d1-b68d-41bd-9c69-87ac5bda927f",
  "securityEventType": "USER_EVENT",
  "originalDetails": {
    "eventType": "debug_login_created",
    "ipAddress": "::1",
    "debugUser": true
  },
  "logLevel": "info",
  "eventSnapshot": {
    "type": "USER_EVENT",
    "userId": "d44cd9d1-b68d-41bd-9c69-87ac5bda927f",
    "timestamp": 1762922045286,
    "details": {
      "eventType": "debug_login_created",
      "ipAddress": "::1",
      "debugUser": true
    }
  }
}
[2025-11-12T04:34:05.286Z] [DEBUG][cnljfvsb] [Middleware] Outgoing response
Context: {
  "requestId": "cnljfvsbmhvi9nx6",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:05.286Z] [DEBUG][cnljfvsb] [Middleware] Processing path
Context: {
  "requestId": "cnljfvsbmhvi9nx6",
  "path": "/api/debug-login"
}
[2025-11-12T04:34:05.286Z] [INFO][cnljfvsb] POST /api/debug-login -> 200 (12ms)
Context: {
  "requestId": "cnljfvsbmhvi9nx6",
  "duration": 12,
  "status": 200
}
[dev] [wrangler:info] GET /api/admin/audit/logs/nonexistent 401 Unauthorized (43ms)
 âœ“ |integration| tests/integration/api/admin-audit-logs.test.ts > Admin Audit Logs API â€” unauth/405 smokes > GET /api/admin/audit/logs â†’ 401 unauthenticated 182ms
 âœ“ |integration| tests/integration/api/admin-audit-logs.test.ts > Admin Audit Logs API â€” unauth/405 smokes > GET /api/admin/audit/logs/{id} â†’ 401 unauthenticated 48ms
[dev] [2025-11-12T04:34:05.297Z] [INFO][39hfirjy] POST /api/test/seed-referral-events
Context: {
  "requestId": "39hfirjymhvi9nxt",
  "endpoint": "/api/test/seed-referral-events",
  "method": "POST"
}
[2025-11-12T04:34:05.297Z] [DEBUG][39hfirjy] [Middleware] Session ID from cookie
Context: {
  "requestId": "39hfirjymhvi9nxt",
  "present": false
}
[2025-11-12T04:34:05.297Z] [INFO][3iytgkdu] DELETE /api/billing/credits
Context: {
  "requestId": "3iytgkdumhvi9nxt",
  "endpoint": "/api/billing/credits",
  "method": "DELETE"
}
[2025-11-12T04:34:05.297Z] [DEBUG][3iytgkdu] [Middleware] Session ID from cookie
Context: {
  "requestId": "3iytgkdumhvi9nxt",
  "present": false
}
05:34:05 [WARN] [router] No API Route handler exists for the method "DELETE" for the route "/api/billing/credits".
Found handlers: "POST"

[2025-11-12T04:34:05.297Z] [DEBUG][3iytgkdu] [Middleware] Outgoing response
Context: {
  "requestId": "3iytgkdumhvi9nxt",
  "status": 404,
  "statusText": "Not Found",
  "headers": "[empty object]"
}
[2025-11-12T04:34:05.298Z] [DEBUG][3iytgkdu] [Middleware] Processing path
Context: {
  "requestId": "3iytgkdumhvi9nxt",
  "path": "/api/billing/credits"
}
[2025-11-12T04:34:05.298Z] [INFO][3iytgkdu] DELETE /api/billing/credits -> 404 (1ms)
Context: {
  "requestId": "3iytgkdumhvi9nxt",
  "duration": 1,
  "status": 404
}
[2025-11-12T04:34:05.298Z] [INFO][3ygqgivi] DELETE /api/billing/credits
Context: {
  "requestId": "3ygqgivimhvi9nxu",
  "endpoint": "/api/billing/credits",
  "method": "DELETE"
}
[2025-11-12T04:34:05.298Z] [DEBUG][3ygqgivi] [Middleware] Session ID from cookie
Context: {
  "requestId": "3ygqgivimhvi9nxu",
  "present": false
}
[2025-11-12T04:34:05.298Z] [DEBUG][3ygqgivi] [Middleware] Outgoing response
Context: {
  "requestId": "3ygqgivimhvi9nxu",
  "status": 404,
  "statusText": "Not Found",
  "headers": {
    "content-type": "text/html",
    "x-astro-reroute": "no",
    "x-astro-route-type": "page"
  }
}
[2025-11-12T04:34:05.298Z] [DEBUG][3ygqgivi] [Middleware] Processing path
Context: {
  "requestId": "3ygqgivimhvi9nxu",
  "path": "/api/billing/credits"
}
[2025-11-12T04:34:05.298Z] [INFO][3ygqgivi] DELETE /api/billing/credits -> 404
Context: {
  "requestId": "3ygqgivimhvi9nxu",
  "duration": 0,
  "status": 404
}
[dev] [wrangler:info] POST /api/debug-login 200 OK (47ms)
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:05.299Z] [ERROR] rewrite_llm_failed {[0m

    timestamp: {},
    resource: 'prompt-enhancer-service',
    metadata: {
      message: "Cannot read properties of undefined (reading '_client')",
      status: 'unknown'
    }
  }
[dev] [33mâ–² [43;33m[[43;30mWARNING[43;33m][0m [1m[2025-11-12T04:34:05.299Z] [WARN] rewrite_fallback {[0m

    timestamp: {},
    resource: 'prompt-enhancer-service',
    metadata: { reason: 'Provider service error' }
  }
[dev] [2025-11-12T04:34:05.300Z] [INFO] enhance_completed {
  timestamp: {},
  resource: 'prompt-enhancer-service',
  requestId: 'enhance-1762922044766-7jxfj',
  metadata: {
    latency: 534,
    enhancedLength: 521,
    maskedCount: 0,
    aiUsed: true,
    path: 'deterministic'
  }
}
[2025-11-12T04:34:05.300Z] [DEBUG][hfkn5nj9] [Middleware] Outgoing response
Context: {
  "requestId": "hfkn5nj9mhvi9nim",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:05.300Z] [DEBUG][hfkn5nj9] [Middleware] Processing path
Context: {
  "requestId": "hfkn5nj9mhvi9nim",
  "path": "/api/prompt-enhance"
}
[2025-11-12T04:34:05.300Z] [INFO][hfkn5nj9] POST /api/prompt-enhance -> 200 (550ms)
Context: {
  "requestId": "hfkn5nj9mhvi9nim",
  "duration": 550,
  "status": 200
}
[dev] [2025-11-12T04:34:05.322Z] [DEBUG][39hfirjy] [Middleware] Outgoing response
Context: {
  "requestId": "39hfirjymhvi9nxt",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY",
    "x-xss-protection": "1; mode=block"
  }
}
[2025-11-12T04:34:05.325Z] [DEBUG][39hfirjy] [Middleware] Processing path
Context: {
  "requestId": "39hfirjymhvi9nxt",
  "path": "/api/test/seed-referral-events"
}
[2025-11-12T04:34:05.325Z] [INFO][39hfirjy] POST /api/test/seed-referral-events -> 200 (28ms)
Context: {
  "requestId": "39hfirjymhvi9nxt",
  "duration": 28,
  "status": 200
}
[2025-11-12T04:34:05.326Z] [INFO][ot7vl21h] POST /api/admin/audit/logs
Context: {
  "requestId": "ot7vl21hmhvi9nym",
  "endpoint": "/api/admin/audit/logs",
  "method": "POST"
}
[2025-11-12T04:34:05.326Z] [DEBUG][ot7vl21h] [Middleware] Session ID from cookie
Context: {
  "requestId": "ot7vl21hmhvi9nym",
  "present": false
}
[2025-11-12T04:34:05.326Z] [DEBUG][ot7vl21h] [Middleware] Outgoing response
Context: {
  "requestId": "ot7vl21hmhvi9nym",
  "status": 405,
  "statusText": "Method Not Allowed",
  "headers": {
    "allow": "GET",
    "content-type": "application/json"
  }
}
[2025-11-12T04:34:05.327Z] [DEBUG][ot7vl21h] [Middleware] Processing path
Context: {
  "requestId": "ot7vl21hmhvi9nym",
  "path": "/api/admin/audit/logs"
}
[2025-11-12T04:34:05.327Z] [INFO][ot7vl21h] POST /api/admin/audit/logs -> 405 (1ms)
Context: {
  "requestId": "ot7vl21hmhvi9nym",
  "duration": 1,
  "status": 405
}
[dev] [wrangler:info] DELETE /api/billing/credits 404 Not Found (65ms)
[dev] [wrangler:info] POST /api/prompt-enhance 200 OK (703ms)
[dev] [2025-11-12T04:34:05.340Z] [INFO][ocik115v] GET /api/admin/users/summary
Context: {
  "requestId": "ocik115vmhvi9nz0",
  "endpoint": "/api/admin/users/summary",
  "method": "GET"
}
[2025-11-12T04:34:05.341Z] [DEBUG][ocik115v] [Middleware] Session ID from cookie
Context: {
  "requestId": "ocik115vmhvi9nz0",
  "present": true
}
[dev] [2025-11-12T04:34:05.341Z] [DEBUG][ocik115v] [Middleware] Session validation result
Context: {
  "requestId": "ocik115vmhvi9nz0",
  "sessionValid": true,
  "userValid": true
}
 âœ“ |integration| tests/integration/prompt-enhance-multipart.test.ts > POST /api/prompt-enhance (multipart) > accepts text/plain + text and returns success 713ms
[dev] [2025-11-12T04:34:05.344Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'd44cd9d1-b68d-41bd-9c69-87ac5bda927f',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: { endpoint: '/api/admin/users/summary', method: 'GET' }
}
[dev] [wrangler:info] POST /api/test/seed-referral-events 200 OK (67ms)
[wrangler:info] POST /api/admin/audit/logs 405 Method Not Allowed (41ms)
[dev] [2025-11-12T04:34:05.345Z] [DEBUG][ocik115v] [Middleware] Outgoing response
Context: {
  "requestId": "ocik115vmhvi9nz0",
  "status": 403,
  "statusText": "Forbidden",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:05.345Z] [DEBUG][ocik115v] [Middleware] Processing path
Context: {
  "requestId": "ocik115vmhvi9nz0",
  "path": "/api/admin/users/summary"
}
[2025-11-12T04:34:05.345Z] [INFO][ocik115v] GET /api/admin/users/summary -> 403 (5ms)
Context: {
  "requestId": "ocik115vmhvi9nz0",
  "duration": 5,
  "status": 403
}
[2025-11-12T04:34:05.346Z] [INFO][ffuw79d6] GET /blog
Context: {
  "requestId": "ffuw79d6mhvi9nz6",
  "endpoint": "/blog",
  "method": "GET"
}
[dev] [2025-11-12T04:34:05.347Z] [DEBUG][ffuw79d6] [Middleware] Session ID from cookie
Context: {
  "requestId": "ffuw79d6mhvi9nz6",
  "present": false
}
[dev] [33mâ–² [43;33m[[43;30mWARNING[43;33m][0m [1mKey "pages.blog.search.tags_placeholder" not found in locale "de". Falling back to English.[0m
[dev] [2025-11-12T04:34:05.349Z] [DEBUG][ffuw79d6] [Middleware] Outgoing response
Context: {
  "requestId": "ffuw79d6mhvi9nz6",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "text/html",
    "x-astro-route-type": "page"
  }
}
[2025-11-12T04:34:05.349Z] [DEBUG][ffuw79d6] [Middleware] Processing path
Context: {
  "requestId": "ffuw79d6mhvi9nz6",
  "path": "/blog"
}
[2025-11-12T04:34:05.349Z] [INFO][ffuw79d6] GET /blog -> 200 (3ms)
Context: {
  "requestId": "ffuw79d6mhvi9nz6",
  "duration": 3,
  "status": 200
}
 âœ“ |integration| tests/integration/api/admin-users-credits.test.ts > Admin Users Summary â€” auth and role checks > GET /api/admin/users/summary?email=x â†’ 401 when unauthenticated 184ms
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1mWarning: Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:[0m

  1. You might have mismatching versions of React and the renderer (such as React DOM)
  2. You might be breaking the Rules of Hooks
  3. You might have more than one copy of React in the same app
  See [4mhttps://reactjs.org/link/invalid-hook-call[0m for tips about how to debug and fix this problem.
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1mWarning: Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:[0m

  1. You might have mismatching versions of React and the renderer (such as React DOM)
  2. You might be breaking the Rules of Hooks
  3. You might have more than one copy of React in the same app
  See [4mhttps://reactjs.org/link/invalid-hook-call[0m for tips about how to debug and fix this problem.
[dev] [wrangler:info] GET /api/admin/users/summary 403 Forbidden (11ms)
[dev] [wrangler:info] GET /blog 200 OK (8ms)
[dev] [2025-11-12T04:34:05.361Z] [INFO][1gotdixj] POST /api/admin/credits/grant
Context: {
  "requestId": "1gotdixjmhvi9nzl",
  "endpoint": "/api/admin/credits/grant",
  "method": "POST"
}
[dev] [2025-11-12T04:34:05.361Z] [DEBUG][1gotdixj] [Middleware] Session ID from cookie
Context: {
  "requestId": "1gotdixjmhvi9nzl",
  "present": false
}
[2025-11-12T04:34:05.362Z] [INFO] SECURITY_EVENT {
  timestamp: {},
  resource: 'security',
  ipAddress: '::1',
  type: 'SUSPICIOUS_ACTIVITY',
  details: {
    reason: 'csrf_token_mismatch',
    endpoint: '/api/admin/credits/grant',
    hasHeader: false,
    hasCookie: false
  }
}
[2025-11-12T04:34:05.362Z] [DEBUG][1gotdixj] [Middleware] Outgoing response
Context: {
  "requestId": "1gotdixjmhvi9nzl",
  "status": 403,
  "statusText": "Forbidden",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:05.362Z] [DEBUG][1gotdixj] [Middleware] Processing path
Context: {
  "requestId": "1gotdixjmhvi9nzl",
  "path": "/api/admin/credits/grant"
}
[2025-11-12T04:34:05.362Z] [INFO][1gotdixj] POST /api/admin/credits/grant -> 403 (1ms)
Context: {
  "requestId": "1gotdixjmhvi9nzl",
  "duration": 1,
  "status": 403
}
[2025-11-12T04:34:05.362Z] [INFO][m5b1fwjj] DELETE /api/billing/sync
Context: {
  "requestId": "m5b1fwjjmhvi9nzm",
  "endpoint": "/api/billing/sync",
  "method": "DELETE"
}
 âœ“ |integration| tests/integration/blog.test.ts > Blog Integration > sollte Blog-Posts nach Kategorie filtern kÃ¶nnen 73ms
 âœ“ |integration| tests/integration/blog.test.ts > Blog Integration > sollte Blog-Posts nach Tag filtern kÃ¶nnen 37ms
[dev] [2025-11-12T04:34:05.363Z] [DEBUG][m5b1fwjj] [Middleware] Session ID from cookie
Context: {
  "requestId": "m5b1fwjjmhvi9nzm",
  "present": false
}
05:34:05 [WARN] [router] No API Route handler exists for the method "DELETE" for the route "/api/billing/sync".
Found handlers: "GET"

[2025-11-12T04:34:05.363Z] [DEBUG][m5b1fwjj] [Middleware] Outgoing response
Context: {
  "requestId": "m5b1fwjjmhvi9nzm",
  "status": 404,
  "statusText": "Not Found",
  "headers": "[empty object]"
}
[dev] [2025-11-12T04:34:05.363Z] [DEBUG][m5b1fwjj] [Middleware] Processing path
Context: {
  "requestId": "m5b1fwjjmhvi9nzm",
  "path": "/api/billing/sync"
}
[2025-11-12T04:34:05.363Z] [INFO][m5b1fwjj] DELETE /api/billing/sync -> 404 (1ms)
Context: {
  "requestId": "m5b1fwjjmhvi9nzm",
  "duration": 1,
  "status": 404
}
[2025-11-12T04:34:05.364Z] [INFO][x2y882mb] DELETE /api/billing/sync
Context: {
  "requestId": "x2y882mbmhvi9nzo",
  "endpoint": "/api/billing/sync",
  "method": "DELETE"
}
[2025-11-12T04:34:05.364Z] [DEBUG][x2y882mb] [Middleware] Session ID from cookie
Context: {
  "requestId": "x2y882mbmhvi9nzo",
  "present": false
}
[2025-11-12T04:34:05.364Z] [DEBUG][x2y882mb] [Middleware] Outgoing response
Context: {
  "requestId": "x2y882mbmhvi9nzo",
  "status": 404,
  "statusText": "Not Found",
  "headers": {
    "content-type": "text/html",
    "x-astro-reroute": "no",
    "x-astro-route-type": "page"
  }
}
[2025-11-12T04:34:05.364Z] [DEBUG][x2y882mb] [Middleware] Processing path
Context: {
  "requestId": "x2y882mbmhvi9nzo",
  "path": "/api/billing/sync"
}
[2025-11-12T04:34:05.364Z] [INFO][x2y882mb] DELETE /api/billing/sync -> 404
Context: {
  "requestId": "x2y882mbmhvi9nzo",
  "duration": 0,
  "status": 404
}
[2025-11-12T04:34:05.364Z] [INFO][nrobo3s4] POST /api/prompt-enhance
Context: {
  "requestId": "nrobo3s4mhvi9nzo",
  "endpoint": "/api/prompt-enhance",
  "method": "POST"
}
[2025-11-12T04:34:05.364Z] [DEBUG][nrobo3s4] [Middleware] Session ID from cookie
Context: {
  "requestId": "nrobo3s4mhvi9nzo",
  "present": false
}
[dev] [2025-11-12T04:34:05.364Z] [INFO][chmqnrwt] POST /api/debug-login
Context: {
  "requestId": "chmqnrwtmhvi9nzo",
  "endpoint": "/api/debug-login",
  "method": "POST"
}
[2025-11-12T04:34:05.364Z] [DEBUG][chmqnrwt] [Middleware] Session ID from cookie
Context: {
  "requestId": "chmqnrwtmhvi9nzo",
  "present": false
}
[2025-11-12T04:34:05.365Z] [INFO][w97ezf22] GET /api/admin/referrals/list
Context: {
  "requestId": "w97ezf22mhvi9nzp",
  "endpoint": "/api/admin/referrals/list",
  "method": "GET"
}
[2025-11-12T04:34:05.365Z] [DEBUG][w97ezf22] [Middleware] Session ID from cookie
Context: {
  "requestId": "w97ezf22mhvi9nzp",
  "present": false
}
[dev] [wrangler:info] POST /api/admin/credits/grant 403 Forbidden (12ms)
[dev] [wrangler:info] DELETE /api/billing/sync 404 Not Found (21ms)
 âœ“ |integration| tests/integration/billing-api.test.ts > Billing-API-Integration > Fehlerbehandlung > sollte 405 fÃ¼r nicht unterstÃ¼tzte HTTP-Methoden zurÃ¼ckgeben 129ms
[dev] [2025-11-12T04:34:05.369Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/admin/referrals/list',
    method: 'GET',
    action: 'admin_referrals_list'
  }
}
 âœ“ |integration| tests/integration/api/admin-users-credits.test.ts > Admin Users Summary â€” auth and role checks > debug-login then GET /api/admin/users/summary â†’ 403 for non-admin 102ms
 âœ“ |integration| tests/integration/api/admin-users-credits.test.ts > Admin Credits Grant â€” CSRF enforcement > POST /api/admin/credits/grant without CSRF â†’ 403 16ms
[dev] [2025-11-12T04:34:05.369Z] [DEBUG][w97ezf22] [Middleware] Outgoing response
Context: {
  "requestId": "w97ezf22mhvi9nzp",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:05.369Z] [DEBUG][w97ezf22] [Middleware] Processing path
Context: {
  "requestId": "w97ezf22mhvi9nzp",
  "path": "/api/admin/referrals/list"
}
[2025-11-12T04:34:05.369Z] [INFO][w97ezf22] GET /api/admin/referrals/list -> 401 (4ms)
Context: {
  "requestId": "w97ezf22mhvi9nzp",
  "duration": 4,
  "status": 401
}
[2025-11-12T04:34:05.370Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: { endpoint: '/api/prompt-enhance', method: 'POST' }
}
[2025-11-12T04:34:05.370Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/debug-login',
    method: 'POST',
    action: 'debug_login'
  }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:05.369Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: {
      reason: 'unauthenticated_access',
      endpoint: '/api/admin/referrals/list'
    }
  }
[dev] [2025-11-12T04:34:05.370Z] [DEBUG][nrobo3s4] [Middleware] Outgoing response
Context: {
  "requestId": "nrobo3s4mhvi9nzo",
  "status": 400,
  "statusText": "Bad Request",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:05.370Z] [DEBUG][nrobo3s4] [Middleware] Processing path
Context: {
  "requestId": "nrobo3s4mhvi9nzo",
  "path": "/api/prompt-enhance"
}
[2025-11-12T04:34:05.370Z] [INFO][nrobo3s4] POST /api/prompt-enhance -> 400 (6ms)
Context: {
  "requestId": "nrobo3s4mhvi9nzo",
  "duration": 6,
  "status": 400
}
[dev] [2025-11-12T04:34:05.372Z] [INFO][U:d44cd9d1-b68d-41bd-9c69-87ac5bda927f] Security Event: USER_EVENT
Context: {
  "userId": "d44cd9d1-b68d-41bd-9c69-87ac5bda927f",
  "securityEventType": "USER_EVENT",
  "originalDetails": {
    "eventType": "debug_login_created",
    "ipAddress": "::1",
    "debugUser": true
  },
  "logLevel": "info",
  "eventSnapshot": {
    "type": "USER_EVENT",
    "userId": "d44cd9d1-b68d-41bd-9c69-87ac5bda927f",
    "timestamp": 1762922045372,
    "details": {
      "eventType": "debug_login_created",
      "ipAddress": "::1",
      "debugUser": true
    }
  }
}
[2025-11-12T04:34:05.372Z] [DEBUG][chmqnrwt] [Middleware] Outgoing response
Context: {
  "requestId": "chmqnrwtmhvi9nzo",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[dev] [2025-11-12T04:34:05.372Z] [DEBUG][chmqnrwt] [Middleware] Processing path
Context: {
  "requestId": "chmqnrwtmhvi9nzo",
  "path": "/api/debug-login"
}
[2025-11-12T04:34:05.372Z] [INFO][chmqnrwt] POST /api/debug-login -> 200 (8ms)
Context: {
  "requestId": "chmqnrwtmhvi9nzo",
  "duration": 8,
  "status": 200
}
[2025-11-12T04:34:05.373Z] [INFO][ln34fwfo] GET /blog/nicht-vorhanden
Context: {
  "requestId": "ln34fwfomhvi9nzx",
  "endpoint": "/blog/nicht-vorhanden",
  "method": "GET"
}
[2025-11-12T04:34:05.373Z] [DEBUG][ln34fwfo] [Middleware] Session ID from cookie
Context: {
  "requestId": "ln34fwfomhvi9nzx",
  "present": false
}
[2025-11-12T04:34:05.373Z] [DEBUG][ln34fwfo] [Middleware] Outgoing response
Context: {
  "requestId": "ln34fwfomhvi9nzx",
  "status": 302,
  "statusText": "Found",
  "headers": {
    "location": "/404",
    "x-astro-route-type": "page"
  }
}
[2025-11-12T04:34:05.373Z] [DEBUG][ln34fwfo] [Middleware] Processing path
Context: {
  "requestId": "ln34fwfomhvi9nzx",
  "path": "/blog/nicht-vorhanden"
}
[2025-11-12T04:34:05.374Z] [INFO][ln34fwfo] GET /blog/nicht-vorhanden -> 302 (1ms)
Context: {
  "requestId": "ln34fwfomhvi9nzx",
  "duration": 1,
  "status": 302
}
[wrangler:info] GET /api/admin/referrals/list 401 Unauthorized (23ms)
[wrangler:info] POST /api/prompt-enhance 400 Bad Request (25ms)
[dev] [wrangler:info] POST /api/debug-login 200 OK (24ms)
[dev] [wrangler:info] GET /blog/nicht-vorhanden 302 Found (10ms)
 âœ“ |integration| tests/integration/prompt-enhance-multipart.test.ts > POST /api/prompt-enhance (multipart) > rejects unsupported file type 32ms
 âœ“ |integration| tests/integration/prompt-enhance-multipart.test.ts > POST /api/prompt-enhance (multipart) > optionally accepts application/pdf when OPENAI key present 0ms
[dev] [2025-11-12T04:34:05.381Z] [INFO][2ex7qqs8] GET /api/admin/referrals/list
Context: {
  "requestId": "2ex7qqs8mhvi9o05",
  "endpoint": "/api/admin/referrals/list",
  "method": "GET"
}
[dev] [2025-11-12T04:34:05.382Z] [DEBUG][2ex7qqs8] [Middleware] Session ID from cookie
Context: {
  "requestId": "2ex7qqs8mhvi9o05",
  "present": true
}
[2025-11-12T04:34:05.382Z] [INFO][4iunryts] GET /404
Context: {
  "requestId": "4iunrytsmhvi9o06",
  "endpoint": "/404",
  "method": "GET"
}
[2025-11-12T04:34:05.382Z] [DEBUG][4iunryts] [Middleware] Session ID from cookie
Context: {
  "requestId": "4iunrytsmhvi9o06",
  "present": false
}
[dev] [2025-11-12T04:34:05.382Z] [DEBUG][4iunryts] [Middleware] Outgoing response
Context: {
  "requestId": "4iunrytsmhvi9o06",
  "status": 404,
  "statusText": "Not Found",
  "headers": {
    "content-type": "text/html",
    "x-astro-reroute": "no",
    "x-astro-route-type": "page"
  }
}
[2025-11-12T04:34:05.382Z] [DEBUG][4iunryts] [Middleware] Processing path
Context: {
  "requestId": "4iunrytsmhvi9o06",
  "path": "/404"
}
[2025-11-12T04:34:05.382Z] [INFO][4iunryts] GET /404 -> 404
Context: {
  "requestId": "4iunrytsmhvi9o06",
  "duration": 0,
  "status": 404
}
[2025-11-12T04:34:05.383Z] [INFO][azwvf086] GET /api/admin/audit/logs
Context: {
  "requestId": "azwvf086mhvi9o07",
  "endpoint": "/api/admin/audit/logs",
  "method": "GET"
}
[2025-11-12T04:34:05.383Z] [DEBUG][azwvf086] [Middleware] Session ID from cookie
Context: {
  "requestId": "azwvf086mhvi9o07",
  "present": true
}
[2025-11-12T04:34:05.384Z] [DEBUG][2ex7qqs8] [Middleware] Session validation result
Context: {
  "requestId": "2ex7qqs8mhvi9o05",
  "sessionValid": true,
  "userValid": true
}
[2025-11-12T04:34:05.384Z] [DEBUG][azwvf086] [Middleware] Session validation result
Context: {
  "requestId": "azwvf086mhvi9o07",
  "sessionValid": true,
  "userValid": true
}
[dev] [wrangler:info] GET /404 404 Not Found (9ms)
[dev] [2025-11-12T04:34:05.389Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'd44cd9d1-b68d-41bd-9c69-87ac5bda927f',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: { endpoint: '/api/admin/audit/logs', method: 'GET' }
}
 âœ“ |integration| tests/integration/blog.test.ts > Blog Integration > sollte eine 404-Seite fÃ¼r nicht vorhandene Blog-Posts anzeigen 26ms
[dev] [2025-11-12T04:34:05.390Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'e2e-admin-0001',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/admin/referrals/list',
    method: 'GET',
    action: 'admin_referrals_list'
  }
}
[2025-11-12T04:34:05.390Z] [DEBUG][2ex7qqs8] [Middleware] Outgoing response
Context: {
  "requestId": "2ex7qqs8mhvi9o05",
  "status": 403,
  "statusText": "Forbidden",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[dev] [2025-11-12T04:34:05.390Z] [DEBUG][2ex7qqs8] [Middleware] Processing path
Context: {
  "requestId": "2ex7qqs8mhvi9o05",
  "path": "/api/admin/referrals/list"
}
[2025-11-12T04:34:05.390Z] [INFO][2ex7qqs8] GET /api/admin/referrals/list -> 403 (9ms)
Context: {
  "requestId": "2ex7qqs8mhvi9o05",
  "duration": 9,
  "status": 403
}
[dev] [wrangler:info] GET /api/admin/referrals/list 403 Forbidden (13ms)
[dev] [2025-11-12T04:34:05.393Z] [DEBUG][azwvf086] [Middleware] Outgoing response
Context: {
  "requestId": "azwvf086mhvi9o07",
  "status": 403,
  "statusText": "Forbidden",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:05.393Z] [DEBUG][azwvf086] [Middleware] Processing path
Context: {
  "requestId": "azwvf086mhvi9o07",
  "path": "/api/admin/audit/logs"
}
[2025-11-12T04:34:05.393Z] [INFO][azwvf086] GET /api/admin/audit/logs -> 403 (10ms)
Context: {
  "requestId": "azwvf086mhvi9o07",
  "duration": 10,
  "status": 403
}
[dev] [wrangler:info] GET /api/admin/audit/logs 403 Forbidden (17ms)
 âœ“ |integration| tests/integration/api/admin-audit-logs.test.ts > Admin Audit Logs API â€” unauth/405 smokes > POST /api/admin/audit/logs â†’ 405 52ms
 âœ“ |integration| tests/integration/api/admin-referrals-list.test.ts > Admin Referrals List API > denies unauthenticated access with 401 30ms
 âœ“ |integration| tests/integration/api/admin-referrals-list.test.ts > Admin Referrals List API > returns 403 when feature flag disabled 17ms
 âœ“ |integration| tests/integration/api/admin-referrals-list.test.ts > Admin Referrals List API > lists referral events with pagination and filters 0ms
 âœ“ |integration| tests/integration/api/admin-audit-logs.test.ts > Admin Audit Logs API â€” authenticated (non-admin) â†’ 403 > POST /api/debug-login then GET /api/admin/audit/logs â†’ 403 (not admin) 53ms
[dev] [2025-11-12T04:34:05.626Z] [INFO][ixyem63d] POST /api/testing/evaluate/next/run
Context: {
  "requestId": "ixyem63dmhvi9o6y",
  "endpoint": "/api/testing/evaluate/next/run",
  "method": "POST"
}
[2025-11-12T04:34:05.626Z] [DEBUG][ixyem63d] [Middleware] Session ID from cookie
Context: {
  "requestId": "ixyem63dmhvi9o6y",
  "present": false
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:05.628Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/testing/evaluate/next/run",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "webEvalBrowser",
      "maxRequests": 5,
      "windowMs": 60000,
      "resetAt": 1762922046426
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/testing/evaluate/next/run",
      "ipAddress": "::1",
      "timestamp": 1762922045628,
      "details": {
        "limiterName": "webEvalBrowser",
        "maxRequests": 5,
        "windowMs": 60000,
        "resetAt": 1762922046426
      }
    }
  }
[dev] [2025-11-12T04:34:05.628Z] [DEBUG][ixyem63d] [Middleware] Outgoing response
Context: {
  "requestId": "ixyem63dmhvi9o6y",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "1",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:05.628Z] [DEBUG][ixyem63d] [Middleware] Processing path
Context: {
  "requestId": "ixyem63dmhvi9o6y",
  "path": "/api/testing/evaluate/next/run"
}
[2025-11-12T04:34:05.628Z] [INFO][ixyem63d] POST /api/testing/evaluate/next/run -> 429 (2ms)
Context: {
  "requestId": "ixyem63dmhvi9o6y",
  "duration": 2,
  "status": 429
}
[wrangler:info] POST /api/testing/evaluate/next/run 429 Too Many Requests (7ms)
[dev] [2025-11-12T04:34:05.641Z] [INFO][zvkoz3oc] POST /api/testing/evaluate/next/run
Context: {
  "requestId": "zvkoz3ocmhvi9o7d",
  "endpoint": "/api/testing/evaluate/next/run",
  "method": "POST"
}
[2025-11-12T04:34:05.641Z] [DEBUG][zvkoz3oc] [Middleware] Session ID from cookie
Context: {
  "requestId": "zvkoz3ocmhvi9o7d",
  "present": false
}
[dev] [2025-11-12T04:34:05.642Z] [DEBUG][zvkoz3oc] [Middleware] Outgoing response
Context: {
  "requestId": "zvkoz3ocmhvi9o7d",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "1",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:05.642Z] [DEBUG][zvkoz3oc] [Middleware] Processing path
Context: {
  "requestId": "zvkoz3ocmhvi9o7d",
  "path": "/api/testing/evaluate/next/run"
}
[2025-11-12T04:34:05.642Z] [INFO][zvkoz3oc] POST /api/testing/evaluate/next/run -> 429 (1ms)
Context: {
  "requestId": "zvkoz3ocmhvi9o7d",
  "duration": 1,
  "status": 429
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:05.642Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/testing/evaluate/next/run",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "webEvalBrowser",
      "maxRequests": 5,
      "windowMs": 60000,
      "resetAt": 1762922046426
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/testing/evaluate/next/run",
      "ipAddress": "::1",
      "timestamp": 1762922045642,
      "details": {
        "limiterName": "webEvalBrowser",
        "maxRequests": 5,
        "windowMs": 60000,
        "resetAt": 1762922046426
      }
    }
  }
[dev] [wrangler:info] POST /api/testing/evaluate/next/run 429 Too Many Requests (6ms)
[dev] [2025-11-12T04:34:05.647Z] [INFO][6z9kc6u7] POST /api/testing/evaluate/next/run
Context: {
  "requestId": "6z9kc6u7mhvi9o7j",
  "endpoint": "/api/testing/evaluate/next/run",
  "method": "POST"
}
[dev] [2025-11-12T04:34:05.647Z] [DEBUG][6z9kc6u7] [Middleware] Session ID from cookie
Context: {
  "requestId": "6z9kc6u7mhvi9o7j",
  "present": false
}
[dev] [2025-11-12T04:34:05.647Z] [DEBUG][6z9kc6u7] [Middleware] Outgoing response
Context: {
  "requestId": "6z9kc6u7mhvi9o7j",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "1",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:05.648Z] [DEBUG][6z9kc6u7] [Middleware] Processing path
Context: {
  "requestId": "6z9kc6u7mhvi9o7j",
  "path": "/api/testing/evaluate/next/run"
}
[2025-11-12T04:34:05.648Z] [INFO][6z9kc6u7] POST /api/testing/evaluate/next/run -> 429 (1ms)
Context: {
  "requestId": "6z9kc6u7mhvi9o7j",
  "duration": 1,
  "status": 429
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:05.647Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/testing/evaluate/next/run",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "webEvalBrowser",
      "maxRequests": 5,
      "windowMs": 60000,
      "resetAt": 1762922046426
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/testing/evaluate/next/run",
      "ipAddress": "::1",
      "timestamp": 1762922045647,
      "details": {
        "limiterName": "webEvalBrowser",
        "maxRequests": 5,
        "windowMs": 60000,
        "resetAt": 1762922046426
      }
    }
  }
[dev] [wrangler:info] POST /api/testing/evaluate/next/run 429 Too Many Requests (4ms)
[dev] [2025-11-12T04:34:05.651Z] [INFO][oygv0lnu] GET /pricing
Context: {
  "requestId": "oygv0lnumhvi9o7n",
  "endpoint": "/pricing",
  "method": "GET"
}
[2025-11-12T04:34:05.651Z] [DEBUG][oygv0lnu] [Middleware] Session ID from cookie
Context: {
  "requestId": "oygv0lnumhvi9o7n",
  "present": false
}
[dev] [33mâ–² [43;33m[[43;30mWARNING[43;33m][0m [1mKey "pages.pricing.credits_packs.details.trigger" not found in locale "de". Falling back to English.[0m
[dev] [33mâ–² [43;33m[[43;30mWARNING[43;33m][0m [1mKey "pages.pricing.table.details.trigger" not found in locale "de". Falling back to English.[0m
[dev] [2025-11-12T04:34:05.656Z] [DEBUG][oygv0lnu] [Middleware] Outgoing response
Context: {
  "requestId": "oygv0lnumhvi9o7n",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "text/html",
    "x-astro-route-type": "page"
  }
}
[2025-11-12T04:34:05.656Z] [DEBUG][oygv0lnu] [Middleware] Processing path
Context: {
  "requestId": "oygv0lnumhvi9o7n",
  "path": "/pricing"
}
[2025-11-12T04:34:05.656Z] [INFO][oygv0lnu] GET /pricing -> 200 (5ms)
Context: {
  "requestId": "oygv0lnumhvi9o7n",
  "duration": 5,
  "status": 200
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1mWarning: Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:[0m

  1. You might have mismatching versions of React and the renderer (such as React DOM)
  2. You might be breaking the Rules of Hooks
  3. You might have more than one copy of React in the same app
  See [4mhttps://reactjs.org/link/invalid-hook-call[0m for tips about how to debug and fix this problem.
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1mWarning: Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:[0m

  1. You might have mismatching versions of React and the renderer (such as React DOM)
  2. You might be breaking the Rules of Hooks
  3. You might have more than one copy of React in the same app
  See [4mhttps://reactjs.org/link/invalid-hook-call[0m for tips about how to debug and fix this problem.


[33mâ–² [43;33m[[43;30mWARNING[43;33m][0m [1mKey "pages.pricing.table.details.trigger" not found in locale "de". Falling back to English.[0m


[33mâ–² [43;33m[[43;30mWARNING[43;33m][0m [1mKey "pages.pricing.credits_packs.details.trigger" not found in locale "de". Falling back to English.[0m


[33mâ–² [43;33m[[43;30mWARNING[43;33m][0m [1mKey "pages.pricing.table.details.close" not found in locale "de". Falling back to English.[0m
[dev] [wrangler:info] GET /pricing 200 OK (15ms)
[dev] [2025-11-12T04:34:05.668Z] [INFO][o0a8s5yv] POST /api/testing/evaluate/next/run
Context: {
  "requestId": "o0a8s5yvmhvi9o84",
  "endpoint": "/api/testing/evaluate/next/run",
  "method": "POST"
}
[dev] [2025-11-12T04:34:05.668Z] [DEBUG][o0a8s5yv] [Middleware] Session ID from cookie
Context: {
  "requestId": "o0a8s5yvmhvi9o84",
  "present": false
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:05.669Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/testing/evaluate/next/run",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "webEvalBrowser",
      "maxRequests": 5,
      "windowMs": 60000,
      "resetAt": 1762922046426
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/testing/evaluate/next/run",
      "ipAddress": "::1",
      "timestamp": 1762922045669,
      "details": {
        "limiterName": "webEvalBrowser",
        "maxRequests": 5,
        "windowMs": 60000,
        "resetAt": 1762922046426
      }
    }
  }
[dev] [2025-11-12T04:34:05.670Z] [DEBUG][o0a8s5yv] [Middleware] Outgoing response
Context: {
  "requestId": "o0a8s5yvmhvi9o84",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "1",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:05.670Z] [DEBUG][o0a8s5yv] [Middleware] Processing path
Context: {
  "requestId": "o0a8s5yvmhvi9o84",
  "path": "/api/testing/evaluate/next/run"
}
[2025-11-12T04:34:05.670Z] [INFO][o0a8s5yv] POST /api/testing/evaluate/next/run -> 429 (2ms)
Context: {
  "requestId": "o0a8s5yvmhvi9o84",
  "duration": 2,
  "status": 429
}
[wrangler:info] POST /api/testing/evaluate/next/run 429 Too Many Requests (19ms)
[dev] [2025-11-12T04:34:05.675Z] [INFO][xb9oecal] GET /pricing
Context: {
  "requestId": "xb9oecalmhvi9o8b",
  "endpoint": "/pricing",
  "method": "GET"
}
[dev] [2025-11-12T04:34:05.675Z] [DEBUG][xb9oecal] [Middleware] Session ID from cookie
Context: {
  "requestId": "xb9oecalmhvi9o8b",
  "present": false
}
[dev] [33mâ–² [43;33m[[43;30mWARNING[43;33m][0m [1mKey "pages.pricing.credits_packs.details.trigger" not found in locale "de". Falling back to English.[0m
[dev] [33mâ–² [43;33m[[43;30mWARNING[43;33m][0m [1mKey "pages.pricing.table.details.trigger" not found in locale "de". Falling back to English.[0m
[dev] [2025-11-12T04:34:05.683Z] [DEBUG][xb9oecal] [Middleware] Outgoing response
Context: {
  "requestId": "xb9oecalmhvi9o8b",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "text/html",
    "x-astro-route-type": "page"
  }
}
[dev] [2025-11-12T04:34:05.683Z] [DEBUG][xb9oecal] [Middleware] Processing path
Context: {
  "requestId": "xb9oecalmhvi9o8b",
  "path": "/pricing"
}
[2025-11-12T04:34:05.683Z] [INFO][xb9oecal] GET /pricing -> 200 (8ms)
Context: {
  "requestId": "xb9oecalmhvi9o8b",
  "duration": 8,
  "status": 200
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1mWarning: Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:[0m

  1. You might have mismatching versions of React and the renderer (such as React DOM)
  2. You might be breaking the Rules of Hooks
  3. You might have more than one copy of React in the same app
  See [4mhttps://reactjs.org/link/invalid-hook-call[0m for tips about how to debug and fix this problem.
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1mWarning: Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:[0m

  1. You might have mismatching versions of React and the renderer (such as React DOM)
  2. You might be breaking the Rules of Hooks
  3. You might have more than one copy of React in the same app
  See [4mhttps://reactjs.org/link/invalid-hook-call[0m for tips about how to debug and fix this problem.
[dev] [33mâ–² [43;33m[[43;30mWARNING[43;33m][0m [1mKey "pages.pricing.table.details.trigger" not found in locale "de". Falling back to English.[0m


[33mâ–² [43;33m[[43;30mWARNING[43;33m][0m [1mKey "pages.pricing.credits_packs.details.trigger" not found in locale "de". Falling back to English.[0m


[33mâ–² [43;33m[[43;30mWARNING[43;33m][0m [1mKey "pages.pricing.table.details.close" not found in locale "de". Falling back to English.[0m
[dev] [wrangler:info] GET /pricing 200 OK (25ms)
[dev] [2025-11-12T04:34:05.706Z] [INFO][ln9ygra0] GET /pricing
Context: {
  "requestId": "ln9ygra0mhvi9o96",
  "endpoint": "/pricing",
  "method": "GET"
}
[dev] [2025-11-12T04:34:05.706Z] [DEBUG][ln9ygra0] [Middleware] Early neutral -> referer suggests EN (no cookie), redirect to EN
Context: {
  "requestId": "ln9ygra0mhvi9o96",
  "location": "/en/pricing"
}
[2025-11-12T04:34:05.707Z] [INFO][md0tb27z] POST /api/testing/evaluate/next/run
Context: {
  "requestId": "md0tb27zmhvi9o97",
  "endpoint": "/api/testing/evaluate/next/run",
  "method": "POST"
}
[2025-11-12T04:34:05.707Z] [DEBUG][md0tb27z] [Middleware] Session ID from cookie
Context: {
  "requestId": "md0tb27zmhvi9o97",
  "present": false
}
[2025-11-12T04:34:05.707Z] [INFO][ew6sukpe] GET /blog/
Context: {
  "requestId": "ew6sukpemhvi9o97",
  "endpoint": "/blog/",
  "method": "GET"
}
[2025-11-12T04:34:05.707Z] [DEBUG][ew6sukpe] [Middleware] Session ID from cookie
Context: {
  "requestId": "ew6sukpemhvi9o97",
  "present": false
}
[dev] [33mâ–² [43;33m[[43;30mWARNING[43;33m][0m [1mKey "pages.blog.search.tags_placeholder" not found in locale "de". Falling back to English.[0m
[dev] [2025-11-12T04:34:05.710Z] [DEBUG][ew6sukpe] [Middleware] Outgoing response
Context: {
  "requestId": "ew6sukpemhvi9o97",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "text/html",
    "x-astro-route-type": "page"
  }
}
[2025-11-12T04:34:05.710Z] [DEBUG][ew6sukpe] [Middleware] Processing path
Context: {
  "requestId": "ew6sukpemhvi9o97",
  "path": "/blog/"
}
[2025-11-12T04:34:05.710Z] [INFO][ew6sukpe] GET /blog/ -> 200 (3ms)
Context: {
  "requestId": "ew6sukpemhvi9o97",
  "duration": 3,
  "status": 200
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1mWarning: Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:[0m

  1. You might have mismatching versions of React and the renderer (such as React DOM)
  2. You might be breaking the Rules of Hooks
  3. You might have more than one copy of React in the same app
  See [4mhttps://reactjs.org/link/invalid-hook-call[0m for tips about how to debug and fix this problem.
 âœ“ |integration| tests/integration/routing/locale-routing.test.ts > Locale routing > q-values: prefers EN when en-GB;q=0.9,de;q=0.8 55ms
 âœ“ |integration| tests/integration/routing/locale-routing.test.ts > Locale routing > q-values: prefers DE when de;q=0.9,en;q=0.8 32ms
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1mWarning: Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:[0m

  1. You might have mismatching versions of React and the renderer (such as React DOM)
  2. You might be breaking the Rules of Hooks
  3. You might have more than one copy of React in the same app
  See [4mhttps://reactjs.org/link/invalid-hook-call[0m for tips about how to debug and fix this problem.
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:05.713Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/testing/evaluate/next/run",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "webEvalBrowser",
      "maxRequests": 5,
      "windowMs": 60000,
      "resetAt": 1762922046426
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/testing/evaluate/next/run",
      "ipAddress": "::1",
      "timestamp": 1762922045713,
      "details": {
        "limiterName": "webEvalBrowser",
        "maxRequests": 5,
        "windowMs": 60000,
        "resetAt": 1762922046426
      }
    }
  }
[dev] [2025-11-12T04:34:05.714Z] [DEBUG][md0tb27z] [Middleware] Outgoing response
Context: {
  "requestId": "md0tb27zmhvi9o97",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "1",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:05.714Z] [DEBUG][md0tb27z] [Middleware] Processing path
Context: {
  "requestId": "md0tb27zmhvi9o97",
  "path": "/api/testing/evaluate/next/run"
}
[2025-11-12T04:34:05.714Z] [INFO][md0tb27z] POST /api/testing/evaluate/next/run -> 429 (7ms)
Context: {
  "requestId": "md0tb27zmhvi9o97",
  "duration": 7,
  "status": 429
}
[wrangler:info] GET /blog/ 200 OK (25ms)
[wrangler:info] GET /pricing 302 Found (10ms)
[wrangler:info] POST /api/testing/evaluate/next/run 429 Too Many Requests (36ms)
[dev] [2025-11-12T04:34:05.726Z] [INFO][chmdcz8j] GET /blog/
Context: {
  "requestId": "chmdcz8jmhvi9o9q",
  "endpoint": "/blog/",
  "method": "GET"
}
[2025-11-12T04:34:05.726Z] [DEBUG][chmdcz8j] [Middleware] Bot neutral -> redirect to EN
Context: {
  "requestId": "chmdcz8jmhvi9o9q",
  "location": "/en/blog/"
}
[dev] [2025-11-12T04:34:05.726Z] [INFO][de4t8ftj] GET /api/admin/credits/history
Context: {
  "requestId": "de4t8ftjmhvi9o9q",
  "endpoint": "/api/admin/credits/history",
  "method": "GET"
}
[dev] [2025-11-12T04:34:05.726Z] [DEBUG][de4t8ftj] [Middleware] Session ID from cookie
Context: {
  "requestId": "de4t8ftjmhvi9o9q",
  "present": false
}
[2025-11-12T04:34:05.727Z] [INFO][qcgvjuce] POST /api/testing/evaluate/next/run
Context: {
  "requestId": "qcgvjucemhvi9o9r",
  "endpoint": "/api/testing/evaluate/next/run",
  "method": "POST"
}
[2025-11-12T04:34:05.727Z] [DEBUG][qcgvjuce] [Middleware] Session ID from cookie
Context: {
  "requestId": "qcgvjucemhvi9o9r",
  "present": false
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:05.728Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/testing/evaluate/next/run",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "webEvalBrowser",
      "maxRequests": 5,
      "windowMs": 60000,
      "resetAt": 1762922046426
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/testing/evaluate/next/run",
      "ipAddress": "::1",
      "timestamp": 1762922045728,
      "details": {
        "limiterName": "webEvalBrowser",
        "maxRequests": 5,
        "windowMs": 60000,
        "resetAt": 1762922046426
      }
    }
  }
[dev] [2025-11-12T04:34:05.728Z] [DEBUG][qcgvjuce] [Middleware] Outgoing response
Context: {
  "requestId": "qcgvjucemhvi9o9r",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "1",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:05.728Z] [DEBUG][qcgvjuce] [Middleware] Processing path
Context: {
  "requestId": "qcgvjucemhvi9o9r",
  "path": "/api/testing/evaluate/next/run"
}
[2025-11-12T04:34:05.728Z] [INFO][qcgvjuce] POST /api/testing/evaluate/next/run -> 429 (1ms)
Context: {
  "requestId": "qcgvjucemhvi9o9r",
  "duration": 1,
  "status": 429
}
[dev] [2025-11-12T04:34:05.730Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: { endpoint: '/api/admin/credits/history', method: 'GET' }
}
[dev] [2025-11-12T04:34:05.730Z] [DEBUG][de4t8ftj] [Middleware] Outgoing response
Context: {
  "requestId": "de4t8ftjmhvi9o9q",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:05.730Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: {
      reason: 'unauthenticated_access',
      endpoint: '/api/admin/credits/history'
    }
  }
[dev] [2025-11-12T04:34:05.730Z] [DEBUG][de4t8ftj] [Middleware] Processing path
Context: {
  "requestId": "de4t8ftjmhvi9o9q",
  "path": "/api/admin/credits/history"
}
[2025-11-12T04:34:05.730Z] [INFO][de4t8ftj] GET /api/admin/credits/history -> 401 (4ms)
Context: {
  "requestId": "de4t8ftjmhvi9o9q",
  "duration": 4,
  "status": 401
}
[2025-11-12T04:34:05.731Z] [INFO][hs8lrxlp] GET /api/admin/users/sessions
Context: {
  "requestId": "hs8lrxlpmhvi9o9v",
  "endpoint": "/api/admin/users/sessions",
  "method": "GET"
}
[2025-11-12T04:34:05.731Z] [DEBUG][hs8lrxlp] [Middleware] Session ID from cookie
Context: {
  "requestId": "hs8lrxlpmhvi9o9v",
  "present": false
}
[dev] [wrangler:info] GET /blog/ 302 Found (8ms)
[dev] [2025-11-12T04:34:05.733Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: { endpoint: '/api/admin/users/sessions', method: 'GET' }
}
 âœ“ |integration| tests/integration/routing/locale-routing.test.ts > Locale routing > referer-based EN preference redirects neutral /pricing to /en/pricing 16ms
 âœ“ |integration| tests/integration/routing/locale-routing.test.ts > Locale routing > bot: neutral /blog/ with en redirects to /en/blog/ 16ms
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:05.733Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: {
      reason: 'unauthenticated_access',
      endpoint: '/api/admin/users/sessions'
    }
  }
[dev] [2025-11-12T04:34:05.733Z] [DEBUG][hs8lrxlp] [Middleware] Outgoing response
Context: {
  "requestId": "hs8lrxlpmhvi9o9v",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:05.733Z] [DEBUG][hs8lrxlp] [Middleware] Processing path
Context: {
  "requestId": "hs8lrxlpmhvi9o9v",
  "path": "/api/admin/users/sessions"
}
[2025-11-12T04:34:05.733Z] [INFO][hs8lrxlp] GET /api/admin/users/sessions -> 401 (2ms)
Context: {
  "requestId": "hs8lrxlpmhvi9o9v",
  "duration": 2,
  "status": 401
}
[2025-11-12T04:34:05.735Z] [INFO][cw59s2p7] GET /tools/voice-visualizer/app
Context: {
  "requestId": "cw59s2p7mhvi9o9z",
  "endpoint": "/tools/voice-visualizer/app",
  "method": "GET"
}
[2025-11-12T04:34:05.735Z] [DEBUG][cw59s2p7] [Middleware] Session ID from cookie
Context: {
  "requestId": "cw59s2p7mhvi9o9z",
  "present": false
}
[wrangler:info] POST /api/testing/evaluate/next/run 429 Too Many Requests (9ms)
[dev] [wrangler:info] GET /api/admin/credits/history 401 Unauthorized (9ms)
[dev] [wrangler:info] GET /api/admin/users/sessions 401 Unauthorized (11ms)
[dev] [2025-11-12T04:34:05.737Z] [DEBUG][cw59s2p7] [Middleware] Outgoing response
Context: {
  "requestId": "cw59s2p7mhvi9o9z",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "text/html",
    "x-astro-route-type": "page"
  }
}
[2025-11-12T04:34:05.737Z] [DEBUG][cw59s2p7] [Middleware] Processing path
Context: {
  "requestId": "cw59s2p7mhvi9o9z",
  "path": "/tools/voice-visualizer/app"
}
[2025-11-12T04:34:05.737Z] [INFO][cw59s2p7] GET /tools/voice-visualizer/app -> 200 (2ms)
Context: {
  "requestId": "cw59s2p7mhvi9o9z",
  "duration": 2,
  "status": 200
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1mWarning: Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:[0m

  1. You might have mismatching versions of React and the renderer (such as React DOM)
  2. You might be breaking the Rules of Hooks
  3. You might have more than one copy of React in the same app
  See [4mhttps://reactjs.org/link/invalid-hook-call[0m for tips about how to debug and fix this problem.


[31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1mWarning: Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:[0m

  1. You might have mismatching versions of React and the renderer (such as React DOM)
  2. You might be breaking the Rules of Hooks
  3. You might have more than one copy of React in the same app
  See [4mhttps://reactjs.org/link/invalid-hook-call[0m for tips about how to debug and fix this problem.
[dev] [wrangler:info] GET /tools/voice-visualizer/app 200 OK (8ms)
 âœ“ |integration| tests/integration/routing/voice-visualizer-permissions.test.ts > Permissions-Policy for Voice Visualizer routes > sets microphone=(self) on neutral route /tools/voice-visualizer/app 81ms
[dev] [2025-11-12T04:34:05.780Z] [INFO][3w7cl7jo] GET /r2-ai/ai-enhancer/results/guest/someone-else/any.png
Context: {
  "requestId": "3w7cl7jomhvi9ob8",
  "endpoint": "/r2-ai/ai-enhancer/results/guest/someone-else/any.png",
  "method": "GET"
}
[2025-11-12T04:34:05.780Z] [DEBUG][3w7cl7jo] [Middleware] Session ID from cookie
Context: {
  "requestId": "3w7cl7jomhvi9ob8",
  "present": false
}
[R2Proxy][R2AI-1762922045780-218xq] start {
  url: 'http://localhost:8787/r2-ai/ai-enhancer/results/guest/someone-else/any.png',
  key: 'ai-enhancer/results/guest/someone-else/any.png'
}
[R2Proxy][R2AI-1762922045780-218xq] parsed path {
  category: 'results',
  pathOwnerType: 'guest',
  pathOwnerId: 'someone-else'
}
[R2Proxy][R2AI-1762922045780-218xq] owner gate {
  currentOwnerType: 'guest',
  currentOwnerId: '38f81944-5416-4996-91cf-ba90ce06252b',
  isOwner: false
}
[2025-11-12T04:34:05.781Z] [DEBUG][3w7cl7jo] [Middleware] Outgoing response
Context: {
  "requestId": "3w7cl7jomhvi9ob8",
  "status": 403,
  "statusText": "Forbidden",
  "headers": {
    "content-type": "text/plain;charset=UTF-8"
  }
}
[2025-11-12T04:34:05.781Z] [DEBUG][3w7cl7jo] [Middleware] Processing path
Context: {
  "requestId": "3w7cl7jomhvi9ob8",
  "path": "/r2-ai/ai-enhancer/results/guest/someone-else/any.png"
}
[2025-11-12T04:34:05.781Z] [INFO][3w7cl7jo] GET /r2-ai/ai-enhancer/results/guest/someone-else/any.png -> 403 (1ms)
Context: {
  "requestId": "3w7cl7jomhvi9ob8",
  "duration": 1,
  "status": 403
}
[2025-11-12T04:34:05.781Z] [INFO][hygktzf8] POST /api/testing/evaluate/next/run
Context: {
  "requestId": "hygktzf8mhvi9ob9",
  "endpoint": "/api/testing/evaluate/next/run",
  "method": "POST"
}
[2025-11-12T04:34:05.781Z] [DEBUG][hygktzf8] [Middleware] Session ID from cookie
Context: {
  "requestId": "hygktzf8mhvi9ob9",
  "present": false
}
[2025-11-12T04:34:05.782Z] [INFO][m585ihhe] POST /api/admin/users/revoke-sessions
Context: {
  "requestId": "m585ihhemhvi9oba",
  "endpoint": "/api/admin/users/revoke-sessions",
  "method": "POST"
}
[2025-11-12T04:34:05.782Z] [DEBUG][m585ihhe] [Middleware] Session ID from cookie
Context: {
  "requestId": "m585ihhemhvi9oba",
  "present": false
}
[2025-11-12T04:34:05.782Z] [INFO] SECURITY_EVENT {
  timestamp: {},
  resource: 'security',
  ipAddress: '::1',
  type: 'SUSPICIOUS_ACTIVITY',
  details: {
    reason: 'csrf_token_mismatch',
    endpoint: '/api/admin/users/revoke-sessions',
    hasHeader: false,
    hasCookie: false
  }
}
[2025-11-12T04:34:05.782Z] [DEBUG][m585ihhe] [Middleware] Outgoing response
Context: {
  "requestId": "m585ihhemhvi9oba",
  "status": 403,
  "statusText": "Forbidden",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:05.782Z] [DEBUG][m585ihhe] [Middleware] Processing path
Context: {
  "requestId": "m585ihhemhvi9oba",
  "path": "/api/admin/users/revoke-sessions"
}
[2025-11-12T04:34:05.782Z] [INFO][m585ihhe] POST /api/admin/users/revoke-sessions -> 403
Context: {
  "requestId": "m585ihhemhvi9oba",
  "duration": 0,
  "status": 403
}
[2025-11-12T04:34:05.782Z] [INFO][uku7kom7] GET /blog/digital-detox-kreativitaet/
Context: {
  "requestId": "uku7kom7mhvi9oba",
  "endpoint": "/blog/digital-detox-kreativitaet/",
  "method": "GET"
}
[2025-11-12T04:34:05.782Z] [DEBUG][uku7kom7] [Middleware] Session ID from cookie
Context: {
  "requestId": "uku7kom7mhvi9oba",
  "present": false
}
[2025-11-12T04:34:05.784Z] [DEBUG][uku7kom7] [Middleware] Outgoing response
Context: {
  "requestId": "uku7kom7mhvi9oba",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "text/html",
    "x-astro-route-type": "page"
  }
}
[2025-11-12T04:34:05.784Z] [DEBUG][uku7kom7] [Middleware] Processing path
Context: {
  "requestId": "uku7kom7mhvi9oba",
  "path": "/blog/digital-detox-kreativitaet/"
}
[2025-11-12T04:34:05.784Z] [INFO][uku7kom7] GET /blog/digital-detox-kreativitaet/ -> 200 (2ms)
Context: {
  "requestId": "uku7kom7mhvi9oba",
  "duration": 2,
  "status": 200
}
[dev] [33mâ–² [43;33m[[43;30mWARNING[43;33m][0m [1m[R2Proxy][R2AI-1762922045780-218xq] forbidden for non-owner[0m


[31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1mWarning: Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:[0m

  1. You might have mismatching versions of React and the renderer (such as React DOM)
  2. You might be breaking the Rules of Hooks
  3. You might have more than one copy of React in the same app
  See [4mhttps://reactjs.org/link/invalid-hook-call[0m for tips about how to debug and fix this problem.


[31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1mWarning: Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:[0m

  1. You might have mismatching versions of React and the renderer (such as React DOM)
  2. You might be breaking the Rules of Hooks
  3. You might have more than one copy of React in the same app
  See [4mhttps://reactjs.org/link/invalid-hook-call[0m for tips about how to debug and fix this problem.
[dev] [2025-11-12T04:34:05.827Z] [INFO][qi3cmabd] GET /en/tools/voice-visualizer/app
Context: {
  "requestId": "qi3cmabdmhvi9ocj",
  "endpoint": "/en/tools/voice-visualizer/app",
  "method": "GET"
}
[dev] [2025-11-12T04:34:05.828Z] [DEBUG][qi3cmabd] [Middleware] Session ID from cookie
Context: {
  "requestId": "qi3cmabdmhvi9ocj",
  "present": false
}
[dev] [2025-11-12T04:34:05.830Z] [DEBUG][qi3cmabd] [Middleware] Outgoing response
Context: {
  "requestId": "qi3cmabdmhvi9ocj",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "text/html",
    "x-astro-route-type": "page"
  }
}
[2025-11-12T04:34:05.830Z] [DEBUG][qi3cmabd] [Middleware] Processing path
Context: {
  "requestId": "qi3cmabdmhvi9ocj",
  "path": "/en/tools/voice-visualizer/app"
}
[2025-11-12T04:34:05.830Z] [INFO][qi3cmabd] GET /en/tools/voice-visualizer/app -> 200 (3ms)
Context: {
  "requestId": "qi3cmabdmhvi9ocj",
  "duration": 3,
  "status": 200
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1mWarning: Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:[0m

  1. You might have mismatching versions of React and the renderer (such as React DOM)
  2. You might be breaking the Rules of Hooks
  3. You might have more than one copy of React in the same app
  See [4mhttps://reactjs.org/link/invalid-hook-call[0m for tips about how to debug and fix this problem.
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1mWarning: Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:[0m

  1. You might have mismatching versions of React and the renderer (such as React DOM)
  2. You might be breaking the Rules of Hooks
  3. You might have more than one copy of React in the same app
  See [4mhttps://reactjs.org/link/invalid-hook-call[0m for tips about how to debug and fix this problem.
[dev] [2025-11-12T04:34:05.833Z] [INFO][4rnid3qq] GET /api/admin/credits/usage
Context: {
  "requestId": "4rnid3qqmhvi9ocp",
  "endpoint": "/api/admin/credits/usage",
  "method": "GET"
}
[2025-11-12T04:34:05.833Z] [DEBUG][4rnid3qq] [Middleware] Session ID from cookie
Context: {
  "requestId": "4rnid3qqmhvi9ocp",
  "present": false
}
[dev] [wrangler:info] GET /r2-ai/ai-enhancer/results/guest/someone-else/any.png 403 Forbidden (68ms)
[wrangler:info] GET /blog/digital-detox-kreativitaet/ 200 OK (83ms)
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:05.836Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/testing/evaluate/next/run",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "webEvalBrowser",
      "maxRequests": 5,
      "windowMs": 60000,
      "resetAt": 1762922046426
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/testing/evaluate/next/run",
      "ipAddress": "::1",
      "timestamp": 1762922045836,
      "details": {
        "limiterName": "webEvalBrowser",
        "maxRequests": 5,
        "windowMs": 60000,
        "resetAt": 1762922046426
      }
    }
  }
[dev] [2025-11-12T04:34:05.836Z] [DEBUG][hygktzf8] [Middleware] Outgoing response
Context: {
  "requestId": "hygktzf8mhvi9ob9",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "1",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:05.836Z] [DEBUG][hygktzf8] [Middleware] Processing path
Context: {
  "requestId": "hygktzf8mhvi9ob9",
  "path": "/api/testing/evaluate/next/run"
}
[2025-11-12T04:34:05.836Z] [INFO][hygktzf8] POST /api/testing/evaluate/next/run -> 429 (55ms)
Context: {
  "requestId": "hygktzf8mhvi9ob9",
  "duration": 55,
  "status": 429
}
[dev] [2025-11-12T04:34:05.838Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: { endpoint: '/api/admin/credits/usage', method: 'GET' }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:05.838Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: {
      reason: 'unauthenticated_access',
      endpoint: '/api/admin/credits/usage'
    }
  }
[dev] [2025-11-12T04:34:05.838Z] [DEBUG][4rnid3qq] [Middleware] Outgoing response
Context: {
  "requestId": "4rnid3qqmhvi9ocp",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:05.838Z] [DEBUG][4rnid3qq] [Middleware] Processing path
Context: {
  "requestId": "4rnid3qqmhvi9ocp",
  "path": "/api/admin/credits/usage"
}
[2025-11-12T04:34:05.838Z] [INFO][4rnid3qq] GET /api/admin/credits/usage -> 401 (5ms)
Context: {
  "requestId": "4rnid3qqmhvi9ocp",
  "duration": 5,
  "status": 401
}
[wrangler:info] GET /en/tools/voice-visualizer/app 200 OK (80ms)
[wrangler:info] POST /api/admin/users/revoke-sessions 403 Forbidden (89ms)
[wrangler:info] POST /api/testing/evaluate/next/run 429 Too Many Requests (97ms)
[wrangler:info] GET /api/admin/credits/usage 401 Unauthorized (83ms)
 âœ“ |integration| tests/integration/api/admin-sessions.test.ts > Admin Sessions API â€” unauth/CSRF smokes > GET /api/admin/users/sessions â†’ 401 unauthenticated 115ms
 âœ“ |integration| tests/integration/api/admin-sessions.test.ts > Admin Sessions API â€” unauth/CSRF smokes > POST /api/admin/users/revoke-sessions without CSRF â†’ 403 99ms
 âœ“ |integration| tests/integration/routing/blog-routes.test.ts > Blog routes > GET /blog/ returns 200 and contains Blog heading 133ms
[dev] [2025-11-12T04:34:05.855Z] [INFO][a1t9n5rw] POST /api/debug-login
Context: {
  "requestId": "a1t9n5rwmhvi9odb",
  "endpoint": "/api/debug-login",
  "method": "POST"
}
[dev] [2025-11-12T04:34:05.855Z] [DEBUG][a1t9n5rw] [Middleware] Session ID from cookie
Context: {
  "requestId": "a1t9n5rwmhvi9odb",
  "present": false
}
[2025-11-12T04:34:05.856Z] [INFO][resr5rnx] GET /blog/
Context: {
  "requestId": "resr5rnxmhvi9odc",
  "endpoint": "/blog/",
  "method": "GET"
}
[2025-11-12T04:34:05.856Z] [DEBUG][resr5rnx] [Middleware] Session ID from cookie
Context: {
  "requestId": "resr5rnxmhvi9odc",
  "present": false
}
 âœ“ |integration| tests/integration/api/admin-credits.test.ts > Admin Credits API â€” unauth/validation > GET /api/admin/credits/history â†’ 401 unauth 118ms
 âœ“ |integration| tests/integration/api/admin-credits.test.ts > Admin Credits API â€” unauth/validation > GET /api/admin/credits/usage â†’ 401 unauth 90ms
[dev] [33mâ–² [43;33m[[43;30mWARNING[43;33m][0m [1mKey "pages.blog.search.tags_placeholder" not found in locale "de". Falling back to English.[0m
[dev] [2025-11-12T04:34:05.860Z] [DEBUG][resr5rnx] [Middleware] Outgoing response
Context: {
  "requestId": "resr5rnxmhvi9odc",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "text/html",
    "x-astro-route-type": "page"
  }
}
[dev] [2025-11-12T04:34:05.860Z] [DEBUG][resr5rnx] [Middleware] Processing path
Context: {
  "requestId": "resr5rnxmhvi9odc",
  "path": "/blog/"
}
[2025-11-12T04:34:05.861Z] [INFO][resr5rnx] GET /blog/ -> 200 (5ms)
Context: {
  "requestId": "resr5rnxmhvi9odc",
  "duration": 5,
  "status": 200
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1mWarning: Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:[0m

  1. You might have mismatching versions of React and the renderer (such as React DOM)
  2. You might be breaking the Rules of Hooks
  3. You might have more than one copy of React in the same app
  See [4mhttps://reactjs.org/link/invalid-hook-call[0m for tips about how to debug and fix this problem.
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1mWarning: Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:[0m

  1. You might have mismatching versions of React and the renderer (such as React DOM)
  2. You might be breaking the Rules of Hooks
  3. You might have more than one copy of React in the same app
  See [4mhttps://reactjs.org/link/invalid-hook-call[0m for tips about how to debug and fix this problem.
[dev] [2025-11-12T04:34:05.867Z] [INFO][kdesv4gn] GET /r2-ai/not-allowed/prefix.png
Context: {
  "requestId": "kdesv4gnmhvi9odn",
  "endpoint": "/r2-ai/not-allowed/prefix.png",
  "method": "GET"
}
[2025-11-12T04:34:05.867Z] [DEBUG][kdesv4gn] [Middleware] Session ID from cookie
Context: {
  "requestId": "kdesv4gnmhvi9odn",
  "present": false
}
[R2Proxy][R2AI-1762922045867-0dplp] start {
  url: 'http://localhost:8787/r2-ai/not-allowed/prefix.png',
  key: 'not-allowed/prefix.png'
}
[dev] [33mâ–² [43;33m[[43;30mWARNING[43;33m][0m [1m[R2Proxy][R2AI-1762922045867-0dplp] invalid prefix {[0m

    key: 'not-allowed/prefix.png',
    expectedPrefixes: [ 'ai-enhancer/', 'ai-video/' ]
  }
[dev] [2025-11-12T04:34:05.868Z] [DEBUG][kdesv4gn] [Middleware] Outgoing response
Context: {
  "requestId": "kdesv4gnmhvi9odn",
  "status": 404,
  "statusText": "Not Found",
  "headers": {
    "content-type": "text/plain;charset=UTF-8",
    "x-astro-reroute": "no"
  }
}
[2025-11-12T04:34:05.868Z] [DEBUG][kdesv4gn] [Middleware] Processing path
Context: {
  "requestId": "kdesv4gnmhvi9odn",
  "path": "/r2-ai/not-allowed/prefix.png"
}
[2025-11-12T04:34:05.868Z] [INFO][kdesv4gn] GET /r2-ai/not-allowed/prefix.png -> 404 (1ms)
Context: {
  "requestId": "kdesv4gnmhvi9odn",
  "duration": 1,
  "status": 404
}
[2025-11-12T04:34:05.869Z] [INFO][eohhhxc4] POST /api/testing/evaluate/next/run
Context: {
  "requestId": "eohhhxc4mhvi9odp",
  "endpoint": "/api/testing/evaluate/next/run",
  "method": "POST"
}
[2025-11-12T04:34:05.869Z] [DEBUG][eohhhxc4] [Middleware] Session ID from cookie
Context: {
  "requestId": "eohhhxc4mhvi9odp",
  "present": false
}
[dev] [2025-11-12T04:34:05.870Z] [INFO][av7vopyc] POST /api/debug-login
Context: {
  "requestId": "av7vopycmhvi9odq",
  "endpoint": "/api/debug-login",
  "method": "POST"
}
[dev] [2025-11-12T04:34:05.871Z] [DEBUG][av7vopyc] [Middleware] Session ID from cookie
Context: {
  "requestId": "av7vopycmhvi9odq",
  "present": false
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:05.874Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/testing/evaluate/next/run",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "webEvalBrowser",
      "maxRequests": 5,
      "windowMs": 60000,
      "resetAt": 1762922046426
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/testing/evaluate/next/run",
      "ipAddress": "::1",
      "timestamp": 1762922045874,
      "details": {
        "limiterName": "webEvalBrowser",
        "maxRequests": 5,
        "windowMs": 60000,
        "resetAt": 1762922046426
      }
    }
  }
[dev] [2025-11-12T04:34:05.874Z] [DEBUG][eohhhxc4] [Middleware] Outgoing response
Context: {
  "requestId": "eohhhxc4mhvi9odp",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "1",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:05.875Z] [DEBUG][eohhhxc4] [Middleware] Processing path
Context: {
  "requestId": "eohhhxc4mhvi9odp",
  "path": "/api/testing/evaluate/next/run"
}
[2025-11-12T04:34:05.875Z] [INFO][eohhhxc4] POST /api/testing/evaluate/next/run -> 429 (6ms)
Context: {
  "requestId": "eohhhxc4mhvi9odp",
  "duration": 6,
  "status": 429
}
[wrangler:info] GET /blog/ 200 OK (34ms)
[wrangler:info] GET /r2-ai/not-allowed/prefix.png 404 Not Found (28ms)
 âœ“ |integration| tests/integration/routing/voice-visualizer-permissions.test.ts > Permissions-Policy for Voice Visualizer routes > sets microphone=(self) on EN route /en/tools/voice-visualizer/app 89ms
 âœ“ |integration| tests/integration/routing/voice-visualizer-permissions.test.ts > Permissions-Policy for Voice Visualizer routes > keeps microphone=() on unrelated routes (e.g., /blog/) 37ms
[dev] [2025-11-12T04:34:05.877Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/debug-login',
    method: 'POST',
    action: 'debug_login'
  }
}
[2025-11-12T04:34:05.877Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/debug-login',
    method: 'POST',
    action: 'debug_login'
  }
}
[dev] [wrangler:info] POST /api/testing/evaluate/next/run 429 Too Many Requests (31ms)
[dev] [2025-11-12T04:34:05.880Z] [INFO][U:d44cd9d1-b68d-41bd-9c69-87ac5bda927f] Security Event: USER_EVENT
Context: {
  "userId": "d44cd9d1-b68d-41bd-9c69-87ac5bda927f",
  "securityEventType": "USER_EVENT",
  "originalDetails": {
    "eventType": "debug_login_created",
    "ipAddress": "::1",
    "debugUser": true
  },
  "logLevel": "info",
  "eventSnapshot": {
    "type": "USER_EVENT",
    "userId": "d44cd9d1-b68d-41bd-9c69-87ac5bda927f",
    "timestamp": 1762922045880,
    "details": {
      "eventType": "debug_login_created",
      "ipAddress": "::1",
      "debugUser": true
    }
  }
}
[2025-11-12T04:34:05.881Z] [DEBUG][av7vopyc] [Middleware] Outgoing response
Context: {
  "requestId": "av7vopycmhvi9odq",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:05.881Z] [DEBUG][av7vopyc] [Middleware] Processing path
Context: {
  "requestId": "av7vopycmhvi9odq",
  "path": "/api/debug-login"
}
[2025-11-12T04:34:05.881Z] [INFO][av7vopyc] POST /api/debug-login -> 200 (11ms)
Context: {
  "requestId": "av7vopycmhvi9odq",
  "duration": 11,
  "status": 200
}
[2025-11-12T04:34:05.881Z] [INFO][U:d44cd9d1-b68d-41bd-9c69-87ac5bda927f] Security Event: USER_EVENT
Context: {
  "userId": "d44cd9d1-b68d-41bd-9c69-87ac5bda927f",
  "securityEventType": "USER_EVENT",
  "originalDetails": {
    "eventType": "debug_login_created",
    "ipAddress": "::1",
    "debugUser": true
  },
  "logLevel": "info",
  "eventSnapshot": {
    "type": "USER_EVENT",
    "userId": "d44cd9d1-b68d-41bd-9c69-87ac5bda927f",
    "timestamp": 1762922045881,
    "details": {
      "eventType": "debug_login_created",
      "ipAddress": "::1",
      "debugUser": true
    }
  }
}
[2025-11-12T04:34:05.881Z] [DEBUG][a1t9n5rw] [Middleware] Outgoing response
Context: {
  "requestId": "a1t9n5rwmhvi9odb",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:05.881Z] [DEBUG][a1t9n5rw] [Middleware] Processing path
Context: {
  "requestId": "a1t9n5rwmhvi9odb",
  "path": "/api/debug-login"
}
[2025-11-12T04:34:05.881Z] [INFO][a1t9n5rw] POST /api/debug-login -> 200 (26ms)
Context: {
  "requestId": "a1t9n5rwmhvi9odb",
  "duration": 26,
  "status": 200
}
[dev] [wrangler:info] POST /api/debug-login 200 OK (35ms)
[wrangler:info] POST /api/debug-login 200 OK (34ms)
[dev] [2025-11-12T04:34:05.891Z] [INFO][glklr4g4] GET /api/admin/users/sessions
Context: {
  "requestId": "glklr4g4mhvi9oeb",
  "endpoint": "/api/admin/users/sessions",
  "method": "GET"
}
[2025-11-12T04:34:05.891Z] [DEBUG][glklr4g4] [Middleware] Session ID from cookie
Context: {
  "requestId": "glklr4g4mhvi9oeb",
  "present": true
}
[2025-11-12T04:34:05.892Z] [INFO][p8s93q1j] GET /blog/digital-detox-kreativitaet
Context: {
  "requestId": "p8s93q1jmhvi9oec",
  "endpoint": "/blog/digital-detox-kreativitaet",
  "method": "GET"
}
[2025-11-12T04:34:05.892Z] [DEBUG][p8s93q1j] [Middleware] Session ID from cookie
Context: {
  "requestId": "p8s93q1jmhvi9oec",
  "present": false
}
[dev] [2025-11-12T04:34:05.894Z] [DEBUG][p8s93q1j] [Middleware] Outgoing response
Context: {
  "requestId": "p8s93q1jmhvi9oec",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "text/html",
    "x-astro-route-type": "page"
  }
}
[2025-11-12T04:34:05.894Z] [DEBUG][p8s93q1j] [Middleware] Processing path
Context: {
  "requestId": "p8s93q1jmhvi9oec",
  "path": "/blog/digital-detox-kreativitaet"
}
[2025-11-12T04:34:05.894Z] [INFO][p8s93q1j] GET /blog/digital-detox-kreativitaet -> 200 (2ms)
Context: {
  "requestId": "p8s93q1jmhvi9oec",
  "duration": 2,
  "status": 200
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1mWarning: Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:[0m

  1. You might have mismatching versions of React and the renderer (such as React DOM)
  2. You might be breaking the Rules of Hooks
  3. You might have more than one copy of React in the same app
  See [4mhttps://reactjs.org/link/invalid-hook-call[0m for tips about how to debug and fix this problem.
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1mWarning: Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:[0m

  1. You might have mismatching versions of React and the renderer (such as React DOM)
  2. You might be breaking the Rules of Hooks
  3. You might have more than one copy of React in the same app
  See [4mhttps://reactjs.org/link/invalid-hook-call[0m for tips about how to debug and fix this problem.
[dev] [2025-11-12T04:34:05.896Z] [INFO][8hiwl8l2] GET /r2-ai/ai-enhancer/results/guest/test-guest-owner/nonexistent.png
Context: {
  "requestId": "8hiwl8l2mhvi9oeg",
  "endpoint": "/r2-ai/ai-enhancer/results/guest/test-guest-owner/nonexistent.png",
  "method": "GET"
}
[2025-11-12T04:34:05.897Z] [DEBUG][8hiwl8l2] [Middleware] Session ID from cookie
Context: {
  "requestId": "8hiwl8l2mhvi9oeg",
  "present": false
}
[R2Proxy][R2AI-1762922045897-b64fy] start {
  url: 'http://localhost:8787/r2-ai/ai-enhancer/results/guest/test-guest-owner/nonexistent.png',
  key: 'ai-enhancer/results/guest/test-guest-owner/nonexistent.png'
}
[R2Proxy][R2AI-1762922045897-b64fy] parsed path {
  category: 'results',
  pathOwnerType: 'guest',
  pathOwnerId: 'test-guest-owner'
}
[R2Proxy][R2AI-1762922045897-b64fy] owner gate {
  currentOwnerType: 'guest',
  currentOwnerId: 'test-guest-owner',
  isOwner: true
}
[2025-11-12T04:34:05.898Z] [INFO][c12euu6h] POST /api/testing/evaluate/next/run
Context: {
  "requestId": "c12euu6hmhvi9oei",
  "endpoint": "/api/testing/evaluate/next/run",
  "method": "POST"
}
[2025-11-12T04:34:05.898Z] [DEBUG][c12euu6h] [Middleware] Session ID from cookie
Context: {
  "requestId": "c12euu6hmhvi9oei",
  "present": false
}
[dev] [wrangler:info] GET /blog/digital-detox-kreativitaet 200 OK (41ms)
[2025-11-12T04:34:05.901Z] [DEBUG][8hiwl8l2] [Middleware] Outgoing response
Context: {
  "requestId": "8hiwl8l2mhvi9oeg",
  "status": 404,
  "statusText": "Not Found",
  "headers": {
    "content-type": "text/plain;charset=UTF-8",
    "x-astro-reroute": "no"
  }
}
[2025-11-12T04:34:05.901Z] [DEBUG][8hiwl8l2] [Middleware] Processing path
Context: {
  "requestId": "8hiwl8l2mhvi9oeg",
  "path": "/r2-ai/ai-enhancer/results/guest/test-guest-owner/nonexistent.png"
}
[2025-11-12T04:34:05.901Z] [INFO][8hiwl8l2] GET /r2-ai/ai-enhancer/results/guest/test-guest-owner/nonexistent.png -> 404 (5ms)
Context: {
  "requestId": "8hiwl8l2mhvi9oeg",
  "duration": 5,
  "status": 404
}
[2025-11-12T04:34:05.901Z] [DEBUG][glklr4g4] [Middleware] Session validation result
Context: {
  "requestId": "glklr4g4mhvi9oeb",
  "sessionValid": true,
  "userValid": true
}
[dev] [33mâ–² [43;33m[[43;30mWARNING[43;33m][0m [1m[R2Proxy][R2AI-1762922045897-b64fy] R2 object not found { key: 'ai-enhancer/results/guest/test-guest-owner/nonexistent.png' }[0m


[31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:05.901Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/testing/evaluate/next/run",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "webEvalBrowser",
      "maxRequests": 5,
      "windowMs": 60000,
      "resetAt": 1762922046426
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/testing/evaluate/next/run",
      "ipAddress": "::1",
      "timestamp": 1762922045901,
      "details": {
        "limiterName": "webEvalBrowser",
        "maxRequests": 5,
        "windowMs": 60000,
        "resetAt": 1762922046426
      }
    }
  }
[dev] [2025-11-12T04:34:05.902Z] [DEBUG][c12euu6h] [Middleware] Outgoing response
Context: {
  "requestId": "c12euu6hmhvi9oei",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "1",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:05.902Z] [DEBUG][c12euu6h] [Middleware] Processing path
Context: {
  "requestId": "c12euu6hmhvi9oei",
  "path": "/api/testing/evaluate/next/run"
}
[2025-11-12T04:34:05.902Z] [INFO][c12euu6h] POST /api/testing/evaluate/next/run -> 429 (4ms)
Context: {
  "requestId": "c12euu6hmhvi9oei",
  "duration": 4,
  "status": 429
}
[2025-11-12T04:34:05.903Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'd44cd9d1-b68d-41bd-9c69-87ac5bda927f',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: { endpoint: '/api/admin/users/sessions', method: 'GET' }
}
[2025-11-12T04:34:05.905Z] [DEBUG][glklr4g4] [Middleware] Outgoing response
Context: {
  "requestId": "glklr4g4mhvi9oeb",
  "status": 403,
  "statusText": "Forbidden",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:05.905Z] [DEBUG][glklr4g4] [Middleware] Processing path
Context: {
  "requestId": "glklr4g4mhvi9oeb",
  "path": "/api/admin/users/sessions"
}
[2025-11-12T04:34:05.905Z] [INFO][glklr4g4] GET /api/admin/users/sessions -> 403 (14ms)
Context: {
  "requestId": "glklr4g4mhvi9oeb",
  "duration": 14,
  "status": 403
}
[wrangler:info] GET /r2-ai/ai-enhancer/results/guest/test-guest-owner/nonexistent.png 404 Not Found (27ms)
[wrangler:info] POST /api/testing/evaluate/next/run 429 Too Many Requests (20ms)
[wrangler:info] GET /api/admin/users/sessions 403 Forbidden (21ms)
[2025-11-12T04:34:05.912Z] [INFO][0b2fzwxg] GET /blog/new-work-ist-eine-haltung/
Context: {
  "requestId": "0b2fzwxgmhvi9oew",
  "endpoint": "/blog/new-work-ist-eine-haltung/",
  "method": "GET"
}
[2025-11-12T04:34:05.912Z] [DEBUG][0b2fzwxg] [Middleware] Session ID from cookie
Context: {
  "requestId": "0b2fzwxgmhvi9oew",
  "present": false
}
 âœ“ |integration| tests/integration/api/r2-ai-proxy.test.ts > R2 AI Proxy route (/r2-ai/[...path]) > returns 403 for results path when requester is not the owner (guest) 151ms
 âœ“ |integration| tests/integration/api/r2-ai-proxy.test.ts > R2 AI Proxy route (/r2-ai/[...path]) > returns 404 for invalid key prefix (not starting with ai-enhancer/) 35ms
 âœ“ |integration| tests/integration/api/r2-ai-proxy.test.ts > R2 AI Proxy route (/r2-ai/[...path]) > allows owner for results path (guest) and proceeds to bucket lookup (404 if not found) 29ms
 âœ“ |integration| tests/integration/api/admin-sessions.test.ts > Admin Sessions API â€” authenticated (non-admin) â†’ 403 > POST /api/debug-login then GET /api/admin/users/sessions â†’ 403 (not admin) 67ms
[dev] [2025-11-12T04:34:05.915Z] [DEBUG][0b2fzwxg] [Middleware] Outgoing response
Context: {
  "requestId": "0b2fzwxgmhvi9oew",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "text/html",
    "x-astro-route-type": "page"
  }
}
[2025-11-12T04:34:05.915Z] [DEBUG][0b2fzwxg] [Middleware] Processing path
Context: {
  "requestId": "0b2fzwxgmhvi9oew",
  "path": "/blog/new-work-ist-eine-haltung/"
}
[2025-11-12T04:34:05.915Z] [INFO][0b2fzwxg] GET /blog/new-work-ist-eine-haltung/ -> 200 (3ms)
Context: {
  "requestId": "0b2fzwxgmhvi9oew",
  "duration": 3,
  "status": 200
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1mWarning: Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:[0m

  1. You might have mismatching versions of React and the renderer (such as React DOM)
  2. You might be breaking the Rules of Hooks
  3. You might have more than one copy of React in the same app
  See [4mhttps://reactjs.org/link/invalid-hook-call[0m for tips about how to debug and fix this problem.
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1mWarning: Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:[0m

  1. You might have mismatching versions of React and the renderer (such as React DOM)
  2. You might be breaking the Rules of Hooks
  3. You might have more than one copy of React in the same app
  See [4mhttps://reactjs.org/link/invalid-hook-call[0m for tips about how to debug and fix this problem.
[dev] [2025-11-12T04:34:05.918Z] [INFO][7hpgps3y] GET /api/admin/credits/history
Context: {
  "requestId": "7hpgps3ymhvi9of2",
  "endpoint": "/api/admin/credits/history",
  "method": "GET"
}
[2025-11-12T04:34:05.918Z] [DEBUG][7hpgps3y] [Middleware] Session ID from cookie
Context: {
  "requestId": "7hpgps3ymhvi9of2",
  "present": true
}
[dev] [2025-11-12T04:34:05.919Z] [DEBUG][7hpgps3y] [Middleware] Session validation result
Context: {
  "requestId": "7hpgps3ymhvi9of2",
  "sessionValid": true,
  "userValid": true
}
[dev] [wrangler:info] GET /blog/new-work-ist-eine-haltung/ 200 OK (15ms)
[dev] [2025-11-12T04:34:05.921Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'd44cd9d1-b68d-41bd-9c69-87ac5bda927f',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: { endpoint: '/api/admin/credits/history', method: 'GET' }
}
[dev] [2025-11-12T04:34:05.923Z] [DEBUG][7hpgps3y] [Middleware] Outgoing response
Context: {
  "requestId": "7hpgps3ymhvi9of2",
  "status": 403,
  "statusText": "Forbidden",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:05.923Z] [DEBUG][7hpgps3y] [Middleware] Processing path
Context: {
  "requestId": "7hpgps3ymhvi9of2",
  "path": "/api/admin/credits/history"
}
[2025-11-12T04:34:05.923Z] [INFO][7hpgps3y] GET /api/admin/credits/history -> 403 (5ms)
Context: {
  "requestId": "7hpgps3ymhvi9of2",
  "duration": 5,
  "status": 403
}
[wrangler:info] GET /api/admin/credits/history 403 Forbidden (37ms)
[dev] [2025-11-12T04:34:05.940Z] [INFO][c85bgao0] GET /api/admin/credits/usage
Context: {
  "requestId": "c85bgao0mhvi9ofo",
  "endpoint": "/api/admin/credits/usage",
  "method": "GET"
}
[2025-11-12T04:34:05.940Z] [DEBUG][c85bgao0] [Middleware] Session ID from cookie
Context: {
  "requestId": "c85bgao0mhvi9ofo",
  "present": true
}
[2025-11-12T04:34:05.940Z] [INFO][fj5sr32u] POST /api/testing/evaluate/next/run
Context: {
  "requestId": "fj5sr32umhvi9ofo",
  "endpoint": "/api/testing/evaluate/next/run",
  "method": "POST"
}
[2025-11-12T04:34:05.940Z] [DEBUG][fj5sr32u] [Middleware] Session ID from cookie
Context: {
  "requestId": "fj5sr32umhvi9ofo",
  "present": false
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:05.941Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/testing/evaluate/next/run",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "webEvalBrowser",
      "maxRequests": 5,
      "windowMs": 60000,
      "resetAt": 1762922046426
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/testing/evaluate/next/run",
      "ipAddress": "::1",
      "timestamp": 1762922045941,
      "details": {
        "limiterName": "webEvalBrowser",
        "maxRequests": 5,
        "windowMs": 60000,
        "resetAt": 1762922046426
      }
    }
  }
[dev] [2025-11-12T04:34:05.941Z] [DEBUG][fj5sr32u] [Middleware] Outgoing response
Context: {
  "requestId": "fj5sr32umhvi9ofo",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "1",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:05.942Z] [DEBUG][fj5sr32u] [Middleware] Processing path
Context: {
  "requestId": "fj5sr32umhvi9ofo",
  "path": "/api/testing/evaluate/next/run"
}
[2025-11-12T04:34:05.942Z] [INFO][fj5sr32u] POST /api/testing/evaluate/next/run -> 429 (2ms)
Context: {
  "requestId": "fj5sr32umhvi9ofo",
  "duration": 2,
  "status": 429
}
[2025-11-12T04:34:05.942Z] [DEBUG][c85bgao0] [Middleware] Session validation result
Context: {
  "requestId": "c85bgao0mhvi9ofo",
  "sessionValid": true,
  "userValid": true
}
[dev] [2025-11-12T04:34:05.943Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'd44cd9d1-b68d-41bd-9c69-87ac5bda927f',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: { endpoint: '/api/admin/credits/usage', method: 'GET' }
}
[wrangler:info] POST /api/testing/evaluate/next/run 429 Too Many Requests (30ms)
[dev] [2025-11-12T04:34:05.945Z] [DEBUG][c85bgao0] [Middleware] Outgoing response
Context: {
  "requestId": "c85bgao0mhvi9ofo",
  "status": 403,
  "statusText": "Forbidden",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:05.945Z] [DEBUG][c85bgao0] [Middleware] Processing path
Context: {
  "requestId": "c85bgao0mhvi9ofo",
  "path": "/api/admin/credits/usage"
}
[2025-11-12T04:34:05.945Z] [INFO][c85bgao0] GET /api/admin/credits/usage -> 403 (5ms)
Context: {
  "requestId": "c85bgao0mhvi9ofo",
  "duration": 5,
  "status": 403
}
[dev] [wrangler:info] GET /api/admin/credits/usage 403 Forbidden (19ms)
[dev] [2025-11-12T04:34:05.953Z] [INFO][qy5uf3li] GET /blog/new-work-ist-eine-haltung
Context: {
  "requestId": "qy5uf3limhvi9og1",
  "endpoint": "/blog/new-work-ist-eine-haltung",
  "method": "GET"
}
[2025-11-12T04:34:05.953Z] [DEBUG][qy5uf3li] [Middleware] Session ID from cookie
Context: {
  "requestId": "qy5uf3limhvi9og1",
  "present": false
}
[dev] [2025-11-12T04:34:05.955Z] [DEBUG][qy5uf3li] [Middleware] Outgoing response
Context: {
  "requestId": "qy5uf3limhvi9og1",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "text/html",
    "x-astro-route-type": "page"
  }
}
[2025-11-12T04:34:05.955Z] [DEBUG][qy5uf3li] [Middleware] Processing path
Context: {
  "requestId": "qy5uf3limhvi9og1",
  "path": "/blog/new-work-ist-eine-haltung"
}
[2025-11-12T04:34:05.955Z] [INFO][qy5uf3li] GET /blog/new-work-ist-eine-haltung -> 200 (2ms)
Context: {
  "requestId": "qy5uf3limhvi9og1",
  "duration": 2,
  "status": 200
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1mWarning: Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:[0m

  1. You might have mismatching versions of React and the renderer (such as React DOM)
  2. You might be breaking the Rules of Hooks
  3. You might have more than one copy of React in the same app
  See [4mhttps://reactjs.org/link/invalid-hook-call[0m for tips about how to debug and fix this problem.
 âœ“ |integration| tests/integration/api/admin-credits.test.ts > Admin Credits API â€” authenticated (non-admin) â†’ 403 > POST /api/debug-login then GET history/usage â†’ 403 110ms
 âœ“ |integration| tests/integration/routing/blog-routes.test.ts > Blog routes > GET /blog/digital-detox-kreativitaet/ resolves (200) 105ms
 âœ“ |integration| tests/integration/routing/blog-routes.test.ts > Blog routes > GET /blog/digital-detox-kreativitaet (no trailing slash) redirects or serves 43ms
 âœ“ |integration| tests/integration/routing/blog-routes.test.ts > Blog routes > GET /blog/new-work-ist-eine-haltung/ resolves (200) 46ms
 âœ“ |integration| tests/integration/routing/blog-routes.test.ts > Blog routes > GET /blog/new-work-ist-eine-haltung (no trailing slash) redirects or serves 15ms
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1mWarning: Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:[0m

  1. You might have mismatching versions of React and the renderer (such as React DOM)
  2. You might be breaking the Rules of Hooks
  3. You might have more than one copy of React in the same app
  See [4mhttps://reactjs.org/link/invalid-hook-call[0m for tips about how to debug and fix this problem.
[dev] [2025-11-12T04:34:05.957Z] [INFO][fgfb384d] POST /api/testing/evaluate/next/run
Context: {
  "requestId": "fgfb384dmhvi9og5",
  "endpoint": "/api/testing/evaluate/next/run",
  "method": "POST"
}
[2025-11-12T04:34:05.957Z] [DEBUG][fgfb384d] [Middleware] Session ID from cookie
Context: {
  "requestId": "fgfb384dmhvi9og5",
  "present": false
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:05.958Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/testing/evaluate/next/run",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "webEvalBrowser",
      "maxRequests": 5,
      "windowMs": 60000,
      "resetAt": 1762922046426
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/testing/evaluate/next/run",
      "ipAddress": "::1",
      "timestamp": 1762922045958,
      "details": {
        "limiterName": "webEvalBrowser",
        "maxRequests": 5,
        "windowMs": 60000,
        "resetAt": 1762922046426
      }
    }
  }
[dev] [2025-11-12T04:34:05.958Z] [DEBUG][fgfb384d] [Middleware] Outgoing response
Context: {
  "requestId": "fgfb384dmhvi9og5",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "1",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:05.958Z] [DEBUG][fgfb384d] [Middleware] Processing path
Context: {
  "requestId": "fgfb384dmhvi9og5",
  "path": "/api/testing/evaluate/next/run"
}
[2025-11-12T04:34:05.958Z] [INFO][fgfb384d] POST /api/testing/evaluate/next/run -> 429 (1ms)
Context: {
  "requestId": "fgfb384dmhvi9og5",
  "duration": 1,
  "status": 429
}
[wrangler:info] GET /blog/new-work-ist-eine-haltung 200 OK (9ms)
[dev] [wrangler:info] POST /api/testing/evaluate/next/run 429 Too Many Requests (15ms)
[dev] [2025-11-12T04:34:05.973Z] [INFO][yvyob5zg] POST /api/testing/evaluate/next/run
Context: {
  "requestId": "yvyob5zgmhvi9ogl",
  "endpoint": "/api/testing/evaluate/next/run",
  "method": "POST"
}
[2025-11-12T04:34:05.973Z] [DEBUG][yvyob5zg] [Middleware] Session ID from cookie
Context: {
  "requestId": "yvyob5zgmhvi9ogl",
  "present": false
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:05.973Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/testing/evaluate/next/run",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "webEvalBrowser",
      "maxRequests": 5,
      "windowMs": 60000,
      "resetAt": 1762922046426
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/testing/evaluate/next/run",
      "ipAddress": "::1",
      "timestamp": 1762922045973,
      "details": {
        "limiterName": "webEvalBrowser",
        "maxRequests": 5,
        "windowMs": 60000,
        "resetAt": 1762922046426
      }
    }
  }
[dev] [2025-11-12T04:34:05.973Z] [DEBUG][yvyob5zg] [Middleware] Outgoing response
Context: {
  "requestId": "yvyob5zgmhvi9ogl",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "1",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:05.974Z] [DEBUG][yvyob5zg] [Middleware] Processing path
Context: {
  "requestId": "yvyob5zgmhvi9ogl",
  "path": "/api/testing/evaluate/next/run"
}
[2025-11-12T04:34:05.974Z] [INFO][yvyob5zg] POST /api/testing/evaluate/next/run -> 429 (1ms)
Context: {
  "requestId": "yvyob5zgmhvi9ogl",
  "duration": 1,
  "status": 429
}
[dev] [wrangler:info] POST /api/testing/evaluate/next/run 429 Too Many Requests (6ms)
[dev] [2025-11-12T04:34:05.982Z] [INFO][rebst7m6] POST /api/testing/evaluate/next/run
Context: {
  "requestId": "rebst7m6mhvi9ogu",
  "endpoint": "/api/testing/evaluate/next/run",
  "method": "POST"
}
[2025-11-12T04:34:05.982Z] [DEBUG][rebst7m6] [Middleware] Session ID from cookie
Context: {
  "requestId": "rebst7m6mhvi9ogu",
  "present": false
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:05.983Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/testing/evaluate/next/run",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "webEvalBrowser",
      "maxRequests": 5,
      "windowMs": 60000,
      "resetAt": 1762922046426
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/testing/evaluate/next/run",
      "ipAddress": "::1",
      "timestamp": 1762922045983,
      "details": {
        "limiterName": "webEvalBrowser",
        "maxRequests": 5,
        "windowMs": 60000,
        "resetAt": 1762922046426
      }
    }
  }
[dev] [2025-11-12T04:34:05.984Z] [DEBUG][rebst7m6] [Middleware] Outgoing response
Context: {
  "requestId": "rebst7m6mhvi9ogu",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "1",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:05.984Z] [DEBUG][rebst7m6] [Middleware] Processing path
Context: {
  "requestId": "rebst7m6mhvi9ogu",
  "path": "/api/testing/evaluate/next/run"
}
[2025-11-12T04:34:05.984Z] [INFO][rebst7m6] POST /api/testing/evaluate/next/run -> 429 (2ms)
Context: {
  "requestId": "rebst7m6mhvi9ogu",
  "duration": 2,
  "status": 429
}
[2025-11-12T04:34:05.985Z] [INFO][v9wmy4yi] GET /
Context: {
  "requestId": "v9wmy4yimhvi9ogx",
  "endpoint": "/",
  "method": "GET"
}
[2025-11-12T04:34:05.985Z] [DEBUG][v9wmy4yi] [Middleware] Session ID from cookie
Context: {
  "requestId": "v9wmy4yimhvi9ogx",
  "present": false
}
[wrangler:info] POST /api/testing/evaluate/next/run 429 Too Many Requests (5ms)
[dev] [2025-11-12T04:34:05.989Z] [DEBUG][v9wmy4yi] [Middleware] Outgoing response
Context: {
  "requestId": "v9wmy4yimhvi9ogx",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "text/html",
    "x-astro-route-type": "page"
  }
}
[2025-11-12T04:34:05.989Z] [DEBUG][v9wmy4yi] [Middleware] Processing path
Context: {
  "requestId": "v9wmy4yimhvi9ogx",
  "path": "/"
}
[2025-11-12T04:34:05.990Z] [INFO][v9wmy4yi] GET / -> 200 (5ms)
Context: {
  "requestId": "v9wmy4yimhvi9ogx",
  "duration": 5,
  "status": 200
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1mWarning: Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:[0m

  1. You might have mismatching versions of React and the renderer (such as React DOM)
  2. You might be breaking the Rules of Hooks
  3. You might have more than one copy of React in the same app
  See [4mhttps://reactjs.org/link/invalid-hook-call[0m for tips about how to debug and fix this problem.
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1mWarning: Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:[0m

  1. You might have mismatching versions of React and the renderer (such as React DOM)
  2. You might be breaking the Rules of Hooks
  3. You might have more than one copy of React in the same app
  See [4mhttps://reactjs.org/link/invalid-hook-call[0m for tips about how to debug and fix this problem.
[dev] [wrangler:info] GET / 200 OK (20ms)
[dev] [2025-11-12T04:34:06.036Z] [INFO][zsyo0b8u] POST /api/testing/evaluate/next/run
Context: {
  "requestId": "zsyo0b8umhvi9oic",
  "endpoint": "/api/testing/evaluate/next/run",
  "method": "POST"
}
[2025-11-12T04:34:06.036Z] [DEBUG][zsyo0b8u] [Middleware] Session ID from cookie
Context: {
  "requestId": "zsyo0b8umhvi9oic",
  "present": false
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:06.037Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/testing/evaluate/next/run",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "webEvalBrowser",
      "maxRequests": 5,
      "windowMs": 60000,
      "resetAt": 1762922046426
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/testing/evaluate/next/run",
      "ipAddress": "::1",
      "timestamp": 1762922046037,
      "details": {
        "limiterName": "webEvalBrowser",
        "maxRequests": 5,
        "windowMs": 60000,
        "resetAt": 1762922046426
      }
    }
  }
[dev] [2025-11-12T04:34:06.037Z] [DEBUG][zsyo0b8u] [Middleware] Outgoing response
Context: {
  "requestId": "zsyo0b8umhvi9oic",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "1",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:06.037Z] [DEBUG][zsyo0b8u] [Middleware] Processing path
Context: {
  "requestId": "zsyo0b8umhvi9oic",
  "path": "/api/testing/evaluate/next/run"
}
[2025-11-12T04:34:06.037Z] [INFO][zsyo0b8u] POST /api/testing/evaluate/next/run -> 429 (1ms)
Context: {
  "requestId": "zsyo0b8umhvi9oic",
  "duration": 1,
  "status": 429
}
[dev] [wrangler:info] POST /api/testing/evaluate/next/run 429 Too Many Requests (48ms)
[dev] [2025-11-12T04:34:06.047Z] [INFO][q54rkusx] POST /api/testing/evaluate/next/run
Context: {
  "requestId": "q54rkusxmhvi9oin",
  "endpoint": "/api/testing/evaluate/next/run",
  "method": "POST"
}
[2025-11-12T04:34:06.047Z] [DEBUG][q54rkusx] [Middleware] Session ID from cookie
Context: {
  "requestId": "q54rkusxmhvi9oin",
  "present": false
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:06.048Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/testing/evaluate/next/run",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "webEvalBrowser",
      "maxRequests": 5,
      "windowMs": 60000,
      "resetAt": 1762922046426
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/testing/evaluate/next/run",
      "ipAddress": "::1",
      "timestamp": 1762922046048,
      "details": {
        "limiterName": "webEvalBrowser",
        "maxRequests": 5,
        "windowMs": 60000,
        "resetAt": 1762922046426
      }
    }
  }
[dev] [2025-11-12T04:34:06.049Z] [DEBUG][q54rkusx] [Middleware] Outgoing response
Context: {
  "requestId": "q54rkusxmhvi9oin",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "1",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:06.049Z] [DEBUG][q54rkusx] [Middleware] Processing path
Context: {
  "requestId": "q54rkusxmhvi9oin",
  "path": "/api/testing/evaluate/next/run"
}
[2025-11-12T04:34:06.049Z] [INFO][q54rkusx] POST /api/testing/evaluate/next/run -> 429 (2ms)
Context: {
  "requestId": "q54rkusxmhvi9oin",
  "duration": 2,
  "status": 429
}
[wrangler:info] POST /api/testing/evaluate/next/run 429 Too Many Requests (5ms)
[dev] [2025-11-12T04:34:06.063Z] [INFO][523k9a1p] POST /api/testing/evaluate/next/run
Context: {
  "requestId": "523k9a1pmhvi9oj3",
  "endpoint": "/api/testing/evaluate/next/run",
  "method": "POST"
}
[2025-11-12T04:34:06.063Z] [DEBUG][523k9a1p] [Middleware] Session ID from cookie
Context: {
  "requestId": "523k9a1pmhvi9oj3",
  "present": false
}
 âœ“ |integration| tests/integration/routing/seo-hreflang.test.ts > SEO hreflang/canonical > root / has canonical and hreflang alternates 117ms
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:06.064Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/testing/evaluate/next/run",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "webEvalBrowser",
      "maxRequests": 5,
      "windowMs": 60000,
      "resetAt": 1762922046426
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/testing/evaluate/next/run",
      "ipAddress": "::1",
      "timestamp": 1762922046064,
      "details": {
        "limiterName": "webEvalBrowser",
        "maxRequests": 5,
        "windowMs": 60000,
        "resetAt": 1762922046426
      }
    }
  }
[dev] [2025-11-12T04:34:06.064Z] [DEBUG][523k9a1p] [Middleware] Outgoing response
Context: {
  "requestId": "523k9a1pmhvi9oj3",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "1",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:06.064Z] [DEBUG][523k9a1p] [Middleware] Processing path
Context: {
  "requestId": "523k9a1pmhvi9oj3",
  "path": "/api/testing/evaluate/next/run"
}
[2025-11-12T04:34:06.064Z] [INFO][523k9a1p] POST /api/testing/evaluate/next/run -> 429 (1ms)
Context: {
  "requestId": "523k9a1pmhvi9oj3",
  "duration": 1,
  "status": 429
}
[2025-11-12T04:34:06.072Z] [INFO][fm9v2zyb] GET /en/
Context: {
  "requestId": "fm9v2zybmhvi9ojc",
  "endpoint": "/en/",
  "method": "GET"
}
[2025-11-12T04:34:06.072Z] [DEBUG][fm9v2zyb] [Middleware] pref_locale cookie synced to URL locale
Context: {
  "requestId": "fm9v2zybmhvi9ojc",
  "existingLocale": "en"
}
[2025-11-12T04:34:06.072Z] [DEBUG][fm9v2zyb] [Middleware] Session ID from cookie
Context: {
  "requestId": "fm9v2zybmhvi9ojc",
  "present": false
}
[wrangler:info] POST /api/testing/evaluate/next/run 429 Too Many Requests (11ms)
[2025-11-12T04:34:06.077Z] [DEBUG][fm9v2zyb] [Middleware] Outgoing response
Context: {
  "requestId": "fm9v2zybmhvi9ojc",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "text/html",
    "x-astro-route-type": "page"
  }
}
[2025-11-12T04:34:06.077Z] [DEBUG][fm9v2zyb] [Middleware] Processing path
Context: {
  "requestId": "fm9v2zybmhvi9ojc",
  "path": "/en/"
}
[2025-11-12T04:34:06.078Z] [INFO][fm9v2zyb] GET /en/ -> 200 (6ms)
Context: {
  "requestId": "fm9v2zybmhvi9ojc",
  "duration": 6,
  "status": 200
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1mWarning: Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:[0m

  1. You might have mismatching versions of React and the renderer (such as React DOM)
  2. You might be breaking the Rules of Hooks
  3. You might have more than one copy of React in the same app
  See [4mhttps://reactjs.org/link/invalid-hook-call[0m for tips about how to debug and fix this problem.
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1mWarning: Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:[0m

  1. You might have mismatching versions of React and the renderer (such as React DOM)
  2. You might be breaking the Rules of Hooks
  3. You might have more than one copy of React in the same app
  See [4mhttps://reactjs.org/link/invalid-hook-call[0m for tips about how to debug and fix this problem.
[dev] [wrangler:info] GET /en/ 200 OK (53ms)
[dev] [2025-11-12T04:34:06.146Z] [INFO][c8qtjg8k] POST /api/testing/evaluate/next/run
Context: {
  "requestId": "c8qtjg8kmhvi9ole",
  "endpoint": "/api/testing/evaluate/next/run",
  "method": "POST"
}
[2025-11-12T04:34:06.146Z] [DEBUG][c8qtjg8k] [Middleware] Session ID from cookie
Context: {
  "requestId": "c8qtjg8kmhvi9ole",
  "present": false
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:06.146Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/testing/evaluate/next/run",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "webEvalBrowser",
      "maxRequests": 5,
      "windowMs": 60000,
      "resetAt": 1762922046426
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/testing/evaluate/next/run",
      "ipAddress": "::1",
      "timestamp": 1762922046146,
      "details": {
        "limiterName": "webEvalBrowser",
        "maxRequests": 5,
        "windowMs": 60000,
        "resetAt": 1762922046426
      }
    }
  }
[dev] [2025-11-12T04:34:06.146Z] [DEBUG][c8qtjg8k] [Middleware] Outgoing response
Context: {
  "requestId": "c8qtjg8kmhvi9ole",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "1",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:06.147Z] [DEBUG][c8qtjg8k] [Middleware] Processing path
Context: {
  "requestId": "c8qtjg8kmhvi9ole",
  "path": "/api/testing/evaluate/next/run"
}
[2025-11-12T04:34:06.147Z] [INFO][c8qtjg8k] POST /api/testing/evaluate/next/run -> 429 (1ms)
Context: {
  "requestId": "c8qtjg8kmhvi9ole",
  "duration": 1,
  "status": 429
}
[dev] [wrangler:info] POST /api/testing/evaluate/next/run 429 Too Many Requests (71ms)
 âœ“ |integration| tests/integration/routing/seo-hreflang.test.ts > SEO hreflang/canonical > EN /en/ has canonical and hreflang alternates 81ms
[dev] [2025-11-12T04:34:06.152Z] [INFO][g1pw8nju] POST /api/testing/evaluate/next/run
Context: {
  "requestId": "g1pw8njumhvi9olk",
  "endpoint": "/api/testing/evaluate/next/run",
  "method": "POST"
}
[2025-11-12T04:34:06.152Z] [DEBUG][g1pw8nju] [Middleware] Session ID from cookie
Context: {
  "requestId": "g1pw8njumhvi9olk",
  "present": false
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:06.153Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/testing/evaluate/next/run",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "webEvalBrowser",
      "maxRequests": 5,
      "windowMs": 60000,
      "resetAt": 1762922046426
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/testing/evaluate/next/run",
      "ipAddress": "::1",
      "timestamp": 1762922046153,
      "details": {
        "limiterName": "webEvalBrowser",
        "maxRequests": 5,
        "windowMs": 60000,
        "resetAt": 1762922046426
      }
    }
  }
[dev] [2025-11-12T04:34:06.153Z] [DEBUG][g1pw8nju] [Middleware] Outgoing response
Context: {
  "requestId": "g1pw8njumhvi9olk",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "1",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:06.153Z] [DEBUG][g1pw8nju] [Middleware] Processing path
Context: {
  "requestId": "g1pw8njumhvi9olk",
  "path": "/api/testing/evaluate/next/run"
}
[2025-11-12T04:34:06.153Z] [INFO][g1pw8nju] POST /api/testing/evaluate/next/run -> 429 (1ms)
Context: {
  "requestId": "g1pw8njumhvi9olk",
  "duration": 1,
  "status": 429
}
[dev] [wrangler:info] POST /api/testing/evaluate/next/run 429 Too Many Requests (5ms)
[dev] [2025-11-12T04:34:06.159Z] [INFO][4y608ia3] POST /api/testing/evaluate/next/run
Context: {
  "requestId": "4y608ia3mhvi9olr",
  "endpoint": "/api/testing/evaluate/next/run",
  "method": "POST"
}
[2025-11-12T04:34:06.159Z] [DEBUG][4y608ia3] [Middleware] Session ID from cookie
Context: {
  "requestId": "4y608ia3mhvi9olr",
  "present": false
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:06.160Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/testing/evaluate/next/run",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "webEvalBrowser",
      "maxRequests": 5,
      "windowMs": 60000,
      "resetAt": 1762922046426
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/testing/evaluate/next/run",
      "ipAddress": "::1",
      "timestamp": 1762922046160,
      "details": {
        "limiterName": "webEvalBrowser",
        "maxRequests": 5,
        "windowMs": 60000,
        "resetAt": 1762922046426
      }
    }
  }
[dev] [2025-11-12T04:34:06.160Z] [DEBUG][4y608ia3] [Middleware] Outgoing response
Context: {
  "requestId": "4y608ia3mhvi9olr",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "1",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:06.160Z] [DEBUG][4y608ia3] [Middleware] Processing path
Context: {
  "requestId": "4y608ia3mhvi9olr",
  "path": "/api/testing/evaluate/next/run"
}
[2025-11-12T04:34:06.160Z] [INFO][4y608ia3] POST /api/testing/evaluate/next/run -> 429 (1ms)
Context: {
  "requestId": "4y608ia3mhvi9olr",
  "duration": 1,
  "status": 429
}
[dev] [wrangler:info] POST /api/testing/evaluate/next/run 429 Too Many Requests (3ms)
[dev] [2025-11-12T04:34:06.167Z] [INFO][h6dwcgjo] POST /api/testing/evaluate/next/run
Context: {
  "requestId": "h6dwcgjomhvi9olz",
  "endpoint": "/api/testing/evaluate/next/run",
  "method": "POST"
}
[2025-11-12T04:34:06.167Z] [DEBUG][h6dwcgjo] [Middleware] Session ID from cookie
Context: {
  "requestId": "h6dwcgjomhvi9olz",
  "present": false
}
[dev] [2025-11-12T04:34:06.168Z] [DEBUG][h6dwcgjo] [Middleware] Outgoing response
Context: {
  "requestId": "h6dwcgjomhvi9olz",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "1",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:06.168Z] [DEBUG][h6dwcgjo] [Middleware] Processing path
Context: {
  "requestId": "h6dwcgjomhvi9olz",
  "path": "/api/testing/evaluate/next/run"
}
[2025-11-12T04:34:06.168Z] [INFO][h6dwcgjo] POST /api/testing/evaluate/next/run -> 429 (1ms)
Context: {
  "requestId": "h6dwcgjomhvi9olz",
  "duration": 1,
  "status": 429
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:06.167Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/testing/evaluate/next/run",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "webEvalBrowser",
      "maxRequests": 5,
      "windowMs": 60000,
      "resetAt": 1762922046426
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/testing/evaluate/next/run",
      "ipAddress": "::1",
      "timestamp": 1762922046167,
      "details": {
        "limiterName": "webEvalBrowser",
        "maxRequests": 5,
        "windowMs": 60000,
        "resetAt": 1762922046426
      }
    }
  }
[dev] [wrangler:info] POST /api/testing/evaluate/next/run 429 Too Many Requests (8ms)
[dev] [2025-11-12T04:34:06.179Z] [INFO][a17k0ip2] POST /api/testing/evaluate/next/run
Context: {
  "requestId": "a17k0ip2mhvi9omb",
  "endpoint": "/api/testing/evaluate/next/run",
  "method": "POST"
}
[dev] [2025-11-12T04:34:06.179Z] [DEBUG][a17k0ip2] [Middleware] Session ID from cookie
Context: {
  "requestId": "a17k0ip2mhvi9omb",
  "present": false
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:06.180Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/testing/evaluate/next/run",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "webEvalBrowser",
      "maxRequests": 5,
      "windowMs": 60000,
      "resetAt": 1762922046426
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/testing/evaluate/next/run",
      "ipAddress": "::1",
      "timestamp": 1762922046180,
      "details": {
        "limiterName": "webEvalBrowser",
        "maxRequests": 5,
        "windowMs": 60000,
        "resetAt": 1762922046426
      }
    }
  }
[dev] [2025-11-12T04:34:06.180Z] [DEBUG][a17k0ip2] [Middleware] Outgoing response
Context: {
  "requestId": "a17k0ip2mhvi9omb",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "1",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:06.180Z] [DEBUG][a17k0ip2] [Middleware] Processing path
Context: {
  "requestId": "a17k0ip2mhvi9omb",
  "path": "/api/testing/evaluate/next/run"
}
[2025-11-12T04:34:06.180Z] [INFO][a17k0ip2] POST /api/testing/evaluate/next/run -> 429 (1ms)
Context: {
  "requestId": "a17k0ip2mhvi9omb",
  "duration": 1,
  "status": 429
}
[wrangler:info] POST /api/testing/evaluate/next/run 429 Too Many Requests (5ms)
[dev] [2025-11-12T04:34:06.186Z] [INFO][1khcsxwz] POST /api/testing/evaluate/next/run
Context: {
  "requestId": "1khcsxwzmhvi9omi",
  "endpoint": "/api/testing/evaluate/next/run",
  "method": "POST"
}
[dev] [2025-11-12T04:34:06.187Z] [DEBUG][1khcsxwz] [Middleware] Session ID from cookie
Context: {
  "requestId": "1khcsxwzmhvi9omi",
  "present": false
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:06.187Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/testing/evaluate/next/run",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "webEvalBrowser",
      "maxRequests": 5,
      "windowMs": 60000,
      "resetAt": 1762922046426
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/testing/evaluate/next/run",
      "ipAddress": "::1",
      "timestamp": 1762922046187,
      "details": {
        "limiterName": "webEvalBrowser",
        "maxRequests": 5,
        "windowMs": 60000,
        "resetAt": 1762922046426
      }
    }
  }
[dev] [2025-11-12T04:34:06.187Z] [DEBUG][1khcsxwz] [Middleware] Outgoing response
Context: {
  "requestId": "1khcsxwzmhvi9omi",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "1",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:06.187Z] [DEBUG][1khcsxwz] [Middleware] Processing path
Context: {
  "requestId": "1khcsxwzmhvi9omi",
  "path": "/api/testing/evaluate/next/run"
}
[2025-11-12T04:34:06.187Z] [INFO][1khcsxwz] POST /api/testing/evaluate/next/run -> 429 (1ms)
Context: {
  "requestId": "1khcsxwzmhvi9omi",
  "duration": 1,
  "status": 429
}
[dev] [wrangler:info] POST /api/testing/evaluate/next/run 429 Too Many Requests (3ms)
[dev] [2025-11-12T04:34:06.191Z] [INFO][yul0t2m8] POST /api/voice/transcribe
Context: {
  "requestId": "yul0t2m8mhvi9omn",
  "endpoint": "/api/voice/transcribe",
  "method": "POST"
}
[2025-11-12T04:34:06.191Z] [DEBUG][yul0t2m8] [Middleware] Session ID from cookie
Context: {
  "requestId": "yul0t2m8mhvi9omn",
  "present": false
}
[dev] [2025-11-12T04:34:06.193Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: { endpoint: '/api/voice/transcribe', method: 'POST' }
}
[dev] [2025-11-12T04:34:06.203Z] [INFO] transcribe_api_success {
  timestamp: {},
  resource: 'voice-transcribe-api',
  action: 'transcribe_api_success',
  metadata: {
    sessionId: 'sess-7a7ce65d497606ca5c7ad555c96e8f3f',
    jobId: 'it-b86c15d9a863e62e169ca0711d13aa3a',
    ownerType: 'guest',
    isFinal: true,
    latencyMs: 9,
    sizeBytes: 2048
  }
}
[dev] [2025-11-12T04:34:06.203Z] [DEBUG][yul0t2m8] [Middleware] Outgoing response
Context: {
  "requestId": "yul0t2m8mhvi9omn",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:06.203Z] [DEBUG][yul0t2m8] [Middleware] Processing path
Context: {
  "requestId": "yul0t2m8mhvi9omn",
  "path": "/api/voice/transcribe"
}
[2025-11-12T04:34:06.204Z] [INFO][yul0t2m8] POST /api/voice/transcribe -> 200 (13ms)
Context: {
  "requestId": "yul0t2m8mhvi9omn",
  "duration": 13,
  "status": 200
}
[2025-11-12T04:34:06.204Z] [INFO][04fzajdd] POST /api/testing/evaluate/next/run
Context: {
  "requestId": "04fzajddmhvi9on0",
  "endpoint": "/api/testing/evaluate/next/run",
  "method": "POST"
}
[wrangler:info] POST /api/voice/transcribe 200 OK (16ms)
[2025-11-12T04:34:06.205Z] [DEBUG][04fzajdd] [Middleware] Session ID from cookie
Context: {
  "requestId": "04fzajddmhvi9on0",
  "present": false
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:06.205Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/testing/evaluate/next/run",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "webEvalBrowser",
      "maxRequests": 5,
      "windowMs": 60000,
      "resetAt": 1762922046426
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/testing/evaluate/next/run",
      "ipAddress": "::1",
      "timestamp": 1762922046205,
      "details": {
        "limiterName": "webEvalBrowser",
        "maxRequests": 5,
        "windowMs": 60000,
        "resetAt": 1762922046426
      }
    }
  }
[dev] [2025-11-12T04:34:06.205Z] [DEBUG][04fzajdd] [Middleware] Outgoing response
Context: {
  "requestId": "04fzajddmhvi9on0",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "1",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:06.205Z] [DEBUG][04fzajdd] [Middleware] Processing path
Context: {
  "requestId": "04fzajddmhvi9on0",
  "path": "/api/testing/evaluate/next/run"
}
[dev] [2025-11-12T04:34:06.205Z] [INFO][04fzajdd] POST /api/testing/evaluate/next/run -> 429 (1ms)
Context: {
  "requestId": "04fzajddmhvi9on0",
  "duration": 1,
  "status": 429
}
[dev] [wrangler:info] POST /api/testing/evaluate/next/run 429 Too Many Requests (16ms)
[dev] [2025-11-12T04:34:06.211Z] [INFO][51ek4ow0] POST /api/testing/evaluate/next/run
Context: {
  "requestId": "51ek4ow0mhvi9on7",
  "endpoint": "/api/testing/evaluate/next/run",
  "method": "POST"
}
[2025-11-12T04:34:06.211Z] [DEBUG][51ek4ow0] [Middleware] Session ID from cookie
Context: {
  "requestId": "51ek4ow0mhvi9on7",
  "present": false
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:06.212Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/testing/evaluate/next/run",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "webEvalBrowser",
      "maxRequests": 5,
      "windowMs": 60000,
      "resetAt": 1762922046426
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/testing/evaluate/next/run",
      "ipAddress": "::1",
      "timestamp": 1762922046212,
      "details": {
        "limiterName": "webEvalBrowser",
        "maxRequests": 5,
        "windowMs": 60000,
        "resetAt": 1762922046426
      }
    }
  }
[dev] [2025-11-12T04:34:06.214Z] [DEBUG][51ek4ow0] [Middleware] Outgoing response
Context: {
  "requestId": "51ek4ow0mhvi9on7",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "1",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:06.217Z] [DEBUG][51ek4ow0] [Middleware] Processing path
Context: {
  "requestId": "51ek4ow0mhvi9on7",
  "path": "/api/testing/evaluate/next/run"
}
[2025-11-12T04:34:06.217Z] [INFO][51ek4ow0] POST /api/testing/evaluate/next/run -> 429 (6ms)
Context: {
  "requestId": "51ek4ow0mhvi9on7",
  "duration": 6,
  "status": 429
}
[dev] [wrangler:info] POST /api/testing/evaluate/next/run 429 Too Many Requests (9ms)
[dev] [2025-11-12T04:34:06.219Z] [INFO][fize53zk] GET /api/voice/poll
Context: {
  "requestId": "fize53zkmhvi9onf",
  "endpoint": "/api/voice/poll",
  "method": "GET"
}
[2025-11-12T04:34:06.219Z] [DEBUG][fize53zk] [Middleware] Session ID from cookie
Context: {
  "requestId": "fize53zkmhvi9onf",
  "present": false
}
[2025-11-12T04:34:06.221Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: { endpoint: '/api/voice/poll', method: 'GET' }
}
[2025-11-12T04:34:06.221Z] [DEBUG][fize53zk] [Middleware] Outgoing response
Context: {
  "requestId": "fize53zkmhvi9onf",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:06.222Z] [DEBUG][fize53zk] [Middleware] Processing path
Context: {
  "requestId": "fize53zkmhvi9onf",
  "path": "/api/voice/poll"
}
[2025-11-12T04:34:06.222Z] [INFO][fize53zk] GET /api/voice/poll -> 200 (3ms)
Context: {
  "requestId": "fize53zkmhvi9onf",
  "duration": 3,
  "status": 200
}
[dev] [2025-11-12T04:34:06.223Z] [INFO][1d8mmm4n] POST /api/testing/evaluate/next/run
Context: {
  "requestId": "1d8mmm4nmhvi9onj",
  "endpoint": "/api/testing/evaluate/next/run",
  "method": "POST"
}
[2025-11-12T04:34:06.223Z] [DEBUG][1d8mmm4n] [Middleware] Session ID from cookie
Context: {
  "requestId": "1d8mmm4nmhvi9onj",
  "present": false
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:06.224Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/testing/evaluate/next/run",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "webEvalBrowser",
      "maxRequests": 5,
      "windowMs": 60000,
      "resetAt": 1762922046426
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/testing/evaluate/next/run",
      "ipAddress": "::1",
      "timestamp": 1762922046224,
      "details": {
        "limiterName": "webEvalBrowser",
        "maxRequests": 5,
        "windowMs": 60000,
        "resetAt": 1762922046426
      }
    }
  }
[dev] [2025-11-12T04:34:06.224Z] [DEBUG][1d8mmm4n] [Middleware] Outgoing response
Context: {
  "requestId": "1d8mmm4nmhvi9onj",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "1",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:06.224Z] [DEBUG][1d8mmm4n] [Middleware] Processing path
Context: {
  "requestId": "1d8mmm4nmhvi9onj",
  "path": "/api/testing/evaluate/next/run"
}
[2025-11-12T04:34:06.224Z] [INFO][1d8mmm4n] POST /api/testing/evaluate/next/run -> 429 (1ms)
Context: {
  "requestId": "1d8mmm4nmhvi9onj",
  "duration": 1,
  "status": 429
}
[dev] [wrangler:info] GET /api/voice/poll 200 OK (12ms)
[dev] [wrangler:info] POST /api/testing/evaluate/next/run 429 Too Many Requests (4ms)
[dev] [2025-11-12T04:34:06.228Z] [INFO][k3i0xz4g] POST /api/testing/evaluate/next/run
Context: {
  "requestId": "k3i0xz4gmhvi9ono",
  "endpoint": "/api/testing/evaluate/next/run",
  "method": "POST"
}
[2025-11-12T04:34:06.228Z] [DEBUG][k3i0xz4g] [Middleware] Session ID from cookie
Context: {
  "requestId": "k3i0xz4gmhvi9ono",
  "present": false
}
[dev] [2025-11-12T04:34:06.229Z] [DEBUG][k3i0xz4g] [Middleware] Outgoing response
Context: {
  "requestId": "k3i0xz4gmhvi9ono",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "1",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:06.229Z] [DEBUG][k3i0xz4g] [Middleware] Processing path
Context: {
  "requestId": "k3i0xz4gmhvi9ono",
  "path": "/api/testing/evaluate/next/run"
}
[2025-11-12T04:34:06.229Z] [INFO][k3i0xz4g] POST /api/testing/evaluate/next/run -> 429 (1ms)
Context: {
  "requestId": "k3i0xz4gmhvi9ono",
  "duration": 1,
  "status": 429
}
[wrangler:info] POST /api/testing/evaluate/next/run 429 Too Many Requests (5ms)
 âœ“ |integration| tests/integration/api/voice/transcribe-and-poll.test.ts > POST /api/voice/transcribe + GET /api/voice/poll > uploads a short audio chunk and poll reflects usage/final 98ms
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:06.229Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/testing/evaluate/next/run",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "webEvalBrowser",
      "maxRequests": 5,
      "windowMs": 60000,
      "resetAt": 1762922046426
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/testing/evaluate/next/run",
      "ipAddress": "::1",
      "timestamp": 1762922046229,
      "details": {
        "limiterName": "webEvalBrowser",
        "maxRequests": 5,
        "windowMs": 60000,
        "resetAt": 1762922046426
      }
    }
  }
[dev] [2025-11-12T04:34:06.234Z] [INFO][w9869wrm] GET /api/voice/transcribe
Context: {
  "requestId": "w9869wrmmhvi9onu",
  "endpoint": "/api/voice/transcribe",
  "method": "GET"
}
[2025-11-12T04:34:06.235Z] [DEBUG][w9869wrm] [Middleware] Session ID from cookie
Context: {
  "requestId": "w9869wrmmhvi9onu",
  "present": false
}
[2025-11-12T04:34:06.235Z] [DEBUG][w9869wrm] [Middleware] Outgoing response
Context: {
  "requestId": "w9869wrmmhvi9onu",
  "status": 405,
  "statusText": "Method Not Allowed",
  "headers": {
    "allow": "POST",
    "content-type": "application/json"
  }
}
[2025-11-12T04:34:06.235Z] [DEBUG][w9869wrm] [Middleware] Processing path
Context: {
  "requestId": "w9869wrmmhvi9onu",
  "path": "/api/voice/transcribe"
}
[dev] [2025-11-12T04:34:06.235Z] [INFO][w9869wrm] GET /api/voice/transcribe -> 405 (1ms)
Context: {
  "requestId": "w9869wrmmhvi9onu",
  "duration": 1,
  "status": 405
}
[dev] [wrangler:info] GET /api/voice/transcribe 405 Method Not Allowed (5ms)
[dev] [2025-11-12T04:34:06.240Z] [INFO][gc2s8fc6] POST /api/testing/evaluate/next/run
Context: {
  "requestId": "gc2s8fc6mhvi9oo0",
  "endpoint": "/api/testing/evaluate/next/run",
  "method": "POST"
}
[2025-11-12T04:34:06.240Z] [DEBUG][gc2s8fc6] [Middleware] Session ID from cookie
Context: {
  "requestId": "gc2s8fc6mhvi9oo0",
  "present": false
}
[2025-11-12T04:34:06.240Z] [DEBUG][gc2s8fc6] [Middleware] Outgoing response
Context: {
  "requestId": "gc2s8fc6mhvi9oo0",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "1",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:06.240Z] [DEBUG][gc2s8fc6] [Middleware] Processing path
Context: {
  "requestId": "gc2s8fc6mhvi9oo0",
  "path": "/api/testing/evaluate/next/run"
}
[2025-11-12T04:34:06.240Z] [INFO][gc2s8fc6] POST /api/testing/evaluate/next/run -> 429
Context: {
  "requestId": "gc2s8fc6mhvi9oo0",
  "duration": 0,
  "status": 429
}
[wrangler:info] POST /api/testing/evaluate/next/run 429 Too Many Requests (4ms)
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:06.240Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/testing/evaluate/next/run",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "webEvalBrowser",
      "maxRequests": 5,
      "windowMs": 60000,
      "resetAt": 1762922046426
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/testing/evaluate/next/run",
      "ipAddress": "::1",
      "timestamp": 1762922046240,
      "details": {
        "limiterName": "webEvalBrowser",
        "maxRequests": 5,
        "windowMs": 60000,
        "resetAt": 1762922046426
      }
    }
  }
[dev] [2025-11-12T04:34:06.246Z] [INFO][vw2bncvf] POST /api/testing/evaluate/next/run
Context: {
  "requestId": "vw2bncvfmhvi9oo6",
  "endpoint": "/api/testing/evaluate/next/run",
  "method": "POST"
}
[dev] [2025-11-12T04:34:06.247Z] [DEBUG][vw2bncvf] [Middleware] Session ID from cookie
Context: {
  "requestId": "vw2bncvfmhvi9oo6",
  "present": false
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:06.248Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/testing/evaluate/next/run",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "webEvalBrowser",
      "maxRequests": 5,
      "windowMs": 60000,
      "resetAt": 1762922046426
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/testing/evaluate/next/run",
      "ipAddress": "::1",
      "timestamp": 1762922046248,
      "details": {
        "limiterName": "webEvalBrowser",
        "maxRequests": 5,
        "windowMs": 60000,
        "resetAt": 1762922046426
      }
    }
  }


[31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:06.260Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/testing/evaluate/next/run",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "webEvalBrowser",
      "maxRequests": 5,
      "windowMs": 60000,
      "resetAt": 1762922046426
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/testing/evaluate/next/run",
      "ipAddress": "::1",
      "timestamp": 1762922046260,
      "details": {
        "limiterName": "webEvalBrowser",
        "maxRequests": 5,
        "windowMs": 60000,
        "resetAt": 1762922046426
      }
    }
  }
[dev] [2025-11-12T04:34:06.249Z] [DEBUG][vw2bncvf] [Middleware] Outgoing response
Context: {
  "requestId": "vw2bncvfmhvi9oo6",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "1",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:06.249Z] [DEBUG][vw2bncvf] [Middleware] Processing path
Context: {
  "requestId": "vw2bncvfmhvi9oo6",
  "path": "/api/testing/evaluate/next/run"
}
[2025-11-12T04:34:06.249Z] [INFO][vw2bncvf] POST /api/testing/evaluate/next/run -> 429 (3ms)
Context: {
  "requestId": "vw2bncvfmhvi9oo6",
  "duration": 3,
  "status": 429
}
[wrangler:info] POST /api/testing/evaluate/next/run 429 Too Many Requests (8ms)
[2025-11-12T04:34:06.258Z] [INFO][zkbaycm4] POST /api/testing/evaluate/next/run
Context: {
  "requestId": "zkbaycm4mhvi9ooi",
  "endpoint": "/api/testing/evaluate/next/run",
  "method": "POST"
}
[2025-11-12T04:34:06.259Z] [DEBUG][zkbaycm4] [Middleware] Session ID from cookie
Context: {
  "requestId": "zkbaycm4mhvi9ooi",
  "present": false
}
[2025-11-12T04:34:06.260Z] [DEBUG][zkbaycm4] [Middleware] Outgoing response
Context: {
  "requestId": "zkbaycm4mhvi9ooi",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "1",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:06.260Z] [DEBUG][zkbaycm4] [Middleware] Processing path
Context: {
  "requestId": "zkbaycm4mhvi9ooi",
  "path": "/api/testing/evaluate/next/run"
}
[2025-11-12T04:34:06.261Z] [INFO][zkbaycm4] POST /api/testing/evaluate/next/run -> 429 (3ms)
Context: {
  "requestId": "zkbaycm4mhvi9ooi",
  "duration": 3,
  "status": 429
}
[wrangler:info] POST /api/testing/evaluate/next/run 429 Too Many Requests (6ms)
[wrangler:info] POST /api/voice/transcribe 403 Forbidden (6ms)
[2025-11-12T04:34:06.267Z] [INFO][cbif5fzw] GET /api/admin/comments
Context: {
  "requestId": "cbif5fzwmhvi9oor",
  "endpoint": "/api/admin/comments",
  "method": "GET"
}
[2025-11-12T04:34:06.267Z] [DEBUG][cbif5fzw] [Middleware] Session ID from cookie
Context: {
  "requestId": "cbif5fzwmhvi9oor",
  "present": false
}
 âœ“ |integration| tests/integration/api/voice/transcribe.test.ts > Voice API: /api/voice/transcribe > GET should be 405 with Allow: POST 87ms
 âœ“ |integration| tests/integration/api/voice/transcribe.test.ts > Voice API: /api/voice/transcribe > POST without CSRF should be forbidden (403) 21ms
[dev] [2025-11-12T04:34:06.270Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: { endpoint: '/api/admin/comments', method: 'GET' }
}
[2025-11-12T04:34:06.270Z] [DEBUG][cbif5fzw] [Middleware] Outgoing response
Context: {
  "requestId": "cbif5fzwmhvi9oor",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:06.270Z] [DEBUG][cbif5fzw] [Middleware] Processing path
Context: {
  "requestId": "cbif5fzwmhvi9oor",
  "path": "/api/admin/comments"
}
[2025-11-12T04:34:06.271Z] [INFO][cbif5fzw] GET /api/admin/comments -> 401 (4ms)
Context: {
  "requestId": "cbif5fzwmhvi9oor",
  "duration": 4,
  "status": 401
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:06.270Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: { reason: 'unauthenticated_access', endpoint: '/api/admin/comments' }
  }


[31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:06.272Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/testing/evaluate/next/run",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "webEvalBrowser",
      "maxRequests": 5,
      "windowMs": 60000,
      "resetAt": 1762922046426
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/testing/evaluate/next/run",
      "ipAddress": "::1",
      "timestamp": 1762922046272,
      "details": {
        "limiterName": "webEvalBrowser",
        "maxRequests": 5,
        "windowMs": 60000,
        "resetAt": 1762922046426
      }
    }
  }
[dev] [2025-11-12T04:34:06.272Z] [INFO][zj0pnc19] POST /api/testing/evaluate/next/run
Context: {
  "requestId": "zj0pnc19mhvi9oow",
  "endpoint": "/api/testing/evaluate/next/run",
  "method": "POST"
}
[2025-11-12T04:34:06.272Z] [DEBUG][zj0pnc19] [Middleware] Session ID from cookie
Context: {
  "requestId": "zj0pnc19mhvi9oow",
  "present": false
}
[2025-11-12T04:34:06.272Z] [DEBUG][zj0pnc19] [Middleware] Outgoing response
Context: {
  "requestId": "zj0pnc19mhvi9oow",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "1",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:06.272Z] [DEBUG][zj0pnc19] [Middleware] Processing path
Context: {
  "requestId": "zj0pnc19mhvi9oow",
  "path": "/api/testing/evaluate/next/run"
}
[2025-11-12T04:34:06.272Z] [INFO][zj0pnc19] POST /api/testing/evaluate/next/run -> 429
Context: {
  "requestId": "zj0pnc19mhvi9oow",
  "duration": 0,
  "status": 429
}
[dev] [wrangler:info] GET /api/admin/comments 401 Unauthorized (8ms)
[wrangler:info] POST /api/testing/evaluate/next/run 429 Too Many Requests (8ms)
[dev] [2025-11-12T04:34:06.281Z] [INFO][2rlqjd4z] POST /api/testing/evaluate/next/run
Context: {
  "requestId": "2rlqjd4zmhvi9op5",
  "endpoint": "/api/testing/evaluate/next/run",
  "method": "POST"
}
[dev] [2025-11-12T04:34:06.281Z] [DEBUG][2rlqjd4z] [Middleware] Session ID from cookie
Context: {
  "requestId": "2rlqjd4zmhvi9op5",
  "present": false
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:06.281Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/testing/evaluate/next/run",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "webEvalBrowser",
      "maxRequests": 5,
      "windowMs": 60000,
      "resetAt": 1762922046426
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/testing/evaluate/next/run",
      "ipAddress": "::1",
      "timestamp": 1762922046281,
      "details": {
        "limiterName": "webEvalBrowser",
        "maxRequests": 5,
        "windowMs": 60000,
        "resetAt": 1762922046426
      }
    }
  }
[dev] [2025-11-12T04:34:06.282Z] [DEBUG][2rlqjd4z] [Middleware] Outgoing response
Context: {
  "requestId": "2rlqjd4zmhvi9op5",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "1",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:06.282Z] [DEBUG][2rlqjd4z] [Middleware] Processing path
Context: {
  "requestId": "2rlqjd4zmhvi9op5",
  "path": "/api/testing/evaluate/next/run"
}
[2025-11-12T04:34:06.282Z] [INFO][2rlqjd4z] POST /api/testing/evaluate/next/run -> 429 (1ms)
Context: {
  "requestId": "2rlqjd4zmhvi9op5",
  "duration": 1,
  "status": 429
}
[2025-11-12T04:34:06.284Z] [INFO][tfgwwlxw] GET /api/admin/comments
Context: {
  "requestId": "tfgwwlxwmhvi9op8",
  "endpoint": "/api/admin/comments",
  "method": "GET"
}
[wrangler:info] POST /api/testing/evaluate/next/run 429 Too Many Requests (4ms)
[2025-11-12T04:34:06.284Z] [DEBUG][tfgwwlxw] [Middleware] Session ID from cookie
Context: {
  "requestId": "tfgwwlxwmhvi9op8",
  "present": false
}
[2025-11-12T04:34:06.286Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: { endpoint: '/api/admin/comments', method: 'GET' }
}
[2025-11-12T04:34:06.287Z] [DEBUG][tfgwwlxw] [Middleware] Outgoing response
Context: {
  "requestId": "tfgwwlxwmhvi9op8",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:06.287Z] [DEBUG][tfgwwlxw] [Middleware] Processing path
Context: {
  "requestId": "tfgwwlxwmhvi9op8",
  "path": "/api/admin/comments"
}
[2025-11-12T04:34:06.287Z] [INFO][tfgwwlxw] GET /api/admin/comments -> 401 (3ms)
Context: {
  "requestId": "tfgwwlxwmhvi9op8",
  "duration": 3,
  "status": 401
}
[2025-11-12T04:34:06.288Z] [INFO][mog9ib6g] POST /api/testing/evaluate/next/run
Context: {
  "requestId": "mog9ib6gmhvi9opc",
  "endpoint": "/api/testing/evaluate/next/run",
  "method": "POST"
}
[2025-11-12T04:34:06.288Z] [DEBUG][mog9ib6g] [Middleware] Session ID from cookie
Context: {
  "requestId": "mog9ib6gmhvi9opc",
  "present": false
}
[2025-11-12T04:34:06.288Z] [DEBUG][mog9ib6g] [Middleware] Outgoing response
Context: {
  "requestId": "mog9ib6gmhvi9opc",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "1",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:06.288Z] [DEBUG][mog9ib6g] [Middleware] Processing path
Context: {
  "requestId": "mog9ib6gmhvi9opc",
  "path": "/api/testing/evaluate/next/run"
}
[2025-11-12T04:34:06.288Z] [INFO][mog9ib6g] POST /api/testing/evaluate/next/run -> 429
Context: {
  "requestId": "mog9ib6gmhvi9opc",
  "duration": 0,
  "status": 429
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:06.286Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: { reason: 'unauthenticated_access', endpoint: '/api/admin/comments' }
  }


[31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:06.288Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/testing/evaluate/next/run",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "webEvalBrowser",
      "maxRequests": 5,
      "windowMs": 60000,
      "resetAt": 1762922046426
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/testing/evaluate/next/run",
      "ipAddress": "::1",
      "timestamp": 1762922046288,
      "details": {
        "limiterName": "webEvalBrowser",
        "maxRequests": 5,
        "windowMs": 60000,
        "resetAt": 1762922046426
      }
    }
  }
[dev] [wrangler:info] GET /api/admin/comments 401 Unauthorized (9ms)
[wrangler:info] POST /api/testing/evaluate/next/run 429 Too Many Requests (5ms)
[2025-11-12T04:34:06.293Z] [INFO][0wy6nm2u] POST /api/testing/evaluate/next/run
Context: {
  "requestId": "0wy6nm2umhvi9oph",
  "endpoint": "/api/testing/evaluate/next/run",
  "method": "POST"
}
[2025-11-12T04:34:06.293Z] [DEBUG][0wy6nm2u] [Middleware] Session ID from cookie
Context: {
  "requestId": "0wy6nm2umhvi9oph",
  "present": false
}
[dev] [2025-11-12T04:34:06.295Z] [DEBUG][0wy6nm2u] [Middleware] Outgoing response
Context: {
  "requestId": "0wy6nm2umhvi9oph",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "1",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:06.295Z] [DEBUG][0wy6nm2u] [Middleware] Processing path
Context: {
  "requestId": "0wy6nm2umhvi9oph",
  "path": "/api/testing/evaluate/next/run"
}
[2025-11-12T04:34:06.295Z] [INFO][0wy6nm2u] POST /api/testing/evaluate/next/run -> 429 (2ms)
Context: {
  "requestId": "0wy6nm2umhvi9oph",
  "duration": 2,
  "status": 429
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:06.295Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/testing/evaluate/next/run",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "webEvalBrowser",
      "maxRequests": 5,
      "windowMs": 60000,
      "resetAt": 1762922046426
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/testing/evaluate/next/run",
      "ipAddress": "::1",
      "timestamp": 1762922046295,
      "details": {
        "limiterName": "webEvalBrowser",
        "maxRequests": 5,
        "windowMs": 60000,
        "resetAt": 1762922046426
      }
    }
  }
[dev] [wrangler:info] POST /api/testing/evaluate/next/run 429 Too Many Requests (6ms)
 âœ“ |integration| tests/integration/api/admin-comments.test.ts > Admin Comments API (integration) > denies unauthenticated access with 401 82ms
 âœ“ |integration| tests/integration/api/admin-comments.test.ts > Admin Comments API (integration) > accepts query params but still requires auth 12ms
[dev] [2025-11-12T04:34:06.299Z] [INFO][1ih55xbd] POST /api/testing/evaluate/next/run
Context: {
  "requestId": "1ih55xbdmhvi9opn",
  "endpoint": "/api/testing/evaluate/next/run",
  "method": "POST"
}
[2025-11-12T04:34:06.299Z] [DEBUG][1ih55xbd] [Middleware] Session ID from cookie
Context: {
  "requestId": "1ih55xbdmhvi9opn",
  "present": false
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:06.300Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/testing/evaluate/next/run",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "webEvalBrowser",
      "maxRequests": 5,
      "windowMs": 60000,
      "resetAt": 1762922046426
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/testing/evaluate/next/run",
      "ipAddress": "::1",
      "timestamp": 1762922046300,
      "details": {
        "limiterName": "webEvalBrowser",
        "maxRequests": 5,
        "windowMs": 60000,
        "resetAt": 1762922046426
      }
    }
  }
[dev] [2025-11-12T04:34:06.300Z] [DEBUG][1ih55xbd] [Middleware] Outgoing response
Context: {
  "requestId": "1ih55xbdmhvi9opn",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "1",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:06.300Z] [DEBUG][1ih55xbd] [Middleware] Processing path
Context: {
  "requestId": "1ih55xbdmhvi9opn",
  "path": "/api/testing/evaluate/next/run"
}
[2025-11-12T04:34:06.300Z] [INFO][1ih55xbd] POST /api/testing/evaluate/next/run -> 429 (1ms)
Context: {
  "requestId": "1ih55xbdmhvi9opn",
  "duration": 1,
  "status": 429
}
[2025-11-12T04:34:06.302Z] [INFO][z5milclh] GET /api/admin/users/list
Context: {
  "requestId": "z5milclhmhvi9opq",
  "endpoint": "/api/admin/users/list",
  "method": "GET"
}
[2025-11-12T04:34:06.302Z] [DEBUG][z5milclh] [Middleware] Session ID from cookie
Context: {
  "requestId": "z5milclhmhvi9opq",
  "present": false
}
[wrangler:info] POST /api/testing/evaluate/next/run 429 Too Many Requests (3ms)
[dev] [2025-11-12T04:34:06.304Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/admin/users/list',
    method: 'GET',
    action: 'admin_users_list'
  }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:06.304Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: {
      reason: 'unauthenticated_access',
      endpoint: '/api/admin/users/list'
    }
  }
[dev] [2025-11-12T04:34:06.304Z] [DEBUG][z5milclh] [Middleware] Outgoing response
Context: {
  "requestId": "z5milclhmhvi9opq",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:06.304Z] [DEBUG][z5milclh] [Middleware] Processing path
Context: {
  "requestId": "z5milclhmhvi9opq",
  "path": "/api/admin/users/list"
}
[2025-11-12T04:34:06.304Z] [INFO][z5milclh] GET /api/admin/users/list -> 401 (2ms)
Context: {
  "requestId": "z5milclhmhvi9opq",
  "duration": 2,
  "status": 401
}
[2025-11-12T04:34:06.305Z] [INFO][ibvz2el6] POST /api/testing/evaluate/next/run
Context: {
  "requestId": "ibvz2el6mhvi9opt",
  "endpoint": "/api/testing/evaluate/next/run",
  "method": "POST"
}
[wrangler:info] GET /api/admin/users/list 401 Unauthorized (4ms)
[2025-11-12T04:34:06.305Z] [DEBUG][ibvz2el6] [Middleware] Session ID from cookie
Context: {
  "requestId": "ibvz2el6mhvi9opt",
  "present": false
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:06.306Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/testing/evaluate/next/run",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "webEvalBrowser",
      "maxRequests": 5,
      "windowMs": 60000,
      "resetAt": 1762922046426
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/testing/evaluate/next/run",
      "ipAddress": "::1",
      "timestamp": 1762922046306,
      "details": {
        "limiterName": "webEvalBrowser",
        "maxRequests": 5,
        "windowMs": 60000,
        "resetAt": 1762922046426
      }
    }
  }
[dev] [2025-11-12T04:34:06.306Z] [DEBUG][ibvz2el6] [Middleware] Outgoing response
Context: {
  "requestId": "ibvz2el6mhvi9opt",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "1",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:06.306Z] [DEBUG][ibvz2el6] [Middleware] Processing path
Context: {
  "requestId": "ibvz2el6mhvi9opt",
  "path": "/api/testing/evaluate/next/run"
}
[2025-11-12T04:34:06.306Z] [INFO][ibvz2el6] POST /api/testing/evaluate/next/run -> 429 (1ms)
Context: {
  "requestId": "ibvz2el6mhvi9opt",
  "duration": 1,
  "status": 429
}
[wrangler:info] POST /api/testing/evaluate/next/run 429 Too Many Requests (4ms)
[dev] [2025-11-12T04:34:06.316Z] [INFO][zc7fx8cr] POST /api/testing/evaluate/next/run
Context: {
  "requestId": "zc7fx8crmhvi9oq4",
  "endpoint": "/api/testing/evaluate/next/run",
  "method": "POST"
}
[2025-11-12T04:34:06.316Z] [DEBUG][zc7fx8cr] [Middleware] Session ID from cookie
Context: {
  "requestId": "zc7fx8crmhvi9oq4",
  "present": false
}
[2025-11-12T04:34:06.317Z] [DEBUG][zc7fx8cr] [Middleware] Outgoing response
Context: {
  "requestId": "zc7fx8crmhvi9oq4",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "1",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:06.317Z] [DEBUG][zc7fx8cr] [Middleware] Processing path
Context: {
  "requestId": "zc7fx8crmhvi9oq4",
  "path": "/api/testing/evaluate/next/run"
}
[2025-11-12T04:34:06.317Z] [INFO][zc7fx8cr] POST /api/testing/evaluate/next/run -> 429 (1ms)
Context: {
  "requestId": "zc7fx8crmhvi9oq4",
  "duration": 1,
  "status": 429
}
[wrangler:info] POST /api/testing/evaluate/next/run 429 Too Many Requests (8ms)
[2025-11-12T04:34:06.324Z] [INFO][02xms829] POST /api/testing/evaluate/next/run
Context: {
  "requestId": "02xms829mhvi9oqc",
  "endpoint": "/api/testing/evaluate/next/run",
  "method": "POST"
}
[2025-11-12T04:34:06.325Z] [DEBUG][02xms829] [Middleware] Session ID from cookie
Context: {
  "requestId": "02xms829mhvi9oqc",
  "present": false
}
[2025-11-12T04:34:06.326Z] [DEBUG][02xms829] [Middleware] Outgoing response
Context: {
  "requestId": "02xms829mhvi9oqc",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "1",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:06.326Z] [DEBUG][02xms829] [Middleware] Processing path
Context: {
  "requestId": "02xms829mhvi9oqc",
  "path": "/api/testing/evaluate/next/run"
}
[2025-11-12T04:34:06.326Z] [INFO][02xms829] POST /api/testing/evaluate/next/run -> 429 (2ms)
Context: {
  "requestId": "02xms829mhvi9oqc",
  "duration": 2,
  "status": 429
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:06.317Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/testing/evaluate/next/run",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "webEvalBrowser",
      "maxRequests": 5,
      "windowMs": 60000,
      "resetAt": 1762922046426
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/testing/evaluate/next/run",
      "ipAddress": "::1",
      "timestamp": 1762922046317,
      "details": {
        "limiterName": "webEvalBrowser",
        "maxRequests": 5,
        "windowMs": 60000,
        "resetAt": 1762922046426
      }
    }
  }


[31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:06.326Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/testing/evaluate/next/run",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "webEvalBrowser",
      "maxRequests": 5,
      "windowMs": 60000,
      "resetAt": 1762922046426
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/testing/evaluate/next/run",
      "ipAddress": "::1",
      "timestamp": 1762922046326,
      "details": {
        "limiterName": "webEvalBrowser",
        "maxRequests": 5,
        "windowMs": 60000,
        "resetAt": 1762922046426
      }
    }
  }
 âœ“ |integration| tests/integration/api/admin-users-lifecycle.test.ts > Admin Users List â€” auth and CSRF checks > GET /api/admin/users/list â†’ 401 when unauthenticated 147ms
[dev] [wrangler:info] POST /api/testing/evaluate/next/run 429 Too Many Requests (6ms)
[dev] [2025-11-12T04:34:06.332Z] [INFO][0yhumd4u] POST /api/debug-login
Context: {
  "requestId": "0yhumd4umhvi9oqk",
  "endpoint": "/api/debug-login",
  "method": "POST"
}
[2025-11-12T04:34:06.333Z] [DEBUG][0yhumd4u] [Middleware] Session ID from cookie
Context: {
  "requestId": "0yhumd4umhvi9oqk",
  "present": false
}
[2025-11-12T04:34:06.351Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/debug-login',
    method: 'POST',
    action: 'debug_login'
  }
}
[2025-11-12T04:34:06.352Z] [INFO][U:d44cd9d1-b68d-41bd-9c69-87ac5bda927f] Security Event: USER_EVENT
Context: {
  "userId": "d44cd9d1-b68d-41bd-9c69-87ac5bda927f",
  "securityEventType": "USER_EVENT",
  "originalDetails": {
    "eventType": "debug_login_created",
    "ipAddress": "::1",
    "debugUser": true
  },
  "logLevel": "info",
  "eventSnapshot": {
    "type": "USER_EVENT",
    "userId": "d44cd9d1-b68d-41bd-9c69-87ac5bda927f",
    "timestamp": 1762922046352,
    "details": {
      "eventType": "debug_login_created",
      "ipAddress": "::1",
      "debugUser": true
    }
  }
}
[2025-11-12T04:34:06.352Z] [DEBUG][0yhumd4u] [Middleware] Outgoing response
Context: {
  "requestId": "0yhumd4umhvi9oqk",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:06.352Z] [DEBUG][0yhumd4u] [Middleware] Processing path
Context: {
  "requestId": "0yhumd4umhvi9oqk",
  "path": "/api/debug-login"
}
[2025-11-12T04:34:06.353Z] [INFO][0yhumd4u] POST /api/debug-login -> 200 (21ms)
Context: {
  "requestId": "0yhumd4umhvi9oqk",
  "duration": 21,
  "status": 200
}
[2025-11-12T04:34:06.354Z] [INFO][hfqbo5c8] POST /api/testing/evaluate/next/run
Context: {
  "requestId": "hfqbo5c8mhvi9or6",
  "endpoint": "/api/testing/evaluate/next/run",
  "method": "POST"
}
[2025-11-12T04:34:06.354Z] [DEBUG][hfqbo5c8] [Middleware] Session ID from cookie
Context: {
  "requestId": "hfqbo5c8mhvi9or6",
  "present": false
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:06.355Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/testing/evaluate/next/run",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "webEvalBrowser",
      "maxRequests": 5,
      "windowMs": 60000,
      "resetAt": 1762922046426
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/testing/evaluate/next/run",
      "ipAddress": "::1",
      "timestamp": 1762922046355,
      "details": {
        "limiterName": "webEvalBrowser",
        "maxRequests": 5,
        "windowMs": 60000,
        "resetAt": 1762922046426
      }
    }
  }
[dev] [2025-11-12T04:34:06.355Z] [DEBUG][hfqbo5c8] [Middleware] Outgoing response
Context: {
  "requestId": "hfqbo5c8mhvi9or6",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "1",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:06.355Z] [DEBUG][hfqbo5c8] [Middleware] Processing path
Context: {
  "requestId": "hfqbo5c8mhvi9or6",
  "path": "/api/testing/evaluate/next/run"
}
[2025-11-12T04:34:06.355Z] [INFO][hfqbo5c8] POST /api/testing/evaluate/next/run -> 429 (1ms)
Context: {
  "requestId": "hfqbo5c8mhvi9or6",
  "duration": 1,
  "status": 429
}
[2025-11-12T04:34:06.368Z] [INFO][wwkofx94] POST /api/testing/evaluate/next/run
Context: {
  "requestId": "wwkofx94mhvi9ork",
  "endpoint": "/api/testing/evaluate/next/run",
  "method": "POST"
}
[2025-11-12T04:34:06.368Z] [DEBUG][wwkofx94] [Middleware] Session ID from cookie
Context: {
  "requestId": "wwkofx94mhvi9ork",
  "present": false
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:06.369Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/testing/evaluate/next/run",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "webEvalBrowser",
      "maxRequests": 5,
      "windowMs": 60000,
      "resetAt": 1762922046426
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/testing/evaluate/next/run",
      "ipAddress": "::1",
      "timestamp": 1762922046369,
      "details": {
        "limiterName": "webEvalBrowser",
        "maxRequests": 5,
        "windowMs": 60000,
        "resetAt": 1762922046426
      }
    }
  }
[dev] [2025-11-12T04:34:06.370Z] [DEBUG][wwkofx94] [Middleware] Outgoing response
Context: {
  "requestId": "wwkofx94mhvi9ork",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "1",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[dev] [wrangler:info] POST /api/debug-login 200 OK (38ms)
[dev] [wrangler:info] POST /api/testing/evaluate/next/run 429 Too Many Requests (33ms)
[dev] [wrangler:info] POST /api/testing/evaluate/next/run 429 Too Many Requests (9ms)
[dev] [2025-11-12T04:34:06.370Z] [DEBUG][wwkofx94] [Middleware] Processing path
Context: {
  "requestId": "wwkofx94mhvi9ork",
  "path": "/api/testing/evaluate/next/run"
}
[2025-11-12T04:34:06.370Z] [INFO][wwkofx94] POST /api/testing/evaluate/next/run -> 429 (2ms)
Context: {
  "requestId": "wwkofx94mhvi9ork",
  "duration": 2,
  "status": 429
}
[2025-11-12T04:34:06.372Z] [INFO][z8gvfs66] GET /api/admin/users/list
Context: {
  "requestId": "z8gvfs66mhvi9oro",
  "endpoint": "/api/admin/users/list",
  "method": "GET"
}
[2025-11-12T04:34:06.373Z] [DEBUG][z8gvfs66] [Middleware] Session ID from cookie
Context: {
  "requestId": "z8gvfs66mhvi9oro",
  "present": true
}
[dev] [2025-11-12T04:34:06.375Z] [DEBUG][z8gvfs66] [Middleware] Session validation result
Context: {
  "requestId": "z8gvfs66mhvi9oro",
  "sessionValid": true,
  "userValid": true
}
[2025-11-12T04:34:06.376Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'd44cd9d1-b68d-41bd-9c69-87ac5bda927f',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/admin/users/list',
    method: 'GET',
    action: 'admin_users_list'
  }
}
[2025-11-12T04:34:06.378Z] [DEBUG][z8gvfs66] [Middleware] Outgoing response
Context: {
  "requestId": "z8gvfs66mhvi9oro",
  "status": 403,
  "statusText": "Forbidden",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:06.379Z] [DEBUG][z8gvfs66] [Middleware] Processing path
Context: {
  "requestId": "z8gvfs66mhvi9oro",
  "path": "/api/admin/users/list"
}
[2025-11-12T04:34:06.379Z] [INFO][z8gvfs66] GET /api/admin/users/list -> 403 (7ms)
Context: {
  "requestId": "z8gvfs66mhvi9oro",
  "duration": 7,
  "status": 403
}
[2025-11-12T04:34:06.383Z] [INFO][9s8gjfir] POST /api/testing/evaluate/next/run
Context: {
  "requestId": "9s8gjfirmhvi9orz",
  "endpoint": "/api/testing/evaluate/next/run",
  "method": "POST"
}
[2025-11-12T04:34:06.383Z] [DEBUG][9s8gjfir] [Middleware] Session ID from cookie
Context: {
  "requestId": "9s8gjfirmhvi9orz",
  "present": false
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:06.384Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/testing/evaluate/next/run",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "webEvalBrowser",
      "maxRequests": 5,
      "windowMs": 60000,
      "resetAt": 1762922046426
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/testing/evaluate/next/run",
      "ipAddress": "::1",
      "timestamp": 1762922046384,
      "details": {
        "limiterName": "webEvalBrowser",
        "maxRequests": 5,
        "windowMs": 60000,
        "resetAt": 1762922046426
      }
    }
  }
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:06.389Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/testing/evaluate/next/run",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "webEvalBrowser",
      "maxRequests": 5,
      "windowMs": 60000,
      "resetAt": 1762922046426
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/testing/evaluate/next/run",
      "ipAddress": "::1",
      "timestamp": 1762922046389,
      "details": {
        "limiterName": "webEvalBrowser",
        "maxRequests": 5,
        "windowMs": 60000,
        "resetAt": 1762922046426
      }
    }
  }
[dev] [2025-11-12T04:34:06.384Z] [DEBUG][9s8gjfir] [Middleware] Outgoing response
Context: {
  "requestId": "9s8gjfirmhvi9orz",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "1",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:06.384Z] [DEBUG][9s8gjfir] [Middleware] Processing path
Context: {
  "requestId": "9s8gjfirmhvi9orz",
  "path": "/api/testing/evaluate/next/run"
}
[2025-11-12T04:34:06.384Z] [INFO][9s8gjfir] POST /api/testing/evaluate/next/run -> 429 (1ms)
Context: {
  "requestId": "9s8gjfirmhvi9orz",
  "duration": 1,
  "status": 429
}
[2025-11-12T04:34:06.388Z] [INFO][rfrhc6wd] POST /api/testing/evaluate/next/run
Context: {
  "requestId": "rfrhc6wdmhvi9os4",
  "endpoint": "/api/testing/evaluate/next/run",
  "method": "POST"
}
[2025-11-12T04:34:06.388Z] [DEBUG][rfrhc6wd] [Middleware] Session ID from cookie
Context: {
  "requestId": "rfrhc6wdmhvi9os4",
  "present": false
}
[2025-11-12T04:34:06.389Z] [DEBUG][rfrhc6wd] [Middleware] Outgoing response
Context: {
  "requestId": "rfrhc6wdmhvi9os4",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "1",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:06.389Z] [DEBUG][rfrhc6wd] [Middleware] Processing path
Context: {
  "requestId": "rfrhc6wdmhvi9os4",
  "path": "/api/testing/evaluate/next/run"
}
[2025-11-12T04:34:06.389Z] [INFO][rfrhc6wd] POST /api/testing/evaluate/next/run -> 429 (1ms)
Context: {
  "requestId": "rfrhc6wdmhvi9os4",
  "duration": 1,
  "status": 429
}
[2025-11-12T04:34:06.392Z] [INFO][bys6gap4] POST /api/admin/users/user-123/ban
Context: {
  "requestId": "bys6gap4mhvi9os8",
  "endpoint": "/api/admin/users/user-123/ban",
  "method": "POST"
}
[2025-11-12T04:34:06.392Z] [DEBUG][bys6gap4] [Middleware] Session ID from cookie
Context: {
  "requestId": "bys6gap4mhvi9os8",
  "present": false
}
[dev] [wrangler:info] GET /api/admin/users/list 403 Forbidden (15ms)
[dev] [wrangler:info] POST /api/testing/evaluate/next/run 429 Too Many Requests (7ms)
[dev] [wrangler:info] POST /api/admin/users/user-123/ban 403 Forbidden (6ms)
[dev] [2025-11-12T04:34:06.392Z] [INFO] SECURITY_EVENT {
  timestamp: {},
  resource: 'security',
  ipAddress: '::1',
  type: 'SUSPICIOUS_ACTIVITY',
  details: {
    reason: 'csrf_token_mismatch',
    endpoint: '/api/admin/users/user-123/ban',
    hasHeader: false,
    hasCookie: false
  }
}
[dev] [2025-11-12T04:34:06.394Z] [DEBUG][bys6gap4] [Middleware] Outgoing response
Context: {
  "requestId": "bys6gap4mhvi9os8",
  "status": 403,
  "statusText": "Forbidden",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:06.394Z] [DEBUG][bys6gap4] [Middleware] Processing path
Context: {
  "requestId": "bys6gap4mhvi9os8",
  "path": "/api/admin/users/user-123/ban"
}
[dev] [2025-11-12T04:34:06.395Z] [INFO][bys6gap4] POST /api/admin/users/user-123/ban -> 403 (3ms)
Context: {
  "requestId": "bys6gap4mhvi9os8",
  "duration": 3,
  "status": 403
}
[2025-11-12T04:34:06.397Z] [INFO][vxgui1tk] POST /api/testing/evaluate/next/run
Context: {
  "requestId": "vxgui1tkmhvi9osd",
  "endpoint": "/api/testing/evaluate/next/run",
  "method": "POST"
}
[2025-11-12T04:34:06.397Z] [DEBUG][vxgui1tk] [Middleware] Session ID from cookie
Context: {
  "requestId": "vxgui1tkmhvi9osd",
  "present": false
}
[dev] [2025-11-12T04:34:06.399Z] [DEBUG][vxgui1tk] [Middleware] Outgoing response
Context: {
  "requestId": "vxgui1tkmhvi9osd",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "1",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:06.399Z] [DEBUG][vxgui1tk] [Middleware] Processing path
Context: {
  "requestId": "vxgui1tkmhvi9osd",
  "path": "/api/testing/evaluate/next/run"
}
[2025-11-12T04:34:06.399Z] [INFO][vxgui1tk] POST /api/testing/evaluate/next/run -> 429 (2ms)
Context: {
  "requestId": "vxgui1tkmhvi9osd",
  "duration": 2,
  "status": 429
}
[2025-11-12T04:34:06.402Z] [INFO][b9nvckfk] POST /api/debug-login
Context: {
  "requestId": "b9nvckfkmhvi9osi",
  "endpoint": "/api/debug-login",
  "method": "POST"
}
[2025-11-12T04:34:06.402Z] [DEBUG][b9nvckfk] [Middleware] Session ID from cookie
Context: {
  "requestId": "b9nvckfkmhvi9osi",
  "present": false
}
[2025-11-12T04:34:06.409Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/debug-login',
    method: 'POST',
    action: 'debug_login'
  }
}
[2025-11-12T04:34:06.411Z] [INFO][U:d44cd9d1-b68d-41bd-9c69-87ac5bda927f] Security Event: USER_EVENT
Context: {
  "userId": "d44cd9d1-b68d-41bd-9c69-87ac5bda927f",
  "securityEventType": "USER_EVENT",
  "originalDetails": {
    "eventType": "debug_login_created",
    "ipAddress": "::1",
    "debugUser": true
  },
  "logLevel": "info",
  "eventSnapshot": {
    "type": "USER_EVENT",
    "userId": "d44cd9d1-b68d-41bd-9c69-87ac5bda927f",
    "timestamp": 1762922046411,
    "details": {
      "eventType": "debug_login_created",
      "ipAddress": "::1",
      "debugUser": true
    }
  }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:06.399Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/testing/evaluate/next/run",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "webEvalBrowser",
      "maxRequests": 5,
      "windowMs": 60000,
      "resetAt": 1762922046426
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/testing/evaluate/next/run",
      "ipAddress": "::1",
      "timestamp": 1762922046399,
      "details": {
        "limiterName": "webEvalBrowser",
        "maxRequests": 5,
        "windowMs": 60000,
        "resetAt": 1762922046426
      }
    }
  }
 âœ“ |integration| tests/integration/api/admin-users-lifecycle.test.ts > Admin Users List â€” auth and CSRF checks > debug-login then GET /api/admin/users/list â†’ 403 for non-admin 66ms
 âœ“ |integration| tests/integration/api/admin-users-lifecycle.test.ts > Admin Users Lifecycle â€” CSRF and auth enforcement > POST /api/admin/users/user-123/ban without auth â†’ 403 (fails CSRF origin checks) 9ms
[dev] [2025-11-12T04:34:06.411Z] [DEBUG][b9nvckfk] [Middleware] Outgoing response
Context: {
  "requestId": "b9nvckfkmhvi9osi",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[dev] [2025-11-12T04:34:06.411Z] [DEBUG][b9nvckfk] [Middleware] Processing path
Context: {
  "requestId": "b9nvckfkmhvi9osi",
  "path": "/api/debug-login"
}
[2025-11-12T04:34:06.411Z] [INFO][b9nvckfk] POST /api/debug-login -> 200 (9ms)
Context: {
  "requestId": "b9nvckfkmhvi9osi",
  "duration": 9,
  "status": 200
}
[2025-11-12T04:34:06.413Z] [INFO][n3edp4wo] POST /api/testing/evaluate/next/run
Context: {
  "requestId": "n3edp4womhvi9ost",
  "endpoint": "/api/testing/evaluate/next/run",
  "method": "POST"
}
[2025-11-12T04:34:06.413Z] [DEBUG][n3edp4wo] [Middleware] Session ID from cookie
Context: {
  "requestId": "n3edp4womhvi9ost",
  "present": false
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:06.413Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/testing/evaluate/next/run",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "webEvalBrowser",
      "maxRequests": 5,
      "windowMs": 60000,
      "resetAt": 1762922046426
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/testing/evaluate/next/run",
      "ipAddress": "::1",
      "timestamp": 1762922046413,
      "details": {
        "limiterName": "webEvalBrowser",
        "maxRequests": 5,
        "windowMs": 60000,
        "resetAt": 1762922046426
      }
    }
  }
[dev] [wrangler:info] POST /api/testing/evaluate/next/run 429 Too Many Requests (9ms)
[dev] [wrangler:info] POST /api/testing/evaluate/next/run 429 Too Many Requests (3ms)
[dev] [wrangler:info] POST /api/debug-login 200 OK (19ms)
[2025-11-12T04:34:06.414Z] [DEBUG][n3edp4wo] [Middleware] Outgoing response
Context: {
  "requestId": "n3edp4womhvi9ost",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "1",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:06.414Z] [DEBUG][n3edp4wo] [Middleware] Processing path
Context: {
  "requestId": "n3edp4womhvi9ost",
  "path": "/api/testing/evaluate/next/run"
}
[2025-11-12T04:34:06.414Z] [INFO][n3edp4wo] POST /api/testing/evaluate/next/run -> 429 (1ms)
Context: {
  "requestId": "n3edp4womhvi9ost",
  "duration": 1,
  "status": 429
}
[2025-11-12T04:34:06.421Z] [INFO][d65s0yao] POST /api/testing/evaluate/next/run
Context: {
  "requestId": "d65s0yaomhvi9ot1",
  "endpoint": "/api/testing/evaluate/next/run",
  "method": "POST"
}
[2025-11-12T04:34:06.422Z] [DEBUG][d65s0yao] [Middleware] Session ID from cookie
Context: {
  "requestId": "d65s0yaomhvi9ot1",
  "present": false
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:06.422Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/testing/evaluate/next/run",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "webEvalBrowser",
      "maxRequests": 5,
      "windowMs": 60000,
      "resetAt": 1762922046426
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/testing/evaluate/next/run",
      "ipAddress": "::1",
      "timestamp": 1762922046422,
      "details": {
        "limiterName": "webEvalBrowser",
        "maxRequests": 5,
        "windowMs": 60000,
        "resetAt": 1762922046426
      }
    }
  }
[dev] [2025-11-12T04:34:06.422Z] [DEBUG][d65s0yao] [Middleware] Outgoing response
Context: {
  "requestId": "d65s0yaomhvi9ot1",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "1",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:06.422Z] [DEBUG][d65s0yao] [Middleware] Processing path
Context: {
  "requestId": "d65s0yaomhvi9ot1",
  "path": "/api/testing/evaluate/next/run"
}
[2025-11-12T04:34:06.422Z] [INFO][d65s0yao] POST /api/testing/evaluate/next/run -> 429 (1ms)
Context: {
  "requestId": "d65s0yaomhvi9ot1",
  "duration": 1,
  "status": 429
}
[2025-11-12T04:34:06.426Z] [INFO][j3hqmjuf] POST /api/admin/users/user-123/ban
Context: {
  "requestId": "j3hqmjufmhvi9ot6",
  "endpoint": "/api/admin/users/user-123/ban",
  "method": "POST"
}
[2025-11-12T04:34:06.426Z] [DEBUG][j3hqmjuf] [Middleware] Session ID from cookie
Context: {
  "requestId": "j3hqmjufmhvi9ot6",
  "present": true
}
[2025-11-12T04:34:06.427Z] [DEBUG][j3hqmjuf] [Middleware] Session validation result
Context: {
  "requestId": "j3hqmjufmhvi9ot6",
  "sessionValid": true,
  "userValid": true
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:06.427Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/admin/users/user-123/ban",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "sensitiveAction",
      "maxRequests": 5,
      "windowMs": 3600000,
      "resetAt": 1762925587707
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/admin/users/user-123/ban",
      "ipAddress": "::1",
      "timestamp": 1762922046427,
      "details": {
        "limiterName": "sensitiveAction",
        "maxRequests": 5,
        "windowMs": 3600000,
        "resetAt": 1762925587707
      }
    }
  }
[dev] [2025-11-12T04:34:06.427Z] [DEBUG][j3hqmjuf] [Middleware] Outgoing response
Context: {
  "requestId": "j3hqmjufmhvi9ot6",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "3542",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:06.427Z] [DEBUG][j3hqmjuf] [Middleware] Processing path
Context: {
  "requestId": "j3hqmjufmhvi9ot6",
  "path": "/api/admin/users/user-123/ban"
}
[2025-11-12T04:34:06.427Z] [INFO][j3hqmjuf] POST /api/admin/users/user-123/ban -> 429 (1ms)
Context: {
  "requestId": "j3hqmjufmhvi9ot6",
  "duration": 1,
  "status": 429
}
[2025-11-12T04:34:06.428Z] [INFO][wph9lfdy] POST /api/testing/evaluate/next/run
Context: {
  "requestId": "wph9lfdymhvi9ot8",
  "endpoint": "/api/testing/evaluate/next/run",
  "method": "POST"
}
[2025-11-12T04:34:06.428Z] [DEBUG][wph9lfdy] [Middleware] Session ID from cookie
Context: {
  "requestId": "wph9lfdymhvi9ot8",
  "present": false
}
[2025-11-12T04:34:06.430Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: { endpoint: '/api/testing/evaluate/next/run', method: 'POST' }
}
[2025-11-12T04:34:06.450Z] [DEBUG][wph9lfdy] [Middleware] Outgoing response
Context: {
  "requestId": "wph9lfdymhvi9ot8",
  "status": 403,
  "statusText": "Forbidden",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:06.450Z] [DEBUG][wph9lfdy] [Middleware] Processing path
Context: {
  "requestId": "wph9lfdymhvi9ot8",
  "path": "/api/testing/evaluate/next/run"
}
[2025-11-12T04:34:06.450Z] [INFO][wph9lfdy] POST /api/testing/evaluate/next/run -> 403 (22ms)
Context: {
  "requestId": "wph9lfdymhvi9ot8",
  "duration": 22,
  "status": 403
}
[dev] [wrangler:info] POST /api/testing/evaluate/next/run 403 Forbidden (24ms)
[dev] [wrangler:info] POST /api/testing/evaluate/next/run 429 Too Many Requests (16ms)
[wrangler:info] POST /api/testing/evaluate/next/run 429 Too Many Requests (5ms)
[dev] [wrangler:info] POST /api/admin/users/user-123/ban 429 Too Many Requests (6ms)
[wrangler:info] POST /api/admin/users/user-123/unban 403 Forbidden (43ms)
[2025-11-12T04:34:06.451Z] [INFO][863l5rxd] POST /api/admin/users/user-123/unban
Context: {
  "requestId": "863l5rxdmhvi9otv",
  "endpoint": "/api/admin/users/user-123/unban",
  "method": "POST"
}
[2025-11-12T04:34:06.477Z] [DEBUG][863l5rxd] [Middleware] Session ID from cookie
Context: {
  "requestId": "863l5rxdmhvi9otv",
  "present": false
}
[2025-11-12T04:34:06.477Z] [INFO] SECURITY_EVENT {
  timestamp: {},
  resource: 'security',
  ipAddress: '::1',
  type: 'SUSPICIOUS_ACTIVITY',
  details: {
    reason: 'csrf_token_mismatch',
    endpoint: '/api/admin/users/user-123/unban',
    hasHeader: false,
    hasCookie: false
  }
}
[2025-11-12T04:34:06.478Z] [DEBUG][863l5rxd] [Middleware] Outgoing response
Context: {
  "requestId": "863l5rxdmhvi9otv",
  "status": 403,
  "statusText": "Forbidden",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:06.478Z] [DEBUG][863l5rxd] [Middleware] Processing path
Context: {
  "requestId": "863l5rxdmhvi9otv",
  "path": "/api/admin/users/user-123/unban"
}
[2025-11-12T04:34:06.478Z] [INFO][863l5rxd] POST /api/admin/users/user-123/unban -> 403 (27ms)
Context: {
  "requestId": "863l5rxdmhvi9otv",
  "duration": 27,
  "status": 403
}
[2025-11-12T04:34:06.479Z] [INFO][ghu15les] POST /api/testing/evaluate/next/run
Context: {
  "requestId": "ghu15lesmhvi9oun",
  "endpoint": "/api/testing/evaluate/next/run",
  "method": "POST"
}
[2025-11-12T04:34:06.479Z] [DEBUG][ghu15les] [Middleware] Session ID from cookie
Context: {
  "requestId": "ghu15lesmhvi9oun",
  "present": false
}
[2025-11-12T04:34:06.482Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: { endpoint: '/api/testing/evaluate/next/run', method: 'POST' }
}
[2025-11-12T04:34:06.490Z] [DEBUG][ghu15les] [Middleware] Outgoing response
Context: {
  "requestId": "ghu15lesmhvi9oun",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:06.490Z] [DEBUG][ghu15les] [Middleware] Processing path
Context: {
  "requestId": "ghu15lesmhvi9oun",
  "path": "/api/testing/evaluate/next/run"
}
[2025-11-12T04:34:06.490Z] [INFO][ghu15les] POST /api/testing/evaluate/next/run -> 200 (11ms)
Context: {
  "requestId": "ghu15lesmhvi9oun",
  "duration": 11,
  "status": 200
}
[2025-11-12T04:34:06.491Z] [INFO][mz4m7yxr] GET /api/admin/rate-limits/state
Context: {
  "requestId": "mz4m7yxrmhvi9ouz",
  "endpoint": "/api/admin/rate-limits/state",
  "method": "GET"
}
[2025-11-12T04:34:06.491Z] [DEBUG][mz4m7yxr] [Middleware] Session ID from cookie
Context: {
  "requestId": "mz4m7yxrmhvi9ouz",
  "present": false
}
[2025-11-12T04:34:06.492Z] [INFO][krnkit33] POST /api/debug-login
Context: {
  "requestId": "krnkit33mhvi9ov0",
  "endpoint": "/api/debug-login",
  "method": "POST"
}
[2025-11-12T04:34:06.492Z] [DEBUG][krnkit33] [Middleware] Session ID from cookie
Context: {
  "requestId": "krnkit33mhvi9ov0",
  "present": false
}
[2025-11-12T04:34:06.494Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/debug-login',
    method: 'POST',
    action: 'debug_login'
  }
}
[2025-11-12T04:34:06.495Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: { endpoint: '/api/admin/rate-limits/state', method: 'GET' }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:06.495Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: {
      reason: 'unauthenticated_access',
      endpoint: '/api/admin/rate-limits/state'
    }
  }
[dev] [2025-11-12T04:34:06.495Z] [DEBUG][mz4m7yxr] [Middleware] Outgoing response
Context: {
  "requestId": "mz4m7yxrmhvi9ouz",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[dev] [2025-11-12T04:34:06.495Z] [DEBUG][mz4m7yxr] [Middleware] Processing path
Context: {
  "requestId": "mz4m7yxrmhvi9ouz",
  "path": "/api/admin/rate-limits/state"
}
[2025-11-12T04:34:06.495Z] [INFO][mz4m7yxr] GET /api/admin/rate-limits/state -> 401 (4ms)
Context: {
  "requestId": "mz4m7yxrmhvi9ouz",
  "duration": 4,
  "status": 401
}
[2025-11-12T04:34:06.496Z] [INFO][U:d44cd9d1-b68d-41bd-9c69-87ac5bda927f] Security Event: USER_EVENT
Context: {
  "userId": "d44cd9d1-b68d-41bd-9c69-87ac5bda927f",
  "securityEventType": "USER_EVENT",
  "originalDetails": {
    "eventType": "debug_login_created",
    "ipAddress": "::1",
    "debugUser": true
  },
  "logLevel": "info",
  "eventSnapshot": {
    "type": "USER_EVENT",
    "userId": "d44cd9d1-b68d-41bd-9c69-87ac5bda927f",
    "timestamp": 1762922046496,
    "details": {
      "eventType": "debug_login_created",
      "ipAddress": "::1",
      "debugUser": true
    }
  }
}
[2025-11-12T04:34:06.497Z] [DEBUG][krnkit33] [Middleware] Outgoing response
Context: {
  "requestId": "krnkit33mhvi9ov0",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[wrangler:info] POST /api/testing/evaluate/next/run 200 OK (39ms)
[dev] [wrangler:info] POST /api/debug-login 200 OK (19ms)
[2025-11-12T04:34:06.497Z] [DEBUG][krnkit33] [Middleware] Processing path
Context: {
  "requestId": "krnkit33mhvi9ov0",
  "path": "/api/debug-login"
}
[2025-11-12T04:34:06.501Z] [INFO][krnkit33] POST /api/debug-login -> 200 (9ms)
Context: {
  "requestId": "krnkit33mhvi9ov0",
  "duration": 9,
  "status": 200
}
[2025-11-12T04:34:06.504Z] [INFO][ib6not64] POST /api/testing/evaluate/next/run
Context: {
  "requestId": "ib6not64mhvi9ovc",
  "endpoint": "/api/testing/evaluate/next/run",
  "method": "POST"
}
[2025-11-12T04:34:06.504Z] [DEBUG][ib6not64] [Middleware] Session ID from cookie
Context: {
  "requestId": "ib6not64mhvi9ovc",
  "present": false
}
[2025-11-12T04:34:06.511Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: { endpoint: '/api/testing/evaluate/next/run', method: 'POST' }
}
[2025-11-12T04:34:06.518Z] [DEBUG][ib6not64] [Middleware] Outgoing response
Context: {
  "requestId": "ib6not64mhvi9ovc",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:06.518Z] [DEBUG][ib6not64] [Middleware] Processing path
Context: {
  "requestId": "ib6not64mhvi9ovc",
  "path": "/api/testing/evaluate/next/run"
}
[2025-11-12T04:34:06.518Z] [INFO][ib6not64] POST /api/testing/evaluate/next/run -> 200 (14ms)
Context: {
  "requestId": "ib6not64mhvi9ovc",
  "duration": 14,
  "status": 200
}
[2025-11-12T04:34:06.519Z] [INFO][sznxj1uv] POST /api/admin/users/user-123/unban
Context: {
  "requestId": "sznxj1uvmhvi9ovr",
  "endpoint": "/api/admin/users/user-123/unban",
  "method": "POST"
}
[2025-11-12T04:34:06.519Z] [DEBUG][sznxj1uv] [Middleware] Session ID from cookie
Context: {
  "requestId": "sznxj1uvmhvi9ovr",
  "present": true
}
[2025-11-12T04:34:06.520Z] [DEBUG][sznxj1uv] [Middleware] Session validation result
Context: {
  "requestId": "sznxj1uvmhvi9ovr",
  "sessionValid": true,
  "userValid": true
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:06.521Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/admin/users/user-123/unban",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "sensitiveAction",
      "maxRequests": 5,
      "windowMs": 3600000,
      "resetAt": 1762925587707
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/admin/users/user-123/unban",
      "ipAddress": "::1",
      "timestamp": 1762922046521,
      "details": {
        "limiterName": "sensitiveAction",
        "maxRequests": 5,
        "windowMs": 3600000,
        "resetAt": 1762925587707
      }
    }
  }
[dev] [2025-11-12T04:34:06.521Z] [DEBUG][sznxj1uv] [Middleware] Outgoing response
Context: {
  "requestId": "sznxj1uvmhvi9ovr",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "3542",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:06.521Z] [DEBUG][sznxj1uv] [Middleware] Processing path
Context: {
  "requestId": "sznxj1uvmhvi9ovr",
  "path": "/api/admin/users/user-123/unban"
}
[2025-11-12T04:34:06.521Z] [INFO][sznxj1uv] POST /api/admin/users/user-123/unban -> 429 (2ms)
Context: {
  "requestId": "sznxj1uvmhvi9ovr",
  "duration": 2,
  "status": 429
}
[dev] [wrangler:info] GET /api/admin/rate-limits/state 401 Unauthorized (13ms)
[dev] [2025-11-12T04:34:06.536Z] [INFO][ngw76tx6] POST /api/admin/rate-limits/reset
Context: {
  "requestId": "ngw76tx6mhvi9ow8",
  "endpoint": "/api/admin/rate-limits/reset",
  "method": "POST"
}
[2025-11-12T04:34:06.537Z] [DEBUG][ngw76tx6] [Middleware] Session ID from cookie
Context: {
  "requestId": "ngw76tx6mhvi9ow8",
  "present": false
}
[dev] [2025-11-12T04:34:06.537Z] [INFO] SECURITY_EVENT {
  timestamp: {},
  resource: 'security',
  ipAddress: '::1',
  type: 'SUSPICIOUS_ACTIVITY',
  details: {
    reason: 'csrf_token_mismatch',
    endpoint: '/api/admin/rate-limits/reset',
    hasHeader: false,
    hasCookie: false
  }
}
[2025-11-12T04:34:06.537Z] [DEBUG][ngw76tx6] [Middleware] Outgoing response
Context: {
  "requestId": "ngw76tx6mhvi9ow8",
  "status": 403,
  "statusText": "Forbidden",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:06.537Z] [DEBUG][ngw76tx6] [Middleware] Processing path
Context: {
  "requestId": "ngw76tx6mhvi9ow8",
  "path": "/api/admin/rate-limits/reset"
}
[2025-11-12T04:34:06.537Z] [INFO][ngw76tx6] POST /api/admin/rate-limits/reset -> 403 (1ms)
Context: {
  "requestId": "ngw76tx6mhvi9ow8",
  "duration": 1,
  "status": 403
}
[2025-11-12T04:34:06.538Z] [INFO][fvueasw0] POST /api/testing/evaluate
Context: {
  "requestId": "fvueasw0mhvi9owa",
  "endpoint": "/api/testing/evaluate",
  "method": "POST"
}
[2025-11-12T04:34:06.538Z] [DEBUG][fvueasw0] [Middleware] Session ID from cookie
Context: {
  "requestId": "fvueasw0mhvi9owa",
  "present": false
}
[wrangler:info] POST /api/testing/evaluate/next/run 200 OK (26ms)
[wrangler:info] POST /api/admin/users/user-123/unban 429 Too Many Requests (18ms)
[dev] [wrangler:info] POST /api/admin/rate-limits/reset 403 Forbidden (7ms)
 âœ“ |integration| tests/integration/api/admin-rate-limits.test.ts > Admin Rate Limits API â€” unauth/CSRF smokes > GET /api/admin/rate-limits/state â†’ 401 unauth 71ms
 âœ“ |integration| tests/integration/api/admin-rate-limits.test.ts > Admin Rate Limits API â€” unauth/CSRF smokes > POST /api/admin/rate-limits/reset without CSRF â†’ 403 22ms
[dev] [2025-11-12T04:34:06.540Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: { endpoint: '/api/testing/evaluate', method: 'POST' }
}
[2025-11-12T04:34:06.542Z] [DEBUG][fvueasw0] [Middleware] Outgoing response
Context: {
  "requestId": "fvueasw0mhvi9owa",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[dev] [2025-11-12T04:34:06.542Z] [DEBUG][fvueasw0] [Middleware] Processing path
Context: {
  "requestId": "fvueasw0mhvi9owa",
  "path": "/api/testing/evaluate"
}
[2025-11-12T04:34:06.542Z] [INFO][fvueasw0] POST /api/testing/evaluate -> 200 (4ms)
Context: {
  "requestId": "fvueasw0mhvi9owa",
  "duration": 4,
  "status": 200
}
[2025-11-12T04:34:06.545Z] [INFO][j4qkmdlu] GET /
Context: {
  "requestId": "j4qkmdlumhvi9owh",
  "endpoint": "/",
  "method": "GET"
}
[2025-11-12T04:34:06.545Z] [DEBUG][j4qkmdlu] [Middleware] Session splash gate -> set session_welcome_seen cookie
Context: {
  "requestId": "j4qkmdlumhvi9owh"
}
[2025-11-12T04:34:06.545Z] [DEBUG][j4qkmdlu] [Middleware] First visible visit this session -> redirect to welcome
Context: {
  "requestId": "j4qkmdlumhvi9owh",
  "location": "/welcome?next=%2F"
}
[2025-11-12T04:34:06.546Z] [INFO][ccvef391] DELETE /api/admin/users/user-123
Context: {
  "requestId": "ccvef391mhvi9owi",
  "endpoint": "/api/admin/users/user-123",
  "method": "DELETE"
}
[2025-11-12T04:34:06.546Z] [DEBUG][ccvef391] [Middleware] Session ID from cookie
Context: {
  "requestId": "ccvef391mhvi9owi",
  "present": false
}
[2025-11-12T04:34:06.546Z] [INFO] SECURITY_EVENT {
  timestamp: {},
  resource: 'security',
  ipAddress: '::1',
  type: 'SUSPICIOUS_ACTIVITY',
  details: {
    reason: 'csrf_token_mismatch',
    endpoint: '/api/admin/users/user-123',
    hasHeader: false,
    hasCookie: false
  }
}
[2025-11-12T04:34:06.546Z] [DEBUG][ccvef391] [Middleware] Outgoing response
Context: {
  "requestId": "ccvef391mhvi9owi",
  "status": 403,
  "statusText": "Forbidden",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:06.546Z] [DEBUG][ccvef391] [Middleware] Processing path
Context: {
  "requestId": "ccvef391mhvi9owi",
  "path": "/api/admin/users/user-123"
}
[2025-11-12T04:34:06.546Z] [INFO][ccvef391] DELETE /api/admin/users/user-123 -> 403
Context: {
  "requestId": "ccvef391mhvi9owi",
  "duration": 0,
  "status": 403
}
 Ã— |integration| tests/integration/api/admin-users-lifecycle.test.ts > Admin Users Lifecycle â€” CSRF and auth enforcement > debug-login non-admin with CSRF token â†’ 403 forbidden 37ms
   â†’ expected 429 to be 403 // Object.is equality
 âœ“ |integration| tests/integration/api/admin-users-lifecycle.test.ts > Admin Users Lifecycle â€” CSRF and auth enforcement > POST /api/admin/users/user-123/unban without auth â†’ 403 (fails CSRF origin checks) 49ms
 Ã— |integration| tests/integration/api/admin-users-lifecycle.test.ts > Admin Users Lifecycle â€” CSRF and auth enforcement > debug-login non-admin with CSRF token â†’ 403 forbidden 50ms
   â†’ expected 429 to be 403 // Object.is equality
 âœ“ |integration| tests/integration/api/admin-users-lifecycle.test.ts > Admin Users Lifecycle â€” CSRF and auth enforcement > DELETE /api/admin/users/user-123 without auth â†’ 403 (fails CSRF origin checks) 16ms
 âœ“ |integration| tests/integration/api/mcp-ping.test.ts > /api/mcp/ping > rejects unauthenticated requests 73ms
 â†“ |integration| tests/integration/api/mcp-ping.test.ts > /api/mcp/ping > accepts executor token auth
[dev] [2025-11-12T04:34:06.548Z] [INFO][3599wqpe] GET /api/mcp/ping
Context: {
  "requestId": "3599wqpemhvi9owk",
  "endpoint": "/api/mcp/ping",
  "method": "GET"
}
[2025-11-12T04:34:06.548Z] [DEBUG][3599wqpe] [Middleware] Session ID from cookie
Context: {
  "requestId": "3599wqpemhvi9owk",
  "present": false
}
[2025-11-12T04:34:06.552Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: { endpoint: '/api/mcp/ping', method: 'GET' }
}
[2025-11-12T04:34:06.552Z] [DEBUG][3599wqpe] [Middleware] Outgoing response
Context: {
  "requestId": "3599wqpemhvi9owk",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:06.552Z] [DEBUG][3599wqpe] [Middleware] Processing path
Context: {
  "requestId": "3599wqpemhvi9owk",
  "path": "/api/mcp/ping"
}
[2025-11-12T04:34:06.553Z] [INFO][3599wqpe] GET /api/mcp/ping -> 401 (5ms)
Context: {
  "requestId": "3599wqpemhvi9owk",
  "duration": 5,
  "status": 401
}
[2025-11-12T04:34:06.555Z] [INFO][kfcgn101] POST /api/debug-login
Context: {
  "requestId": "kfcgn101mhvi9owr",
  "endpoint": "/api/debug-login",
  "method": "POST"
}
[2025-11-12T04:34:06.555Z] [DEBUG][kfcgn101] [Middleware] Session ID from cookie
Context: {
  "requestId": "kfcgn101mhvi9owr",
  "present": false
}
[2025-11-12T04:34:06.555Z] [INFO][vyfaabcm] POST /api/debug-login
Context: {
  "requestId": "vyfaabcmmhvi9owr",
  "endpoint": "/api/debug-login",
  "method": "POST"
}
[2025-11-12T04:34:06.556Z] [DEBUG][vyfaabcm] [Middleware] Session ID from cookie
Context: {
  "requestId": "vyfaabcmmhvi9owr",
  "present": false
}
[2025-11-12T04:34:06.556Z] [INFO][2gpmjtr1] POST /api/testing/evaluate/next/run
Context: {
  "requestId": "2gpmjtr1mhvi9ows",
  "endpoint": "/api/testing/evaluate/next/run",
  "method": "POST"
}
[2025-11-12T04:34:06.556Z] [DEBUG][2gpmjtr1] [Middleware] Session ID from cookie
Context: {
  "requestId": "2gpmjtr1mhvi9ows",
  "present": false
}
[2025-11-12T04:34:06.560Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: { endpoint: '/api/testing/evaluate/next/run', method: 'POST' }
}
[2025-11-12T04:34:06.560Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/debug-login',
    method: 'POST',
    action: 'debug_login'
  }
}
[2025-11-12T04:34:06.561Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/debug-login',
    method: 'POST',
    action: 'debug_login'
  }
}
[2025-11-12T04:34:06.563Z] [INFO][U:d44cd9d1-b68d-41bd-9c69-87ac5bda927f] Security Event: USER_EVENT
Context: {
  "userId": "d44cd9d1-b68d-41bd-9c69-87ac5bda927f",
  "securityEventType": "USER_EVENT",
  "originalDetails": {
    "eventType": "debug_login_created",
    "ipAddress": "::1",
    "debugUser": true
  },
  "logLevel": "info",
  "eventSnapshot": {
    "type": "USER_EVENT",
    "userId": "d44cd9d1-b68d-41bd-9c69-87ac5bda927f",
    "timestamp": 1762922046563,
    "details": {
      "eventType": "debug_login_created",
      "ipAddress": "::1",
      "debugUser": true
    }
  }
}
[2025-11-12T04:34:06.564Z] [DEBUG][kfcgn101] [Middleware] Outgoing response
Context: {
  "requestId": "kfcgn101mhvi9owr",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:06.564Z] [DEBUG][kfcgn101] [Middleware] Processing path
Context: {
  "requestId": "kfcgn101mhvi9owr",
  "path": "/api/debug-login"
}
[2025-11-12T04:34:06.564Z] [INFO][kfcgn101] POST /api/debug-login -> 200 (9ms)
Context: {
  "requestId": "kfcgn101mhvi9owr",
  "duration": 9,
  "status": 200
}
[2025-11-12T04:34:06.565Z] [INFO][U:d44cd9d1-b68d-41bd-9c69-87ac5bda927f] Security Event: USER_EVENT
Context: {
  "userId": "d44cd9d1-b68d-41bd-9c69-87ac5bda927f",
  "securityEventType": "USER_EVENT",
  "originalDetails": {
    "eventType": "debug_login_created",
    "ipAddress": "::1",
    "debugUser": true
  },
  "logLevel": "info",
  "eventSnapshot": {
    "type": "USER_EVENT",
    "userId": "d44cd9d1-b68d-41bd-9c69-87ac5bda927f",
    "timestamp": 1762922046565,
    "details": {
      "eventType": "debug_login_created",
      "ipAddress": "::1",
      "debugUser": true
    }
  }
}
[2025-11-12T04:34:06.565Z] [DEBUG][vyfaabcm] [Middleware] Outgoing response
Context: {
  "requestId": "vyfaabcmmhvi9owr",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:06.565Z] [DEBUG][vyfaabcm] [Middleware] Processing path
Context: {
  "requestId": "vyfaabcmmhvi9owr",
  "path": "/api/debug-login"
}
[2025-11-12T04:34:06.566Z] [INFO][vyfaabcm] POST /api/debug-login -> 200 (11ms)
Context: {
  "requestId": "vyfaabcmmhvi9owr",
  "duration": 11,
  "status": 200
}
[wrangler:info] POST /api/testing/evaluate 200 OK (14ms)
[dev] [wrangler:info] DELETE /api/admin/users/user-123 403 Forbidden (13ms)
[wrangler:info] GET / 302 Found (11ms)
[dev] [wrangler:info] GET /api/mcp/ping 401 Unauthorized (18ms)
 Ã— |integration| tests/integration/api/web-eval-run.test.ts > /api/testing/evaluate/next/run > returns null task when no pending entries exist 910ms
   â†’ expected 429 to be 200 // Object.is equality
stdout | tests/integration/auth.test.ts > Auth-Integration
Testserver erreichbar unter http://localhost:8787

[dev] [wrangler:info] POST /api/debug-login 200 OK (17ms)
[dev] [wrangler:info] POST /api/debug-login 200 OK (27ms)
[dev] [2025-11-12T04:34:06.580Z] [DEBUG][2gpmjtr1] [Middleware] Outgoing response
Context: {
  "requestId": "2gpmjtr1mhvi9ows",
  "status": 403,
  "statusText": "Forbidden",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[dev] [2025-11-12T04:34:06.584Z] [DEBUG][2gpmjtr1] [Middleware] Processing path
Context: {
  "requestId": "2gpmjtr1mhvi9ows",
  "path": "/api/testing/evaluate/next/run"
}
[2025-11-12T04:34:06.585Z] [INFO][2gpmjtr1] POST /api/testing/evaluate/next/run -> 403 (29ms)
Context: {
  "requestId": "2gpmjtr1mhvi9ows",
  "duration": 29,
  "status": 403
}
[2025-11-12T04:34:06.588Z] [INFO][w1w2adm1] GET /api/admin/rate-limits/state
Context: {
  "requestId": "w1w2adm1mhvi9oxo",
  "endpoint": "/api/admin/rate-limits/state",
  "method": "GET"
}
[2025-11-12T04:34:06.588Z] [DEBUG][w1w2adm1] [Middleware] Session ID from cookie
Context: {
  "requestId": "w1w2adm1mhvi9oxo",
  "present": true
}
[2025-11-12T04:34:06.589Z] [INFO][ltzuleku] GET /welcome
Context: {
  "requestId": "ltzulekumhvi9oxp",
  "endpoint": "/welcome",
  "method": "GET"
}
[2025-11-12T04:34:06.589Z] [DEBUG][ltzuleku] [Middleware] Session ID from cookie
Context: {
  "requestId": "ltzulekumhvi9oxp",
  "present": false
}
[2025-11-12T04:34:06.590Z] [DEBUG][ltzuleku] [Middleware] Outgoing response
Context: {
  "requestId": "ltzulekumhvi9oxp",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "text/html",
    "x-astro-route-type": "page"
  }
}
[2025-11-12T04:34:06.590Z] [DEBUG][ltzuleku] [Middleware] Processing path
Context: {
  "requestId": "ltzulekumhvi9oxp",
  "path": "/welcome"
}
[2025-11-12T04:34:06.590Z] [INFO][ltzuleku] GET /welcome -> 200 (1ms)
Context: {
  "requestId": "ltzulekumhvi9oxp",
  "duration": 1,
  "status": 200
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1mWarning: Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:[0m

  1. You might have mismatching versions of React and the renderer (such as React DOM)
  2. You might be breaking the Rules of Hooks
  3. You might have more than one copy of React in the same app
  See [4mhttps://reactjs.org/link/invalid-hook-call[0m for tips about how to debug and fix this problem.
 Ã— |integration| tests/integration/api/admin-users-lifecycle.test.ts > Admin Users Lifecycle â€” CSRF and auth enforcement > debug-login non-admin with CSRF token â†’ 403 forbidden 49ms
   â†’ expected 429 to be 403 // Object.is equality
 âœ“ |integration| tests/integration/api/admin-rate-limits.test.ts > Admin Rate Limits API â€” authenticated (non-admin) â†’ 403 > POST /api/debug-login then GET state â†’ 403 61ms
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1mWarning: Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:[0m

  1. You might have mismatching versions of React and the renderer (such as React DOM)
  2. You might be breaking the Rules of Hooks
  3. You might have more than one copy of React in the same app
  See [4mhttps://reactjs.org/link/invalid-hook-call[0m for tips about how to debug and fix this problem.
[dev] [2025-11-12T04:34:06.591Z] [INFO][o5rlbseb] DELETE /api/admin/users/user-123
Context: {
  "requestId": "o5rlbsebmhvi9oxr",
  "endpoint": "/api/admin/users/user-123",
  "method": "DELETE"
}
[2025-11-12T04:34:06.592Z] [DEBUG][o5rlbseb] [Middleware] Session ID from cookie
Context: {
  "requestId": "o5rlbsebmhvi9oxr",
  "present": true
}
[2025-11-12T04:34:06.593Z] [DEBUG][w1w2adm1] [Middleware] Session validation result
Context: {
  "requestId": "w1w2adm1mhvi9oxo",
  "sessionValid": true,
  "userValid": true
}
[2025-11-12T04:34:06.593Z] [DEBUG][o5rlbseb] [Middleware] Session validation result
Context: {
  "requestId": "o5rlbsebmhvi9oxr",
  "sessionValid": true,
  "userValid": true
}
[2025-11-12T04:34:06.595Z] [DEBUG][o5rlbseb] [Middleware] Outgoing response
Context: {
  "requestId": "o5rlbsebmhvi9oxr",
  "status": 429,
  "statusText": "Too Many Requests",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "retry-after": "3542",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:06.596Z] [DEBUG][o5rlbseb] [Middleware] Processing path
Context: {
  "requestId": "o5rlbsebmhvi9oxr",
  "path": "/api/admin/users/user-123"
}
[2025-11-12T04:34:06.596Z] [INFO][o5rlbseb] DELETE /api/admin/users/user-123 -> 429 (5ms)
Context: {
  "requestId": "o5rlbsebmhvi9oxr",
  "duration": 5,
  "status": 429
}
[2025-11-12T04:34:06.597Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'd44cd9d1-b68d-41bd-9c69-87ac5bda927f',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: { endpoint: '/api/admin/rate-limits/state', method: 'GET' }
}
[2025-11-12T04:34:06.599Z] [DEBUG][w1w2adm1] [Middleware] Outgoing response
Context: {
  "requestId": "w1w2adm1mhvi9oxo",
  "status": 403,
  "statusText": "Forbidden",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:06.599Z] [DEBUG][w1w2adm1] [Middleware] Processing path
Context: {
  "requestId": "w1w2adm1mhvi9oxo",
  "path": "/api/admin/rate-limits/state"
}
[2025-11-12T04:34:06.599Z] [INFO][w1w2adm1] GET /api/admin/rate-limits/state -> 403 (11ms)
Context: {
  "requestId": "w1w2adm1mhvi9oxo",
  "duration": 11,
  "status": 403
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:06.595Z] [ERROR] Security Event: RATE_LIMIT_EXCEEDED[0m

  Context: {
    "ipAddress": "::1",
    "targetResource": "/api/admin/users/user-123",
    "securityEventType": "RATE_LIMIT_EXCEEDED",
    "originalDetails": {
      "limiterName": "sensitiveAction",
      "maxRequests": 5,
      "windowMs": 3600000,
      "resetAt": 1762925587707
    },
    "logLevel": "error",
    "eventSnapshot": {
      "type": "RATE_LIMIT_EXCEEDED",
      "targetResource": "/api/admin/users/user-123",
      "ipAddress": "::1",
      "timestamp": 1762922046595,
      "details": {
        "limiterName": "sensitiveAction",
        "maxRequests": 5,
        "windowMs": 3600000,
        "resetAt": 1762925587707
      }
    }
  }
 âœ“ |integration| tests/integration/api/admin-credits-deduct.test.ts > Admin Credits Deduct â€” auth/csrf checks > POST /api/admin/credits/deduct without CSRF â†’ 403 96ms
[dev] [wrangler:info] POST /api/testing/evaluate/next/run 403 Forbidden (37ms)
[wrangler:info] GET /welcome 200 OK (36ms)
[wrangler:info] DELETE /api/admin/users/user-123 429 Too Many Requests (22ms)
[2025-11-12T04:34:06.603Z] [INFO][ifnufn0t] GET /login
Context: {
  "requestId": "ifnufn0tmhvi9oy3",
  "endpoint": "/login",
  "method": "GET"
}
[2025-11-12T04:34:06.603Z] [DEBUG][ifnufn0t] [Middleware] Session ID from cookie
Context: {
  "requestId": "ifnufn0tmhvi9oy3",
  "present": false
}
[2025-11-12T04:34:06.606Z] [DEBUG][ifnufn0t] [Middleware] Outgoing response
Context: {
  "requestId": "ifnufn0tmhvi9oy3",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "text/html",
    "x-astro-route-type": "page"
  }
}
[2025-11-12T04:34:06.606Z] [DEBUG][ifnufn0t] [Middleware] Processing path
Context: {
  "requestId": "ifnufn0tmhvi9oy3",
  "path": "/login"
}
[2025-11-12T04:34:06.606Z] [INFO][ifnufn0t] GET /login -> 200 (3ms)
Context: {
  "requestId": "ifnufn0tmhvi9oy3",
  "duration": 3,
  "status": 200
}
 âœ“ |integration| tests/integration/api/admin-auth-checks.test.ts > Admin endpoints require auth > GET /api/admin/status â†’ 401 unauthenticated 95ms
 âœ“ |integration| tests/integration/api/web-eval-run.test.ts > /api/testing/evaluate/next/run > claims and fails with browser_disabled when CBR is disabled (no binding/flag) 157ms
 â†“ |integration| tests/integration/api/web-eval-run.test.ts > /api/testing/evaluate/next/run > requires x-internal-exec in production
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1mWarning: Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:[0m

  1. You might have mismatching versions of React and the renderer (such as React DOM)
  2. You might be breaking the Rules of Hooks
  3. You might have more than one copy of React in the same app
  See [4mhttps://reactjs.org/link/invalid-hook-call[0m for tips about how to debug and fix this problem.
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1mWarning: Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:[0m

  1. You might have mismatching versions of React and the renderer (such as React DOM)
  2. You might be breaking the Rules of Hooks
  3. You might have more than one copy of React in the same app
  See [4mhttps://reactjs.org/link/invalid-hook-call[0m for tips about how to debug and fix this problem.
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1mWarning: Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:[0m

  1. You might have mismatching versions of React and the renderer (such as React DOM)
  2. You might be breaking the Rules of Hooks
  3. You might have more than one copy of React in the same app
  See [4mhttps://reactjs.org/link/invalid-hook-call[0m for tips about how to debug and fix this problem.
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1mWarning: Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:[0m

  1. You might have mismatching versions of React and the renderer (such as React DOM)
  2. You might be breaking the Rules of Hooks
  3. You might have more than one copy of React in the same app
  See [4mhttps://reactjs.org/link/invalid-hook-call[0m for tips about how to debug and fix this problem.
 âœ“ |integration| tests/integration/api/admin-auth-checks.test.ts > Admin endpoints require auth > GET /api/admin/metrics â†’ 401 unauthenticated 27ms
[dev] [2025-11-12T04:34:06.608Z] [INFO][psl09f6b] POST /api/admin/credits/deduct
Context: {
  "requestId": "psl09f6bmhvi9oy8",
  "endpoint": "/api/admin/credits/deduct",
  "method": "POST"
}
[dev] [2025-11-12T04:34:06.608Z] [DEBUG][psl09f6b] [Middleware] Session ID from cookie
Context: {
  "requestId": "psl09f6bmhvi9oy8",
  "present": false
}
[2025-11-12T04:34:06.608Z] [INFO] SECURITY_EVENT {
  timestamp: {},
  resource: 'security',
  ipAddress: '::1',
  type: 'SUSPICIOUS_ACTIVITY',
  details: {
    reason: 'csrf_token_mismatch',
    endpoint: '/api/admin/credits/deduct',
    hasHeader: false,
    hasCookie: false
  }
}
[dev] [2025-11-12T04:34:06.609Z] [DEBUG][psl09f6b] [Middleware] Outgoing response
Context: {
  "requestId": "psl09f6bmhvi9oy8",
  "status": 403,
  "statusText": "Forbidden",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:06.609Z] [DEBUG][psl09f6b] [Middleware] Processing path
Context: {
  "requestId": "psl09f6bmhvi9oy8",
  "path": "/api/admin/credits/deduct"
}
[2025-11-12T04:34:06.609Z] [INFO][psl09f6b] POST /api/admin/credits/deduct -> 403 (1ms)
Context: {
  "requestId": "psl09f6bmhvi9oy8",
  "duration": 1,
  "status": 403
}
[2025-11-12T04:34:06.609Z] [INFO][vs90izp2] GET /api/testing/evaluate/53c92650-efb7-4dd3-9cae-5c10a7c273b0
Context: {
  "requestId": "vs90izp2mhvi9oy9",
  "endpoint": "/api/testing/evaluate/53c92650-efb7-4dd3-9cae-5c10a7c273b0",
  "method": "GET"
}
[2025-11-12T04:34:06.609Z] [DEBUG][vs90izp2] [Middleware] Session ID from cookie
Context: {
  "requestId": "vs90izp2mhvi9oy9",
  "present": false
}
[2025-11-12T04:34:06.610Z] [INFO][r3s25rt3] GET /api/admin/status
Context: {
  "requestId": "r3s25rt3mhvi9oya",
  "endpoint": "/api/admin/status",
  "method": "GET"
}
[2025-11-12T04:34:06.610Z] [DEBUG][r3s25rt3] [Middleware] Session ID from cookie
Context: {
  "requestId": "r3s25rt3mhvi9oya",
  "present": false
}
[2025-11-12T04:34:06.619Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: { endpoint: '/api/admin/status', method: 'GET' }
}
[dev] [2025-11-12T04:34:06.619Z] [DEBUG][r3s25rt3] [Middleware] Outgoing response
Context: {
  "requestId": "r3s25rt3mhvi9oya",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:06.619Z] [DEBUG][r3s25rt3] [Middleware] Processing path
Context: {
  "requestId": "r3s25rt3mhvi9oya",
  "path": "/api/admin/status"
}
[2025-11-12T04:34:06.619Z] [INFO][r3s25rt3] GET /api/admin/status -> 401 (9ms)
Context: {
  "requestId": "r3s25rt3mhvi9oya",
  "duration": 9,
  "status": 401
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:06.619Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: { reason: 'unauthenticated_access', endpoint: '/api/admin/status' }
  }
[dev] [2025-11-12T04:34:06.620Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/testing/evaluate/53c92650-efb7-4dd3-9cae-5c10a7c273b0',
    method: 'GET'
  }
}
[dev] [wrangler:info] GET /login 200 OK (14ms)
[wrangler:info] GET /api/admin/rate-limits/state 403 Forbidden (24ms)
[wrangler:info] POST /api/admin/credits/deduct 403 Forbidden (27ms)
[wrangler:info] GET /api/admin/status 401 Unauthorized (24ms)
[2025-11-12T04:34:06.621Z] [DEBUG][vs90izp2] [Middleware] Outgoing response
Context: {
  "requestId": "vs90izp2mhvi9oy9",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "cache-control": "no-store, no-cache, must-revalidate",
    "content-type": "application/json",
    "expires": "0",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "pragma": "no-cache",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:06.632Z] [DEBUG][vs90izp2] [Middleware] Processing path
Context: {
  "requestId": "vs90izp2mhvi9oy9",
  "path": "/api/testing/evaluate/53c92650-efb7-4dd3-9cae-5c10a7c273b0"
}
[2025-11-12T04:34:06.632Z] [INFO][vs90izp2] GET /api/testing/evaluate/53c92650-efb7-4dd3-9cae-5c10a7c273b0 -> 200 (23ms)
Context: {
  "requestId": "vs90izp2mhvi9oy9",
  "duration": 23,
  "status": 200
}
[2025-11-12T04:34:06.641Z] [INFO][8aeaslvh] POST /api/testing/evaluate/next/run
Context: {
  "requestId": "8aeaslvhmhvi9oz5",
  "endpoint": "/api/testing/evaluate/next/run",
  "method": "POST"
}
[2025-11-12T04:34:06.642Z] [DEBUG][8aeaslvh] [Middleware] Session ID from cookie
Context: {
  "requestId": "8aeaslvhmhvi9oz5",
  "present": false
}
[2025-11-12T04:34:06.644Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: { endpoint: '/api/testing/evaluate/next/run', method: 'POST' }
}
[2025-11-12T04:34:06.647Z] [DEBUG][8aeaslvh] [Middleware] Outgoing response
Context: {
  "requestId": "8aeaslvhmhvi9oz5",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:06.647Z] [DEBUG][8aeaslvh] [Middleware] Processing path
Context: {
  "requestId": "8aeaslvhmhvi9oz5",
  "path": "/api/testing/evaluate/next/run"
}
[2025-11-12T04:34:06.647Z] [INFO][8aeaslvh] POST /api/testing/evaluate/next/run -> 200 (6ms)
Context: {
  "requestId": "8aeaslvhmhvi9oz5",
  "duration": 6,
  "status": 200
}
[2025-11-12T04:34:06.648Z] [INFO][iciezd7s] GET /api/admin/metrics
Context: {
  "requestId": "iciezd7smhvi9ozc",
  "endpoint": "/api/admin/metrics",
  "method": "GET"
}
[2025-11-12T04:34:06.649Z] [DEBUG][iciezd7s] [Middleware] Session ID from cookie
Context: {
  "requestId": "iciezd7smhvi9ozc",
  "present": false
}
[2025-11-12T04:34:06.650Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/admin/metrics',
    method: 'GET',
    action: 'admin_metrics'
  }
}
[2025-11-12T04:34:06.650Z] [DEBUG][iciezd7s] [Middleware] Outgoing response
Context: {
  "requestId": "iciezd7smhvi9ozc",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:06.650Z] [DEBUG][iciezd7s] [Middleware] Processing path
Context: {
  "requestId": "iciezd7smhvi9ozc",
  "path": "/api/admin/metrics"
}
[2025-11-12T04:34:06.650Z] [INFO][iciezd7s] GET /api/admin/metrics -> 401 (2ms)
Context: {
  "requestId": "iciezd7smhvi9ozc",
  "duration": 2,
  "status": 401
}
[2025-11-12T04:34:06.660Z] [INFO][fyqqoaqk] GET /register
Context: {
  "requestId": "fyqqoaqkmhvi9ozo",
  "endpoint": "/register",
  "method": "GET"
}
[2025-11-12T04:34:06.660Z] [DEBUG][fyqqoaqk] [Middleware] Session ID from cookie
Context: {
  "requestId": "fyqqoaqkmhvi9ozo",
  "present": false
}
[2025-11-12T04:34:06.665Z] [DEBUG][fyqqoaqk] [Middleware] Outgoing response
Context: {
  "requestId": "fyqqoaqkmhvi9ozo",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "text/html",
    "x-astro-route-type": "page"
  }
}
[2025-11-12T04:34:06.665Z] [DEBUG][fyqqoaqk] [Middleware] Processing path
Context: {
  "requestId": "fyqqoaqkmhvi9ozo",
  "path": "/register"
}
[2025-11-12T04:34:06.665Z] [INFO][fyqqoaqk] GET /register -> 200 (5ms)
Context: {
  "requestId": "fyqqoaqkmhvi9ozo",
  "duration": 5,
  "status": 200
}
[wrangler:info] GET /api/testing/evaluate/53c92650-efb7-4dd3-9cae-5c10a7c273b0 200 OK (40ms)
[wrangler:info] POST /api/testing/evaluate/next/run 200 OK (13ms)
[wrangler:info] GET /api/admin/metrics 401 Unauthorized (12ms)
[wrangler:info] GET /register 200 OK (20ms)
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:06.650Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    ipAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: { reason: 'unauthenticated_access', endpoint: '/api/admin/metrics' }
  }


[31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1mWarning: Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:[0m

  1. You might have mismatching versions of React and the renderer (such as React DOM)
  2. You might be breaking the Rules of Hooks
  3. You might have more than one copy of React in the same app
  See [4mhttps://reactjs.org/link/invalid-hook-call[0m for tips about how to debug and fix this problem.


[31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1mWarning: Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:[0m

  1. You might have mismatching versions of React and the renderer (such as React DOM)
  2. You might be breaking the Rules of Hooks
  3. You might have more than one copy of React in the same app
  See [4mhttps://reactjs.org/link/invalid-hook-call[0m for tips about how to debug and fix this problem.


[31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1mWarning: Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:[0m

  1. You might have mismatching versions of React and the renderer (such as React DOM)
  2. You might be breaking the Rules of Hooks
  3. You might have more than one copy of React in the same app
  See [4mhttps://reactjs.org/link/invalid-hook-call[0m for tips about how to debug and fix this problem.


[31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1mWarning: Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:[0m

  1. You might have mismatching versions of React and the renderer (such as React DOM)
  2. You might be breaking the Rules of Hooks
  3. You might have more than one copy of React in the same app
  See [4mhttps://reactjs.org/link/invalid-hook-call[0m for tips about how to debug and fix this problem.
 âœ“ |integration| tests/integration/auth.test.ts > Auth-Integration > sollte die Login-Seite korrekt anzeigen 60ms
 â†“ |integration| tests/integration/auth.test.ts > Auth-Integration > sollte bei ungÃ¼ltiger E-Mail einen Validierungsfehler (legacy) zurÃ¼ckgeben
 â†“ |integration| tests/integration/auth.test.ts > Auth-Integration > sollte bei zu kurzem Passwort einen Validierungsfehler (legacy) zurÃ¼ckgeben
 â†“ |integration| tests/integration/auth.test.ts > Auth-Integration > sollte bei nicht existierendem Benutzer einen entsprechenden Fehler (legacy) zurÃ¼ckgeben
 â†“ |integration| tests/integration/auth.test.ts > Auth-Integration > sollte die Cookie-Lebensdauer bei "Remember Me" anpassen (legacy)
 âœ“ |integration| tests/integration/auth.test.ts > Auth-Integration > sollte die Register-Seite korrekt anzeigen (Magic Link) 33ms
 â†“ |integration| tests/integration/auth.test.ts > Auth-Integration > sollte die "Passwort vergessen"-Seite korrekt anzeigen (legacy)
[dev] [2025-11-12T04:34:07.136Z] [INFO][dh8e7out] GET /
Context: {
  "requestId": "dh8e7outmhvi9pcw",
  "endpoint": "/",
  "method": "GET"
}
[2025-11-12T04:34:07.140Z] [DEBUG][dh8e7out] [Middleware] Session ID from cookie
Context: {
  "requestId": "dh8e7outmhvi9pcw",
  "present": false
}
[dev] [2025-11-12T04:34:07.228Z] [DEBUG][dh8e7out] [Middleware] Outgoing response
Context: {
  "requestId": "dh8e7outmhvi9pcw",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "text/html",
    "x-astro-route-type": "page"
  }
}
[dev] [2025-11-12T04:34:07.229Z] [DEBUG][dh8e7out] [Middleware] Processing path
Context: {
  "requestId": "dh8e7outmhvi9pcw",
  "path": "/"
}
[2025-11-12T04:34:07.229Z] [INFO][dh8e7out] GET / -> 200 (93ms)
Context: {
  "requestId": "dh8e7outmhvi9pcw",
  "duration": 93,
  "status": 200
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1mWarning: Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:[0m

  1. You might have mismatching versions of React and the renderer (such as React DOM)
  2. You might be breaking the Rules of Hooks
  3. You might have more than one copy of React in the same app
  See [4mhttps://reactjs.org/link/invalid-hook-call[0m for tips about how to debug and fix this problem.


[31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1mWarning: Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:[0m

  1. You might have mismatching versions of React and the renderer (such as React DOM)
  2. You might be breaking the Rules of Hooks
  3. You might have more than one copy of React in the same app
  See [4mhttps://reactjs.org/link/invalid-hook-call[0m for tips about how to debug and fix this problem.
[dev] [wrangler:info] GET / 200 OK (355ms)
 âœ“ |integration| tests/integration/routing/headers.test.ts > Headers sanity > GET / sets Content-Language and Vary 830ms
[dev] [2025-11-12T04:34:07.726Z] [INFO][1lok6ahr] GET /en/
Context: {
  "requestId": "1lok6ahrmhvi9pta",
  "endpoint": "/en/",
  "method": "GET"
}
[dev] [2025-11-12T04:34:07.728Z] [DEBUG][1lok6ahr] [Middleware] Session ID from cookie
Context: {
  "requestId": "1lok6ahrmhvi9pta",
  "present": false
}
[dev] [2025-11-12T04:34:07.751Z] [DEBUG][1lok6ahr] [Middleware] Outgoing response
Context: {
  "requestId": "1lok6ahrmhvi9pta",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "text/html",
    "x-astro-route-type": "page"
  }
}
[2025-11-12T04:34:07.751Z] [DEBUG][1lok6ahr] [Middleware] Processing path
Context: {
  "requestId": "1lok6ahrmhvi9pta",
  "path": "/en/"
}
[2025-11-12T04:34:07.751Z] [INFO][1lok6ahr] GET /en/ -> 200 (25ms)
Context: {
  "requestId": "1lok6ahrmhvi9pta",
  "duration": 25,
  "status": 200
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1mWarning: Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:[0m

  1. You might have mismatching versions of React and the renderer (such as React DOM)
  2. You might be breaking the Rules of Hooks
  3. You might have more than one copy of React in the same app
  See [4mhttps://reactjs.org/link/invalid-hook-call[0m for tips about how to debug and fix this problem.
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1mWarning: Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:[0m

  1. You might have mismatching versions of React and the renderer (such as React DOM)
  2. You might be breaking the Rules of Hooks
  3. You might have more than one copy of React in the same app
  See [4mhttps://reactjs.org/link/invalid-hook-call[0m for tips about how to debug and fix this problem.
[dev] [wrangler:info] GET /en/ 200 OK (490ms)
 âœ“ |integration| tests/integration/routing/headers.test.ts > Headers sanity > GET /en/ sets Content-Language and Vary 525ms
[dev] [2025-11-12T04:34:08.208Z] [INFO][7k7f3ohn] GET /
Context: {
  "requestId": "7k7f3ohnmhvi9q6o",
  "endpoint": "/",
  "method": "GET"
}
[dev] [2025-11-12T04:34:08.209Z] [DEBUG][7k7f3ohn] [Middleware] pref_locale cookie explicitly set
Context: {
  "requestId": "7k7f3ohnmhvi9q6o",
  "targetLocale": "en"
}
[2025-11-12T04:34:08.210Z] [INFO][m3ar5reo] POST /api/testing/evaluate/dummy-id/complete
Context: {
  "requestId": "m3ar5reomhvi9q6q",
  "endpoint": "/api/testing/evaluate/dummy-id/complete",
  "method": "POST"
}
[2025-11-12T04:34:08.210Z] [DEBUG][m3ar5reo] [Middleware] Session ID from cookie
Context: {
  "requestId": "m3ar5reomhvi9q6q",
  "present": false
}
[2025-11-12T04:34:08.211Z] [INFO][y0b09slh] GET /api/prompt/usage
Context: {
  "requestId": "y0b09slhmhvi9q6r",
  "endpoint": "/api/prompt/usage",
  "method": "GET"
}
[dev] [2025-11-12T04:34:08.211Z] [DEBUG][y0b09slh] [Middleware] Session ID from cookie
Context: {
  "requestId": "y0b09slhmhvi9q6r",
  "present": false
}
[2025-11-12T04:34:08.211Z] [INFO][a968243k] GET /api/voice/usage
Context: {
  "requestId": "a968243kmhvi9q6r",
  "endpoint": "/api/voice/usage",
  "method": "GET"
}
[2025-11-12T04:34:08.212Z] [DEBUG][a968243k] [Middleware] Session ID from cookie
Context: {
  "requestId": "a968243kmhvi9q6r",
  "present": false
}
[2025-11-12T04:34:08.213Z] [INFO][rco8mdlz] POST /api/debug/logs-stream
Context: {
  "requestId": "rco8mdlzmhvi9q6t",
  "endpoint": "/api/debug/logs-stream",
  "method": "POST"
}
[2025-11-12T04:34:08.214Z] [DEBUG][rco8mdlz] [Middleware] Session ID from cookie
Context: {
  "requestId": "rco8mdlzmhvi9q6t",
  "present": false
}
[2025-11-12T04:34:08.214Z] [INFO][U:anonymous] Security Event: API_ACCESS
Context: {
  "userId": "anonymous",
  "ipAddress": "::1",
  "targetResource": "/api/debug/logs-stream",
  "securityEventType": "API_ACCESS",
  "originalDetails": {
    "endpoint": "/api/debug/logs-stream",
    "method": "POST",
    "action": "debug_logs_polled",
    "streaming": "polling"
  },
  "logLevel": "info",
  "eventSnapshot": {
    "type": "API_ACCESS",
    "userId": "anonymous",
    "targetResource": "/api/debug/logs-stream",
    "ipAddress": "::1",
    "timestamp": 1762922048214,
    "details": {
      "endpoint": "/api/debug/logs-stream",
      "method": "POST",
      "action": "debug_logs_polled",
      "streaming": "polling"
    }
  }
}
[2025-11-12T04:34:08.215Z] [DEBUG][rco8mdlz] [Middleware] Outgoing response
Context: {
  "requestId": "rco8mdlzmhvi9q6t",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "application/json"
  }
}
[2025-11-12T04:34:08.215Z] [DEBUG][rco8mdlz] [Middleware] Processing path
Context: {
  "requestId": "rco8mdlzmhvi9q6t",
  "path": "/api/debug/logs-stream"
}
[2025-11-12T04:34:08.215Z] [INFO][rco8mdlz] POST /api/debug/logs-stream -> 200 (2ms)
Context: {
  "requestId": "rco8mdlzmhvi9q6t",
  "duration": 2,
  "status": 200
}
[wrangler:info] POST /api/debug/logs-stream 200 OK (144ms)
[dev] [wrangler:info] GET / 301 Moved Permanently (57ms)
[wrangler:info] POST /api/prompt-enhance 403 Forbidden (148ms)
[dev] [2025-11-12T04:34:08.234Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: { endpoint: '/api/voice/usage', method: 'GET' }
}
[2025-11-12T04:34:08.234Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/testing/evaluate/dummy-id/complete',
    method: 'POST'
  }
}
 âœ“ |integration| tests/integration/prompt-enhance-api.test.ts > prompt-enhance API Integration Tests > should enhance prompt with valid CSRF and quota 618ms
 âœ“ |integration| tests/integration/routing/lang-alias.test.ts > Locale alias ?lang= > redirects using ?lang=en&next=/pricing to /en/pricing 168ms
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:08.235Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    endpoint: '/api/testing/evaluate/dummy-id/complete',
    clientAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: {
      reason: 'web_eval_executor_token_invalid',
      hasProvidedToken: false
    }
  }
[dev] [2025-11-12T04:34:08.235Z] [DEBUG][m3ar5reo] [Middleware] Outgoing response
Context: {
  "requestId": "m3ar5reomhvi9q6q",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:08.238Z] [DEBUG][m3ar5reo] [Middleware] Processing path
Context: {
  "requestId": "m3ar5reomhvi9q6q",
  "path": "/api/testing/evaluate/dummy-id/complete"
}
[2025-11-12T04:34:08.239Z] [INFO][m3ar5reo] POST /api/testing/evaluate/dummy-id/complete -> 401 (29ms)
Context: {
  "requestId": "m3ar5reomhvi9q6q",
  "duration": 29,
  "status": 401
}
[2025-11-12T04:34:08.245Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: { endpoint: '/api/prompt/usage', method: 'GET' }
}
[2025-11-12T04:34:08.247Z] [DEBUG][y0b09slh] [Middleware] Outgoing response
Context: {
  "requestId": "y0b09slhmhvi9q6r",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "cache-control": "no-store, no-cache, must-revalidate",
    "content-type": "application/json",
    "expires": "0",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "pragma": "no-cache",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY",
    "x-usage-limit": "5",
    "x-usage-ownertype": "guest",
    "x-usage-plan": ""
  }
}
[2025-11-12T04:34:08.247Z] [DEBUG][y0b09slh] [Middleware] Processing path
Context: {
  "requestId": "y0b09slhmhvi9q6r",
  "path": "/api/prompt/usage"
}
[2025-11-12T04:34:08.248Z] [INFO][y0b09slh] GET /api/prompt/usage -> 200 (37ms)
Context: {
  "requestId": "y0b09slhmhvi9q6r",
  "duration": 37,
  "status": 200
}
[dev] [2025-11-12T04:34:08.263Z] [DEBUG][a968243k] [Middleware] Outgoing response
Context: {
  "requestId": "a968243kmhvi9q6r",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "cache-control": "no-store, no-cache, must-revalidate",
    "content-type": "application/json",
    "expires": "0",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "pragma": "no-cache",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY",
    "x-usage-limit": "60",
    "x-usage-ownertype": "guest",
    "x-usage-plan": ""
  }
}
[dev] [2025-11-12T04:34:08.263Z] [DEBUG][a968243k] [Middleware] Processing path
Context: {
  "requestId": "a968243kmhvi9q6r",
  "path": "/api/voice/usage"
}
 âœ“ |integration| tests/integration/api/debug-logs-stream.test.ts > Debug Logs Stream gating > POST /api/debug/logs-stream returns 200 JSON when enabled 646ms
[dev] [wrangler:info] GET /api/prompt/usage 200 OK (512ms)
[2025-11-12T04:34:08.266Z] [INFO][a968243k] GET /api/voice/usage -> 200 (55ms)
Context: {
  "requestId": "a968243kmhvi9q6r",
  "duration": 55,
  "status": 200
}
[wrangler:info] POST /api/testing/evaluate/dummy-id/complete 401 Unauthorized (555ms)
[wrangler:info] GET /api/voice/usage 200 OK (196ms)
 âœ“ |integration| tests/integration/api/debug-logs-stream.test.ts > Debug Logs Stream gating > POST /api/debug/logs-stream returns 404 when disabled (optional) 1ms
[dev] [wrangler:info] POST /api/prompt-enhance 403 Forbidden (8ms)
 âœ“ |integration| tests/integration/api/voice/usage.test.ts > Voice API: GET /api/voice/usage > returns 200 and expected JSON shape 661ms
 âœ“ |integration| tests/integration/api/web-eval-complete.test.ts > /api/testing/evaluate/:id/complete > rejects without token â†’ 401 987ms
 âœ“ |integration| tests/integration/api/prompt/usage.test.ts > Prompt API: GET /api/prompt/usage > returns 200 and expected JSON shape with debug headers 820ms
[dev] [wrangler:info] POST /api/prompt-enhance 403 Forbidden (8ms)
[dev] [2025-11-12T04:34:08.304Z] [INFO][j50icq4f] POST /api/testing/evaluate
Context: {
  "requestId": "j50icq4fmhvi9q9c",
  "endpoint": "/api/testing/evaluate",
  "method": "POST"
}
[2025-11-12T04:34:08.304Z] [DEBUG][j50icq4f] [Middleware] Session ID from cookie
Context: {
  "requestId": "j50icq4fmhvi9q9c",
  "present": false
}
[dev] [2025-11-12T04:34:08.307Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: { endpoint: '/api/testing/evaluate', method: 'POST' }
}
[dev] [2025-11-12T04:34:08.314Z] [DEBUG][j50icq4f] [Middleware] Outgoing response
Context: {
  "requestId": "j50icq4fmhvi9q9c",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:08.314Z] [DEBUG][j50icq4f] [Middleware] Processing path
Context: {
  "requestId": "j50icq4fmhvi9q9c",
  "path": "/api/testing/evaluate"
}
[2025-11-12T04:34:08.314Z] [INFO][j50icq4f] POST /api/testing/evaluate -> 200 (10ms)
Context: {
  "requestId": "j50icq4fmhvi9q9c",
  "duration": 10,
  "status": 200
}
[dev] [wrangler:info] POST /api/testing/evaluate 200 OK (21ms)
[wrangler:info] POST /api/prompt-enhance 403 Forbidden (11ms)
[dev] [wrangler:info] POST /api/prompt-enhance 403 Forbidden (4ms)
 âœ“ |integration| tests/integration/prompt-enhance-api.test.ts > prompt-enhance API Integration Tests > should enhance prompt for guest with valid CSRF and quota 39ms
 âœ“ |integration| tests/integration/prompt-enhance-api.test.ts > prompt-enhance API Integration Tests > should return 429 for quota exceeded 19ms
 âœ“ |integration| tests/integration/prompt-enhance-api.test.ts > prompt-enhance API Integration Tests > should return 400/403 for invalid CSRF token 22ms
 âœ“ |integration| tests/integration/prompt-enhance-api.test.ts > prompt-enhance API Integration Tests > should return 429 for rate limit exceeded 16ms
[dev] [2025-11-12T04:34:08.352Z] [INFO][j1jmn3ty] POST /api/testing/evaluate/0930d834-4787-4ce1-b3eb-df878ecc1251/complete
Context: {
  "requestId": "j1jmn3tymhvi9qao",
  "endpoint": "/api/testing/evaluate/0930d834-4787-4ce1-b3eb-df878ecc1251/complete",
  "method": "POST"
}
[dev] [2025-11-12T04:34:08.352Z] [DEBUG][j1jmn3ty] [Middleware] Session ID from cookie
Context: {
  "requestId": "j1jmn3tymhvi9qao",
  "present": false
}
[dev] [2025-11-12T04:34:08.364Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/testing/evaluate/0930d834-4787-4ce1-b3eb-df878ecc1251/complete',
    method: 'POST'
  }
}
 âœ“ |integration| tests/integration/api/web-eval-complete.test.ts > /api/testing/evaluate/:id/complete > rejects with invalid token â†’ 401 74ms
 â†“ |integration| tests/integration/api/web-eval-complete.test.ts > /api/testing/evaluate/:id/complete > rejects invalid payload â†’ 400 validation_error
 â†“ |integration| tests/integration/api/web-eval-complete.test.ts > /api/testing/evaluate/:id/complete > completes task successfully â†’ 200 and status updated
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:08.364Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    endpoint: '/api/testing/evaluate/0930d834-4787-4ce1-b3eb-df878ecc1251/complete',
    clientAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: { reason: 'web_eval_executor_token_invalid', hasProvidedToken: true }
  }
[dev] [2025-11-12T04:34:08.365Z] [DEBUG][j1jmn3ty] [Middleware] Outgoing response
Context: {
  "requestId": "j1jmn3tymhvi9qao",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:08.365Z] [DEBUG][j1jmn3ty] [Middleware] Processing path
Context: {
  "requestId": "j1jmn3tymhvi9qao",
  "path": "/api/testing/evaluate/0930d834-4787-4ce1-b3eb-df878ecc1251/complete"
}
[2025-11-12T04:34:08.365Z] [INFO][j1jmn3ty] POST /api/testing/evaluate/0930d834-4787-4ce1-b3eb-df878ecc1251/complete -> 401 (13ms)
Context: {
  "requestId": "j1jmn3tymhvi9qao",
  "duration": 13,
  "status": 401
}
[wrangler:info] POST /api/testing/evaluate/0930d834-4787-4ce1-b3eb-df878ecc1251/complete 401 Unauthorized (32ms)
[dev] [wrangler:info] POST /api/prompt-enhance 403 Forbidden (20ms)
[dev] [wrangler:info] POST /api/prompt-enhance 403 Forbidden (2ms)
[dev] [wrangler:info] POST /api/prompt-enhance 403 Forbidden (2ms)
[dev] [2025-11-12T04:34:08.389Z] [INFO][cuakm34x] GET /api/prompt-enhance
Context: {
  "requestId": "cuakm34xmhvi9qbp",
  "endpoint": "/api/prompt-enhance",
  "method": "GET"
}
[2025-11-12T04:34:08.390Z] [DEBUG][cuakm34x] [Middleware] Session ID from cookie
Context: {
  "requestId": "cuakm34xmhvi9qbp",
  "present": false
}
[2025-11-12T04:34:08.390Z] [DEBUG][cuakm34x] [Middleware] Outgoing response
Context: {
  "requestId": "cuakm34xmhvi9qbp",
  "status": 405,
  "statusText": "Method Not Allowed",
  "headers": {
    "allow": "POST",
    "content-type": "application/json"
  }
}
[2025-11-12T04:34:08.390Z] [DEBUG][cuakm34x] [Middleware] Processing path
Context: {
  "requestId": "cuakm34xmhvi9qbp",
  "path": "/api/prompt-enhance"
}
[2025-11-12T04:34:08.390Z] [INFO][cuakm34x] GET /api/prompt-enhance -> 405 (1ms)
Context: {
  "requestId": "cuakm34xmhvi9qbp",
  "duration": 1,
  "status": 405
}
[dev] [wrangler:info] GET /api/prompt-enhance 405 Method Not Allowed (6ms)
[dev] [2025-11-12T04:34:08.402Z] [INFO][jsv7a3v4] POST /api/prompt-enhance
Context: {
  "requestId": "jsv7a3v4mhvi9qc2",
  "endpoint": "/api/prompt-enhance",
  "method": "POST"
}
[2025-11-12T04:34:08.402Z] [DEBUG][jsv7a3v4] [Middleware] Session ID from cookie
Context: {
  "requestId": "jsv7a3v4mhvi9qc2",
  "present": false
}
[dev] [2025-11-12T04:34:08.403Z] [INFO] SECURITY_EVENT {
  timestamp: {},
  resource: 'security',
  ipAddress: '::1',
  type: 'SUSPICIOUS_ACTIVITY',
  details: {
    reason: 'csrf_token_mismatch',
    endpoint: '/api/prompt-enhance',
    hasHeader: false,
    hasCookie: false
  }
}
[dev] [2025-11-12T04:34:08.403Z] [DEBUG][jsv7a3v4] [Middleware] Outgoing response
Context: {
  "requestId": "jsv7a3v4mhvi9qc2",
  "status": 403,
  "statusText": "Forbidden",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:08.403Z] [DEBUG][jsv7a3v4] [Middleware] Processing path
Context: {
  "requestId": "jsv7a3v4mhvi9qc2",
  "path": "/api/prompt-enhance"
}
[2025-11-12T04:34:08.404Z] [INFO][jsv7a3v4] POST /api/prompt-enhance -> 403 (2ms)
Context: {
  "requestId": "jsv7a3v4mhvi9qc2",
  "duration": 2,
  "status": 403
}
[wrangler:info] POST /api/prompt-enhance 403 Forbidden (6ms)
 âœ“ |integration| tests/integration/prompt-enhance-api.test.ts > prompt-enhance API Integration Tests > should return 400/403 for invalid body - missing text 36ms
 âœ“ |integration| tests/integration/prompt-enhance-api.test.ts > prompt-enhance API Integration Tests > should return 400/403 for empty text 5ms
 âœ“ |integration| tests/integration/prompt-enhance-api.test.ts > prompt-enhance API Integration Tests > should return 200/403 for long text >1000 chars 4ms
 âœ“ |integration| tests/integration/prompt-enhance-api.test.ts > prompt-enhance API Integration Tests > should return 405 for GET method 11ms
 âœ“ |integration| tests/integration/prompt-enhance-api.test.ts > prompt-enhance API Integration Tests > should return 400/403 for invalid JSON body 12ms
[dev] [2025-11-12T04:34:08.732Z] [INFO][6ujg5liv] GET /api/comments
Context: {
  "requestId": "6ujg5livmhvi9ql8",
  "endpoint": "/api/comments",
  "method": "GET"
}
[dev] [2025-11-12T04:34:08.733Z] [DEBUG][6ujg5liv] [Middleware] Session ID from cookie
Context: {
  "requestId": "6ujg5livmhvi9ql8",
  "present": false
}
[dev] [2025-11-12T04:34:08.736Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: { endpoint: '/api/comments', method: 'GET', action: 'comments_list' }
}
[dev] [2025-11-12T04:34:08.741Z] [DEBUG][6ujg5liv] [Middleware] Outgoing response
Context: {
  "requestId": "6ujg5livmhvi9ql8",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:08.742Z] [DEBUG][6ujg5liv] [Middleware] Processing path
Context: {
  "requestId": "6ujg5livmhvi9ql8",
  "path": "/api/comments"
}
[dev] [2025-11-12T04:34:08.742Z] [INFO][6ujg5liv] GET /api/comments -> 200 (10ms)
Context: {
  "requestId": "6ujg5livmhvi9ql8",
  "duration": 10,
  "status": 200
}
[wrangler:info] GET /api/comments 200 OK (18ms)
[dev] [2025-11-12T04:34:08.762Z] [INFO][tqrjgdpr] GET /api/comments/count
Context: {
  "requestId": "tqrjgdprmhvi9qm2",
  "endpoint": "/api/comments/count",
  "method": "GET"
}
[2025-11-12T04:34:08.762Z] [DEBUG][tqrjgdpr] [Middleware] Session ID from cookie
Context: {
  "requestId": "tqrjgdprmhvi9qm2",
  "present": false
}
[2025-11-12T04:34:08.764Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/comments/count',
    method: 'GET',
    action: 'comments_count'
  }
}
[dev] [2025-11-12T04:34:08.770Z] [DEBUG][tqrjgdpr] [Middleware] Outgoing response
Context: {
  "requestId": "tqrjgdprmhvi9qm2",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:08.770Z] [DEBUG][tqrjgdpr] [Middleware] Processing path
Context: {
  "requestId": "tqrjgdprmhvi9qm2",
  "path": "/api/comments/count"
}
[2025-11-12T04:34:08.771Z] [INFO][tqrjgdpr] GET /api/comments/count -> 200 (9ms)
Context: {
  "requestId": "tqrjgdprmhvi9qm2",
  "duration": 9,
  "status": 200
}
[dev] [wrangler:info] GET /api/comments/count 200 OK (11ms)
 âœ“ |integration| tests/integration/api/comments-routes.test.ts > Comments API (GET) > GET /api/comments?debug=1 returns diagnostics 88ms
[dev] [2025-11-12T04:34:08.779Z] [INFO][qq13i049] GET /api/comments/count
Context: {
  "requestId": "qq13i049mhvi9qmj",
  "endpoint": "/api/comments/count",
  "method": "GET"
}
[dev] [2025-11-12T04:34:08.779Z] [DEBUG][qq13i049] [Middleware] Session ID from cookie
Context: {
  "requestId": "qq13i049mhvi9qmj",
  "present": false
}
[dev] [2025-11-12T04:34:08.781Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: {
    endpoint: '/api/comments/count',
    method: 'GET',
    action: 'comments_count'
  }
}
[dev] [2025-11-12T04:34:08.788Z] [DEBUG][qq13i049] [Middleware] Outgoing response
Context: {
  "requestId": "qq13i049mhvi9qmj",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:08.788Z] [DEBUG][qq13i049] [Middleware] Processing path
Context: {
  "requestId": "qq13i049mhvi9qmj",
  "path": "/api/comments/count"
}
[2025-11-12T04:34:08.789Z] [INFO][qq13i049] GET /api/comments/count -> 200 (10ms)
Context: {
  "requestId": "qq13i049mhvi9qmj",
  "duration": 10,
  "status": 200
}
[dev] [wrangler:info] GET /api/comments/count 200 OK (12ms)
[dev] [2025-11-12T04:34:08.796Z] [INFO][82vcn263] GET /api/comments
Context: {
  "requestId": "82vcn263mhvi9qn0",
  "endpoint": "/api/comments",
  "method": "GET"
}
[2025-11-12T04:34:08.796Z] [DEBUG][82vcn263] [Middleware] Session ID from cookie
Context: {
  "requestId": "82vcn263mhvi9qn0",
  "present": false
}
[2025-11-12T04:34:08.798Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: { endpoint: '/api/comments', method: 'GET', action: 'comments_list' }
}
[dev] [2025-11-12T04:34:08.801Z] [DEBUG][82vcn263] [Middleware] Outgoing response
Context: {
  "requestId": "82vcn263mhvi9qn0",
  "status": 200,
  "statusText": "OK",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:08.801Z] [DEBUG][82vcn263] [Middleware] Processing path
Context: {
  "requestId": "82vcn263mhvi9qn0",
  "path": "/api/comments"
}
[dev] [2025-11-12T04:34:08.801Z] [INFO][82vcn263] GET /api/comments -> 200 (5ms)
Context: {
  "requestId": "82vcn263mhvi9qn0",
  "duration": 5,
  "status": 200
}
[wrangler:info] GET /api/comments 200 OK (9ms)
 âœ“ |integration| tests/integration/api/comments-routes.test.ts > Comments API (GET) > GET /api/comments/count?entityType&entityId (single) returns count 19ms
 âœ“ |integration| tests/integration/api/comments-routes.test.ts > Comments API (GET) > GET /api/comments/count?entityType&entityId=...&entityId=... (batch) returns map 16ms
 âœ“ |integration| tests/integration/api/comments-routes.test.ts > Comments API (GET) > GET /api/comments?entityType&entityId returns list shape 14ms
[dev] [2025-11-12T04:34:08.819Z] [INFO][e59ueb7b] GET /api/csp-report
Context: {
  "requestId": "e59ueb7bmhvi9qnn",
  "endpoint": "/api/csp-report",
  "method": "GET"
}
[2025-11-12T04:34:08.819Z] [DEBUG][e59ueb7b] [Middleware] Session ID from cookie
Context: {
  "requestId": "e59ueb7bmhvi9qnn",
  "present": false
}
[2025-11-12T04:34:08.819Z] [DEBUG][e59ueb7b] [Middleware] Outgoing response
Context: {
  "requestId": "e59ueb7bmhvi9qnn",
  "status": 405,
  "statusText": "Method Not Allowed",
  "headers": {
    "allow": "POST",
    "content-type": "application/json"
  }
}
[2025-11-12T04:34:08.819Z] [DEBUG][e59ueb7b] [Middleware] Processing path
Context: {
  "requestId": "e59ueb7bmhvi9qnn",
  "path": "/api/csp-report"
}
[2025-11-12T04:34:08.819Z] [INFO][e59ueb7b] GET /api/csp-report -> 405
Context: {
  "requestId": "e59ueb7bmhvi9qnn",
  "duration": 0,
  "status": 405
}
[wrangler:info] GET /api/csp-report 405 Method Not Allowed (2ms)
[dev] [2025-11-12T04:34:08.826Z] [INFO][n8r2p5an] POST /api/testing/evaluate/next
Context: {
  "requestId": "n8r2p5anmhvi9qnu",
  "endpoint": "/api/testing/evaluate/next",
  "method": "POST"
}
[2025-11-12T04:34:08.826Z] [DEBUG][n8r2p5an] [Middleware] Session ID from cookie
Context: {
  "requestId": "n8r2p5anmhvi9qnu",
  "present": false
}
[dev] [2025-11-12T04:34:08.828Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: 'security',
  userId: 'anonymous',
  ipAddress: '::1',
  securityEventType: 'API_ACCESS',
  details: { endpoint: '/api/testing/evaluate/next', method: 'POST' }
}
[dev] [31mâœ˜ [41;31m[[41;97mERROR[41;31m][0m [1m[2025-11-12T04:34:08.828Z] [ERROR] AUTH_FAILURE {[0m

    timestamp: {},
    resource: 'security',
    endpoint: '/api/testing/evaluate/next',
    clientAddress: '::1',
    securityEventType: 'AUTH_FAILURE',
    details: {
      reason: 'web_eval_executor_token_invalid',
      hasProvidedToken: false
    }
  }
[dev] [2025-11-12T04:34:08.828Z] [DEBUG][n8r2p5an] [Middleware] Outgoing response
Context: {
  "requestId": "n8r2p5anmhvi9qnu",
  "status": 401,
  "statusText": "Unauthorized",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:08.828Z] [DEBUG][n8r2p5an] [Middleware] Processing path
Context: {
  "requestId": "n8r2p5anmhvi9qnu",
  "path": "/api/testing/evaluate/next"
}
[2025-11-12T04:34:08.828Z] [INFO][n8r2p5an] POST /api/testing/evaluate/next -> 401 (2ms)
Context: {
  "requestId": "n8r2p5anmhvi9qnu",
  "duration": 2,
  "status": 401
}
[dev] [2025-11-12T04:34:08.847Z] [INFO][y0f408my] POST /api/csp-report
Context: {
  "requestId": "y0f408mymhvi9qof",
  "endpoint": "/api/csp-report",
  "method": "POST"
}
[dev] [2025-11-12T04:34:08.848Z] [DEBUG][y0f408my] [Middleware] Session ID from cookie
Context: {
  "requestId": "y0f408mymhvi9qof",
  "present": false
}
[2025-11-12T04:34:08.849Z] [INFO] CSP violation detected
Context: {
  "directive": "script-src",
  "blocked": "inline",
  "document": "http://localhost:8787/",
  "disposition": "enforce",
  "resource": "/api/csp-report",
  "action": "csp_violation_logged"
}
[2025-11-12T04:34:08.849Z] [DEBUG][y0f408my] [Middleware] Outgoing response
Context: {
  "requestId": "y0f408mymhvi9qof",
  "status": 204,
  "statusText": "No Content",
  "headers": "[empty object]"
}
[2025-11-12T04:34:08.849Z] [DEBUG][y0f408my] [Middleware] Processing path
Context: {
  "requestId": "y0f408mymhvi9qof",
  "path": "/api/csp-report"
}
[2025-11-12T04:34:08.849Z] [INFO][y0f408my] POST /api/csp-report -> 204 (2ms)
Context: {
  "requestId": "y0f408mymhvi9qof",
  "duration": 2,
  "status": 204
}
[2025-11-12T04:34:08.866Z] [INFO][d4jgxmgm] GET /api/auth/verify-email
Context: {
  "requestId": "d4jgxmgmmhvi9qoy",
  "endpoint": "/api/auth/verify-email",
  "method": "GET"
}
[dev] [2025-11-12T04:34:08.866Z] [DEBUG][d4jgxmgm] [Middleware] Session ID from cookie
Context: {
  "requestId": "d4jgxmgmmhvi9qoy",
  "present": false
}
[2025-11-12T04:34:08.867Z] [INFO] SECURITY_EVENT {
  timestamp: {},
  resource: 'security',
  ipAddress: '::1',
  userAgent: 'node',
  type: 'USER_EVENT',
  details: {
    reason: 'deprecated_endpoint_access',
    endpoint: '/api/auth/verify-email',
    method: 'GET'
  }
}
[2025-11-12T04:34:08.868Z] [DEBUG][d4jgxmgm] [Middleware] Outgoing response
Context: {
  "requestId": "d4jgxmgmmhvi9qoy",
  "status": 410,
  "statusText": "Gone",
  "headers": {
    "cache-control": "no-store",
    "content-type": "text/html; charset=utf-8",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY",
    "x-xss-protection": "1; mode=block"
  }
}
[2025-11-12T04:34:08.868Z] [DEBUG][d4jgxmgm] [Middleware] Processing path
Context: {
  "requestId": "d4jgxmgmmhvi9qoy",
  "path": "/api/auth/verify-email"
}
[2025-11-12T04:34:08.868Z] [INFO][d4jgxmgm] GET /api/auth/verify-email -> 410 (2ms)
Context: {
  "requestId": "d4jgxmgmmhvi9qoy",
  "duration": 2,
  "status": 410
}
[wrangler:info] GET /api/auth/verify-email 410 Gone (10ms)
[wrangler:info] POST /api/testing/evaluate/next 401 Unauthorized (5ms)
[wrangler:info] POST /api/csp-report 204 No Content (17ms)
[2025-11-12T04:34:08.879Z] [INFO][9icp0hdz] GET /api/auth/callback
Context: {
  "requestId": "9icp0hdzmhvi9qpb",
  "endpoint": "/api/auth/callback",
  "method": "GET"
}
[2025-11-12T04:34:08.880Z] [DEBUG][9icp0hdz] [Middleware] Session ID from cookie
Context: {
  "requestId": "9icp0hdzmhvi9qpb",
  "present": false
}
[auth][magic][callback] received { hasToken: false }
[2025-11-12T04:34:08.882Z] [DEBUG][9icp0hdz] [Middleware] Outgoing response
Context: {
  "requestId": "9icp0hdzmhvi9qpb",
  "status": 302,
  "statusText": "Found",
  "headers": {
    "location": "/en/login?magic_error=MissingToken",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY",
    "x-xss-protection": "1; mode=block"
  }
}
[2025-11-12T04:34:08.882Z] [DEBUG][9icp0hdz] [Middleware] Processing path
Context: {
  "requestId": "9icp0hdzmhvi9qpb",
  "path": "/api/auth/callback"
}
[2025-11-12T04:34:08.883Z] [INFO][9icp0hdz] GET /api/auth/callback -> 302 (4ms)
Context: {
  "requestId": "9icp0hdzmhvi9qpb",
  "duration": 4,
  "status": 302
}
[dev] [wrangler:info] GET /api/auth/callback 302 Found (8ms)
[dev] [2025-11-12T04:34:08.892Z] [INFO][9ok665kn] GET /api/auth/verify-email
Context: {
  "requestId": "9ok665knmhvi9qpo",
  "endpoint": "/api/auth/verify-email",
  "method": "GET"
}
[2025-11-12T04:34:08.892Z] [DEBUG][9ok665kn] [Middleware] Session ID from cookie
Context: {
  "requestId": "9ok665knmhvi9qpo",
  "present": false
}
[2025-11-12T04:34:08.892Z] [INFO] SECURITY_EVENT {
  timestamp: {},
  resource: 'security',
  ipAddress: '::1',
  userAgent: 'node',
  type: 'USER_EVENT',
  details: {
    reason: 'deprecated_endpoint_access',
    endpoint: '/api/auth/verify-email',
    method: 'GET'
  }
}
[2025-11-12T04:34:08.893Z] [DEBUG][9ok665kn] [Middleware] Outgoing response
Context: {
  "requestId": "9ok665knmhvi9qpo",
  "status": 410,
  "statusText": "Gone",
  "headers": {
    "cache-control": "no-store",
    "content-type": "text/html; charset=utf-8",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY",
    "x-xss-protection": "1; mode=block"
  }
}
[2025-11-12T04:34:08.893Z] [DEBUG][9ok665kn] [Middleware] Processing path
Context: {
  "requestId": "9ok665knmhvi9qpo",
  "path": "/api/auth/verify-email"
}
[2025-11-12T04:34:08.893Z] [INFO][9ok665kn] GET /api/auth/verify-email -> 410 (1ms)
Context: {
  "requestId": "9ok665knmhvi9qpo",
  "duration": 1,
  "status": 410
}
[wrangler:info] GET /api/auth/verify-email 410 Gone (5ms)
[dev] [2025-11-12T04:34:08.901Z] [INFO][05nagj9s] GET /api/auth/callback
Context: {
  "requestId": "05nagj9smhvi9qpx",
  "endpoint": "/api/auth/callback",
  "method": "GET"
}
[2025-11-12T04:34:08.901Z] [DEBUG][05nagj9s] [Middleware] Session ID from cookie
Context: {
  "requestId": "05nagj9smhvi9qpx",
  "present": false
}
[dev] [auth][magic][callback] received { hasToken: true }
[auth][magic][callback] provider accepted { ms: 0, hasEmail: true }
[auth][magic][callback] redirect to welcome (no locale known) { target: '/dashboard' }
[auth][magic][callback] response headers Set-Cookie {
  cookie: 'session_id=65f01299-2792-4112-ae91-853c71d4d0c4; Path=/; HttpOnly; SameSite=Lax; Max-Age=2592000'
}
[2025-11-12T04:34:08.906Z] [DEBUG][05nagj9s] [Middleware] Outgoing response
Context: {
  "requestId": "05nagj9smhvi9qpx",
  "status": 302,
  "statusText": "Found",
  "headers": {
    "location": "/welcome?next=%2Fdashboard",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "server-timing": "stytch_auth;dur=0, db_upsert;dur=2, session_cookie;dur=0, redirect_build;dur=1, total;dur=3",
    "set-cookie": "[redacted]",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY",
    "x-stytch-request-id": "fake-auth-id",
    "x-xss-protection": "1; mode=block"
  }
}
[2025-11-12T04:34:08.906Z] [DEBUG][05nagj9s] [Middleware] Processing path
Context: {
  "requestId": "05nagj9smhvi9qpx",
  "path": "/api/auth/callback"
}
[2025-11-12T04:34:08.906Z] [INFO][05nagj9s] GET /api/auth/callback -> 302 (5ms)
Context: {
  "requestId": "05nagj9smhvi9qpx",
  "duration": 5,
  "status": 302
}
[dev] [wrangler:info] GET /api/auth/callback 302 Found (11ms)
 âœ“ |integration| tests/integration/api/web-eval-next.test.ts > /api/testing/evaluate/next > rejects requests without executor token 157ms
 â†“ |integration| tests/integration/api/web-eval-next.test.ts > /api/testing/evaluate/next > returns null task when no pending entries exist
 â†“ |integration| tests/integration/api/web-eval-next.test.ts > /api/testing/evaluate/next > claims the oldest pending task and marks it processing
[dev] [2025-11-12T04:34:08.918Z] [INFO][qcr1eybo] POST /api/csp-report
Context: {
  "requestId": "qcr1eybomhvi9qqe",
  "endpoint": "/api/csp-report",
  "method": "POST"
}
[dev] [2025-11-12T04:34:08.918Z] [DEBUG][qcr1eybo] [Middleware] Session ID from cookie
Context: {
  "requestId": "qcr1eybomhvi9qqe",
  "present": false
}
[2025-11-12T04:34:08.918Z] [INFO] CSP violation detected
Context: {
  "directive": "style-src",
  "blocked": "https://evil.example.com",
  "document": "http://localhost:8787/",
  "disposition": "",
  "resource": "/api/csp-report",
  "action": "csp_violation_logged"
}
[2025-11-12T04:34:08.919Z] [DEBUG][qcr1eybo] [Middleware] Outgoing response
Context: {
  "requestId": "qcr1eybomhvi9qqe",
  "status": 204,
  "statusText": "No Content",
  "headers": "[empty object]"
}
[2025-11-12T04:34:08.919Z] [DEBUG][qcr1eybo] [Middleware] Processing path
Context: {
  "requestId": "qcr1eybomhvi9qqe",
  "path": "/api/csp-report"
}
[2025-11-12T04:34:08.919Z] [INFO][qcr1eybo] POST /api/csp-report -> 204 (1ms)
Context: {
  "requestId": "qcr1eybomhvi9qqe",
  "duration": 1,
  "status": 204
}
[wrangler:info] POST /api/csp-report 204 No Content (10ms)
[2025-11-12T04:34:08.921Z] [INFO][bctm65ox] GET /api/auth/magic/request
Context: {
  "requestId": "bctm65oxmhvi9qqh",
  "endpoint": "/api/auth/magic/request",
  "method": "GET"
}
[2025-11-12T04:34:08.921Z] [DEBUG][bctm65ox] [Middleware] Session ID from cookie
Context: {
  "requestId": "bctm65oxmhvi9qqh",
  "present": false
}
[2025-11-12T04:34:08.921Z] [DEBUG][bctm65ox] [Middleware] Outgoing response
Context: {
  "requestId": "bctm65oxmhvi9qqh",
  "status": 405,
  "statusText": "Method Not Allowed",
  "headers": {
    "content-type": "application/json"
  }
}
[2025-11-12T04:34:08.922Z] [DEBUG][bctm65ox] [Middleware] Processing path
Context: {
  "requestId": "bctm65oxmhvi9qqh",
  "path": "/api/auth/magic/request"
}
[2025-11-12T04:34:08.922Z] [INFO][bctm65ox] GET /api/auth/magic/request -> 405 (1ms)
Context: {
  "requestId": "bctm65oxmhvi9qqh",
  "duration": 1,
  "status": 405
}
[2025-11-12T04:34:08.922Z] [INFO][mdmaacbq] POST /api/auth/verify-email
Context: {
  "requestId": "mdmaacbqmhvi9qqi",
  "endpoint": "/api/auth/verify-email",
  "method": "POST"
}
[2025-11-12T04:34:08.922Z] [DEBUG][mdmaacbq] [Middleware] Session ID from cookie
Context: {
  "requestId": "mdmaacbqmhvi9qqi",
  "present": false
}
[dev] [wrangler:info] GET /api/auth/magic/request 405 Method Not Allowed (12ms)
 âœ“ |integration| tests/integration/csp-report.test.ts > CSP Report API > POST application/csp-report -> 204, no redirect, no Set-Cookie 73ms
 âœ“ |integration| tests/integration/csp-report.test.ts > CSP Report API > POST application/reports+json -> 204 15ms
[dev] [2025-11-12T04:34:08.924Z] [INFO] SECURITY_EVENT {
  timestamp: {},
  resource: 'security',
  ipAddress: '::1',
  userAgent: 'node',
  type: 'USER_EVENT',
  details: {
    reason: 'deprecated_endpoint_access',
    endpoint: '/api/auth/verify-email',
    method: 'POST',
    details: { Allow: 'GET' }
  }
}
[2025-11-12T04:34:08.924Z] [DEBUG][mdmaacbq] [Middleware] Outgoing response
Context: {
  "requestId": "mdmaacbqmhvi9qqi",
  "status": 410,
  "statusText": "Gone",
  "headers": {
    "cache-control": "no-store",
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY",
    "x-xss-protection": "1; mode=block"
  }
}
[2025-11-12T04:34:08.924Z] [DEBUG][mdmaacbq] [Middleware] Processing path
Context: {
  "requestId": "mdmaacbqmhvi9qqi",
  "path": "/api/auth/verify-email"
}
[2025-11-12T04:34:08.924Z] [INFO][mdmaacbq] POST /api/auth/verify-email -> 410 (2ms)
Context: {
  "requestId": "mdmaacbqmhvi9qqi",
  "duration": 2,
  "status": 410
}
[dev] [wrangler:info] POST /api/auth/verify-email 410 Gone (14ms)
[dev] [2025-11-12T04:34:08.928Z] [INFO][k8tqzv6p] GET /api/csp-report
Context: {
  "requestId": "k8tqzv6pmhvi9qqo",
  "endpoint": "/api/csp-report",
  "method": "GET"
}
[dev] [2025-11-12T04:34:08.928Z] [DEBUG][k8tqzv6p] [Middleware] Session ID from cookie
Context: {
  "requestId": "k8tqzv6pmhvi9qqo",
  "present": false
}
[2025-11-12T04:34:08.928Z] [DEBUG][k8tqzv6p] [Middleware] Outgoing response
Context: {
  "requestId": "k8tqzv6pmhvi9qqo",
  "status": 405,
  "statusText": "Method Not Allowed",
  "headers": {
    "allow": "POST",
    "content-type": "application/json"
  }
}
[2025-11-12T04:34:08.928Z] [DEBUG][k8tqzv6p] [Middleware] Processing path
Context: {
  "requestId": "k8tqzv6pmhvi9qqo",
  "path": "/api/csp-report"
}
[2025-11-12T04:34:08.928Z] [INFO][k8tqzv6p] GET /api/csp-report -> 405
Context: {
  "requestId": "k8tqzv6pmhvi9qqo",
  "duration": 0,
  "status": 405
}
[dev] [wrangler:info] GET /api/csp-report 405 Method Not Allowed (4ms)
[dev] [2025-11-12T04:34:08.937Z] [INFO][6wxahj2z] PUT /api/auth/verify-email
Context: {
  "requestId": "6wxahj2zmhvi9qqx",
  "endpoint": "/api/auth/verify-email",
  "method": "PUT"
}
[2025-11-12T04:34:08.937Z] [DEBUG][6wxahj2z] [Middleware] Session ID from cookie
Context: {
  "requestId": "6wxahj2zmhvi9qqx",
  "present": false
}
[dev] [2025-11-12T04:34:08.938Z] [INFO] SECURITY_EVENT {
  timestamp: {},
  resource: 'security',
  ipAddress: '::1',
  userAgent: 'node',
  type: 'USER_EVENT',
  details: {
    reason: 'deprecated_endpoint_access',
    endpoint: '/api/auth/verify-email',
    method: 'PUT',
    details: { Allow: 'GET' }
  }
}
[dev] [2025-11-12T04:34:08.939Z] [DEBUG][6wxahj2z] [Middleware] Outgoing response
Context: {
  "requestId": "6wxahj2zmhvi9qqx",
  "status": 410,
  "statusText": "Gone",
  "headers": {
    "cache-control": "no-store",
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY",
    "x-xss-protection": "1; mode=block"
  }
}
[2025-11-12T04:34:08.939Z] [DEBUG][6wxahj2z] [Middleware] Processing path
Context: {
  "requestId": "6wxahj2zmhvi9qqx",
  "path": "/api/auth/verify-email"
}
[2025-11-12T04:34:08.939Z] [INFO][6wxahj2z] PUT /api/auth/verify-email -> 410 (2ms)
Context: {
  "requestId": "6wxahj2zmhvi9qqx",
  "duration": 2,
  "status": 410
}
[2025-11-12T04:34:08.940Z] [INFO][y5thir79] POST /api/auth/magic/request
Context: {
  "requestId": "y5thir79mhvi9qr0",
  "endpoint": "/api/auth/magic/request",
  "method": "POST"
}
[2025-11-12T04:34:08.940Z] [DEBUG][y5thir79] [Middleware] Session ID from cookie
Context: {
  "requestId": "y5thir79mhvi9qr0",
  "present": false
}
[dev] [2025-11-12T04:34:08.940Z] [DEBUG][y5thir79] [Middleware] Outgoing response
Context: {
  "requestId": "y5thir79mhvi9qr0",
  "status": 403,
  "statusText": "Forbidden",
  "headers": {
    "content-type": "application/json",
    "permissions-policy": "camera=(), microphone=(), geolocation=(), interest-cohort=()",
    "referrer-policy": "strict-origin-when-cross-origin",
    "strict-transport-security": "max-age=31536000; includeSubDomains; preload",
    "x-content-type-options": "nosniff",
    "x-frame-options": "DENY"
  }
}
[2025-11-12T04:34:08.940Z] [DEBUG][y5thir79] [Middleware] Processing path
Context: {
  "requestId": "y5thir79mhvi9qr0",
  "path": "/api/auth/magic/request"
}
[2025-11-12T04:34:08.940Z] [INFO][y5thir79] POST /api/auth/magic/request -> 403
Context: {
  "requestId": "y5thir79mhvi9qr0",
  "duration": 0,
  "status": 403
}
[dev] [wrangler:info] PUT /api/auth/verify-email 410 Gone (11ms)
[wrangler:info] POST /api/auth/magic/request 403 Forbidden (4ms)
[2025-11-12T04:34:08.946Z] [INFO][jmkgv8qt] OPTIONS /api/csp-report
Context: {
  "requestId": "jmkgv8qtmhvi9qr6",
  "endpoint": "/api/csp-report",
  "method": "OPTIONS"
}
[2025-11-12T04:34:08.946Z] [DEBUG][jmkgv8qt] [Middleware] Session ID from cookie
Context: {
  "requestId": "jmkgv8qtmhvi9qr6",
  "present": false
}
[2025-11-12T04:34:08.946Z] [DEBUG][jmkgv8qt] [Middleware] Outgoing response
Context: {
  "requestId": "jmkgv8qtmhvi9qr6",
  "status": 405,
  "statusText": "Method Not Allowed",
  "headers": {
    "allow": "POST",
    "content-type": "application/json"
  }
}
[2025-11-12T04:34:08.947Z] [DEBUG][jmkgv8qt] [Middleware] Processing path
Context: {
  "requestId": "jmkgv8qtmhvi9qr6",
  "path": "/api/csp-report"
}
[2025-11-12T04:34:08.947Z] [INFO][jmkgv8qt] OPTIONS /api/csp-report -> 405 (1ms)
Context: {
  "requestId": "jmkgv8qtmhvi9qr6",
  "duration": 1,
  "status": 405
}
[wrangler:info] OPTIONS /api/csp-report 405 Method Not Allowed (3ms)
 âœ“ |integration| tests/integration/verify-email.test.ts > Verify Email API - deprecated 410 behavior > GET /api/auth/verify-email returns 410 HTML (deprecated endpoint) 28ms
 âœ“ |integration| tests/integration/verify-email.test.ts > Verify Email API - deprecated 410 behavior > POST /api/auth/verify-email returns 410 JSON with details.Allow = "GET" 24ms
 âœ“ |integration| tests/integration/verify-email.test.ts > Verify Email API - deprecated 410 behavior > PUT /api/auth/verify-email returns 410 JSON with details.Allow = "GET" 14ms
 âœ“ |integration| tests/integration/csp-report.test.ts > CSP Report API > GET -> 405 with Allow: POST 19ms
 âœ“ |integration| tests/integration/csp-report.test.ts > CSP Report API > OPTIONS -> 405 with Allow: POST 5ms
 âœ“ |integration| tests/integration/magic-link.test.ts > Magic Link MVP endpoints > GET /api/auth/callback without token redirects to login with error 159ms
 âœ“ |integration| tests/integration/magic-link.test.ts > Magic Link MVP endpoints > GET /api/auth/callback with invalid token redirects to login with error 15ms
 âœ“ |integration| tests/integration/magic-link.test.ts > Magic Link MVP endpoints > GET /api/auth/magic/request is method not allowed (405) 23ms
 âœ“ |integration| tests/integration/magic-link.test.ts > Magic Link MVP endpoints > POST /api/auth/magic/request with invalid email returns validation error 22ms
 âœ“ |integration| tests/integration/api/webscraper.test.ts > Webscraper API Integration Tests > should validate request structure 4ms
 âœ“ |integration| tests/integration/api/webscraper.test.ts > Webscraper API Integration Tests > should require URL field 4ms
 âœ“ |integration| tests/integration/api/webscraper.test.ts > Webscraper API Integration Tests > should accept valid HTTP URLs 1ms
 âœ“ |integration| tests/integration/api/webscraper.test.ts > Webscraper API Integration Tests > should reject invalid URL formats 0ms
 âœ“ |integration| tests/integration/api/webscraper.test.ts > Webscraper API Integration Tests > should handle response format 1ms
 âœ“ |integration| tests/integration/api/webscraper.test.ts > Webscraper API Integration Tests > should handle error response format 0ms
 âœ“ |integration| tests/integration/api/webscraper.test.ts > Webscraper API Integration Tests > should validate quota response 0ms
 âœ“ |integration| tests/integration/api/admin-users-set-plan-happy.test.ts > Admin Users Set Plan â€” happy paths (opt-in with STRIPE config) > POST set-plan upgrade to pro (monthly, proration none) â†’ 200 when Stripe configured 1ms
 âœ“ |integration| tests/integration/api/admin-users-set-plan-happy.test.ts > Admin Users Set Plan â€” happy paths (opt-in with STRIPE config) > POST set-plan downgrade to free (cancel at period end) â†’ 200 when Stripe configured 0ms
stdout | tests/integration/api/ai-video/generate.test.ts > ai-video generate (quota fallback) > charges credits when balance is sufficient
[2025-11-12T04:34:09.154Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: [32m'security'[39m,
  userId: [32m'user1'[39m,
  ipAddress: [32m'unknown'[39m,
  securityEventType: [32m'API_ACCESS'[39m,
  details: { endpoint: [32m'/api/ai-video/generate'[39m, method: [32m'POST'[39m }
}

stdout | tests/integration/api/ai-video/generate.test.ts > ai-video generate (quota fallback) > uses monthly quota when credits are 0 and quota remains
[2025-11-12T04:34:09.159Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: [32m'security'[39m,
  userId: [32m'user1'[39m,
  ipAddress: [32m'unknown'[39m,
  securityEventType: [32m'API_ACCESS'[39m,
  details: { endpoint: [32m'/api/ai-video/generate'[39m, method: [32m'POST'[39m }
}

stdout | tests/integration/api/ai-video/generate.test.ts > ai-video generate (quota fallback) > returns insufficient_quota when credits=0 and quota exhausted
[2025-11-12T04:34:09.162Z] [INFO] API_ACCESS {
  timestamp: {},
  resource: [32m'security'[39m,
  userId: [32m'user1'[39m,
  ipAddress: [32m'unknown'[39m,
  securityEventType: [32m'API_ACCESS'[39m,
  details: { endpoint: [32m'/api/ai-video/generate'[39m, method: [32m'POST'[39m }
}

 âœ“ |integration| tests/integration/api/ai-video/generate.test.ts > ai-video generate (quota fallback) > charges credits when balance is sufficient 18ms
 âœ“ |integration| tests/integration/api/ai-video/generate.test.ts > ai-video generate (quota fallback) > uses monthly quota when credits are 0 and quota remains 3ms
 âœ“ |integration| tests/integration/api/ai-video/generate.test.ts > ai-video generate (quota fallback) > returns insufficient_quota when credits=0 and quota exhausted 1ms
 â†“ |integration| tests/integration/magic-link-happy.test.ts > Magic Link Happy Path (dev bypass) > GET /api/auth/callback?token=dev-ok&email=...&r=/dashboard -> 302 to /dashboard and session works
 âœ“ |integration| tests/integration/kv-usage.test.ts > KV usage helpers (integration-ish with in-memory KV) > getUsage returns null when key missing; incrementMonthlyNoTtl sets count and resetAt 1ms
 âœ“ |integration| tests/integration/kv-usage.test.ts > KV usage helpers (integration-ish with in-memory KV) > incrementDailyRolling increments within a small window and enforces limit flag 0ms
 â†“ |integration| tests/integration/comments.test.ts > Comment API Integration Tests > POST /api/comments > should create a comment successfully for authenticated user
 â†“ |integration| tests/integration/comments.test.ts > Comment API Integration Tests > POST /api/comments > should create a comment for guest user
 â†“ |integration| tests/integration/comments.test.ts > Comment API Integration Tests > POST /api/comments > should reject comment with insufficient content length
 â†“ |integration| tests/integration/comments.test.ts > Comment API Integration Tests > POST /api/comments > should reject comment with excessive length
 â†“ |integration| tests/integration/comments.test.ts > Comment API Integration Tests > POST /api/comments > should reject comment with spam content
 â†“ |integration| tests/integration/comments.test.ts > Comment API Integration Tests > POST /api/comments > should enforce rate limiting
 â†“ |integration| tests/integration/comments.test.ts > Comment API Integration Tests > GET /api/comments > should list comments for an entity
 â†“ |integration| tests/integration/comments.test.ts > Comment API Integration Tests > GET /api/comments > should filter comments by status
 â†“ |integration| tests/integration/comments.test.ts > Comment API Integration Tests > GET /api/comments > should paginate results correctly
 â†“ |integration| tests/integration/comments.test.ts > Comment API Integration Tests > GET /api/comments > should return empty result for non-existent entity
 â†“ |integration| tests/integration/comments.test.ts > Comment API Integration Tests > GET /api/comments/[id] > should retrieve comment by ID
 â†“ |integration| tests/integration/comments.test.ts > Comment API Integration Tests > GET /api/comments/[id] > should throw error for non-existent comment
 â†“ |integration| tests/integration/comments.test.ts > Comment API Integration Tests > PUT /api/comments/[id] > should update comment successfully
 â†“ |integration| tests/integration/comments.test.ts > Comment API Integration Tests > PUT /api/comments/[id] > should reject update with invalid content
 â†“ |integration| tests/integration/comments.test.ts > Comment API Integration Tests > PUT /api/comments/[id] > should reject update by non-author
 â†“ |integration| tests/integration/comments.test.ts > Comment API Integration Tests > DELETE /api/comments/[id] > should delete comment successfully
 â†“ |integration| tests/integration/comments.test.ts > Comment API Integration Tests > DELETE /api/comments/[id] > should reject deletion by non-author
 â†“ |integration| tests/integration/comments.test.ts > Comment API Integration Tests > POST /api/comments/[id]/moderate > should approve comment successfully
 â†“ |integration| tests/integration/comments.test.ts > Comment API Integration Tests > POST /api/comments/[id]/moderate > should reject comment successfully
 â†“ |integration| tests/integration/comments.test.ts > Comment API Integration Tests > POST /api/comments/[id]/moderate > should flag comment successfully
 â†“ |integration| tests/integration/comments.test.ts > Comment API Integration Tests > POST /api/comments/[id]/report > should report comment successfully
 â†“ |integration| tests/integration/comments.test.ts > Comment API Integration Tests > POST /api/comments/[id]/report > should reject duplicate reports from same user
 â†“ |integration| tests/integration/comments.test.ts > Comment API Integration Tests > GET /api/comments/stats > should return comment statistics
 â†“ |integration| tests/integration/comments.test.ts > Comment API Integration Tests > Nested Comments (Replies) > should create reply to comment
 â†“ |integration| tests/integration/comments.test.ts > Comment API Integration Tests > Nested Comments (Replies) > should limit reply depth
 â†“ |integration| tests/integration/comments.test.ts > Comment API Integration Tests > Comment Validation and Security > should sanitize HTML content
 â†“ |integration| tests/integration/comments.test.ts > Comment API Integration Tests > Comment Validation and Security > should validate entity type
 â†“ |integration| tests/integration/comments.test.ts > Comment API Integration Tests > Comment Validation and Security > should validate entity ID format

 Test Files  11 failed | 41 passed | 2 skipped (54)
      Tests  26 failed | 220 passed | 40 skipped (286)
   Start at  05:33:37
   Duration  32.24s (transform 1.70s, setup 0ms, collect 5.67s, tests 38.48s, environment 10ms, prepare 6.66s)

[dev] ðŸªµ  Logs were written to "/Users/lucas/Library/Preferences/.wrangler/logs/wrangler-2025-11-12_04-33-59_088.log"
(node:62593) ExperimentalWarning: `--experimental-loader` may be removed in the future; instead use `register()`:
--import 'data:text/javascript,import { register } from "node:module"; import { pathToFileURL } from "node:url"; register("ts-node/esm", pathToFileURL("./"));'
(Use `node --trace-warnings ...` to show where the warning was created)
Error: in prepare, no such table: notifications
âš ï¸ Could not add column notifications.is_read on /Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/.wrangler/state/v3/d1/miniflare-D1DatabaseObject/9510d25c6d8e2674e15c2fca537338f4d182e73228e0d7f57d38d82ad01d2ce5.sqlite (may already exist). Error: Command failed: sqlite3 /Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/.wrangler/state/v3/d1/miniflare-D1DatabaseObject/9510d25c6d8e2674e15c2fca537338f4d182e73228e0d7f57d38d82ad01d2ce5.sqlite "ALTER TABLE notifications ADD COLUMN is_read INTEGER DEFAULT 0;"
    at genericNodeError (node:internal/errors:984:15)
    at wrappedFn (node:internal/errors:538:14)
    at checkExecSyncError (node:child_process:891:11)
    at execSync (node:child_process:963:15)
    at addColumnIfMissing (file:///Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/scripts/setup-local-dev.ts:68:13)
    at file:///Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/scripts/setup-local-dev.ts:636:17
    at ModuleJob.run (node:internal/modules/esm/module_job:263:25)
    at async ModuleLoader.import (node:internal/modules/esm/loader:540:24)
    at async asyncRunEntryPointWithESMLoader (node:internal/modules/run_main:117:5) {
  status: 1,
  signal: null,
  output: [ null, null, null ],
  pid: 62770,
  stdout: null,
  stderr: null
}
(node:62863) Warning: Setting the NODE_TLS_REJECT_UNAUTHORIZED environment variable to '0' makes TLS connections and HTTPS requests insecure by disabling certificate verification.
(Use `node --trace-warnings ...` to show where the warning was created)
stderr | tests/integration/api/ai-video/usage.test.ts > GET /api/ai-video/usage > returns guest limits when no KV entry exists
[2025-11-12T04:34:02.750Z] [ERROR] Error in GET /api/ai-video/usage: Cannot read properties of undefined (reading 'resetAt') { timestamp: {}, resource: [32m'api-middleware'[39m }
[2025-11-12T04:34:02.755Z] [ERROR] API_ERROR {
  timestamp: {},
  resource: [32m'security'[39m,
  userId: [32m'anonymous'[39m,
  ipAddress: [32m'unknown'[39m,
  securityEventType: [32m'API_ERROR'[39m,
  details: {
    endpoint: [32m'/api/ai-video/usage'[39m,
    method: [32m'GET'[39m,
    error: [32m"Cannot read properties of undefined (reading 'resetAt')"[39m,
    stack: [32m"TypeError: Cannot read properties of undefined (reading 'resetAt')\n"[39m +
      [32m'    at rateLimitMiddleware (/Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/src/lib/rate-limiter.ts:239:15)\n'[39m +
      [32m'    at /Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/src/lib/api-middleware.ts:379:46\n'[39m +
      [32m'    at /Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/tests/integration/api/ai-video/usage.test.ts:64:28\n'[39m +
      [32m'    at file:///Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/node_modules/@vitest/runner/dist/chunk-hooks.js:155:11\n'[39m +
      [32m'    at file:///Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/node_modules/@vitest/runner/dist/chunk-hooks.js:752:26\n'[39m +
      [32m'    at file:///Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/node_modules/@vitest/runner/dist/chunk-hooks.js:1897:20\n'[39m +
      [32m'    at new Promise (<anonymous>)\n'[39m +
      [32m'    at runWithTimeout (file:///Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/node_modules/@vitest/runner/dist/châ€¦'[39m
  }
}

stderr | tests/integration/api/ai-video/usage.test.ts > GET /api/ai-video/usage > honours existing KV usage for users
[2025-11-12T04:34:02.760Z] [ERROR] Error in GET /api/ai-video/usage: Cannot read properties of undefined (reading 'resetAt') { timestamp: {}, resource: [32m'api-middleware'[39m }
[2025-11-12T04:34:02.760Z] [ERROR] API_ERROR {
  timestamp: {},
  resource: [32m'security'[39m,
  userId: [32m'user-123'[39m,
  ipAddress: [32m'unknown'[39m,
  securityEventType: [32m'API_ERROR'[39m,
  details: {
    endpoint: [32m'/api/ai-video/usage'[39m,
    method: [32m'GET'[39m,
    error: [32m"Cannot read properties of undefined (reading 'resetAt')"[39m,
    stack: [32m"TypeError: Cannot read properties of undefined (reading 'resetAt')\n"[39m +
      [32m'    at rateLimitMiddleware (/Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/src/lib/rate-limiter.ts:239:15)\n'[39m +
      [32m'    at /Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/src/lib/api-middleware.ts:379:46\n'[39m +
      [32m'    at /Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/tests/integration/api/ai-video/usage.test.ts:104:28\n'[39m +
      [32m'    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n'[39m +
      [32m'    at file:///Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20'[39m
  }
}

stderr | tests/integration/api/referrals/referral-rewards-webhook.test.ts > POST /api/billing/stripe-webhook referral rewards integration > calls verifyReferral on checkout.session.completed when rewards enabled
[2025-11-12T04:34:02.750Z] [ERROR] Error in POST /api/billing/stripe-webhook: Cannot read properties of undefined (reading 'resetAt') { timestamp: {}, resource: [32m'api-middleware'[39m }
[2025-11-12T04:34:02.756Z] [ERROR] API_ERROR {
  timestamp: {},
  resource: [32m'security'[39m,
  userId: [32m'anonymous'[39m,
  ipAddress: [32m'unknown'[39m,
  securityEventType: [32m'API_ERROR'[39m,
  details: {
    endpoint: [32m'/api/billing/stripe-webhook'[39m,
    method: [32m'POST'[39m,
    error: [32m"Cannot read properties of undefined (reading 'resetAt')"[39m,
    stack: [32m"TypeError: Cannot read properties of undefined (reading 'resetAt')\n"[39m +
      [32m'    at rateLimitMiddleware (/Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/src/lib/rate-limiter.ts:239:15)\n'[39m +
      [32m'    at Module.<anonymous> (/Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/src/lib/api-middleware.ts:379:46)\n'[39m +
      [32m'    at /Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/tests/integration/api/referrals/referral-rewards-webhook.test.ts:120:28\n'[39m +
      [32m'    at file:///Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/node_modules/@vitest/runner/dist/chunk-hooks.js:155:11\n'[39m +
      [32m'    at file:///Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/node_modules/@vitest/runner/dist/chunk-hooks.js:752:26\n'[39m +
      [32m'    at file:///Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/node_modules/@vitest/runner/dist/chunk-hooks.js:1897:20\n'[39m +
      [32m'    at new Promise (<anonymous>)\n'[39m +
      [32m'    at runWithTimeout (file:///Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolutiâ€¦'[39m
  }
}

stderr | tests/integration/api/referrals/referral-rewards-webhook.test.ts > POST /api/billing/stripe-webhook referral rewards integration > skips verifyReferral when rewards feature flag disabled
[2025-11-12T04:34:02.760Z] [ERROR] Error in POST /api/billing/stripe-webhook: Cannot read properties of undefined (reading 'resetAt') { timestamp: {}, resource: [32m'api-middleware'[39m }
[2025-11-12T04:34:02.760Z] [ERROR] API_ERROR {
  timestamp: {},
  resource: [32m'security'[39m,
  userId: [32m'anonymous'[39m,
  ipAddress: [32m'unknown'[39m,
  securityEventType: [32m'API_ERROR'[39m,
  details: {
    endpoint: [32m'/api/billing/stripe-webhook'[39m,
    method: [32m'POST'[39m,
    error: [32m"Cannot read properties of undefined (reading 'resetAt')"[39m,
    stack: [32m"TypeError: Cannot read properties of undefined (reading 'resetAt')\n"[39m +
      [32m'    at rateLimitMiddleware (/Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/src/lib/rate-limiter.ts:239:15)\n'[39m +
      [32m'    at Module.<anonymous> (/Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/src/lib/api-middleware.ts:379:46)\n'[39m +
      [32m'    at /Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/tests/integration/api/referrals/referral-rewards-webhook.test.ts:160:28\n'[39m +
      [32m'    at file:///Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/node_modules/@vitest/runner/dist/chunk-hooks.js:155:11\n'[39m +
      [32m'    at file:///Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/node_modules/@vitest/runner/dist/chunk-hooks.js:752:26\n'[39m +
      [32m'    at file:///Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/node_modules/@vitest/runner/dist/chunk-hooks.js:1897:20\n'[39m +
      [32m'    at new Promise (<anonymous>)\n'[39m +
      [32m'    at runWithTimeout (file:///Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolutiâ€¦'[39m
  }
}

stderr | tests/integration/api/referrals/referral-rewards-webhook.test.ts > POST /api/billing/stripe-webhook referral rewards integration > triggers verifyReferral on active subscription update
[2025-11-12T04:34:02.761Z] [ERROR] Error in POST /api/billing/stripe-webhook: Cannot read properties of undefined (reading 'resetAt') { timestamp: {}, resource: [32m'api-middleware'[39m }
[2025-11-12T04:34:02.762Z] [ERROR] API_ERROR {
  timestamp: {},
  resource: [32m'security'[39m,
  userId: [32m'anonymous'[39m,
  ipAddress: [32m'unknown'[39m,
  securityEventType: [32m'API_ERROR'[39m,
  details: {
    endpoint: [32m'/api/billing/stripe-webhook'[39m,
    method: [32m'POST'[39m,
    error: [32m"Cannot read properties of undefined (reading 'resetAt')"[39m,
    stack: [32m"TypeError: Cannot read properties of undefined (reading 'resetAt')\n"[39m +
      [32m'    at rateLimitMiddleware (/Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/src/lib/rate-limiter.ts:239:15)\n'[39m +
      [32m'    at Module.<anonymous> (/Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/src/lib/api-middleware.ts:379:46)\n'[39m +
      [32m'    at /Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/tests/integration/api/referrals/referral-rewards-webhook.test.ts:199:28\n'[39m +
      [32m'    at file:///Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/node_modules/@vitest/runner/dist/chunk-hooks.js:155:11\n'[39m +
      [32m'    at file:///Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/node_modules/@vitest/runner/dist/chunk-hooks.js:752:26\n'[39m +
      [32m'    at file:///Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolution-hub/node_modules/@vitest/runner/dist/chunk-hooks.js:1897:20\n'[39m +
      [32m'    at new Promise (<anonymous>)\n'[39m +
      [32m'    at runWithTimeout (file:///Users/lucas/Downloads/EvolutionHub_Bundle_v1.7_full/evolutiâ€¦'[39m
  }
}


âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯ Failed Tests 26 âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯

 FAIL  |integration| tests/integration/ai-image-enhancer.test.ts > AI Image Enhancer API + R2 Proxy (Integration) > POST /api/ai-image/jobs (multipart) -> 202 and success envelope; sets guest_id cookie
AssertionError: expected 500 to be 202 // Object.is equality

[32m- Expected[39m
[31m+ Received[39m

[32m- 202[39m
[31m+ 500[39m

 â¯ tests/integration/ai-image-enhancer.test.ts:136:24
    134|     });
    135| 
    136|     expect(res.status).toBe(202);
       |                        ^
    137|     expect(res.headers.get('content-type') || '').toContain('applicatiâ€¦
    138| 

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1/26]âŽ¯

 FAIL  |integration| tests/integration/ai-image-enhancer.test.ts > AI Image Enhancer API + R2 Proxy (Integration) > POST /api/ai-image/jobs/{id}/cancel as owner -> 200 success envelope with status=canceled
AssertionError: expected 404 to be 200 // Object.is equality

[32m- Expected[39m
[31m+ Received[39m

[32m- 200[39m
[31m+ 404[39m

 â¯ tests/integration/ai-image-enhancer.test.ts:241:24
    239|       },
    240|     });
    241|     expect(res.status).toBe(200);
       |                        ^
    242|     const body = await json<ApiEnvelope<AiJobData>>(res);
    243|     expect(body.success).toBe(true);

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[2/26]âŽ¯

 FAIL  |integration| tests/integration/ai-image-enhancer.test.ts > AI Image Enhancer API + R2 Proxy (Integration) > GET /api/ai-image/jobs/{id} as owner -> 200 success envelope
AssertionError: expected 405 to be 200 // Object.is equality

[32m- Expected[39m
[31m+ Received[39m

[32m- 200[39m
[31m+ 405[39m

 â¯ tests/integration/ai-image-enhancer.test.ts:256:24
    254|       },
    255|     });
    256|     expect(res.status).toBe(200);
       |                        ^
    257|     const body = await json<ApiEnvelope<AiJobData>>(res);
    258|     expect(body.success).toBe(true);

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[3/26]âŽ¯

 FAIL  |integration| tests/integration/ai-image-enhancer.test.ts > AI Image Enhancer API + R2 Proxy (Integration) > GET /api/ai-image/jobs/{id} without cookie -> 403 forbidden and sets guest_id
AssertionError: expected 405 to be 403 // Object.is equality

[32m- Expected[39m
[31m+ Received[39m

[32m- 403[39m
[31m+ 405[39m

 â¯ tests/integration/ai-image-enhancer.test.ts:268:24
    266|   it('GET /api/ai-image/jobs/{id} without cookie -> 403 forbidden and â€¦
    267|     const res = await fetchManual(`/api/ai-image/jobs/${jobId}`);
    268|     expect(res.status).toBe(403);
       |                        ^
    269|     const setCookie = res.headers.get('set-cookie');
    270|     const gid = extractCookieValue(setCookie, 'guest_id');

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[4/26]âŽ¯

 FAIL  |integration| tests/integration/ai-image-enhancer.test.ts > AI Image Enhancer API + R2 Proxy (Integration) > GET /api/ai-image/jobs/{id} with different guest_id -> 403 forbidden envelope
AssertionError: expected 405 to be 403 // Object.is equality

[32m- Expected[39m
[31m+ Received[39m

[32m- 403[39m
[31m+ 405[39m

 â¯ tests/integration/ai-image-enhancer.test.ts:280:24
    278|       },
    279|     });
    280|     expect(res.status).toBe(403);
       |                        ^
    281|     const body = await json<ApiEnvelope<unknown>>(res);
    282|     expect(body.success).toBe(false);

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[5/26]âŽ¯

 FAIL  |integration| tests/integration/ai-image-enhancer.test.ts > AI Image Enhancer API + R2 Proxy (Integration) > POST /api/ai-image/jobs/{id}/cancel with different guest_id -> 403 forbidden envelope
AssertionError: expected 404 to be 403 // Object.is equality

[32m- Expected[39m
[31m+ Received[39m

[32m- 403[39m
[31m+ 404[39m

 â¯ tests/integration/ai-image-enhancer.test.ts:298:24
    296|       },
    297|     });
    298|     expect(res.status).toBe(403);
       |                        ^
    299|     const body = await json<ApiEnvelope<unknown>>(res);
    300|     expect(body.success).toBe(false);

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[6/26]âŽ¯

 FAIL  |integration| tests/integration/ai-image-enhancer.test.ts > AI Image Enhancer API + R2 Proxy (Integration) > R2 proxy: GET uploads URL is public and cached (Cache-Control: public, max-age=900, immutable)
AssertionError: expected null to be truthy

[32m- Expected:[39m 
true

[31m+ Received:[39m 
null

 â¯ tests/integration/ai-image-enhancer.test.ts:307:23
    305| 
    306|   it('R2 proxy: GET uploads URL is public and cached (Cache-Control: pâ€¦
    307|     expect(uploadUrl).toBeTruthy();
       |                       ^
    308|     if (!uploadUrl) throw new Error('Missing uploadUrl');
    309| 

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[7/26]âŽ¯

 FAIL  |integration| tests/integration/ai-image-enhancer.test.ts > AI Image Enhancer API + R2 Proxy (Integration) > Rate limiting: excessive GET /api/ai-image/jobs/{id} eventually returns 429 with Retry-After
AssertionError: expected false to be true // Object.is equality

[32m- Expected[39m
[31m+ Received[39m

[32m- true[39m
[31m+ false[39m

 â¯ tests/integration/ai-image-enhancer.test.ts:385:20
    383|       }
    384|     }
    385|     expect(saw429).toBe(true);
       |                    ^
    386|   });
    387| 

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[8/26]âŽ¯

 FAIL  |integration| tests/integration/ai-image-enhancer.test.ts > AI Image Enhancer API + R2 Proxy (Integration) > POST /api/ai-image/generate (multipart) -> 200 success envelope with limits
AssertionError: expected [ 200, 403 ] to include 429
 â¯ tests/integration/ai-image-enhancer.test.ts:414:24
    412|       },
    413|     });
    414|     expect([200, 403]).toContain(res.status);
       |                        ^
    415|     if (res.status !== 200) return;
    416|     const body = await json<ApiEnvelope<unknown>>(res);

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[9/26]âŽ¯

 FAIL  |integration| tests/integration/comments-api.test.ts > Comments API (edge) > POST /api/comments/create should reject without CSRF (403)
AssertionError: expected 'forbidden' to be 'csrf_error' // Object.is equality

Expected: [32m"csrf_error"[39m
Received: [31m"forbidden"[39m

 â¯ tests/integration/comments-api.test.ts:39:29
     37|     expect(res.status).toBe(403);
     38|     expect(json.success).toBe(false);
     39|     expect(json.error.type).toBe('csrf_error');
       |                             ^
     40|   });
     41| 

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[10/26]âŽ¯

 FAIL  |integration| tests/integration/dashboard-api.test.ts > Dashboard-API-Integration > POST /api/dashboard/perform-action > sollte 401 fÃ¼r nicht authentifizierte Anfragen zurÃ¼ckgeben
AssertionError: expected 'auth_error' to be 'UNAUTHORIZED' // Object.is equality

Expected: [32m"UNAUTHORIZED"[39m
Received: [31m"auth_error"[39m

 â¯ tests/integration/dashboard-api.test.ts:368:34
    366|       if (json) {
    367|         expect(json.success).toBe(false);
    368|         expect(json.error?.type).toBe('UNAUTHORIZED');
       |                                  ^
    369|       }
    370|     });

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[11/26]âŽ¯

 FAIL  |integration| tests/integration/lead-magnet-api.test.ts > Lead-Magnet-API-Integration > POST /api/lead-magnets/download > sollte Rate-Limiting korrekt handhaben
AssertionError: expected undefined to be false // Object.is equality

[32m- Expected:[39m 
false

[31m+ Received:[39m 
undefined

 â¯ tests/integration/lead-magnet-api.test.ts:201:32
    199|         const json = safeParseJson<ApiJson>(responses[0].text);
    200|         if (json) {
    201|           expect(json.success).toBe(false);
       |                                ^
    202|         }
    203|       }

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[12/26]âŽ¯

 FAIL  |integration| tests/integration/lead-magnet-api.test.ts > Lead-Magnet-API-Integration > POST /api/lead-magnets/download > sollte verschiedene Lead-Magnet-IDs unterstÃ¼tzen
AssertionError: expected [ 200, 429 ] to include 500
 â¯ tests/integration/lead-magnet-api.test.ts:370:28
    368|         const response = await submitForm('/api/lead-magnets/download'â€¦
    369| 
    370|         expect([200, 429]).toContain(response.status);
       |                            ^
    371|         if (response.status === 200 && (response.contentType || '').inâ€¦
    372|           const json = safeParseJson<ApiJson>(response.text);

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[13/26]âŽ¯

 FAIL  |integration| tests/integration/newsletter-api.test.ts > Newsletter-API-Integration > POST /api/newsletter/subscribe > sollte Rate-Limiting korrekt handhaben
AssertionError: expected 0 to be greater than 0
 â¯ tests/integration/newsletter-api.test.ts:197:43
    195|       // Mindestens eine sollte Rate-Limited sein (429)
    196|       const rateLimitedResponses = responses.filter((r) => r.status ==â€¦
    197|       expect(rateLimitedResponses.length).toBeGreaterThan(0);
       |                                           ^
    198| 
    199|       // Rate-Limit Response sollte Retry-After Header haben

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[14/26]âŽ¯

 FAIL  |integration| tests/integration/api/admin-users-lifecycle.test.ts > Admin Users Lifecycle â€” CSRF and auth enforcement > debug-login non-admin with CSRF token â†’ 403 forbidden
 FAIL  |integration| tests/integration/api/admin-users-lifecycle.test.ts > Admin Users Lifecycle â€” CSRF and auth enforcement > debug-login non-admin with CSRF token â†’ 403 forbidden
 FAIL  |integration| tests/integration/api/admin-users-lifecycle.test.ts > Admin Users Lifecycle â€” CSRF and auth enforcement > debug-login non-admin with CSRF token â†’ 403 forbidden
AssertionError: expected 429 to be 403 // Object.is equality

[32m- Expected[39m
[31m+ Received[39m

[32m- 403[39m
[31m+ 429[39m

 â¯ tests/integration/api/admin-users-lifecycle.test.ts:74:22
     72|         body: method === 'DELETE' ? undefined : JSON.stringify({ reasoâ€¦
     73|       });
     74|       expect(status).toBe(403);
       |                      ^
     75|     });
     76|   }

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[15/26]âŽ¯

 FAIL  |integration| tests/integration/api/comments-performance.test.ts > /api/comments/performance (integration) > returns paginated data for seeded post
Error: Failed to create comment: 400 Bad Request â€” {"success":false,"error":{"type":"validation_error","message":"Invalid request body","details":{"details":{"fieldErrors":{"_form":["Unrecognized key(s) in object: 'csrfToken'"]},"issues":[{"path":[],"code":"unrecognized_keys","message":"Unrecognized key(s) in object: 'csrfToken'"}]}}}}
 â¯ createComment tests/integration/api/__fixtures__/comments-performance.ts:81:11
     79|   if (!response.ok) {
     80|     const body = await response.text().catch(() => '');
     81|     throw new Error(
       |           ^
     82|       `Failed to create comment: ${response.status} ${response.statusTâ€¦
     83|     );
 â¯ seedCommentsPerformance tests/integration/api/__fixtures__/comments-performance.ts:114:23
 â¯ tests/integration/api/comments-performance.test.ts:39:24

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[16/26]âŽ¯

 FAIL  |integration| tests/integration/api/comments-performance.test.ts > /api/comments/performance (integration) > returns search results when authenticated
Error: Failed to create comment: 400 Bad Request â€” {"success":false,"error":{"type":"validation_error","message":"Invalid request body","details":{"details":{"fieldErrors":{"_form":["Unrecognized key(s) in object: 'csrfToken'"]},"issues":[{"path":[],"code":"unrecognized_keys","message":"Unrecognized key(s) in object: 'csrfToken'"}]}}}}
 â¯ createComment tests/integration/api/__fixtures__/comments-performance.ts:81:11
     79|   if (!response.ok) {
     80|     const body = await response.text().catch(() => '');
     81|     throw new Error(
       |           ^
     82|       `Failed to create comment: ${response.status} ${response.statusTâ€¦
     83|     );
 â¯ seedCommentsPerformance tests/integration/api/__fixtures__/comments-performance.ts:114:23
 â¯ tests/integration/api/comments-performance.test.ts:56:5

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[17/26]âŽ¯

 FAIL  |integration| tests/integration/api/web-eval-run.test.ts > /api/testing/evaluate/next/run > returns null task when no pending entries exist
AssertionError: expected 429 to be 200 // Object.is equality

[32m- Expected[39m
[31m+ Received[39m

[32m- 200[39m
[31m+ 429[39m

 â¯ tests/integration/api/web-eval-run.test.ts:127:24
    125|   it('returns null task when no pending entries exist', async () => {
    126|     const { res, json } = await callRun();
    127|     expect(res.status).toBe(200);
       |                        ^
    128|     if (!json || json.success !== true) {
    129|       throw new Error('Expected success response with null task');

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[18/26]âŽ¯

 FAIL  |integration| tests/integration/routing/blog-i18n-seo-integration.test.ts > Blog i18n & SEO (integration) > EN: category uses /en/blog/category/, share links have prod origin, single H1, related heading present
AssertionError: expected 0 to be greater than 0
 â¯ tests/integration/routing/blog-i18n-seo-integration.test.ts:42:28
     40|     // Category link path
     41|     const catLink = $('a[href*="/en/blog/category/"]');
     42|     expect(catLink.length).toBeGreaterThan(0);
       |                            ^
     43| 
     44|     // Share links host (env-agnostic)

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[19/26]âŽ¯

 FAIL  |integration| tests/integration/api/referrals/referral-rewards-webhook.test.ts > POST /api/billing/stripe-webhook referral rewards integration > calls verifyReferral on checkout.session.completed when rewards enabled
AssertionError: expected 500 to be 200 // Object.is equality

[32m- Expected[39m
[31m+ Received[39m

[32m- 200[39m
[31m+ 500[39m

 â¯ tests/integration/api/referrals/referral-rewards-webhook.test.ts:122:29
    120|     const response = await POST(context);
    121| 
    122|     expect(response.status).toBe(200);
       |                             ^
    123|     expect(verifyReferralMock).toHaveBeenCalledTimes(1);
    124|     expect(verifyReferralMock).toHaveBeenCalledWith(

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[20/26]âŽ¯

 FAIL  |integration| tests/integration/api/referrals/referral-rewards-webhook.test.ts > POST /api/billing/stripe-webhook referral rewards integration > skips verifyReferral when rewards feature flag disabled
AssertionError: expected 500 to be 200 // Object.is equality

[32m- Expected[39m
[31m+ Received[39m

[32m- 200[39m
[31m+ 500[39m

 â¯ tests/integration/api/referrals/referral-rewards-webhook.test.ts:162:29
    160|     const response = await POST(context);
    161| 
    162|     expect(response.status).toBe(200);
       |                             ^
    163|     expect(verifyReferralMock).not.toHaveBeenCalled();
    164|   });

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[21/26]âŽ¯

 FAIL  |integration| tests/integration/api/referrals/referral-rewards-webhook.test.ts > POST /api/billing/stripe-webhook referral rewards integration > triggers verifyReferral on active subscription update
AssertionError: expected 500 to be 200 // Object.is equality

[32m- Expected[39m
[31m+ Received[39m

[32m- 200[39m
[31m+ 500[39m

 â¯ tests/integration/api/referrals/referral-rewards-webhook.test.ts:201:29
    199|     const response = await POST(context);
    200| 
    201|     expect(response.status).toBe(200);
       |                             ^
    202|     expect(verifyReferralMock).toHaveBeenCalledTimes(1);
    203|     expect(verifyReferralMock).toHaveBeenCalledWith(

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[22/26]âŽ¯

 FAIL  |integration| tests/integration/api/ai-video/usage.test.ts > GET /api/ai-video/usage > returns guest limits when no KV entry exists
AssertionError: expected 500 to be 200 // Object.is equality

[32m- Expected[39m
[31m+ Received[39m

[32m- 200[39m
[31m+ 500[39m

 â¯ tests/integration/api/ai-video/usage.test.ts:65:29
     63| 
     64|     const response = await GET(context);
     65|     expect(response.status).toBe(200);
       |                             ^
     66|     const payload = (await response.json()) as {
     67|       success: boolean;

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[23/26]âŽ¯

 FAIL  |integration| tests/integration/api/ai-video/usage.test.ts > GET /api/ai-video/usage > honours existing KV usage for users
AssertionError: expected 500 to be 200 // Object.is equality

[32m- Expected[39m
[31m+ Received[39m

[32m- 200[39m
[31m+ 500[39m

 â¯ tests/integration/api/ai-video/usage.test.ts:105:29
    103| 
    104|     const response = await GET(context);
    105|     expect(response.status).toBe(200);
       |                             ^
    106|     const payload = (await response.json()) as {
    107|       success: boolean;

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[24/26]âŽ¯

