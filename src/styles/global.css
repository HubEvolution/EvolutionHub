/*! @import */
@import 'tailwindcss/base' layer(base);
@import 'tailwindcss/components' layer(components);
@import 'tailwindcss/utilities' layer(utilities);

/* Custom base styles */
@layer base {
  body {
    
    @apply antialiased text-gray-900 dark:text-gray-100 bg-white dark:bg-gray-900;
    font-family: 'Inter', system-ui, -apple-system, sans-serif;
  }
  
  h1, h2, h3, h4, h5, h6 {
    @apply font-bold tracking-tight;
  }
  
  h1 { @apply text-4xl md:text-5xl lg:text-6xl; }
  h2 { @apply text-3xl md:text-4xl; }
  h3 { @apply text-2xl md:text-3xl; }
  h4 { @apply text-xl md:text-2xl; }
  
  a:not(.btn):not(.btn-primary):not(.btn-secondary):not(.btn-outline) {
    @apply text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300 transition-colors;
  }
  
  /* Custom scrollbar */
  ::-webkit-scrollbar {
    @apply w-2 h-2;
  }
  
  ::-webkit-scrollbar-track {
    @apply bg-gray-100 dark:bg-gray-800;
  }
  
  ::-webkit-scrollbar-thumb {
    @apply bg-gray-300 dark:bg-gray-600 rounded-full hover:bg-gray-400 dark:hover:bg-gray-500;
  }
}

/* Custom components */
@layer components {
  .btn {
    @apply inline-flex items-center justify-center px-6 py-2.5 rounded-lg font-medium no-underline transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed;
  }
  
  .btn-primary {
    @apply bg-primary-600 text-white hover:bg-primary-700 focus:ring-primary-500/50;
  }
  
  .btn-secondary {
    @apply bg-secondary-600 text-white hover:bg-secondary-700 focus:ring-secondary-500/50;
  }
  
  .btn-outline {
    @apply border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-800 focus:ring-gray-500/50;
  }
  
  .container {
    @apply px-4 mx-auto w-full max-w-7xl;
  }
  
  /* Glassmorphism effect */
  .glass {
    @apply bg-white/80 dark:bg-gray-800/80 backdrop-blur-lg border border-gray-600 dark:border-gray-700 rounded-xl shadow-lg;
  }
  
  /* Card component */
  .card {
    @apply bg-white dark:bg-gray-800 rounded-xl shadow-md overflow-hidden border border-gray-200 dark:border-gray-700;
  }
}

/* Animations */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

.animate-fade-in {
  animation: fadeIn 0.3s ease-out forwards;
}

/* AOS safety fallback */
html:not(.aos-enabled) [data-aos] {
  opacity: 1;
  visibility: visible;
  transform: none !important;
}

/* When AOS is enabled */
html.aos-enabled [data-aos].aos-init:not(.aos-animate) {
  opacity: 0;
  visibility: hidden;
}

/* Typewriter animation */
@keyframes typewriter {
  from { width: 0; }
  to { width: 100%; }
}

@keyframes blink {
  from { border-color: transparent; }
  to { border-color: currentColor; }
}

.typewriter {
  display: inline-block;
  overflow: hidden;
  border-right: 2px solid transparent;
  white-space: nowrap;
  animation: 
    typewriter 2s steps(40, end) 1s infinite alternate,
    blink 0.75s step-end infinite;
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  .typewriter {
    animation: none;
    border-right: none;
    overflow: visible;
    white-space: normal;
  }
}

/* Hero blob animations */
@keyframes blobMove {
  0%, 100% { transform: translate3d(0,0,0) scale(1); }
  33% { transform: translate3d(24px,-16px,0) scale(1.05); }
  66% { transform: translate3d(-20px,12px,0) scale(0.98); }
}

.animate-blob-1 { animation: blobMove 18s ease-in-out infinite; will-change: transform; }
.animate-blob-2 { animation: blobMove 22s ease-in-out infinite reverse; will-change: transform; }
.animate-blob-3 { animation: blobMove 26s ease-in-out infinite; will-change: transform; }

@media (prefers-reduced-motion: reduce) {
  .animate-blob-1, .animate-blob-2, .animate-blob-3 { animation: none; }
}

/* Dark mode transition */
* {
  @apply transition-colors duration-200;
}

/* Prose styles */
@layer base {
  .prose {
    /* Light mode */
    --tw-prose-body: theme('colors.gray.700');
    /* ... other prose vars ... */
    /* Dark mode */
    --tw-prose-invert-body: theme('colors.gray.300');
    /* ... other dark vars ... */
  }
}

/* Glass header/footer utilities */
@layer components {
  .glass-header {
    /* Transparent header without blur or ring to avoid overlay */
    @apply bg-transparent;
  }
  .glass-footer {
    @apply backdrop-blur-xl bg-white/60 dark:bg-gray-900/50 border-t border-white/10 dark:border-white/10;
  }
}
/* Remove legacy pseudo-element masks that cause the top overlay */
#site-header.header-visible::before,
body::before {
  content: none !important;
  display: none !important;
}
/* Ensure any leftover pseudo‑element masks are completely hidden */
#site-header::before,
body::before {
  display: none !important;
  content: none !important;
}
/* Ensure any residual pseudo‑element masks are hidden after all other definitions */
#site-header::before,
body::before {
  content: none !important;
  display: none !important;
}

/* Remove any background or shadow that could create a dark strip at the top */
#site-header {
  background: transparent !important;
  box-shadow: none !important;
}

/* Solid header style applied by HeaderScroll when page is scrolled */
#site-header.header-solid {
  /* Use CSS filters directly to avoid relying on Tailwind variants here */
  -webkit-backdrop-filter: saturate(140%) blur(8px);
  backdrop-filter: saturate(140%) blur(8px);
  background-color: rgba(255, 255, 255, 0.7) !important;
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.08) !important;
  border: 1px solid rgba(255, 255, 255, 0.35) !important;
}

.dark #site-header.header-solid {
  background-color: rgba(17, 24, 39, 0.6) !important; /* gray-900 */
  border-color: rgba(255, 255, 255, 0.1) !important;
}

/* Global override: Make page-level wrappers transparent so BaseLayout's global background (blobs/gradients) is dominant across all pages */
/* Applies broadly, but keeps cards/boxes readable since they have their own bg (e.g., bg-white/dark:bg-gray-800) */
main.min-h-screen {
  background-color: transparent !important;
  background-image: none !important;
}

/* Also cover common section-level full-screen wrappers, if used */
section.min-h-screen {
  background-color: transparent !important;
  background-image: none !important;
}
/* Extend override: also make inner full-height wrappers inside main transparent (covers pages like cookie-einstellungen using a DIV wrapper) */
main :is(div, section).min-h-screen {
  background-color: transparent !important;
  background-image: none !important;
}
/* Expose global blobs/gradients site‑wide:
   Neutralize ONLY top‑level page wrappers (direct children of #main-content)
   that set a page‑wide background, so the BaseLayout background dominates.
   Cards/boxes deeper in the tree keep their own backgrounds and remain readable. */
#main-content > :is(div, section, article):not(.allow-section-bg)[class*="bg-white"],
#main-content > :is(div, section, article):not(.allow-section-bg)[class*="bg-gray-50"],
#main-content > :is(div, section, article):not(.allow-section-bg)[class*="bg-gray-100"],
#main-content > :is(div, section, article):not(.allow-section-bg)[class*="bg-gray-900"],
#main-content > :is(div, section, article):not(.allow-section-bg)[class*="bg-gray-800"],
#main-content > :is(div, section, article):not(.allow-section-bg)[class*="bg-gradient-to-"],
#main-content > :is(div, section, article):not(.allow-section-bg)[class*="dark:bg-gray-900"],
#main-content > :is(div, section, article):not(.allow-section-bg)[class*="dark:bg-gray-800"],
#main-content > :is(div, section, article):not(.allow-section-bg)[class*="from-"],
#main-content > :is(div, section, article):not(.allow-section-bg)[class*="to-"] {
  background: transparent !important;
  background-image: none !important;
}

@media (max-width: 768px) {
  .enhance-button,
  .slider-handle {
    min-height: 44px;
  }
}

:focus-visible {
  outline: 2px solid var(--primary);
}

@media (prefers-reduced-motion: reduce) {
  * {
    transition: none;
  }
}