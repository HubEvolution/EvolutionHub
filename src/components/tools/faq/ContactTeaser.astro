---
import { getI18n } from '@/utils/i18n';
import { getLocale } from '@/lib/i18n';
import { contactInfo } from '@/config/contact';
import { getSocialLinks, SOCIAL_ORDER } from '@/config/social';

const locale = getLocale(Astro.url.pathname);
const t = getI18n(locale);
const contactPath = locale === 'en' ? '/en/kontakt' : '/kontakt';
const socialLinks = getSocialLinks();
const SOCIAL_LABELS: Record<string, string> = {
  github: 'GitHub',
  x: 'X',
  reddit: 'Reddit',
  tiktok: 'TikTok',
  instagram: 'Instagram',
  linkedin: 'LinkedIn',
  pinterest: 'Pinterest',
  facebook: 'Facebook',
};
const orderedSocials = SOCIAL_ORDER.filter((key) => socialLinks[key]);

---

<section class="py-16">
  <div class="container mx-auto px-4">
    <div class="max-w-4xl mx-auto rounded-2xl bg-white/90 dark:bg-gray-800/90 shadow-xl backdrop-blur-lg p-10">
      <div class="grid md:grid-cols-[2fr_1fr] gap-8 items-center">
        <div>
          <h2 class="text-2xl md:text-3xl font-bold text-gray-900 dark:text-white mb-4">
            {t('pages.faq.contact_teaser.heading')}
          </h2>
          <p class="text-gray-600 dark:text-gray-300 mb-6 leading-relaxed">
            {t('pages.faq.contact_teaser.description')}
          </p>

          <a
            href={contactPath}
            class="inline-flex items-center gap-2 px-5 py-3 rounded-full bg-gradient-to-r from-emerald-500 to-cyan-500 text-white font-medium shadow-lg shadow-emerald-500/30 hover:shadow-emerald-500/50 transition duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-emerald-500"
          >
            {t('pages.faq.contact_teaser.cta')}
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M17.25 8.25L21 12m0 0l-3.75 3.75M21 12H3" />
            </svg>
          </a>
        </div>

        <div class="space-y-4">
          <div class="rounded-xl border border-emerald-100 dark:border-emerald-900/40 bg-emerald-50/60 dark:bg-emerald-900/30 p-5">
            <p class="text-sm font-semibold text-emerald-700 dark:text-emerald-300 uppercase tracking-wide mb-3">
              {t('pages.kontakt.info.heading')}
            </p>
            {contactInfo.email && (
              <div class="flex items-center gap-2 text-sm text-gray-700 dark:text-gray-200">
                <svg class="w-4 h-4 text-emerald-600 dark:text-emerald-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                </svg>
                <a
                  href={`mailto:${contactInfo.email}`}
                  class="text-emerald-600 hover:text-emerald-500 dark:text-emerald-400 dark:hover:text-emerald-300"
                >
                  {contactInfo.email}
                </a>
              </div>
            )}
            <p class="text-xs text-gray-500 dark:text-gray-400 mt-3">
              {t('pages.kontakt.info.response_time_label')}
              <span class="font-semibold">{t('pages.kontakt.info.response_time')}</span>
              {t('pages.kontakt.info.response_time_unit')}
            </p>
          </div>

          <div class="rounded-xl bg-gray-50/70 dark:bg-gray-900/40 border border-gray-200/60 dark:border-gray-700 p-5">
            <p class="text-sm font-semibold text-gray-800 dark:text-gray-200 uppercase tracking-wide mb-3">
              {t('pages.kontakt.info.social_heading')}
            </p>
            {orderedSocials.length ? (
              <div class="flex flex-wrap gap-3">
                {orderedSocials.map((key) => (
                  <a
                    href={socialLinks[key]}
                    class="inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 text-sm text-gray-700 dark:text-gray-200 hover:border-emerald-400 hover:text-emerald-600 dark:hover:border-emerald-400 dark:hover:text-emerald-300 transition"
                    target="_blank"
                    rel="noopener noreferrer"
                  >
                    <span>{SOCIAL_LABELS[key] ?? key}</span>
                  </a>
                ))}
              </div>
            ) : (
              <p class="text-sm text-gray-500 dark:text-gray-400">
                {t('pages.faq.contact_teaser.social_empty')}
              </p>
            )}
          </div>

          {contactInfo.address ? (
            <div class="rounded-xl border border-gray-200/60 dark:border-gray-700 bg-gray-50/70 dark:bg-gray-900/30 p-5">
              <p class="text-sm font-semibold text-gray-800 dark:text-gray-200 uppercase tracking-wide mb-3">
                {t('pages.kontakt.info.address_label')}
              </p>
              <address class="not-italic text-sm text-gray-600 dark:text-gray-300">
                {contactInfo.address.lines.map((line, idx) => (
                  <Fragment>
                    {idx > 0 ? <br /> : null}
                    {line}
                  </Fragment>
                ))}
              </address>
            </div>
          ) : null}
        </div>
      </div>
    </div>
  </div>
</section>
