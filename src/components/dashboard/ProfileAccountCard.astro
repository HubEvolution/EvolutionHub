---
import Card from '@/components/ui/Card';
import UserProfile from '@/components/dashboard/UserProfile.astro';
import AccountSettingsSection from '@/components/dashboard/AccountSettingsSection.astro';

interface DangerStrings {
  title: string;
  description: string;
  button: string;
  close: string;
  confirm: { title: string; description: string; confirmCta: string; cancelCta: string };
  subscription: {
    title: string;
    description: string;
    periodEnd: string;
    indefinite: string;
    goToBilling: string;
    deleteAnyway: string;
    back: string;
  };
  messages: { processing: string; success: string; error: string };
}

interface ProfileCopy {
  title: string;
  description: string;
  nameLabel: string;
  usernameLabel: string;
  emailLabel: string;
  changeEmailHint: string;
  changeEmailCta: string;
  saveCta: string;
  hybridTitle: string;
  hybridDescription: string;
  supportTitle: string;
  supportDescription: string;
  supportCta: string;
  supportHref: string;
}

interface Props {
  user: {
    id: string;
    email: string;
    name: string;
    username: string;
    image?: string;
    plan?: 'free' | 'pro' | 'premium' | 'enterprise';
  };
  planLabels: Record<'free' | 'pro' | 'premium' | 'enterprise', string>;
  billingUrl: string;
  redirectUrl: string;
  dangerStrings: DangerStrings;
  profileCopy: ProfileCopy;
  i18nSettings: Record<string, unknown>;
}

const { user, planLabels, billingUrl, redirectUrl, dangerStrings, profileCopy, i18nSettings } =
  Astro.props as Props;
---

<Card as="section" className="group p-5">
  <div class="space-y-5">
    <UserProfile user={user} />

    <div id="account-settings">
      <AccountSettingsSection
        user={user}
        planLabels={planLabels}
        billingUrl={billingUrl}
        redirectUrl={redirectUrl}
        dangerStrings={dangerStrings}
        profileCopy={profileCopy}
        i18nSettings={i18nSettings}
      />
    </div>
  </div>
</Card>
