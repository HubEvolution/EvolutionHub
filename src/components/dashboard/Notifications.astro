---
import Card from '../ui/Card.astro';
import type { Notification } from '../../types/dashboard';

interface Props {
  notifications: Notification[];
  title?: string;
}

const { 
  notifications, 
  title = 'Notifications' 
} = Astro.props;

const loading = !notifications;

const getIconForType = (type: string) => {
  switch (type) {
    case 'comment': return 'ðŸ’¬';
    case 'mention': return '@';
    case 'task_completed': return 'âœ…';
    default: return 'ðŸ””';
  }
};
---

<Card title={title}>
  <div class="space-y-4">
    {loading ? (
      <div class="flex justify-center items-center h-48">
        <div class="lottie-loader w-24 h-24"></div>
      </div>
    ) : notifications.length === 0 ? (
      <div class="text-center py-8 text-gray-500 dark:text-gray-400">
        <p>No new notifications</p>
      </div>
    ) : (
      notifications.map((notification) => (
        <div class="flex items-start space-x-3">
          <div class="text-xl">{getIconForType(notification.type)}</div>
          <div class="flex-1">
            <p class="text-sm text-gray-800 dark:text-gray-200">{notification.message}</p>
            <p class="text-xs text-gray-500 dark:text-gray-400">{new Date(notification.timestamp).toLocaleString()}</p>
          </div>
        </div>
      ))
    )}
  </div>
</Card>