---
import BaseLayout from '@/layouts/BaseLayout.astro';
import { getI18n, getI18nArray } from '@/utils/i18n';
import TypewriterComponent from '@/components/scripts/TypewriterComponent.astro';

import { getLocale } from '@/lib/i18n';
import { localizePath } from '@/lib/locale-path';
const locale = getLocale(Astro.url.pathname);
const t = getI18n(locale);
const tArr = getI18nArray(locale);
const heroTypewriterTexts = tArr('pages.home.hero.typewriter');
const heroTypewriterItems = heroTypewriterTexts.map((text) => ({ text }));
---

<BaseLayout title={t('pages.home.title') ?? 'Evolution Hub'}>
  <!-- Hero Section -->
  <section class="relative py-20 md:py-32 bg-gradient-to-br from-primary/5 to-purple-500/5 dark:from-gray-800 dark:to-gray-900 overflow-hidden">
    <div class="container mx-auto px-4 relative z-10">
      <div class="max-w-5xl mx-auto text-center">
        <h1
          class="text-5xl md:text-6xl lg:text-7xl font-extrabold mb-6 text-gray-900 dark:text-white leading-tight"
          data-aos="fade-up"
          data-aos-duration="700"
        >
          {t('pages.home.hero.title_part1')} <span class="text-transparent bg-clip-text bg-gradient-to-br from-emerald-400 to-cyan-500">{t('pages.home.hero.title_part2')}</span>
        </h1>
        <p
          class="text-xl md:text-2xl text-gray-600 dark:text-gray-300 mb-10 max-w-3xl mx-auto"
          data-aos="fade-up"
          data-aos-delay="100"
          data-aos-duration="650"
        >
          {t('pages.home.hero.subtitle')}
        </p>
        <p
          class="text-2xl md:text-3xl font-semibold mb-10 max-w-3xl mx-auto"
          data-aos="fade-up"
          data-aos-delay="150"
          data-aos-duration="650"
        >
          <span id="hero-typewriter" class="text-transparent bg-clip-text bg-gradient-to-r from-emerald-500 to-cyan-500"></span>
        </p>
        <TypewriterComponent elementId="hero-typewriter" texts={heroTypewriterItems} defaultDelay={120} />
        <div class="flex justify-center space-x-4" data-aos="fade-up" data-aos-delay="200" data-aos-duration="650">
          <a href={localizePath(locale, '/register')} class="inline-flex items-center px-8 py-4 rounded-xl font-bold text-white bg-gradient-to-r from-emerald-500 to-cyan-500 hover:from-emerald-600 hover:to-cyan-600 shadow-lg hover:shadow-xl transition duration-300">
            {t('pages.home.hero.get_started_button')}
          </a>
          <a href={localizePath(locale, '/docs')} class="inline-flex items-center px-8 py-4 rounded-xl font-bold text-gray-800 dark:text-white bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-600 shadow-sm transition duration-300">
            {t('pages.home.hero.documentation_link')}
          </a>
        </div>
      </div>
    </div>
    <!-- Background elements -->
    <div class="absolute inset-0 opacity-30 dark:opacity-10">
      <svg class="absolute top-0 left-0 w-1/2 h-full opacity-50" fill="url(#gradient-purple)" viewBox="0 0 1440 600">
        <defs>
          <linearGradient id="gradient-purple" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" style="stop-color:#7E22CD;stop-opacity:1" />
            <stop offset="100%" style="stop-color:#9333EA;stop-opacity:0.8" />
          </linearGradient>
        </defs>
        <path d="M0,300 C700,0,750,600,1440,300"/>
      </svg>
      <svg class="absolute bottom-0 right-0 w-1/2 h-full opacity-50" fill="url(#gradient-blue)" viewBox="0 0 1440 600">
        <defs>
          <linearGradient id="gradient-blue" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" style="stop-color:#2563EB;stop-opacity:1" />
            <stop offset="100%" style="stop-color:#3B82F6;stop-opacity:0.8" />
          </linearGradient>
        </defs>
        <path d="M1440,300 C740,600,690,0,0,300"/>
      </svg>
      <div class="absolute bottom-0 left-1/2 -translate-x-1/2 w-full h-64 bg-gradient-to-t from-white dark:from-gray-900 to-transparent"></div>
    </div>
  </section>

  <!-- Features Section -->
  <section class="py-16 md:py-24 bg-white dark:bg-gray-900">
    <div class="container mx-auto px-4">
      <div class="text-center mb-16">
        <h2 class="text-4xl font-bold text-gray-900 dark:text-white mb-4" data-aos="fade-up" data-aos-duration="650">
          {t('pages.home.features.heading')}
        </h2>
        <p class="text-lg text-gray-600 dark:text-gray-300 max-w-3xl mx-auto" data-aos="fade-up" data-aos-delay="100" data-aos-duration="650">
          {t('pages.home.features.subtitle')}
        </p>
      </div>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-12">
        <div class="feature-card text-center p-6 bg-gray-50 dark:bg-gray-800 rounded-xl shadow-sm hover:shadow-md transition duration-300" data-aos="fade-up" data-aos-duration="600">
          <div class="text-5xl mb-4 inline-block">{t('pages.home.features.feature1.icon')}</div>
          <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-3">{t('pages.home.features.feature1.title')}</h3>
          <p class="text-gray-600 dark:text-gray-300">{t('pages.home.features.feature1.description')}</p>
        </div>
        <div class="feature-card text-center p-6 bg-gray-50 dark:bg-gray-800 rounded-xl shadow-sm hover:shadow-md transition duration-300" data-aos="fade-up" data-aos-delay="100" data-aos-duration="600">
          <div class="text-5xl mb-4 inline-block">{t('pages.home.features.feature2.icon')}</div>
          <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-3">{t('pages.home.features.feature2.title')}</h3>
          <p class="text-gray-600 dark:text-gray-300">{t('pages.home.features.feature2.description')}</p>
        </div>
        <div class="feature-card text-center p-6 bg-gray-50 dark:bg-gray-800 rounded-xl shadow-sm hover:shadow-md transition duration-300" data-aos="fade-up" data-aos-delay="200" data-aos-duration="600">
          <div class="text-5xl mb-4 inline-block">{t('pages.home.features.feature3.icon')}</div>
          <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-3">{t('pages.home.features.feature3.title')}</h3>
          <p class="text-gray-600 dark:text-gray-300">{t('pages.home.features.feature3.description')}</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Testimonials Section -->
  <section class="py-16 md:py-24 bg-gradient-to-br from-emerald-50 to-cyan-50 dark:from-gray-800 dark:to-gray-900">
    <div class="container mx-auto px-4">
      <div class="text-center mb-16">
        <h2 class="text-4xl font-bold text-gray-900 dark:text-white mb-4" data-aos="fade-up" data-aos-duration="650">
          {t('pages.home.testimonials.heading')}
        </h2>
        <p class="text-lg text-gray-600 dark:text-gray-300 max-w-2xl mx-auto" data-aos="fade-up" data-aos-delay="100" data-aos-duration="650">
          {t('pages.home.testimonials.subtitle')}
        </p>
      </div>
      <!-- Testimonial Slider/Carousel would go here -->
      <div class="max-w-4xl mx-auto flex flex-col md:flex-row items-center gap-8">
        <div class="text-center md:text-left" data-aos="fade-up" data-aos-duration="600">
          <p class="text-lg italic text-gray-700 dark:text-gray-200 mb-4">
            "{t('pages.home.testimonials.testimonial1.quote')}"
          </p>
          <p class="font-bold text-gray-900 dark:text-white">- {t('pages.home.testimonials.testimonial1.author')}</p>
          <p class="text-sm text-gray-500 dark:text-gray-400">{t('pages.home.testimonials.testimonial1.role')}</p>
        </div>
        <div class="md:w-3/5 flex justify-center md:justify-end" data-aos="fade-up" data-aos-delay="150" data-aos-duration="600">
          <img src="/images/generic-avatar.svg" alt="User Avatar" class="w-32 h-32 rounded-full border-4 border-primary shadow-lg">
        </div>
      </div>
    </div>
  </section>

  <!-- Call to Action Section -->
  {/* Using the CTA component from locales */}
  <section class="py-16 md:py-24">
    <div class="container mx-auto px-4 text-center">
      <h2 class="text-4xl font-bold text-gray-900 dark:text-white mb-6" data-aos="fade-up" data-aos-duration="650">
        {t('cta.headline')}
      </h2>
      <p class="text-lg text-gray-600 dark:text-gray-300 mb-10 max-w-3xl mx-auto" data-aos="fade-up" data-aos-delay="100" data-aos-duration="650">
        {t('cta.subtitle')}
      </p>
      <a href={localizePath(locale, '/register')} class="inline-flex items-center px-10 py-5 rounded-xl font-bold text-white bg-gradient-to-r from-primary to-secondary hover:from-primary-dark hover:to-secondary-dark shadow-lg hover:shadow-xl transition duration-300 text-lg" data-aos="fade-up" data-aos-delay="200" data-aos-duration="650">
        {t('cta.button_text')}
      </a>
    </div>
  </section>
</BaseLayout>
